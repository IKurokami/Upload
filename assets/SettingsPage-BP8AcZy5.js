import{c as k,r as t,j as e,B as r}from"./index-ChvRW3WA.js";import{a as P,s as A}from"./db-CRqWljtf.js";import{I as j}from"./input-DgE12Drr.js";import{A as K,h as S,a as C,b as D,c as E,e as R,f as T,g as F}from"./alert-dialog-BQ4Gr1UM.js";import{E as B}from"./eye-BBhwxKiq.js";import{C as _}from"./copy-BxTuTyqG.js";import{T as G}from"./trash-2-SkCQmKqj.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],M=k("EyeOff",L),x="apiKey",O=({apiKey:s,setApiKey:i})=>{const[l,y]=t.useState(""),[c,v]=t.useState(!1),[d,u]=t.useState(!1),[n,h]=t.useState(!1),[p,f]=t.useState(!1),[b,m]=t.useState(!1),o=a=>{window&&"Notification"in window&&Notification.permission==="granted"?new Notification(a):alert(a)};t.useEffect(()=>{(async()=>{try{const g=await P(x);i(g||null)}catch{}})()},[i]);const w=async()=>{if(!l.trim()){o("Please enter a valid API key.");return}u(!0);try{await A(x,l.trim()),i(l.trim()),y(""),o("API key saved successfully.")}catch{o("Failed to save API key.")}finally{u(!1)}},I=async()=>{h(!0);try{await A(x,""),i(null),o("API key removed.")}catch{o("Failed to remove API key.")}finally{h(!1),m(!1)}},N=async()=>{if(s)try{await navigator.clipboard.writeText(s),f(!0),setTimeout(()=>f(!1),1200)}catch{o("Failed to copy API key.")}};return e.jsxs("div",{className:"w-full max-w-xl mx-auto p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"API Key Settings"}),e.jsx("div",{className:"mt-2 mb-4 text-sm text-gray-600",children:e.jsxs("span",{children:["Enter your ",e.jsx("b",{children:"Gemini API Key"})," to enable advanced features."," ",e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Get your API key"}),"."]})}),s?e.jsxs("div",{className:"flex flex-col gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{type:c?"text":"password",value:s,readOnly:!0,className:"flex-1","aria-label":"API Key"}),e.jsx(r,{type:"button",variant:"outline",size:"icon",onClick:()=>v(a=>!a),"aria-label":c?"Hide API Key":"Show API Key",tabIndex:0,children:c?e.jsx(M,{className:"w-5 h-5"}):e.jsx(B,{className:"w-5 h-5"})}),e.jsx(r,{type:"button",variant:"outline",size:"icon",onClick:N,"aria-label":"Copy API Key",tabIndex:0,disabled:p,children:p?e.jsx("span",{className:"text-green-600",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}):e.jsx(_,{className:"w-5 h-5"})})]}),e.jsxs(K,{open:b,onOpenChange:m,children:[e.jsx(S,{asChild:!0,children:e.jsxs(r,{variant:"destructive",onClick:()=>m(!0),disabled:n,className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Remove API Key"]})}),e.jsxs(C,{children:[e.jsx(D,{children:e.jsx(E,{children:"Remove API Key?"})}),e.jsx("div",{className:"text-sm text-gray-600",children:"Are you sure you want to remove your API key? This action cannot be undone."}),e.jsxs(R,{children:[e.jsx(T,{disabled:n,children:"Cancel"}),e.jsx(F,{onClick:I,disabled:n,className:"bg-red-600 hover:bg-red-700",children:n?"Removing...":"Remove"})]})]})]})]}):e.jsxs("form",{className:"flex flex-col gap-4 mt-2",onSubmit:a=>{a.preventDefault(),w()},children:[e.jsx(j,{type:"text",value:l,onChange:a=>y(a.target.value),placeholder:"Enter your Gemini API Key","aria-label":"Enter your Gemini API Key",autoFocus:!0,required:!0,disabled:d}),e.jsx(r,{type:"submit",disabled:d,children:d?"Saving...":"Save API Key"})]})]})},U=()=>{const[s,i]=t.useState(null);return e.jsxs("div",{className:"max-w-xl mx-auto py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Settings"}),e.jsx(O,{apiKey:s,setApiKey:i})]})};export{U as default};
