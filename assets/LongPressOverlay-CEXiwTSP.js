import{r as u,a3 as R,j as p}from"./index-ur9zFp39.js";function S({onLongPress:e,onClick:a,delay:l=500,disabled:n=!1}){const r=u.useRef(null),m=u.useRef(null),h=u.useCallback(t=>{n||(m.current=t.target,r.current=window.setTimeout(()=>{e(t),r.current=null},l))},[e,l,n]),c=u.useCallback((t,g=!0)=>{r.current&&(clearTimeout(r.current),r.current=null,a&&g&&!n&&a(t))},[a,n]);return{onMouseDown:h,onTouchStart:h,onMouseUp:t=>c(t),onMouseLeave:t=>c(t,!1),onTouchEnd:t=>c(t),onTouchCancel:t=>c(t,!1)}}const j=document.getElementById("long-press-overlay-root")||document.body,T=({rect:e,actions:a,onClose:l,highlightRadius:n=8,renderHighlighted:r})=>{u.useEffect(()=>{const s=d=>{d.key==="Escape"&&l()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[l]);const m=u.useRef(null),[h,c]=u.useState({top:0,left:0});if(u.useLayoutEffect(()=>{if(!e||!m.current)return;const d=m.current.getBoundingClientRect(),v=d.width,x=d.height,o=8,w=window.innerWidth,y=window.innerHeight;let i=e.bottom+o,f=e.left;if(!(i+x<=y)){const b=e.top-o-x;if(b>=0)i=b-o;else{const M=e.left-o-v;if(M>=0)i=e.top,f=M;else{const k=e.right+o;k+v<=w?(i=e.top,f=k):(i=Math.max(o,Math.min(y-x-o,e.top)),f=Math.max(o,Math.min(w-v-o,e.left)))}}}f=Math.max(o,Math.min(w-v-o,f)),i=Math.max(o,Math.min(y-x-o,i)),c({top:i,left:f})},[e,a.length]),!e)return null;const t={position:"fixed",top:h.top,left:h.left,zIndex:10002,minWidth:160,background:"var(--background, #fff)",borderRadius:8,boxShadow:"0 4px 24px rgba(0,0,0,0.12)",padding:8},g={position:"fixed",top:e.top-n,left:e.left-n,width:e.width+n*2,height:e.height+n*2,zIndex:10003,pointerEvents:"none",transition:"all 0.2s"},E={position:"fixed",inset:0,zIndex:10001,backdropFilter:"blur(6px)",background:"rgba(0,0,0,0.08)",transition:"backdrop-filter 0.2s"};return R.createPortal(p.jsxs(p.Fragment,{children:[p.jsx("div",{style:E,onClick:l,"aria-label":"Close overlay"}),r&&p.jsx("div",{style:g,children:r()}),p.jsx("div",{ref:m,style:t,className:"bg-popover text-popover-foreground z-50 min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",children:a.map((s,d)=>p.jsxs("button",{onClick:()=>{s.onClick(),l()},className:`relative flex cursor-pointer items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none select-none w-full transition-colors
              ${s.destructive?"text-destructive-foreground hover:bg-destructive/10 dark:hover:bg-destructive/40 hover:text-destructive-foreground":"hover:bg-accent hover:text-accent-foreground"}
            `,tabIndex:0,type:"button",children:[s.icon,s.label]},d))})]}),j)};export{T as L,S as u};
