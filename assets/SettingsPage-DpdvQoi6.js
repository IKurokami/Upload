import{c as P,r as t,j as e,B as n,a2 as K,t as s,a1 as v}from"./index-CZPfekFY.js";import{I as A}from"./input-DZQc0_nn.js";import{A as C,h as N,a as S,b as E,c as D,e as R,f as T,g as F}from"./alert-dialog-DsH62bkl.js";import{E as O}from"./eye-CoDhb5Rz.js";import{C as B}from"./copy-DtVGApnL.js";import{T as G}from"./trash-2-B8OUn3Cp.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],L=P("EyeOff",_),y="apiKey",M=({apiKey:l,setApiKey:i})=>{const[r,u]=t.useState(""),[c,j]=t.useState(!1),[d,h]=t.useState(!1),[o,x]=t.useState(!1),[p,f]=t.useState(!1),[b,m]=t.useState(!1);t.useEffect(()=>{(async()=>{try{const g=await K(y);i(g||null)}catch{}})()},[i]);const w=async()=>{if(!r.trim()){s.error("Please enter a valid API key.");return}h(!0);try{await v(y,r.trim()),i(r.trim()),u(""),s.success("API key saved successfully."),window.dispatchEvent(new Event("apiKeyChanged"))}catch{s.error("Failed to save API key.")}finally{h(!1)}},I=async()=>{x(!0);try{await v(y,""),i(null),s.success("API key removed."),window.dispatchEvent(new Event("apiKeyChanged"))}catch{s.error("Failed to remove API key.")}finally{x(!1),m(!1)}},k=async()=>{if(l)try{await navigator.clipboard.writeText(l),f(!0),s.success("API key copied to clipboard."),setTimeout(()=>f(!1),1200)}catch{s.error("Failed to copy API key.")}};return e.jsxs("div",{className:"w-full max-w-xl mx-auto p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Gemini API Key"}),e.jsx("div",{className:"mt-2 mb-4 text-sm text-gray-600",children:e.jsxs("span",{children:["Enter your ",e.jsx("b",{children:"Gemini API Key"})," to enable advanced features like OCR and Translation."," ",e.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Get your API key"}),"."]})}),l?e.jsxs("div",{className:"flex flex-col gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{type:c?"text":"password",value:l,readOnly:!0,className:"flex-1","aria-label":"API Key"}),e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:()=>j(a=>!a),"aria-label":c?"Hide API Key":"Show API Key",tabIndex:0,children:c?e.jsx(L,{className:"w-5 h-5"}):e.jsx(O,{className:"w-5 h-5"})}),e.jsx(n,{type:"button",variant:"outline",size:"icon",onClick:k,"aria-label":"Copy API Key",tabIndex:0,disabled:p,children:p?e.jsx("span",{className:"text-green-600",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}):e.jsx(B,{className:"w-5 h-5"})})]}),e.jsxs(C,{open:b,onOpenChange:m,children:[e.jsx(N,{asChild:!0,children:e.jsxs(n,{variant:"destructive",onClick:()=>m(!0),disabled:o,className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Remove API Key"]})}),e.jsxs(S,{children:[e.jsx(E,{children:e.jsx(D,{children:"Remove API Key?"})}),e.jsx("div",{className:"text-sm text-gray-600",children:"Are you sure you want to remove your API key? This will disable OCR and Translation features."}),e.jsxs(R,{children:[e.jsx(T,{disabled:o,children:"Cancel"}),e.jsx(F,{onClick:I,disabled:o,className:"bg-red-600 hover:bg-red-700",children:o?"Removing...":"Remove"})]})]})]})]}):e.jsxs("form",{className:"flex flex-col gap-4 mt-2",onSubmit:a=>{a.preventDefault(),w()},children:[e.jsx(A,{type:"text",value:r,onChange:a=>u(a.target.value),placeholder:"Enter your Gemini API Key","aria-label":"Enter your Gemini API Key",autoFocus:!0,required:!0,disabled:d}),e.jsx(n,{type:"submit",disabled:d,children:d?"Saving...":"Save API Key"})]})]})},Q=()=>{const[l,i]=t.useState(null);return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Settings"}),e.jsx(M,{apiKey:l,setApiKey:i})]})};export{Q as default};
