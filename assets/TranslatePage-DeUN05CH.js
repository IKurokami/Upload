import{c as Se,ai as ts,r as I,aj as ns,ak as as,al as ss,am as rs,an as ls,ao as zn,j as e,a as je,G as En,ap as is,B as q,a3 as os,l as cs,aq as ta,R as S,v as ae,F as na,ar as ds,a5 as Ft,a4 as Pe}from"./index-DSwL6ds4.js";import{C as Ve,a as ot,b as ct,c as aa,e as Mt}from"./card-i51gsB7Y.js";import{S as Rn,b as An,c as Mn,d as Pn,e as Dn,a as vn,G as us,C as sa,h as ms,f as fs,i as ps}from"./select-C69v5AxV.js";import{T as jt,a as In}from"./index-COFa6xky.js";import{T as Te,a as ve,b as be,c as ye}from"./tooltip-B7ch5XhR.js";import{B as tt}from"./badge-bcl8ATsn.js";import{A as hs}from"./arrow-right-CT6hWjSX.js";import{I as Oe}from"./input-UQTITExA.js";import{T as ra,a as la,b as gt,c as wt}from"./index-zg6PVuEs.js";import{S as At,X as Zt}from"./scroll-area-Dsxoinxg.js";import{T as xs,R as gs,C as ws,P as vs,O as bs}from"./index-Di1raJ0V.js";import{T as rt}from"./trash-2-7wysW8Vd.js";import{C as ys}from"./copy-_Bq8v4Fy.js";import{F as ia}from"./file-down-C37wznQL.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Ns=Se("Archive",js);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],bn=Se("ArrowUp",Cs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],Ss=Se("ChevronsDown",Ts);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],zs=Se("ChevronsUp",ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rs=Se("CircleCheckBig",Es);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Kt=Se("CircleCheck",As);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Yt=Se("Clipboard",Ms);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ds=Se("Database",Ps);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],$s=Se("Eraser",Is);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],oa=Se("FilePlus",Ls);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Hs=Se("FileText",_s);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],fn=Se("Folder",Bs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Us=Se("History",Os);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ca=Se("Lightbulb",Fs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ws=Se("Pencil",Vs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yn=Se("Plus",Gs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],pn=Se("RotateCcw",qs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],Ys=Se("Text",Ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],$n=Se("Users",Xs);function hn(t){const n=ts(()=>as(t)),{isStatic:a}=I.useContext(ns);if(a){const[,s]=I.useState(t);I.useEffect(()=>n.on("change",s),[])}return n}function Js(t,n){const a=hn(n()),s=()=>a.set(n());return s(),ss(()=>{const l=()=>rs.preRender(s,!1,!0),r=t.map(i=>i.on("change",l));return()=>{r.forEach(i=>i()),ls(s)}}),a}function Zs(t,...n){const a=t.length;function s(){let l="";for(let r=0;r<a;r++){l+=t[r];const i=n[r];i&&(l+=zn(i)?i.get():i)}return l}return Js(n.filter(zn),s)}const Qs=({text:t,className:n})=>{let a=hn(0),s=hn(0);const[l,r]=I.useState(""),[i,o]=I.useState(null);I.useEffect(()=>{if(i){const{width:p,height:w}=i.getBoundingClientRect(),f=p*w,d=Math.floor(f/36),C=_n(d);r(C)}},[i]);function c({currentTarget:p,clientX:w,clientY:f}){let{left:d,top:C}=p.getBoundingClientRect();a.set(w-d),s.set(f-C);const{width:b,height:j}=p.getBoundingClientRect(),N=b*j,m=Math.floor(N/36),T=_n(m);r(T)}return e.jsx("div",{className:je("p-0.5 bg-transparent flex items-center justify-center w-full h-full relative",n),children:e.jsxs("div",{ref:o,onMouseMove:c,className:"group/card rounded w-full relative overflow-hidden bg-transparent flex items-center justify-center h-full",children:[e.jsx(er,{mouseX:a,mouseY:s,randomString:l}),e.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:e.jsxs("div",{className:"relative h-full w-full max-w-[80%] max-h-[80%] rounded-full flex items-center justify-center text-white font-bold",children:[e.jsx("div",{className:"absolute w-full h-full bg-white/[0.8] dark:bg-black/[0.8] blur-sm rounded-full"}),e.jsx("span",{className:"dark:text-white text-black z-20 text-xl lg:text-3xl",children:t})]})})]})})};function er({mouseX:t,mouseY:n,randomString:a}){let s=Zs`radial-gradient(500px at ${t}px ${n}px, white, transparent)`,l={maskImage:s,WebkitMaskImage:s};return e.jsxs("div",{className:"pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0"}),e.jsx(En.div,{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-blue-700 opacity-0 group-hover/card:opacity-100 backdrop-blur-xl transition duration-500",style:l}),e.jsx(En.div,{className:"absolute inset-0 opacity-0 mix-blend-overlay  group-hover/card:opacity-100",style:l,children:e.jsx("p",{className:"absolute inset-x-0 text-4xl h-full break-words whitespace-pre-wrap text-white font-mono font-bold transition duration-500",children:a})})]})}const Ln="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",_n=t=>{let n="";for(let a=0;a<t;a++)n+=Ln.charAt(Math.floor(Math.random()*Ln.length));return n},Hn=32e3,tr=({inputText:t,setInputText:n,translatedText:a,isTranslating:s,error:l,isCopied:r,onTranslate:i,onCopy:o,selectedModel:c,onModelChange:p,models:w,selectedCollectionId:f,collections:d,onCollectionChange:C,isCollectionManagementVisible:b,onToggleCollectionManagement:j,arcrylicBg:N,modelDescriptions:m})=>{var L;const[T,P]=I.useState(!0),k=t.length;return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 md:gap-8 min-h-[650px] w-full",children:[e.jsxs(Ve,{className:je("flex-1 flex flex-col shadow-lg rounded-xl border-0 mb-6 lg:mb-0",N&&"arcrylic-blur"),children:[e.jsx(ot,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ct,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"ðŸ“ Translate Text"}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(tt,{variant:"outline",className:"px-2 sm:px-3 py-1 h-auto rounded-full text-sm sm:text-base bg-muted/40",children:[e.jsx(is,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"truncate max-w-[100px] sm:max-w-none",children:c})]})}),e.jsxs(ye,{side:"left",children:[e.jsx("p",{className:"text-xs",children:"Current translation model"}),m&&m[c]&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:m[c]})]})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(jt,{id:"inputText",placeholder:"Type or paste text to translate...",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] break-words break-all whitespace-pre-wrap",value:t,maxLength:Hn,onChange:R=>n(R.target.value),"aria-label":"Input text to translate"}),e.jsxs("span",{className:"absolute bottom-2 right-4 text-xs text-muted-foreground/70",children:[k,"/",Hn]}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"icon",onClick:()=>n(""),disabled:!t.trim()||s,className:"absolute top-2 right-2 rounded-full","aria-label":"Clear input",children:e.jsx(pn,{className:"h-5 w-5"})})}),e.jsx(ye,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Clear input"})})]})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center w-full sm:w-auto",children:[e.jsxs(Rn,{value:c,onValueChange:p,children:[e.jsx(An,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Mn,{placeholder:"Model",children:e.jsx("span",{className:"truncate",children:c})})}),e.jsx(Pn,{className:"z-[100]",children:w.map(R=>e.jsx(Dn,{value:R,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"truncate",children:R}),m&&m[R]&&e.jsx("span",{className:"text-xs text-muted-foreground",children:m[R]})]})},R))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Rn,{value:f,onValueChange:C,children:[e.jsx(An,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Mn,{placeholder:"Collection",children:e.jsx("span",{className:"truncate",children:((L=d.find(R=>R.id===f))==null?void 0:L.name)||"Collection"})})}),e.jsx(Pn,{className:"z-[100]",children:d.map(R=>e.jsx(Dn,{value:R.id,children:e.jsx("span",{className:"truncate",children:R.name})},R.id))})]}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:b?"default":"outline",size:"icon",onClick:()=>j(f),className:"h-8 w-8 rounded-full ml-1","aria-label":"Manage collections",children:e.jsx(os,{className:"h-3 w-3"})})}),e.jsx(ye,{side:"top",children:e.jsx("p",{className:"text-xs",children:"Manage collections"})})]})})]})]}),e.jsx(q,{onClick:i,disabled:s||!t.trim(),className:"h-8 px-3 rounded-full shadow-sm text-sm w-full sm:w-auto",size:"default","aria-label":"Translate",children:s?e.jsxs(e.Fragment,{children:[e.jsx(cs,{className:"mr-2 h-3.5 w-3.5 animate-spin"})," Translating..."]}):e.jsxs(e.Fragment,{children:["Translate ",e.jsx(hs,{className:"ml-2 h-3.5 w-3.5"})]})})]})]})]}),e.jsxs(Ve,{className:je("flex-1 flex flex-col shadow-lg rounded-3xl border-0 relative",N&&"arcrylic-blur"),children:[e.jsx(ot,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ct,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"ðŸŒ Translation"}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"icon",onClick:o,disabled:!a,className:"rounded-full","aria-label":"Copy translation",children:r?e.jsx(Kt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}):e.jsx(Yt,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsx(ye,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Copy translation"})})]})})]})}),l&&!l.includes("import")&&T&&e.jsx("div",{className:"mx-3 sm:mx-6 mt-3 sm:mt-4 mb-1 sm:mb-2",children:e.jsxs("div",{className:"flex items-center bg-destructive/10 border border-destructive/30 text-destructive rounded-lg px-3 sm:px-4 py-2 relative",children:[e.jsx(vn,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2 flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-xs sm:text-sm",children:l}),e.jsx(q,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 ml-1 sm:ml-2 text-destructive/70 hover:text-destructive p-0",onClick:()=>P(!1),"aria-label":"Dismiss error",children:"Ã—"})]})}),e.jsx("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(jt,{id:"translatedText",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] break-words break-all whitespace-pre-wrap",value:s?"":a,readOnly:!0,placeholder:"Translation will appear here...","aria-label":"Translated text output"}),s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-xl z-10 min-h-[200px] sm:min-h-[300px] max-h-[calc(100vh-200px)]",children:e.jsx(Qs,{text:"Translating...",className:"w-full h-full"})}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"default",size:"icon",onClick:o,disabled:!a,className:"absolute bottom-3 right-3 rounded-full shadow-lg h-9 w-9 sm:h-10 sm:w-10","aria-label":"Copy translation",children:r?e.jsx(Kt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"}):e.jsx(Yt,{className:"h-5 w-5 sm:h-6 sm:w-6"})})}),e.jsx(ye,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Copy translation"})})]})})]})})]})]})},{createElement:Nt,createContext:nr,forwardRef:da,useCallback:$e,useContext:ua,useEffect:lt,useImperativeHandle:ma,useLayoutEffect:ar,useMemo:sr,useRef:Le,useState:bt}=ta,Bn=ta[`useId${Math.random()}`.slice(0,5)],rr=ar,Qt=nr(null);Qt.displayName="PanelGroupContext";const it=rr,lr=typeof Bn=="function"?Bn:()=>null;let ir=0;function jn(t=null){const n=lr(),a=Le(t||n||null);return a.current===null&&(a.current=""+ir++),t??a.current}function fa({children:t,className:n="",collapsedSize:a,collapsible:s,defaultSize:l,forwardedRef:r,id:i,maxSize:o,minSize:c,onCollapse:p,onExpand:w,onResize:f,order:d,style:C,tagName:b="div",...j}){const N=ua(Qt);if(N===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:m,expandPanel:T,getPanelSize:P,getPanelStyle:k,groupId:L,isPanelCollapsed:R,reevaluatePanelConstraints:h,registerPanel:_,resizePanel:H,unregisterPanel:se}=N,z=jn(i),G=Le({callbacks:{onCollapse:p,onExpand:w,onResize:f},constraints:{collapsedSize:a,collapsible:s,defaultSize:l,maxSize:o,minSize:c},id:z,idIsFromProps:i!==void 0,order:d});Le({didLogMissingDefaultSizeWarning:!1}),it(()=>{const{callbacks:J,constraints:Y}=G.current,Q={...Y};G.current.id=z,G.current.idIsFromProps=i!==void 0,G.current.order=d,J.onCollapse=p,J.onExpand=w,J.onResize=f,Y.collapsedSize=a,Y.collapsible=s,Y.defaultSize=l,Y.maxSize=o,Y.minSize=c,(Q.collapsedSize!==Y.collapsedSize||Q.collapsible!==Y.collapsible||Q.maxSize!==Y.maxSize||Q.minSize!==Y.minSize)&&h(G.current,Q)}),it(()=>{const J=G.current;return _(J),()=>{se(J)}},[d,z,_,se]),ma(r,()=>({collapse:()=>{m(G.current)},expand:J=>{T(G.current,J)},getId(){return z},getSize(){return P(G.current)},isCollapsed(){return R(G.current)},isExpanded(){return!R(G.current)},resize:J=>{H(G.current,J)}}),[m,T,P,R,z,H]);const A=k(G.current,l);return Nt(b,{...j,children:t,className:n,id:i,style:{...A,...C},"data-panel":"","data-panel-collapsible":s||void 0,"data-panel-group-id":L,"data-panel-id":z,"data-panel-size":parseFloat(""+A.flexGrow).toFixed(1)})}const pa=da((t,n)=>Nt(fa,{...t,forwardedRef:n}));fa.displayName="Panel";pa.displayName="forwardRef(Panel)";let xn=null,st=null;function or(t,n){if(n){const a=(n&va)!==0,s=(n&ba)!==0,l=(n&ya)!==0,r=(n&ja)!==0;if(a)return l?"se-resize":r?"ne-resize":"e-resize";if(s)return l?"sw-resize":r?"nw-resize":"w-resize";if(l)return"s-resize";if(r)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function cr(){st!==null&&(document.head.removeChild(st),xn=null,st=null)}function ln(t,n){const a=or(t,n);xn!==a&&(xn=a,st===null&&(st=document.createElement("style"),document.head.appendChild(st)),st.innerHTML=`*{cursor: ${a}!important;}`)}function ha(t){return t.type==="keydown"}function xa(t){return t.type.startsWith("pointer")}function ga(t){return t.type.startsWith("mouse")}function en(t){if(xa(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(ga(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function dr(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function ur(t,n,a){return t.x<n.x+n.width&&t.x+t.width>n.x&&t.y<n.y+n.height&&t.y+t.height>n.y}function mr(t,n){if(t===n)throw new Error("Cannot compare node with itself");const a={a:Fn(t),b:Fn(n)};let s;for(;a.a.at(-1)===a.b.at(-1);)t=a.a.pop(),n=a.b.pop(),s=t;K(s,"Stacking order can only be calculated for elements with a common ancestor");const l={a:Un(On(a.a)),b:Un(On(a.b))};if(l.a===l.b){const r=s.childNodes,i={a:a.a.at(-1),b:a.b.at(-1)};let o=r.length;for(;o--;){const c=r[o];if(c===i.a)return 1;if(c===i.b)return-1}}return Math.sign(l.a-l.b)}const fr=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function pr(t){var n;const a=getComputedStyle((n=wa(t))!==null&&n!==void 0?n:t).display;return a==="flex"||a==="inline-flex"}function hr(t){const n=getComputedStyle(t);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||pr(t))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||fr.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function On(t){let n=t.length;for(;n--;){const a=t[n];if(K(a,"Missing node"),hr(a))return a}return null}function Un(t){return t&&Number(getComputedStyle(t).zIndex)||0}function Fn(t){const n=[];for(;t;)n.push(t),t=wa(t);return n}function wa(t){const{parentNode:n}=t;return n&&n instanceof ShadowRoot?n.host:n}const va=1,ba=2,ya=4,ja=8,xr=dr()==="coarse";let Fe=[],yt=!1,et=new Map,tn=new Map;const Pt=new Set;function gr(t,n,a,s,l){var r;const{ownerDocument:i}=n,o={direction:a,element:n,hitAreaMargins:s,setResizeHandlerState:l},c=(r=et.get(i))!==null&&r!==void 0?r:0;return et.set(i,c+1),Pt.add(o),Xt(),function(){var w;tn.delete(t),Pt.delete(o);const f=(w=et.get(i))!==null&&w!==void 0?w:1;if(et.set(i,f-1),Xt(),f===1&&et.delete(i),Fe.includes(o)){const d=Fe.indexOf(o);d>=0&&Fe.splice(d,1),Cn(),l("up",!0,null)}}}function Vn(t){const{target:n}=t,{x:a,y:s}=en(t);yt=!0,Nn({target:n,x:a,y:s}),Xt(),Fe.length>0&&(Jt("down",t),t.preventDefault(),t.stopPropagation())}function St(t){const{x:n,y:a}=en(t);if(yt&&t.buttons===0&&(yt=!1,Jt("up",t)),!yt){const{target:s}=t;Nn({target:s,x:n,y:a})}Jt("move",t),Cn(),Fe.length>0&&t.preventDefault()}function pt(t){const{target:n}=t,{x:a,y:s}=en(t);tn.clear(),yt=!1,Fe.length>0&&t.preventDefault(),Jt("up",t),Nn({target:n,x:a,y:s}),Cn(),Xt()}function Nn({target:t,x:n,y:a}){Fe.splice(0);let s=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(s=t),Pt.forEach(l=>{const{element:r,hitAreaMargins:i}=l,o=r.getBoundingClientRect(),{bottom:c,left:p,right:w,top:f}=o,d=xr?i.coarse:i.fine;if(n>=p-d&&n<=w+d&&a>=f-d&&a<=c+d){if(s!==null&&document.contains(s)&&r!==s&&!r.contains(s)&&!s.contains(r)&&mr(s,r)>0){let b=s,j=!1;for(;b&&!b.contains(r);){if(ur(b.getBoundingClientRect(),o)){j=!0;break}b=b.parentElement}if(j)return}Fe.push(l)}})}function on(t,n){tn.set(t,n)}function Cn(){let t=!1,n=!1;Fe.forEach(s=>{const{direction:l}=s;l==="horizontal"?t=!0:n=!0});let a=0;tn.forEach(s=>{a|=s}),t&&n?ln("intersection",a):t?ln("horizontal",a):n?ln("vertical",a):cr()}function Xt(){et.forEach((t,n)=>{const{body:a}=n;a.removeEventListener("contextmenu",pt),a.removeEventListener("pointerdown",Vn),a.removeEventListener("pointerleave",St),a.removeEventListener("pointermove",St)}),window.removeEventListener("pointerup",pt),window.removeEventListener("pointercancel",pt),Pt.size>0&&(yt?(Fe.length>0&&et.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("contextmenu",pt),a.addEventListener("pointerleave",St),a.addEventListener("pointermove",St))}),window.addEventListener("pointerup",pt),window.addEventListener("pointercancel",pt)):et.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("pointerdown",Vn,{capture:!0}),a.addEventListener("pointermove",St))}))}function Jt(t,n){Pt.forEach(a=>{const{setResizeHandlerState:s}=a,l=Fe.includes(a);s(t,l,n)})}function wr(){const[t,n]=bt(0);return $e(()=>n(a=>a+1),[])}function K(t,n){if(!t)throw console.error(n),Error(n)}const Tn=10;function dt(t,n,a=Tn){return t.toFixed(a)===n.toFixed(a)?0:t>n?1:-1}function Je(t,n,a=Tn){return dt(t,n,a)===0}function Be(t,n,a){return dt(t,n,a)===0}function vr(t,n,a){if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++){const l=t[s],r=n[s];if(!Be(l,r,a))return!1}return!0}function vt({panelConstraints:t,panelIndex:n,size:a}){const s=t[n];K(s!=null,`Panel constraints not found for index ${n}`);let{collapsedSize:l=0,collapsible:r,maxSize:i=100,minSize:o=0}=s;if(dt(a,o)<0)if(r){const c=(l+o)/2;dt(a,c)<0?a=l:a=o}else a=o;return a=Math.min(i,a),a=parseFloat(a.toFixed(Tn)),a}function Et({delta:t,initialLayout:n,panelConstraints:a,pivotIndices:s,prevLayout:l,trigger:r}){if(Be(t,0))return n;const i=[...n],[o,c]=s;K(o!=null,"Invalid first pivot index"),K(c!=null,"Invalid second pivot index");let p=0;if(r==="keyboard"){{const f=t<0?c:o,d=a[f];K(d,`Panel constraints not found for index ${f}`);const{collapsedSize:C=0,collapsible:b,minSize:j=0}=d;if(b){const N=n[f];if(K(N!=null,`Previous layout not found for panel index ${f}`),Be(N,C)){const m=j-N;dt(m,Math.abs(t))>0&&(t=t<0?0-m:m)}}}{const f=t<0?o:c,d=a[f];K(d,`No panel constraints found for index ${f}`);const{collapsedSize:C=0,collapsible:b,minSize:j=0}=d;if(b){const N=n[f];if(K(N!=null,`Previous layout not found for panel index ${f}`),Be(N,j)){const m=N-C;dt(m,Math.abs(t))>0&&(t=t<0?0-m:m)}}}}{const f=t<0?1:-1;let d=t<0?c:o,C=0;for(;;){const j=n[d];K(j!=null,`Previous layout not found for panel index ${d}`);const m=vt({panelConstraints:a,panelIndex:d,size:100})-j;if(C+=m,d+=f,d<0||d>=a.length)break}const b=Math.min(Math.abs(t),Math.abs(C));t=t<0?0-b:b}{let d=t<0?o:c;for(;d>=0&&d<a.length;){const C=Math.abs(t)-Math.abs(p),b=n[d];K(b!=null,`Previous layout not found for panel index ${d}`);const j=b-C,N=vt({panelConstraints:a,panelIndex:d,size:j});if(!Be(b,N)&&(p+=b-N,i[d]=N,p.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(vr(l,i))return l;{const f=t<0?c:o,d=n[f];K(d!=null,`Previous layout not found for panel index ${f}`);const C=d+p,b=vt({panelConstraints:a,panelIndex:f,size:C});if(i[f]=b,!Be(b,C)){let j=C-b,m=t<0?c:o;for(;m>=0&&m<a.length;){const T=i[m];K(T!=null,`Previous layout not found for panel index ${m}`);const P=T+j,k=vt({panelConstraints:a,panelIndex:m,size:P});if(Be(T,k)||(j-=k-T,i[m]=k),Be(j,0))break;t>0?m--:m++}}}const w=i.reduce((f,d)=>d+f,0);return Be(w,100)?i:l}function br({layout:t,panelsArray:n,pivotIndices:a}){let s=0,l=100,r=0,i=0;const o=a[0];K(o!=null,"No pivot index found"),n.forEach((f,d)=>{const{constraints:C}=f,{maxSize:b=100,minSize:j=0}=C;d===o?(s=j,l=b):(r+=j,i+=b)});const c=Math.min(l,100-r),p=Math.max(s,100-i),w=t[o];return{valueMax:c,valueMin:p,valueNow:w}}function Dt(t,n=document){return Array.from(n.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Na(t,n,a=document){const l=Dt(t,a).findIndex(r=>r.getAttribute("data-panel-resize-handle-id")===n);return l??null}function Ca(t,n,a){const s=Na(t,n,a);return s!=null?[s,s+1]:[-1,-1]}function Ta(t,n=document){var a;if(n instanceof HTMLElement&&(n==null||(a=n.dataset)===null||a===void 0?void 0:a.panelGroupId)==t)return n;const s=n.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return s||null}function nn(t,n=document){const a=n.querySelector(`[data-panel-resize-handle-id="${t}"]`);return a||null}function yr(t,n,a,s=document){var l,r,i,o;const c=nn(n,s),p=Dt(t,s),w=c?p.indexOf(c):-1,f=(l=(r=a[w])===null||r===void 0?void 0:r.id)!==null&&l!==void 0?l:null,d=(i=(o=a[w+1])===null||o===void 0?void 0:o.id)!==null&&i!==void 0?i:null;return[f,d]}function jr({committedValuesRef:t,eagerValuesRef:n,groupId:a,layout:s,panelDataArray:l,panelGroupElement:r,setLayout:i}){Le({didWarnAboutMissingResizeHandle:!1}),it(()=>{if(!r)return;const o=Dt(a,r);for(let c=0;c<l.length-1;c++){const{valueMax:p,valueMin:w,valueNow:f}=br({layout:s,panelsArray:l,pivotIndices:[c,c+1]}),d=o[c];if(d!=null){const C=l[c];K(C,`No panel data found for index "${c}"`),d.setAttribute("aria-controls",C.id),d.setAttribute("aria-valuemax",""+Math.round(p)),d.setAttribute("aria-valuemin",""+Math.round(w)),d.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{o.forEach((c,p)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[a,s,l,r]),lt(()=>{if(!r)return;const o=n.current;K(o,"Eager values not found");const{panelDataArray:c}=o,p=Ta(a,r);K(p!=null,`No group found for id "${a}"`);const w=Dt(a,r);K(w,`No resize handles found for group id "${a}"`);const f=w.map(d=>{const C=d.getAttribute("data-panel-resize-handle-id");K(C,"Resize handle element has no handle id attribute");const[b,j]=yr(a,C,c,r);if(b==null||j==null)return()=>{};const N=m=>{if(!m.defaultPrevented)switch(m.key){case"Enter":{m.preventDefault();const T=c.findIndex(P=>P.id===b);if(T>=0){const P=c[T];K(P,`No panel data found for index ${T}`);const k=s[T],{collapsedSize:L=0,collapsible:R,minSize:h=0}=P.constraints;if(k!=null&&R){const _=Et({delta:Be(k,L)?h-L:L-k,initialLayout:s,panelConstraints:c.map(H=>H.constraints),pivotIndices:Ca(a,C,r),prevLayout:s,trigger:"keyboard"});s!==_&&i(_)}}break}}};return d.addEventListener("keydown",N),()=>{d.removeEventListener("keydown",N)}});return()=>{f.forEach(d=>d())}},[r,t,n,a,s,l,i])}function Wn(t,n){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==n[a])return!1;return!0}function Sa(t,n){const a=t==="horizontal",{x:s,y:l}=en(n);return a?s:l}function Nr(t,n,a,s,l){const r=a==="horizontal",i=nn(n,l);K(i,`No resize handle element found for id "${n}"`);const o=i.getAttribute("data-panel-group-id");K(o,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=s;const p=Sa(a,t),w=Ta(o,l);K(w,`No group element found for id "${o}"`);const f=w.getBoundingClientRect(),d=r?f.width:f.height;return(p-c)/d*100}function Cr(t,n,a,s,l,r){if(ha(t)){const i=a==="horizontal";let o=0;t.shiftKey?o=100:l!=null?o=l:o=10;let c=0;switch(t.key){case"ArrowDown":c=i?0:o;break;case"ArrowLeft":c=i?-o:0;break;case"ArrowRight":c=i?o:0;break;case"ArrowUp":c=i?0:-o;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return s==null?0:Nr(t,n,a,s,r)}function Tr({panelDataArray:t}){const n=Array(t.length),a=t.map(r=>r.constraints);let s=0,l=100;for(let r=0;r<t.length;r++){const i=a[r];K(i,`Panel constraints not found for index ${r}`);const{defaultSize:o}=i;o!=null&&(s++,n[r]=o,l-=o)}for(let r=0;r<t.length;r++){const i=a[r];K(i,`Panel constraints not found for index ${r}`);const{defaultSize:o}=i;if(o!=null)continue;const c=t.length-s,p=l/c;s++,n[r]=p,l-=p}return n}function ht(t,n,a){n.forEach((s,l)=>{const r=t[l];K(r,`Panel data not found for index ${l}`);const{callbacks:i,constraints:o,id:c}=r,{collapsedSize:p=0,collapsible:w}=o,f=a[c];if(f==null||s!==f){a[c]=s;const{onCollapse:d,onExpand:C,onResize:b}=i;b&&b(s,f),w&&(d||C)&&(C&&(f==null||Je(f,p))&&!Je(s,p)&&C(),d&&(f==null||!Je(f,p))&&Je(s,p)&&d())}})}function Vt(t,n){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!=n[a])return!1;return!0}function Sr({defaultSize:t,dragState:n,layout:a,panelData:s,panelIndex:l,precision:r=3}){const i=a[l];let o;return i==null?o=t!=null?t.toPrecision(r):"1":s.length===1?o="1":o=i.toPrecision(r),{flexBasis:0,flexGrow:o,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function kr(t,n=10){let a=null;return(...l)=>{a!==null&&clearTimeout(a),a=setTimeout(()=>{t(...l)},n)}}function Gn(t){try{if(typeof localStorage<"u")t.getItem=n=>localStorage.getItem(n),t.setItem=(n,a)=>{localStorage.setItem(n,a)};else throw new Error("localStorage not supported in this environment")}catch(n){console.error(n),t.getItem=()=>null,t.setItem=()=>{}}}function ka(t){return`react-resizable-panels:${t}`}function za(t){return t.map(n=>{const{constraints:a,id:s,idIsFromProps:l,order:r}=n;return l?s:r?`${r}:${JSON.stringify(a)}`:JSON.stringify(a)}).sort((n,a)=>n.localeCompare(a)).join(",")}function Ea(t,n){try{const a=ka(t),s=n.getItem(a);if(s){const l=JSON.parse(s);if(typeof l=="object"&&l!=null)return l}}catch{}return null}function zr(t,n,a){var s,l;const r=(s=Ea(t,a))!==null&&s!==void 0?s:{},i=za(n);return(l=r[i])!==null&&l!==void 0?l:null}function Er(t,n,a,s,l){var r;const i=ka(t),o=za(n),c=(r=Ea(t,l))!==null&&r!==void 0?r:{};c[o]={expandToSizes:Object.fromEntries(a.entries()),layout:s};try{l.setItem(i,JSON.stringify(c))}catch(p){console.error(p)}}function qn({layout:t,panelConstraints:n}){const a=[...t],s=a.reduce((r,i)=>r+i,0);if(a.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${a.map(r=>`${r}%`).join(", ")}`);if(!Be(s,100)&&a.length>0)for(let r=0;r<n.length;r++){const i=a[r];K(i!=null,`No layout data found for index ${r}`);const o=100/s*i;a[r]=o}let l=0;for(let r=0;r<n.length;r++){const i=a[r];K(i!=null,`No layout data found for index ${r}`);const o=vt({panelConstraints:n,panelIndex:r,size:i});i!=o&&(l+=i-o,a[r]=o)}if(!Be(l,0))for(let r=0;r<n.length;r++){const i=a[r];K(i!=null,`No layout data found for index ${r}`);const o=i+l,c=vt({panelConstraints:n,panelIndex:r,size:o});if(i!==c&&(l-=c-i,a[r]=c,Be(l,0)))break}return a}const Rr=100,Rt={getItem:t=>(Gn(Rt),Rt.getItem(t)),setItem:(t,n)=>{Gn(Rt),Rt.setItem(t,n)}},Kn={};function Ra({autoSaveId:t=null,children:n,className:a="",direction:s,forwardedRef:l,id:r=null,onLayout:i=null,keyboardResizeBy:o=null,storage:c=Rt,style:p,tagName:w="div",...f}){const d=jn(r),C=Le(null),[b,j]=bt(null),[N,m]=bt([]),T=wr(),P=Le({}),k=Le(new Map),L=Le(0),R=Le({autoSaveId:t,direction:s,dragState:b,id:d,keyboardResizeBy:o,onLayout:i,storage:c}),h=Le({layout:N,panelDataArray:[],panelDataArrayChanged:!1});Le({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),ma(l,()=>({getId:()=>R.current.id,getLayout:()=>{const{layout:y}=h.current;return y},setLayout:y=>{const{onLayout:B}=R.current,{layout:F,panelDataArray:U}=h.current,$=qn({layout:y,panelConstraints:U.map(V=>V.constraints)});Wn(F,$)||(m($),h.current.layout=$,B&&B($),ht(U,$,P.current))}}),[]),it(()=>{R.current.autoSaveId=t,R.current.direction=s,R.current.dragState=b,R.current.id=d,R.current.onLayout=i,R.current.storage=c}),jr({committedValuesRef:R,eagerValuesRef:h,groupId:d,layout:N,panelDataArray:h.current.panelDataArray,setLayout:m,panelGroupElement:C.current}),lt(()=>{const{panelDataArray:y}=h.current;if(t){if(N.length===0||N.length!==y.length)return;let B=Kn[t];B==null&&(B=kr(Er,Rr),Kn[t]=B);const F=[...y],U=new Map(k.current);B(t,F,U,N,c)}},[t,N,c]),lt(()=>{});const _=$e(y=>{const{onLayout:B}=R.current,{layout:F,panelDataArray:U}=h.current;if(y.constraints.collapsible){const $=U.map(ce=>ce.constraints),{collapsedSize:V=0,panelSize:ee,pivotIndices:X}=at(U,y,F);if(K(ee!=null,`Panel size not found for panel "${y.id}"`),!Je(ee,V)){k.current.set(y.id,ee);const xe=xt(U,y)===U.length-1?ee-V:V-ee,te=Et({delta:xe,initialLayout:F,panelConstraints:$,pivotIndices:X,prevLayout:F,trigger:"imperative-api"});Vt(F,te)||(m(te),h.current.layout=te,B&&B(te),ht(U,te,P.current))}}},[]),H=$e((y,B)=>{const{onLayout:F}=R.current,{layout:U,panelDataArray:$}=h.current;if(y.constraints.collapsible){const V=$.map(M=>M.constraints),{collapsedSize:ee=0,panelSize:X=0,minSize:ce=0,pivotIndices:xe}=at($,y,U),te=B??ce;if(Je(X,ee)){const M=k.current.get(y.id),Ae=M!=null&&M>=te?M:te,ze=xt($,y)===$.length-1?X-Ae:Ae-X,ge=Et({delta:ze,initialLayout:U,panelConstraints:V,pivotIndices:xe,prevLayout:U,trigger:"imperative-api"});Vt(U,ge)||(m(ge),h.current.layout=ge,F&&F(ge),ht($,ge,P.current))}}},[]),se=$e(y=>{const{layout:B,panelDataArray:F}=h.current,{panelSize:U}=at(F,y,B);return K(U!=null,`Panel size not found for panel "${y.id}"`),U},[]),z=$e((y,B)=>{const{panelDataArray:F}=h.current,U=xt(F,y);return Sr({defaultSize:B,dragState:b,layout:N,panelData:F,panelIndex:U})},[b,N]),G=$e(y=>{const{layout:B,panelDataArray:F}=h.current,{collapsedSize:U=0,collapsible:$,panelSize:V}=at(F,y,B);return K(V!=null,`Panel size not found for panel "${y.id}"`),$===!0&&Je(V,U)},[]),A=$e(y=>{const{layout:B,panelDataArray:F}=h.current,{collapsedSize:U=0,collapsible:$,panelSize:V}=at(F,y,B);return K(V!=null,`Panel size not found for panel "${y.id}"`),!$||dt(V,U)>0},[]),J=$e(y=>{const{panelDataArray:B}=h.current;B.push(y),B.sort((F,U)=>{const $=F.order,V=U.order;return $==null&&V==null?0:$==null?-1:V==null?1:$-V}),h.current.panelDataArrayChanged=!0,T()},[T]);it(()=>{if(h.current.panelDataArrayChanged){h.current.panelDataArrayChanged=!1;const{autoSaveId:y,onLayout:B,storage:F}=R.current,{layout:U,panelDataArray:$}=h.current;let V=null;if(y){const X=zr(y,$,F);X&&(k.current=new Map(Object.entries(X.expandToSizes)),V=X.layout)}V==null&&(V=Tr({panelDataArray:$}));const ee=qn({layout:V,panelConstraints:$.map(X=>X.constraints)});Wn(U,ee)||(m(ee),h.current.layout=ee,B&&B(ee),ht($,ee,P.current))}}),it(()=>{const y=h.current;return()=>{y.layout=[]}},[]);const Y=$e(y=>{let B=!1;const F=C.current;return F&&window.getComputedStyle(F,null).getPropertyValue("direction")==="rtl"&&(B=!0),function($){$.preventDefault();const V=C.current;if(!V)return()=>null;const{direction:ee,dragState:X,id:ce,keyboardResizeBy:xe,onLayout:te}=R.current,{layout:M,panelDataArray:Ae}=h.current,{initialLayout:ke}=X??{},ze=Ca(ce,y,V);let ge=Cr($,y,ee,X,xe,V);const qe=ee==="horizontal";qe&&B&&(ge=-ge);const Ie=Ae.map(D=>D.constraints),De=Et({delta:ge,initialLayout:ke??M,panelConstraints:Ie,pivotIndices:ze,prevLayout:M,trigger:ha($)?"keyboard":"mouse-or-touch"}),Ne=!Vt(M,De);(xa($)||ga($))&&L.current!=ge&&(L.current=ge,!Ne&&ge!==0?qe?on(y,ge<0?va:ba):on(y,ge<0?ya:ja):on(y,0)),Ne&&(m(De),h.current.layout=De,te&&te(De),ht(Ae,De,P.current))}},[]),Q=$e((y,B)=>{const{onLayout:F}=R.current,{layout:U,panelDataArray:$}=h.current,V=$.map(M=>M.constraints),{panelSize:ee,pivotIndices:X}=at($,y,U);K(ee!=null,`Panel size not found for panel "${y.id}"`);const xe=xt($,y)===$.length-1?ee-B:B-ee,te=Et({delta:xe,initialLayout:U,panelConstraints:V,pivotIndices:X,prevLayout:U,trigger:"imperative-api"});Vt(U,te)||(m(te),h.current.layout=te,F&&F(te),ht($,te,P.current))},[]),ie=$e((y,B)=>{const{layout:F,panelDataArray:U}=h.current,{collapsedSize:$=0,collapsible:V}=B,{collapsedSize:ee=0,collapsible:X,maxSize:ce=100,minSize:xe=0}=y.constraints,{panelSize:te}=at(U,y,F);te!=null&&(V&&X&&Je(te,$)?Je($,ee)||Q(y,ee):te<xe?Q(y,xe):te>ce&&Q(y,ce))},[Q]),oe=$e((y,B)=>{const{direction:F}=R.current,{layout:U}=h.current;if(!C.current)return;const $=nn(y,C.current);K($,`Drag handle element not found for id "${y}"`);const V=Sa(F,B);j({dragHandleId:y,dragHandleRect:$.getBoundingClientRect(),initialCursorPosition:V,initialLayout:U})},[]),Re=$e(()=>{j(null)},[]),me=$e(y=>{const{panelDataArray:B}=h.current,F=xt(B,y);F>=0&&(B.splice(F,1),delete P.current[y.id],h.current.panelDataArrayChanged=!0,T())},[T]),pe=sr(()=>({collapsePanel:_,direction:s,dragState:b,expandPanel:H,getPanelSize:se,getPanelStyle:z,groupId:d,isPanelCollapsed:G,isPanelExpanded:A,reevaluatePanelConstraints:ie,registerPanel:J,registerResizeHandle:Y,resizePanel:Q,startDragging:oe,stopDragging:Re,unregisterPanel:me,panelGroupElement:C.current}),[_,b,s,H,se,z,d,G,A,ie,J,Y,Q,oe,Re,me]),he={display:"flex",flexDirection:s==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Nt(Qt.Provider,{value:pe},Nt(w,{...f,children:n,className:a,id:r,ref:C,style:{...he,...p},"data-panel-group":"","data-panel-group-direction":s,"data-panel-group-id":d}))}const Aa=da((t,n)=>Nt(Ra,{...t,forwardedRef:n}));Ra.displayName="PanelGroup";Aa.displayName="forwardRef(PanelGroup)";function xt(t,n){return t.findIndex(a=>a===n||a.id===n.id)}function at(t,n,a){const s=xt(t,n),r=s===t.length-1?[s-1,s]:[s,s+1],i=a[s];return{...n.constraints,panelSize:i,pivotIndices:r}}function Ar({disabled:t,handleId:n,resizeHandler:a,panelGroupElement:s}){lt(()=>{if(t||a==null||s==null)return;const l=nn(n,s);if(l==null)return;const r=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),a(i);break}case"F6":{i.preventDefault();const o=l.getAttribute("data-panel-group-id");K(o,`No group element found for id "${o}"`);const c=Dt(o,s),p=Na(o,n,s);K(p!==null,`No resize element found for id "${n}"`);const w=i.shiftKey?p>0?p-1:c.length-1:p+1<c.length?p+1:0;c[w].focus();break}}};return l.addEventListener("keydown",r),()=>{l.removeEventListener("keydown",r)}},[s,t,n,a])}function Ma({children:t=null,className:n="",disabled:a=!1,hitAreaMargins:s,id:l,onBlur:r,onDragging:i,onFocus:o,style:c={},tabIndex:p=0,tagName:w="div",...f}){var d,C;const b=Le(null),j=Le({onDragging:i});lt(()=>{j.current.onDragging=i});const N=ua(Qt);if(N===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:m,groupId:T,registerResizeHandle:P,startDragging:k,stopDragging:L,panelGroupElement:R}=N,h=jn(l),[_,H]=bt("inactive"),[se,z]=bt(!1),[G,A]=bt(null),J=Le({state:_});it(()=>{J.current.state=_}),lt(()=>{if(a)A(null);else{const oe=P(h);A(()=>oe)}},[a,h,P]);const Y=(d=s==null?void 0:s.coarse)!==null&&d!==void 0?d:15,Q=(C=s==null?void 0:s.fine)!==null&&C!==void 0?C:5;return lt(()=>{if(a||G==null)return;const oe=b.current;return K(oe,"Element ref not attached"),gr(h,oe,m,{coarse:Y,fine:Q},(me,pe,he)=>{if(pe)switch(me){case"down":{H("drag"),K(he,'Expected event to be defined for "down" action'),k(h,he);const{onDragging:y}=j.current;y&&y(!0);break}case"move":{const{state:y}=J.current;y!=="drag"&&H("hover"),K(he,'Expected event to be defined for "move" action'),G(he);break}case"up":{H("hover"),L();const{onDragging:y}=j.current;y&&y(!1);break}}else H("inactive")})},[Y,m,a,Q,P,h,G,k,L]),Ar({disabled:a,handleId:h,resizeHandler:G,panelGroupElement:R}),Nt(w,{...f,children:t,className:n,id:l,onBlur:()=>{z(!1),r==null||r()},onFocus:()=>{z(!0),o==null||o()},ref:b,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...c},tabIndex:p,"data-panel-group-direction":m,"data-panel-group-id":T,"data-resize-handle":"","data-resize-handle-active":_==="drag"?"pointer":se?"keyboard":void 0,"data-resize-handle-state":_,"data-panel-resize-handle-enabled":!a,"data-panel-resize-handle-id":h})}Ma.displayName="PanelResizeHandle";function Mr({className:t,...n}){return e.jsx(Aa,{"data-slot":"resizable-panel-group",className:je("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})}function Yn({...t}){return e.jsx(pa,{"data-slot":"resizable-panel",...t})}function Pr({withHandle:t,className:n,...a}){return e.jsx(Ma,{"data-slot":"resizable-handle",className:je("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...a,children:t&&e.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:e.jsx(us,{className:"size-2.5"})})})}function Dr(t){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}const Pa=S.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),It=()=>{const t=S.useContext(Pa);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};Dr(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Ir(){const t=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function $r(){return Sn(/^Mac/)}function Lr(){return Sn(/^iPhone/)}function Xn(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function _r(){return Sn(/^iPad/)||$r()&&navigator.maxTouchPoints>1}function Da(){return Lr()||_r()}function Sn(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const Hr=24,Br=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Jn(...t){return(...n)=>{for(let a of t)typeof a=="function"&&a(...n)}}const cn=typeof document<"u"&&window.visualViewport;function Zn(t){let n=window.getComputedStyle(t);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function Ia(t){for(Zn(t)&&(t=t.parentElement);t&&!Zn(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const Or=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Wt=0,dn;function Ur(t={}){let{isDisabled:n}=t;Br(()=>{if(!n)return Wt++,Wt===1&&Da()&&(dn=Fr()),()=>{Wt--,Wt===0&&(dn==null||dn())}},[n])}function Fr(){let t,n=0,a=f=>{t=Ia(f.target),!(t===document.documentElement&&t===document.body)&&(n=f.changedTouches[0].pageY)},s=f=>{if(!t||t===document.documentElement||t===document.body){f.preventDefault();return}let d=f.changedTouches[0].pageY,C=t.scrollTop,b=t.scrollHeight-t.clientHeight;b!==0&&((C<=0&&d>n||C>=b&&d<n)&&f.preventDefault(),n=d)},l=f=>{let d=f.target;gn(d)&&d!==document.activeElement&&(f.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},r=f=>{let d=f.target;gn(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",cn&&(cn.height<window.innerHeight?requestAnimationFrame(()=>{Qn(d)}):cn.addEventListener("resize",()=>Qn(d),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},o=window.pageXOffset,c=window.pageYOffset,p=Jn(Vr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let w=Jn(kt(document,"touchstart",a,{passive:!1,capture:!0}),kt(document,"touchmove",s,{passive:!1,capture:!0}),kt(document,"touchend",l,{passive:!1,capture:!0}),kt(document,"focus",r,!0),kt(window,"scroll",i));return()=>{p(),w(),window.scrollTo(o,c)}}function Vr(t,n,a){let s=t.style[n];return t.style[n]=a,()=>{t.style[n]=s}}function kt(t,n,a,s){return t.addEventListener(n,a,s),()=>{t.removeEventListener(n,a,s)}}function Qn(t){let n=document.scrollingElement||document.documentElement;for(;t&&t!==n;){let a=Ia(t);if(a!==document.documentElement&&a!==document.body&&a!==t){let s=a.getBoundingClientRect().top,l=t.getBoundingClientRect().top,r=t.getBoundingClientRect().bottom;const i=a.getBoundingClientRect().bottom+Hr;r>i&&(a.scrollTop+=l-s)}t=a.parentElement}}function gn(t){return t instanceof HTMLInputElement&&!Or.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function Wr(t,n){typeof t=="function"?t(n):t!=null&&(t.current=n)}function Gr(...t){return n=>t.forEach(a=>Wr(a,n))}function $a(...t){return I.useCallback(Gr(...t),t)}const La=new WeakMap;function Ce(t,n,a=!1){if(!t||!(t instanceof HTMLElement))return;let s={};Object.entries(n).forEach(([l,r])=>{if(l.startsWith("--")){t.style.setProperty(l,r);return}s[l]=t.style[l],t.style[l]=r}),!a&&La.set(t,s)}function qr(t,n){if(!t||!(t instanceof HTMLElement))return;let a=La.get(t);a&&(t.style[n]=a[n])}const we=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function Gt(t,n){if(!t)return null;const a=window.getComputedStyle(t),s=a.transform||a.webkitTransform||a.mozTransform;let l=s.match(/^matrix3d\((.+)\)$/);return l?parseFloat(l[1].split(", ")[we(n)?13:12]):(l=s.match(/^matrix\((.+)\)$/),l?parseFloat(l[1].split(", ")[we(n)?5:4]):null)}function Kr(t){return 8*(Math.log(t+1)-2)}function un(t,n){if(!t)return()=>{};const a=t.style.cssText;return Object.assign(t.style,n),()=>{t.style.cssText=a}}function Yr(...t){return(...n)=>{for(const a of t)typeof a=="function"&&a(...n)}}const ue={DURATION:.5,EASE:[.32,.72,0,1]},_a=.4,Xr=.25,Jr=100,Ha=8,qt=16,wn=26,mn="vaul-dragging";function Ba(t){const n=S.useRef(t);return S.useEffect(()=>{n.current=t}),S.useMemo(()=>(...a)=>n.current==null?void 0:n.current.call(n,...a),[])}function Zr({defaultProp:t,onChange:n}){const a=S.useState(t),[s]=a,l=S.useRef(s),r=Ba(n);return S.useEffect(()=>{l.current!==s&&(r(s),l.current=s)},[s,l,r]),a}function Oa({prop:t,defaultProp:n,onChange:a=()=>{}}){const[s,l]=Zr({defaultProp:n,onChange:a}),r=t!==void 0,i=r?t:s,o=Ba(a),c=S.useCallback(p=>{if(r){const f=typeof p=="function"?p(t):p;f!==t&&o(f)}else l(p)},[r,t,l,o]);return[i,c]}function Qr({activeSnapPointProp:t,setActiveSnapPointProp:n,snapPoints:a,drawerRef:s,overlayRef:l,fadeFromIndex:r,onSnapPointChange:i,direction:o="bottom",container:c,snapToSequentialPoint:p}){const[w,f]=Oa({prop:t,defaultProp:a==null?void 0:a[0],onChange:n}),[d,C]=S.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);S.useEffect(()=>{function h(){C({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const b=S.useMemo(()=>w===(a==null?void 0:a[a.length-1])||null,[a,w]),j=S.useMemo(()=>{var h;return(h=a==null?void 0:a.findIndex(_=>_===w))!=null?h:null},[a,w]),N=a&&a.length>0&&(r||r===0)&&!Number.isNaN(r)&&a[r]===w||!a,m=S.useMemo(()=>{const h=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var _;return(_=a==null?void 0:a.map(H=>{const se=typeof H=="string";let z=0;if(se&&(z=parseInt(H,10)),we(o)){const A=se?z:d?H*h.height:0;return d?o==="bottom"?h.height-A:-h.height+A:A}const G=se?z:d?H*h.width:0;return d?o==="right"?h.width-G:-h.width+G:G}))!=null?_:[]},[a,d,c]),T=S.useMemo(()=>j!==null?m==null?void 0:m[j]:null,[m,j]),P=S.useCallback(h=>{var _;const H=(_=m==null?void 0:m.findIndex(se=>se===h))!=null?_:null;i(H),Ce(s.current,{transition:`transform ${ue.DURATION}s cubic-bezier(${ue.EASE.join(",")})`,transform:we(o)?`translate3d(0, ${h}px, 0)`:`translate3d(${h}px, 0, 0)`}),m&&H!==m.length-1&&r!==void 0&&H!==r&&H<r?Ce(l.current,{transition:`opacity ${ue.DURATION}s cubic-bezier(${ue.EASE.join(",")})`,opacity:"0"}):Ce(l.current,{transition:`opacity ${ue.DURATION}s cubic-bezier(${ue.EASE.join(",")})`,opacity:"1"}),f(a==null?void 0:a[Math.max(H,0)])},[s.current,a,m,r,l,f]);S.useEffect(()=>{if(w||t){var h;const _=(h=a==null?void 0:a.findIndex(H=>H===t||H===w))!=null?h:-1;m&&_!==-1&&typeof m[_]=="number"&&P(m[_])}},[w,t,a,m,P]);function k({draggedDistance:h,closeDrawer:_,velocity:H,dismissible:se}){if(r===void 0)return;const z=o==="bottom"||o==="right"?(T??0)-h:(T??0)+h,G=j===r-1,A=j===0,J=h>0;if(G&&Ce(l.current,{transition:`opacity ${ue.DURATION}s cubic-bezier(${ue.EASE.join(",")})`}),!p&&H>2&&!J){se?_():P(m[0]);return}if(!p&&H>2&&J&&m&&a){P(m[a.length-1]);return}const Y=m==null?void 0:m.reduce((ie,oe)=>typeof ie!="number"||typeof oe!="number"?ie:Math.abs(oe-z)<Math.abs(ie-z)?oe:ie),Q=we(o)?window.innerHeight:window.innerWidth;if(H>_a&&Math.abs(h)<Q*.4){const ie=J?1:-1;if(ie>0&&b&&a){P(m[a.length-1]);return}if(A&&ie<0&&se&&_(),j===null)return;P(m[j+ie]);return}P(Y)}function L({draggedDistance:h}){if(T===null)return;const _=o==="bottom"||o==="right"?T-h:T+h;(o==="bottom"||o==="right")&&_<m[m.length-1]||(o==="top"||o==="left")&&_>m[m.length-1]||Ce(s.current,{transform:we(o)?`translate3d(0, ${_}px, 0)`:`translate3d(${_}px, 0, 0)`})}function R(h,_){if(!a||typeof j!="number"||!m||r===void 0)return null;const H=j===r-1;if(j>=r&&_)return 0;if(H&&!_)return 1;if(!N&&!H)return null;const z=H?j+1:j-1,G=H?m[z]-m[z-1]:m[z+1]-m[z],A=h/Math.abs(G);return H?1-A:A}return{isLastSnapPoint:b,activeSnapPoint:w,shouldFade:N,getPercentageDragged:R,setActiveSnapPoint:f,activeSnapPointIndex:j,onRelease:k,onDrag:L,snapPointsOffset:m}}const el=()=>()=>{};function tl(){const{direction:t,isOpen:n,shouldScaleBackground:a,setBackgroundColorOnScale:s,noBodyStyles:l}=It(),r=S.useRef(null),i=I.useMemo(()=>document.body.style.backgroundColor,[]);function o(){return(window.innerWidth-wn)/window.innerWidth}S.useEffect(()=>{if(n&&a){r.current&&clearTimeout(r.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;Yr(s&&!l?un(document.body,{background:"black"}):el,un(c,{transformOrigin:we(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${ue.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ue.EASE.join(",")})`}));const p=un(c,{borderRadius:`${Ha}px`,overflow:"hidden",...we(t)?{transform:`scale(${o()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${o()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{p(),r.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},ue.DURATION*1e3)}}},[n,a,i])}let zt=null;function nl({isOpen:t,modal:n,nested:a,hasBeenOpened:s,preventScrollRestoration:l,noBodyStyles:r}){const[i,o]=S.useState(()=>typeof window<"u"?window.location.href:""),c=S.useRef(0),p=S.useCallback(()=>{if(Xn()&&zt===null&&t&&!r){zt={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:d}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const C=d-window.innerHeight;C&&c.current>=d&&(document.body.style.top=`${-(c.current+C)}px`)}),300)}},[t]),w=S.useCallback(()=>{if(Xn()&&zt!==null&&!r){const f=-parseInt(document.body.style.top,10),d=-parseInt(document.body.style.left,10);Object.assign(document.body.style,zt),window.requestAnimationFrame(()=>{if(l&&i!==window.location.href){o(window.location.href);return}window.scrollTo(d,f)}),zt=null}},[i]);return S.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),S.useEffect(()=>{if(n)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||w()}},[n,w]),S.useEffect(()=>{a||!s||(t?(!window.matchMedia("(display-mode: standalone)").matches&&p(),n||window.setTimeout(()=>{w()},500)):w())},[t,s,i,n,a,p,w]),{restorePositionSetting:w}}function al({open:t,onOpenChange:n,children:a,onDrag:s,onRelease:l,snapPoints:r,shouldScaleBackground:i=!1,setBackgroundColorOnScale:o=!0,closeThreshold:c=Xr,scrollLockTimeout:p=Jr,dismissible:w=!0,handleOnly:f=!1,fadeFromIndex:d=r&&r.length-1,activeSnapPoint:C,setActiveSnapPoint:b,fixed:j,modal:N=!0,onClose:m,nested:T,noBodyStyles:P=!1,direction:k="bottom",defaultOpen:L=!1,disablePreventScroll:R=!0,snapToSequentialPoint:h=!1,preventScrollRestoration:_=!1,repositionInputs:H=!0,onAnimationEnd:se,container:z,autoFocus:G=!1}){var A,J;const[Y=!1,Q]=Oa({defaultProp:L,prop:t,onChange:O=>{n==null||n(O),!O&&!T&&Ct(),setTimeout(()=>{se==null||se(O)},ue.DURATION*1e3),O&&!N&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),O||(document.body.style.pointerEvents="auto")}}),[ie,oe]=S.useState(!1),[Re,me]=S.useState(!1),[pe,he]=S.useState(!1),y=S.useRef(null),B=S.useRef(null),F=S.useRef(null),U=S.useRef(null),$=S.useRef(null),V=S.useRef(!1),ee=S.useRef(null),X=S.useRef(0),ce=S.useRef(!1),xe=S.useRef(!L),te=S.useRef(0),M=S.useRef(null),Ae=S.useRef(((A=M.current)==null?void 0:A.getBoundingClientRect().height)||0),ke=S.useRef(((J=M.current)==null?void 0:J.getBoundingClientRect().width)||0),ze=S.useRef(0),ge=S.useCallback(O=>{r&&O===D.length-1&&(B.current=new Date)},[]),{activeSnapPoint:qe,activeSnapPointIndex:Ie,setActiveSnapPoint:De,onRelease:Ne,snapPointsOffset:D,onDrag:le,shouldFade:Ke,getPercentageDragged:ut}=Qr({snapPoints:r,activeSnapPointProp:C,setActiveSnapPointProp:b,drawerRef:M,fadeFromIndex:d,overlayRef:y,onSnapPointChange:ge,direction:k,container:z,snapToSequentialPoint:h});Ur({isDisabled:!Y||Re||!N||pe||!ie||!H||!R});const{restorePositionSetting:Ct}=nl({isOpen:Y,modal:N,nested:T??!1,hasBeenOpened:ie,preventScrollRestoration:_,noBodyStyles:P});function mt(){return(window.innerWidth-wn)/window.innerWidth}function an(O){var ne,re;!w&&!r||M.current&&!M.current.contains(O.target)||(Ae.current=((ne=M.current)==null?void 0:ne.getBoundingClientRect().height)||0,ke.current=((re=M.current)==null?void 0:re.getBoundingClientRect().width)||0,me(!0),F.current=new Date,Da()&&window.addEventListener("touchend",()=>V.current=!1,{once:!0}),O.target.setPointerCapture(O.pointerId),X.current=we(k)?O.pageY:O.pageX)}function Lt(O,ne){var re;let Z=O;const de=(re=window.getSelection())==null?void 0:re.toString(),Me=M.current?Gt(M.current,k):null,Ee=new Date;if(Z.tagName==="SELECT"||Z.hasAttribute("data-vaul-no-drag")||Z.closest("[data-vaul-no-drag]"))return!1;if(k==="right"||k==="left")return!0;if(B.current&&Ee.getTime()-B.current.getTime()<500)return!1;if(Me!==null&&(k==="bottom"?Me>0:Me<0))return!0;if(de&&de.length>0)return!1;if($.current&&Ee.getTime()-$.current.getTime()<p&&Me===0||ne)return $.current=Ee,!1;for(;Z;){if(Z.scrollHeight>Z.clientHeight){if(Z.scrollTop!==0)return $.current=new Date,!1;if(Z.getAttribute("role")==="dialog")return!0}Z=Z.parentNode}return!0}function sn(O){if(M.current&&Re){const ne=k==="bottom"||k==="right"?1:-1,re=(X.current-(we(k)?O.pageY:O.pageX))*ne,Z=re>0,de=r&&!w&&!Z;if(de&&Ie===0)return;const Me=Math.abs(re),Ee=document.querySelector("[data-vaul-drawer-wrapper]"),We=k==="bottom"||k==="top"?Ae.current:ke.current;let _e=Me/We;const Xe=ut(Me,Z);if(Xe!==null&&(_e=Xe),de&&_e>=1||!V.current&&!Lt(O.target,Z))return;if(M.current.classList.add(mn),V.current=!0,Ce(M.current,{transition:"none"}),Ce(y.current,{transition:"none"}),r&&le({draggedDistance:re}),Z&&!r){const Ue=Kr(re),ft=Math.min(Ue*-1,0)*ne;Ce(M.current,{transform:we(k)?`translate3d(0, ${ft}px, 0)`:`translate3d(${ft}px, 0, 0)`});return}const Ge=1-_e;if((Ke||d&&Ie===d-1)&&(s==null||s(O,_e),Ce(y.current,{opacity:`${Ge}`,transition:"none"},!0)),Ee&&y.current&&i){const Ue=Math.min(mt()+_e*(1-mt()),1),ft=8-_e*8,Ot=Math.max(0,14-_e*14);Ce(Ee,{borderRadius:`${ft}px`,transform:we(k)?`scale(${Ue}) translate3d(0, ${Ot}px, 0)`:`scale(${Ue}) translate3d(${Ot}px, 0, 0)`,transition:"none"},!0)}if(!r){const Ue=Me*ne;Ce(M.current,{transform:we(k)?`translate3d(0, ${Ue}px, 0)`:`translate3d(${Ue}px, 0, 0)`})}}}S.useEffect(()=>{window.requestAnimationFrame(()=>{xe.current=!0})},[]),S.useEffect(()=>{var O;function ne(){if(!M.current||!H)return;const re=document.activeElement;if(gn(re)||ce.current){var Z;const de=((Z=window.visualViewport)==null?void 0:Z.height)||0,Me=window.innerHeight;let Ee=Me-de;const We=M.current.getBoundingClientRect().height||0,_e=We>Me*.8;ze.current||(ze.current=We);const Xe=M.current.getBoundingClientRect().top;if(Math.abs(te.current-Ee)>60&&(ce.current=!ce.current),r&&r.length>0&&D&&Ie){const Ge=D[Ie]||0;Ee+=Ge}if(te.current=Ee,We>de||ce.current){const Ge=M.current.getBoundingClientRect().height;let Ue=Ge;Ge>de&&(Ue=de-(_e?Xe:wn)),j?M.current.style.height=`${Ge-Math.max(Ee,0)}px`:M.current.style.height=`${Math.max(Ue,de-Xe)}px`}else Ir()||(M.current.style.height=`${ze.current}px`);r&&r.length>0&&!ce.current?M.current.style.bottom="0px":M.current.style.bottom=`${Math.max(Ee,0)}px`}}return(O=window.visualViewport)==null||O.addEventListener("resize",ne),()=>{var re;return(re=window.visualViewport)==null?void 0:re.removeEventListener("resize",ne)}},[Ie,r,D]);function nt(O){_t(),m==null||m(),O||Q(!1),setTimeout(()=>{r&&De(r[0])},ue.DURATION*1e3)}function Ze(){if(!M.current)return;const O=document.querySelector("[data-vaul-drawer-wrapper]"),ne=Gt(M.current,k);Ce(M.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${ue.DURATION}s cubic-bezier(${ue.EASE.join(",")})`}),Ce(y.current,{transition:`opacity ${ue.DURATION}s cubic-bezier(${ue.EASE.join(",")})`,opacity:"1"}),i&&ne&&ne>0&&Y&&Ce(O,{borderRadius:`${Ha}px`,overflow:"hidden",...we(k)?{transform:`scale(${mt()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${mt()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${ue.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ue.EASE.join(",")})`},!0)}function _t(){!Re||!M.current||(M.current.classList.remove(mn),V.current=!1,me(!1),U.current=new Date)}function Ht(O){if(!Re||!M.current)return;M.current.classList.remove(mn),V.current=!1,me(!1),U.current=new Date;const ne=Gt(M.current,k);if(!O||!Lt(O.target,!1)||!ne||Number.isNaN(ne)||F.current===null)return;const re=U.current.getTime()-F.current.getTime(),Z=X.current-(we(k)?O.pageY:O.pageX),de=Math.abs(Z)/re;if(de>.05&&(he(!0),setTimeout(()=>{he(!1)},200)),r){Ne({draggedDistance:Z*(k==="bottom"||k==="right"?1:-1),closeDrawer:nt,velocity:de,dismissible:w}),l==null||l(O,!0);return}if(k==="bottom"||k==="right"?Z>0:Z<0){Ze(),l==null||l(O,!0);return}if(de>_a){nt(),l==null||l(O,!1);return}var Me;const Ee=Math.min((Me=M.current.getBoundingClientRect().height)!=null?Me:0,window.innerHeight);var We;const _e=Math.min((We=M.current.getBoundingClientRect().width)!=null?We:0,window.innerWidth),Xe=k==="left"||k==="right";if(Math.abs(ne)>=(Xe?_e:Ee)*c){nt(),l==null||l(O,!1);return}l==null||l(O,!0),Ze()}S.useEffect(()=>(Y&&(Ce(document.documentElement,{scrollBehavior:"auto"}),B.current=new Date),()=>{qr(document.documentElement,"scrollBehavior")}),[Y]);function Ye(O){const ne=O?(window.innerWidth-qt)/window.innerWidth:1,re=O?-16:0;ee.current&&window.clearTimeout(ee.current),Ce(M.current,{transition:`transform ${ue.DURATION}s cubic-bezier(${ue.EASE.join(",")})`,transform:we(k)?`scale(${ne}) translate3d(0, ${re}px, 0)`:`scale(${ne}) translate3d(${re}px, 0, 0)`}),!O&&M.current&&(ee.current=setTimeout(()=>{const Z=Gt(M.current,k);Ce(M.current,{transition:"none",transform:we(k)?`translate3d(0, ${Z}px, 0)`:`translate3d(${Z}px, 0, 0)`})},500))}function Bt(O,ne){if(ne<0)return;const re=(window.innerWidth-qt)/window.innerWidth,Z=re+ne*(1-re),de=-16+ne*qt;Ce(M.current,{transform:we(k)?`scale(${Z}) translate3d(0, ${de}px, 0)`:`scale(${Z}) translate3d(${de}px, 0, 0)`,transition:"none"})}function Tt(O,ne){const re=we(k)?window.innerHeight:window.innerWidth,Z=ne?(re-qt)/re:1,de=ne?-16:0;ne&&Ce(M.current,{transition:`transform ${ue.DURATION}s cubic-bezier(${ue.EASE.join(",")})`,transform:we(k)?`scale(${Z}) translate3d(0, ${de}px, 0)`:`scale(${Z}) translate3d(${de}px, 0, 0)`})}return S.useEffect(()=>{N||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[N]),S.createElement(gs,{defaultOpen:L,onOpenChange:O=>{!w&&!O||(O?oe(!0):nt(!0),Q(O))},open:Y},S.createElement(Pa.Provider,{value:{activeSnapPoint:qe,snapPoints:r,setActiveSnapPoint:De,drawerRef:M,overlayRef:y,onOpenChange:n,onPress:an,onRelease:Ht,onDrag:sn,dismissible:w,shouldAnimate:xe,handleOnly:f,isOpen:Y,isDragging:Re,shouldFade:Ke,closeDrawer:nt,onNestedDrag:Bt,onNestedOpenChange:Ye,onNestedRelease:Tt,keyboardIsOpen:ce,modal:N,snapPointsOffset:D,activeSnapPointIndex:Ie,direction:k,shouldScaleBackground:i,setBackgroundColorOnScale:o,noBodyStyles:P,container:z,autoFocus:G}},a))}const Ua=S.forwardRef(function({...t},n){const{overlayRef:a,snapPoints:s,onRelease:l,shouldFade:r,isOpen:i,modal:o,shouldAnimate:c}=It(),p=$a(n,a),w=s&&s.length>0;if(!o)return null;const f=S.useCallback(d=>l(d),[l]);return S.createElement(bs,{onMouseUp:f,ref:p,"data-vaul-overlay":"","data-vaul-snap-points":i&&w?"true":"false","data-vaul-snap-points-overlay":i&&r?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...t})});Ua.displayName="Drawer.Overlay";const Fa=S.forwardRef(function({onPointerDownOutside:t,style:n,onOpenAutoFocus:a,...s},l){const{drawerRef:r,onPress:i,onRelease:o,onDrag:c,keyboardIsOpen:p,snapPointsOffset:w,activeSnapPointIndex:f,modal:d,isOpen:C,direction:b,snapPoints:j,container:N,handleOnly:m,shouldAnimate:T,autoFocus:P}=It(),[k,L]=S.useState(!1),R=$a(l,r),h=S.useRef(null),_=S.useRef(null),H=S.useRef(!1),se=j&&j.length>0;tl();const z=(A,J,Y=0)=>{if(H.current)return!0;const Q=Math.abs(A.y),ie=Math.abs(A.x),oe=ie>Q,Re=["bottom","right"].includes(J)?1:-1;if(J==="left"||J==="right"){if(!(A.x*Re<0)&&ie>=0&&ie<=Y)return oe}else if(!(A.y*Re<0)&&Q>=0&&Q<=Y)return!oe;return H.current=!0,!0};S.useEffect(()=>{se&&window.requestAnimationFrame(()=>{L(!0)})},[]);function G(A){h.current=null,H.current=!1,o(A)}return S.createElement(ws,{"data-vaul-drawer-direction":b,"data-vaul-drawer":"","data-vaul-delayed-snap-points":k?"true":"false","data-vaul-snap-points":C&&se?"true":"false","data-vaul-custom-container":N?"true":"false","data-vaul-animate":T!=null&&T.current?"true":"false",...s,ref:R,style:w&&w.length>0?{"--snap-point-height":`${w[f??0]}px`,...n}:n,onPointerDown:A=>{m||(s.onPointerDown==null||s.onPointerDown.call(s,A),h.current={x:A.pageX,y:A.pageY},i(A))},onOpenAutoFocus:A=>{a==null||a(A),P||A.preventDefault()},onPointerDownOutside:A=>{if(t==null||t(A),!d||A.defaultPrevented){A.preventDefault();return}p.current&&(p.current=!1)},onFocusOutside:A=>{if(!d){A.preventDefault();return}},onPointerMove:A=>{if(_.current=A,m||(s.onPointerMove==null||s.onPointerMove.call(s,A),!h.current))return;const J=A.pageY-h.current.y,Y=A.pageX-h.current.x,Q=A.pointerType==="touch"?10:2;z({x:Y,y:J},b,Q)?c(A):(Math.abs(Y)>Q||Math.abs(J)>Q)&&(h.current=null)},onPointerUp:A=>{s.onPointerUp==null||s.onPointerUp.call(s,A),h.current=null,H.current=!1,o(A)},onPointerOut:A=>{s.onPointerOut==null||s.onPointerOut.call(s,A),G(_.current)},onContextMenu:A=>{s.onContextMenu==null||s.onContextMenu.call(s,A),_.current&&G(_.current)}})});Fa.displayName="Drawer.Content";const sl=250,rl=120,ll=S.forwardRef(function({preventCycle:t=!1,children:n,...a},s){const{closeDrawer:l,isDragging:r,snapPoints:i,activeSnapPoint:o,setActiveSnapPoint:c,dismissible:p,handleOnly:w,isOpen:f,onPress:d,onDrag:C}=It(),b=S.useRef(null),j=S.useRef(!1);function N(){if(j.current){P();return}window.setTimeout(()=>{m()},rl)}function m(){if(r||t||j.current){P();return}if(P(),!i||i.length===0){p||l();return}if(o===i[i.length-1]&&p){l();return}const L=i.findIndex(h=>h===o);if(L===-1)return;const R=i[L+1];c(R)}function T(){b.current=window.setTimeout(()=>{j.current=!0},sl)}function P(){b.current&&window.clearTimeout(b.current),j.current=!1}return S.createElement("div",{onClick:N,onPointerCancel:P,onPointerDown:k=>{w&&d(k),T()},onPointerMove:k=>{w&&C(k)},ref:s,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...a},S.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});ll.displayName="Drawer.Handle";function il(t){const n=It(),{container:a=n.container,...s}=t;return S.createElement(vs,{container:a,...s})}const $t={Root:al,Content:Fa,Overlay:Ua,Portal:il,Title:xs};function ol({...t}){return e.jsx($t.Root,{"data-slot":"drawer",...t})}function cl({...t}){return e.jsx($t.Portal,{"data-slot":"drawer-portal",...t})}function dl({className:t,...n}){return e.jsx($t.Overlay,{"data-slot":"drawer-overlay",className:je("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...n})}function ul({className:t,children:n,...a}){return e.jsxs(cl,{"data-slot":"drawer-portal",children:[e.jsx(dl,{}),e.jsxs($t.Content,{"data-slot":"drawer-content",className:je("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...a,children:[e.jsx("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),n]})]})}function ml({className:t,...n}){return e.jsx("div",{"data-slot":"drawer-header",className:je("flex flex-col gap-1.5 p-4",t),...n})}function fl({className:t,...n}){return e.jsx($t.Title,{"data-slot":"drawer-title",className:je("text-foreground font-semibold",t),...n})}const pl=({show:t,history:n,collections:a=[],selectedCollectionId:s="",onSelectCollection:l,onClear:r,onUseAgain:i,onRemoveEntry:o,hideCollectionSelector:c=!1})=>{const[p,w]=S.useState(null),[f,d]=S.useState(!1),[C,b]=S.useState("input"),j=Array.isArray(n)?n.filter(T=>T.collectionId===s):[],N=Array.isArray(a)?a.find(T=>T.id===s):void 0,m=j.find(T=>T.id===p)||null;return S.useEffect(()=>{w(null),d(!1)},[s,n]),I.useEffect(()=>{if(!f)return;const T=P=>{if(P.ctrlKey&&(P.key==="c"||P.key==="C")){P.preventDefault();const k=C==="input"?(m==null?void 0:m.inputText)||"":(m==null?void 0:m.translatedText)||"";k&&(navigator.clipboard.writeText(k),ae.success(`Copied ${C==="input"?"input text":"translated text"}`))}else P.ctrlKey&&(P.key==="v"||P.key==="V")?(P.preventDefault(),m&&i(m)):P.key==="Backspace"&&(P.preventDefault(),m&&(d(!1),o(m.id)))};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[f,C,m,i,o]),t?e.jsxs("div",{className:je("h-full w-full flex flex-col"),children:[e.jsx("div",{className:"my-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Us,{className:"h-5 w-5 mr-2 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold",children:"Translation History"}),e.jsx("span",{className:"block text-sm mt-1 text-muted-foreground",children:"Previously translated content, organized by collection"})]})]}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"destructive",size:"sm",onClick:r,disabled:j.length===0,className:"h-8 text-xs",children:[e.jsx(rt,{className:"h-3.5 w-3.5 mr-1.5"}),"Clear All"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete all translation history in this collection"})})]})})]})}),e.jsx("div",{className:"px-2 pb-0 flex-1 min-h-0",children:e.jsxs(Mr,{direction:"horizontal",className:"h-[500px] w-full",children:[!c&&e.jsxs(e.Fragment,{children:[e.jsx(Yn,{defaultSize:25,minSize:20,maxSize:40,className:"border-r border-border/40",children:e.jsx("div",{className:"h-full flex flex-col",children:e.jsx(At,{className:"flex-1 px-2 pb-2",children:e.jsx("div",{className:"flex flex-col gap-1",children:a.length===0?e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-4 text-center",children:"No collections"}):a.map(T=>e.jsxs("div",{className:je("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer transition-all",T.id===s?"bg-primary/10 text-primary font-semibold":"hover:bg-muted/60 text-gray-700 dark:text-gray-200"),onClick:()=>l(T.id),children:[e.jsx(fn,{className:"h-4 w-4 mr-1 text-primary/70"}),e.jsx("span",{className:"truncate text-sm",children:T.name})]},T.id))})})})}),e.jsx(Pr,{withHandle:!0})]}),e.jsx(Yn,{defaultSize:c?100:75,minSize:c?0:40,children:e.jsxs("div",{className:"h-full flex flex-col px-4",children:[e.jsxs("div",{className:" pt-4 pb-2 font-semibold text-base flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4 text-primary/70"}),N?N.name:"No Collection Selected"]}),e.jsxs("div",{className:"flex-1 px-0 pb-4",children:[j.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ns,{className:"h-12 w-12 text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No translation history yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 max-w-md",children:"Translations will be saved here automatically as you use the translator"})]}):e.jsx(At,{className:"h-[400px] pr-2",children:e.jsx("div",{className:"space-y-2",children:j.map(T=>e.jsx(Ve,{className:je("transition-all cursor-pointer border-2",p===T.id&&f?"border-primary bg-primary/5":"border-transparent hover:border-border"),onClick:()=>{w(T.id),b("input"),d(!0)},children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(sa,{className:"h-3.5 w-3.5"}),new Date(T.timestamp).toLocaleString(),e.jsx(tt,{variant:"outline",className:"ml-2 text-xs px-1.5 py-0 h-5",children:T.model})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-4 mt-1",children:[e.jsx("span",{className:"truncate text-sm font-medium text-primary/90 max-w-[180px] md:max-w-[220px]",title:T.inputText,children:T.inputText}),e.jsx("span",{className:"hidden md:inline text-muted-foreground",children:"â†’"}),e.jsx("span",{className:"truncate text-sm text-muted-foreground max-w-[180px] md:max-w-[220px]",title:T.translatedText,children:T.translatedText})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Te,{children:[e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"outline",size:"sm",onClick:P=>{P.stopPropagation(),i(T)},className:"h-8",children:[e.jsx(pn,{className:"h-3.5 w-3.5 mr-1.5"}),"Reuse"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Load this translation again"})})]}),e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"icon",onClick:P=>{P.stopPropagation(),o(T.id)},className:"h-8 w-8 text-destructive",children:e.jsx(rt,{className:"h-4 w-4"})})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete this entry"})})]})]})})]})},T.id))})}),e.jsx(ol,{open:f,onOpenChange:d,children:e.jsxs(ul,{className:"w-screen h-screen max-w-none max-h-none flex flex-col",children:[e.jsx(ml,{children:e.jsx(fl,{children:"Translation Details"})}),e.jsx("div",{className:"flex-1 px-4 pb-32 overflow-y-auto",children:e.jsxs(ra,{value:C,onValueChange:T=>b(T),className:"w-full",children:[e.jsxs(la,{className:"mb-4 w-full",children:[e.jsx(gt,{value:"input",className:"flex-1",children:"Input Text"}),e.jsx(gt,{value:"translated",className:"flex-1",children:"Translated Text"})]}),e.jsxs(wt,{value:"input",children:[e.jsxs(In,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Input Text"]}),e.jsx(jt,{value:(m==null?void 0:m.inputText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]}),e.jsxs(wt,{value:"translated",children:[e.jsxs(In,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Translated Text"]}),e.jsx(jt,{value:(m==null?void 0:m.translatedText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 w-full flex flex-col items-center bg-background/95 py-6 z-50 border-t gap-4",children:[e.jsxs(q,{variant:"outline",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:async()=>{const T=C==="input"?(m==null?void 0:m.inputText)||"":(m==null?void 0:m.translatedText)||"";T&&(await navigator.clipboard.writeText(T),ae.success(`Copied ${C==="input"?"input text":"translated text"}`))},children:[e.jsx(ys,{className:"h-5 w-5 mr-2"}),"Copy ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+C"})]}),m&&e.jsxs(q,{variant:"default",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>i(m),children:[e.jsx(pn,{className:"h-5 w-5 mr-2"}),"Reuse ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+V"})]}),m&&e.jsxs(q,{variant:"destructive",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>{d(!1),o(m.id)},children:[e.jsx(rt,{className:"h-5 w-5 mr-2"}),"Delete ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Backspace"})]})]})]})})]})]})})]})})]}):null},hl=({mappingTable:t,updateMappingEntry:n,removeMappingEntry:a,addMappingEntry:s,showImportArea:l,toggleImportArea:r,mappingMarkdown:i,setMappingMarkdown:o,revertImport:c,showRevertButton:p,exportMarkdownTable:w,importMarkdownTable:f,error:d,arcrylicBg:C})=>e.jsxs(Ve,{className:je("border-border/60",C&&"arcrylic-blur"),children:[e.jsx(ot,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(ct,{className:"text-xl flex items-center",children:[e.jsx(Ys,{className:"h-5 w-5 mr-2 text-primary"}),"Mapping Table"]}),e.jsx(aa,{className:"text-sm text-muted-foreground mt-1",children:"Manage term mappings and transcriptions"})]}),e.jsxs(tt,{variant:"outline",className:"h-6",children:[t.length," ",t.length===1?"Entry":"Entries"]})]})}),e.jsx(Mt,{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(yn,{className:"h-4 w-4 mr-2"}),"Add New Term"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Add a new term mapping entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:l?"default":"outline",onClick:r,size:"sm",className:"h-9",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Import or export mapping data as markdown"})})]})}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"outline",onClick:()=>{o(`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
|:----------- |:------------- |:------------------------- |:------------------ |:------ |
| äº‹æƒ…æ˜¯è¿™æ ·çš„ | Chuyá»‡n lÃ  tháº¿ nÃ y | Phrase | | Opening phrase |
| æœ€è¿‘ | Gáº§n Ä‘Ã¢y | Time | | |
| å¸ˆå…„ | SÆ° huynh | Title/Relationship | Male | Elder martial brother |
| å…¶å®ž | Thá»±c ra | Adverb | | |`),l||r()},size:"sm",className:"h-9",children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Load a sample mapping table"})})]})})]})]}),e.jsx("div",{className:je("overflow-hidden transition-all duration-300 ease-in-out",l?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs(Ve,{className:"border-dashed",children:[e.jsx(ot,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(ct,{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[p&&e.jsxs(q,{variant:"destructive",size:"sm",onClick:c,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(bn,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:w,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(ia,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:f,className:"text-xs h-8",children:[e.jsx(na,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs(Mt,{className:"py-2",children:[e.jsx(jt,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:i,onChange:b=>o(b.target.value)}),d&&d.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(vn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:d})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Term / Name"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Transcription"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Gender"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Hs,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No terms added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((b,j)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.term,onChange:N=>n(j,"term",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Term or name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.transcription,onChange:N=>n(j,"transcription",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Transcription"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.type,onChange:N=>n(j,"type",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.gender,onChange:N=>n(j,"gender",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Gender"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.notes,onChange:N=>n(j,"notes",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"destructive",size:"sm",onClick:()=>a(j),className:"w-full h-8",children:[e.jsx(rt,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete this mapping entry"})})]})})})]},j))})]})})]})})]}),xl=({relationshipsTable:t,updateRelationshipEntry:n,removeRelationshipEntry:a,addRelationshipEntry:s,showImportArea:l,toggleImportArea:r,relationshipsMarkdown:i,setRelationshipsMarkdown:o,revertImport:c,showRevertButton:p,exportMarkdownTable:w,importMarkdownTable:f,error:d,arcrylicBg:C})=>e.jsxs(Ve,{className:je("border-border/60",C&&"arcrylic-blur"),children:[e.jsx(ot,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(ct,{className:"text-xl flex items-center",children:[e.jsx($n,{className:"h-5 w-5 mr-2 text-primary"}),"Relationships Table"]}),e.jsx(aa,{className:"text-sm text-muted-foreground mt-1",children:"Manage character relationships and address terms"})]}),e.jsxs(tt,{variant:"outline",className:"h-6",children:[t.length," ",t.length===1?"Entry":"Entries"]})]})}),e.jsx(Mt,{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(yn,{className:"h-4 w-4 mr-2"}),"Add New Relationship"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Add a new character relationship entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:l?"default":"outline",onClick:r,size:"sm",className:"h-9",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Import or export relationship data as markdown"})})]})}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"outline",onClick:()=>{o(`| Character A | Character B | Relationship | Address Terms (Aâ†’B) | Address Terms (Bâ†’A) | Notes |
|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
| VÆ°u ThiÃªn Thu | Triá»‡u KhÃ´ng Minh | Adoptive Younger Sister -> Elder Brother | Huynh trÆ°á»Ÿng, SÆ° huynh | NgÆ°Æ¡i | Formal/Respectful |
| LÃ¢m Linh Dao | VÆ°u ThiÃªn Thu | Female Lead 2 -> Female Lead 1 | Dao tá»· tá»·, Muá»™i | ThiÃªn Thu | Relationship strained |`),l||r()},size:"sm",className:"h-9",children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Load a sample relationship table"})})]})})]})]}),e.jsx("div",{className:je("overflow-hidden transition-all duration-300 ease-in-out",l?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs(Ve,{className:"border-dashed",children:[e.jsx(ot,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(ct,{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[p&&e.jsxs(q,{variant:"destructive",size:"sm",onClick:c,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(bn,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:w,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(ia,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:f,className:"text-xs h-8",children:[e.jsx(na,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs(Mt,{className:"py-2",children:[e.jsx(jt,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:i,onChange:b=>o(b.target.value)}),d&&d.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(vn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:d})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character A"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character B"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Relationship"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (Aâ†’B)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (Bâ†’A)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx($n,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No relationships added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((b,j)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.characterA,onChange:N=>n(j,"characterA",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.characterB,onChange:N=>n(j,"characterB",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.relationship,onChange:N=>n(j,"relationship",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Relationship type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.addressTermsAToB,onChange:N=>n(j,"addressTermsAToB",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How A addresses B"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.addressTermsBToA,onChange:N=>n(j,"addressTermsBToA",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How B addresses A"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Oe,{value:b.notes,onChange:N=>n(j,"notes",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"destructive",size:"sm",onClick:()=>a(j),className:"w-full h-8",children:[e.jsx(rt,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete this relationship entry"})})]})})})]},j))})]})})]})})]}),gl=({isVisible:t,settingsPanelRef:n,collections:a,collectionToEdit:s,setCollectionToEdit:l,editedCollectionName:r,setEditedCollectionName:i,addNewCollection:o,useCollection:c,renameCollection:p,requestDeleteCollection:w,showDeleteConfirmation:f,setShowDeleteConfirmation:d,confirmDeleteCollection:C,selectedCollectionId:b,error:j,setError:N,arcrylicBg:m,translationHistory:T,onClearHistory:P,onUseHistoryEntry:k,onRemoveHistoryEntry:L,updateMappingEntry:R,removeMappingEntry:h,addMappingEntry:_,showMappingImportArea:H,toggleMappingImportArea:se,mappingMarkdown:z,setMappingMarkdown:G,revertMappingImport:A,showMappingRevertButton:J,exportMappingMarkdown:Y,importMappingMarkdown:Q,updateRelationshipEntry:ie,removeRelationshipEntry:oe,addRelationshipEntry:Re,showRelationshipImportArea:me,toggleRelationshipImportArea:pe,relationshipsMarkdown:he,setRelationshipsMarkdown:y,revertRelationshipImport:B,showRelationshipRevertButton:F,exportRelationshipMarkdown:U,importRelationshipMarkdown:$,onApproveUpdate:V,onRejectUpdate:ee})=>{const X=a.find(D=>D.id===s),[ce,xe]=I.useState(!1),[te,M]=I.useState(""),Ae=I.useRef(null),[ke,ze]=I.useState(null),[ge,qe]=I.useState(""),Ie=I.useRef(null);S.useEffect(()=>{ce&&Ae.current&&Ae.current.focus()},[ce]),S.useEffect(()=>{ke&&Ie.current&&Ie.current.focus()},[ke]);const De=()=>{te.trim()?(o(te.trim()),M(""),xe(!1)):(xe(!1),M(""))},Ne=()=>{ke&&ge.trim()&&(i(ge),l(ke),p()),ze(null)};return e.jsx("div",{ref:n,className:je("overflow-hidden transition-all duration-300 ease-in-out",t?"h-auto sm:h-[800px] opacity-100 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700":"h-0 opacity-0 mb-0 pb-0 border-b-0"),tabIndex:-1,children:e.jsxs(Ve,{className:je("h-full w-full bg-white/90 dark:bg-zinc-900/90 shadow-xl rounded-2xl p-0 flex flex-col sm:flex-row border border-gray-100 dark:border-zinc-800 transition-all duration-300 overflow-hidden",m&&"backdrop-blur-md"),children:[e.jsxs("aside",{className:"w-full sm:w-1/3 bg-muted/40 dark:bg-muted/20 p-3 sm:p-4 flex flex-col gap-2 border-b sm:border-b-0 sm:border-r border-gray-200 dark:border-gray-800 min-h-[200px] sm:min-h-[320px] max-h-[220px] sm:max-h-none overflow-x-auto overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(fn,{className:"h-5 w-5 text-primary"}),"Collections"]}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{size:"icon",variant:"outline",onClick:()=>{xe(!0),M("")},"aria-label":"Add new collection",children:e.jsx(yn,{className:"h-5 w-5"})})}),e.jsx(ye,{children:"Add new collection"})]})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[ce&&e.jsx("div",{className:"flex items-center gap-2 px-2 py-2 mb-1 rounded-lg bg-muted/30 dark:bg-muted/10",children:e.jsx(Oe,{ref:Ae,value:te,onChange:D=>M(D.target.value),onBlur:De,onKeyDown:D=>{D.key==="Enter"?De():D.key==="Escape"&&(xe(!1),M(""))},placeholder:"Collection name",className:"flex-1 h-8 text-sm"})}),a.map(D=>e.jsxs("div",{className:je("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer group transition-all",D.id===s?"bg-primary/10 dark:bg-primary/20 text-primary":"hover:bg-muted/60 dark:hover:bg-muted/30 text-gray-700 dark:text-gray-200"),onClick:()=>{l(D.id),i(D.name),N(null)},children:[e.jsx(fn,{className:"h-4 w-4 mr-1 text-primary/70"}),ke===D.id?e.jsx(Oe,{ref:Ie,value:r,onChange:le=>i(le.target.value),onBlur:Ne,onKeyDown:le=>{le.key==="Enter"?Ne():le.key==="Escape"&&ze(null)},onClick:le=>le.stopPropagation(),className:"flex-1 h-8 text-sm",autoFocus:!0}):e.jsxs("div",{className:"flex flex-1 items-center min-w-0",children:[e.jsx("span",{className:"flex-1 truncate font-medium text-sm sm:text-base",children:D.name}),e.jsx(Ws,{className:"h-4 w-4 ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-primary transition-opacity cursor-pointer",onClick:le=>{le.stopPropagation(),l(D.id),i(D.name),ze(D.id),qe(D.name)}})]}),D.id===b?e.jsx(Kt,{className:"h-4 w-4 text-green-500 ml-1"}):e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{size:"icon",variant:"ghost",onClick:le=>{le.stopPropagation(),c(D.id)},className:"h-6 w-6 opacity-0 group-hover:opacity-100","aria-label":"Use this collection",children:e.jsx(Kt,{className:"h-4 w-4 text-green-500"})})}),e.jsx(ye,{children:"Use this collection"})]})}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{size:"icon",variant:"ghost",onClick:le=>{le.stopPropagation(),w(D.id)},className:"h-6 w-6 opacity-0 group-hover:opacity-100 text-red-500","aria-label":"Delete collection",children:e.jsx(rt,{className:"h-4 w-4"})})}),e.jsx(ye,{children:"Delete collection"})]})}),D.id===s&&ke!==D.id&&e.jsx("span",{className:"ml-2 text-xs font-semibold",children:"Editing"})]},D.id))]})]}),e.jsx("section",{className:"flex-1 min-w-0 p-3 sm:p-6 flex flex-col h-full",children:e.jsxs(ra,{defaultValue:"history",className:"h-full flex flex-col",children:[e.jsxs(la,{className:"mb-4",children:[e.jsx(gt,{value:"history",children:"History"}),e.jsx(gt,{value:"mapping",children:"Mapping"}),e.jsx(gt,{value:"relationships",children:"Relationships"}),e.jsx(gt,{value:"updates",children:"Updates"})]}),e.jsx(wt,{value:"history",className:"flex-1 overflow-auto",children:X&&e.jsx(pl,{show:!0,history:T.filter(D=>D.collectionId===X.id),collections:a,selectedCollectionId:X.id,onSelectCollection:l,onClear:P,onUseAgain:k,arcrylicBg:m,onRemoveEntry:L,hideCollectionSelector:!0})}),e.jsx(wt,{value:"mapping",className:"flex-1 overflow-auto",children:X&&e.jsx(hl,{mappingTable:X.mappingTable,updateMappingEntry:R,removeMappingEntry:h,addMappingEntry:_,showImportArea:H,toggleImportArea:se,mappingMarkdown:z,setMappingMarkdown:G,revertImport:A,showRevertButton:J,exportMarkdownTable:Y,importMarkdownTable:Q,error:j,arcrylicBg:m})}),e.jsx(wt,{value:"relationships",className:"flex-1 overflow-auto",children:X&&e.jsx(xl,{relationshipsTable:X.relationshipsTable,updateRelationshipEntry:ie,removeRelationshipEntry:oe,addRelationshipEntry:Re,showImportArea:me,toggleImportArea:pe,relationshipsMarkdown:he,setRelationshipsMarkdown:y,revertImport:B,showRevertButton:F,exportMarkdownTable:U,importMarkdownTable:$,error:j,arcrylicBg:m})}),e.jsx(wt,{value:"updates",className:"flex-1 overflow-auto",children:X!=null&&X.tableUpdateHistory.length?X.tableUpdateHistory.map(D=>e.jsx(Ve,{className:"mb-4",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Update on ",new Date(D.timestamp).toLocaleString()]}),e.jsx("span",{className:`px-2 py-1 rounded text-sm ${D.status==="pending"?"bg-yellow-100 text-yellow-800":D.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.status})]}),D.updates.added&&D.updates.added.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Added:"}),e.jsx("ul",{className:"list-disc list-inside",children:D.updates.added.map((le,Ke)=>e.jsx("li",{children:D.type==="mapping"?le.term:`${le.characterA}â€“${le.characterB}`},Ke))})]}),D.updates.updated&&D.updates.updated.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Updated:"}),e.jsx("ul",{className:"list-disc list-inside",children:D.updates.updated.map((le,Ke)=>e.jsx("li",{children:D.type==="mapping"?le.term:`${le.characterA}â€“${le.characterB}`},Ke))})]}),D.status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(q,{variant:"outline",size:"sm",onClick:()=>ee(D),children:"Reject"}),e.jsx(q,{variant:"default",size:"sm",onClick:()=>V(D),children:"Approve"})]}),(D.status==="approved"||D.status==="rejected")&&e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsx(q,{variant:"secondary",size:"sm",onClick:le=>{le.stopPropagation(),!(D.status==="rejected"&&!window.confirm("This update was previously rejected. Do you want to reapply it?"))&&V(D)},children:"Reapply"})})]})},D.id)):e.jsx("p",{className:"text-center text-muted-foreground",children:"No updates"})})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 px-2",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 sm:p-8 max-w-xs sm:max-w-md w-full mx-2 shadow-2xl border border-gray-200 dark:border-zinc-800 animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(rt,{className:"h-6 w-6 text-destructive"})," Confirm Deletion"]}),e.jsx("p",{className:"mb-2 text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:"Are you sure you want to delete this collection?"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3 flex-col sm:flex-row",children:[e.jsx(q,{variant:"outline",onClick:()=>d(!1),className:"min-w-[90px]",children:"Cancel"}),e.jsx(q,{variant:"destructive",onClick:C,className:"min-w-[90px]",children:"Delete"})]})]})})]})})},wl=({showTableUpdates:t,isTableUpdatesAnimating:n,arcrylicBg:a,pendingTableUpdates:s,expandedEntries:l,toggleEntryExpansion:r,setShowTableUpdates:i,setCurrentUpdateEntry:o,setShowUpdateConfirmation:c})=>t?e.jsxs(Ve,{className:je("fixed bottom-20 right-6 w-96 max-w-[calc(100vw-3rem)] z-[9998] shadow-lg transition-all duration-300 ease-in-out rounded-xl border-border/40",n?"translate-y-4 opacity-0":"translate-y-0 opacity-100",a&&"arcrylic-blur"),children:[e.jsxs(ot,{className:"p-4 pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ct,{className:"text-base font-medium",children:"Table Updates"}),e.jsx(tt,{variant:"outline",className:"ml-2 text-xs",children:s.length})]}),e.jsx(q,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"h-8 w-8 rounded-full",children:e.jsx(Zt,{className:"h-4 w-4"})})]}),e.jsx(Mt,{className:"p-3",children:e.jsx(At,{className:"max-h-[60vh] pr-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-3",children:s.length>0?s.map(p=>e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-muted/30 p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:p.type==="mapping"?"Mapping Table":"Relationships Table"}),e.jsx(tt,{variant:p.status==="pending"?"outline":p.status==="approved"?"secondary":"destructive",className:"ml-2 text-xs px-1.5",children:p.status})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(sa,{className:"h-3 w-3 mr-1"}),new Date(p.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:()=>r(p.id),children:l.has(p.id)?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(fs,{className:"h-4 w-4"})}),e.jsx(Te,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"outline",size:"sm",className:"h-8",onClick:()=>{o(p),c(!0)},children:"Review"})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Review and approve/reject changes"})})]})})]})]}),l.has(p.id)&&e.jsxs("div",{className:"p-3 space-y-3 bg-background",children:[p.updates.added.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(zs,{className:"h-3.5 w-3.5 mr-1 text-emerald-500"}),"Added Entries"]}),e.jsx(tt,{variant:"outline",className:"text-xs px-1.5 h-5",children:p.updates.added.length})]}),e.jsx(At,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:p.updates.added.map((w,f)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:p.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:w.term}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",w.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:w.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",w.characterB]})]})},f))})})]}),p.updates.updated.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(Ss,{className:"h-3.5 w-3.5 mr-1 text-blue-500"}),"Updated Entries"]}),e.jsx(tt,{variant:"outline",className:"text-xs px-1.5 h-5",children:p.updates.updated.length})]}),e.jsx(At,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:p.updates.updated.map((w,f)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:p.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:w.term}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",w.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:w.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",w.characterB]})]})},f))})})]})]})]},p.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[e.jsx(Rs,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending updates"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates will appear here when available"})]})})})})]}):null,vl=t=>!t||typeof t!="object"?(console.warn("Invalid mapping entry:",t),null):{term:String(t.term||""),transcription:String(t.transcription||""),type:String(t.type||""),gender:String(t.gender||""),notes:String(t.notes||"")},bl=t=>!t||typeof t!="object"?(console.warn("Invalid relationship entry:",t),null):{characterA:String(t.characterA||""),characterB:String(t.characterB||""),relationship:String(t.relationship||""),addressTermsAToB:String(t.addressTermsAToB||""),addressTermsBToA:String(t.addressTermsBToA||""),notes:String(t.notes||"")},ea=(t,n,a,s)=>{if(!Array.isArray(n))return console.error("Invalid entries format:",n),{newTable:t,updatedCount:0,added:[],updated:[]};const l=[...t];let r=0;const i=[],o=[];return n.forEach(c=>{const p=a(c);if(p){const w=s(l,p);w>=0?(l[w]=p,o.push(p)):(l.push(p),i.push(p)),r++}}),{newTable:l,updatedCount:r,added:i,updated:o}},Il=()=>{const t=ds(),[n,a]=I.useState(""),[s,l]=I.useState(""),[r,i]=I.useState(!1),[o,c]=I.useState(null),[p,w]=I.useState(!1),[f,d]=I.useState([]),[,C]=I.useState(!1),[,b]=I.useState(!0),[j,N]=I.useState("gemini-2.0-flash-exp"),m=["gemini-2.0-flash-exp","gemini-2.0-flash-exp-image-generation","gemini-2.0-flash-thinking-exp-01-21","gemini-2.5-pro-exp-03-25"],T={"gemini-2.0-flash-exp":"Recommended","gemini-2.0-flash-exp-image-generation":"Image Generation","gemini-2.0-flash-thinking-exp-01-21":"No support for function calling","gemini-2.5-pro-exp-03-25":"Pro but Stupid (Super slow)"},[P,k]=I.useState(null),[L,R]=I.useState([]),[h,_]=I.useState(""),[H,se]=I.useState(!1),[z,G]=I.useState(""),[A,J]=I.useState(""),[Y,Q]=I.useState(""),[ie,oe]=I.useState(!1),[Re]=I.useState("mapping"),[me,pe]=I.useState([]),[he,y]=I.useState([]),[B,F]=I.useState(""),[U,$]=I.useState(""),[V,ee]=I.useState(!1),[X,ce]=I.useState([]),[xe,te]=I.useState([]),[M,Ae]=I.useState(!1),[ke,ze]=I.useState(!1),[ge,qe]=I.useState([]),[Ie,De]=I.useState(!1),[Ne,D]=I.useState(null),[le,Ke]=I.useState(!1),ut=S.useRef(null),Ct=I.useRef(null),[mt,an]=I.useState(new Set),Lt=u=>{an(g=>{const x=new Set(g);return x.has(u)?x.delete(u):x.add(u),x})};I.useEffect(()=>{(async()=>{try{const g=await Ft("apiKey"),x=await Ft("translateModel"),v=await Ft("translationCollections"),E=await Ft("translationHistory");if(g&&k(g),x&&N(x),E&&d(E),v&&v.length>0)R(v),_(v[0].id),pe(v[0].mappingTable),y(v[0].relationshipsTable);else{const W={id:Date.now().toString(),name:"Default Collection",mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]};R([W]),_(W.id)}}catch(g){console.error("Error loading settings:",g)}})()},[]),I.useEffect(()=>{h&&!z&&G(h)},[h,z]);const sn=async u=>{N(u),await Pe("translateModel",u)},nt=(u,g)=>{try{const x=u.trim().split(`
`);if(x.length<3)return[];const v=x.slice(2);return g?v.map(E=>{const W=E.split("|").filter((fe,He,Qe)=>He!==0&&He!==Qe.length-1||fe.trim()!=="").map(fe=>fe.trim());if(W.length<5)for(console.warn("Row has fewer than expected columns:",E);W.length<5;)W.push("");return{term:W[0]||"",transcription:W[1]||"",type:W[2]||"",gender:W[3]||"",notes:W[4]||""}}):v.map(E=>{const W=E.split("|").filter((fe,He,Qe)=>He!==0&&He!==Qe.length-1||fe.trim()!=="").map(fe=>fe.trim());if(W.length<6)for(console.warn("Row has fewer than expected columns:",E);W.length<6;)W.push("");return{characterA:W[0]||"",characterB:W[1]||"",relationship:W[2]||"",addressTermsAToB:W[3]||"",addressTermsBToA:W[4]||"",notes:W[5]||""}})}catch(x){return console.error("Error parsing markdown table:",x),[]}},Ze=(u,g)=>{if(u.length===0)return"";let x="";return g?(x=`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
`,x+=`|:----------- |:------------- |:------------------------- |:------------------ |:------ |
`,u.forEach(v=>{x+=`| ${v.term} | ${v.transcription} | ${v.type} | ${v.gender} | ${v.notes} |
`})):(x=`| Character A | Character B | Relationship | Address Terms (Aâ†’B) | Address Terms (Bâ†’A) | Notes |
`,x+=`|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
`,u.forEach(v=>{x+=`| ${v.characterA} | ${v.characterB} | ${v.relationship} | ${v.addressTermsAToB} | ${v.addressTermsBToA} | ${v.notes} |
`})),x},_t=(u,g)=>{try{if(!u.trim()){ae.error("Please enter a markdown table to import"),c("Please enter a markdown table to import");return}if(!u.includes("|")){ae.error("Invalid table format. Table must contain pipe characters (|)"),c("Import failed: Invalid table format. Table must contain pipe characters (|)");return}const x=u.trim().split(`
`);if(x.length<3){ae.error("Table must contain at least 3 lines (header, separator, and data row)"),c("Import failed: Table must contain at least 3 lines (header, separator, and data row)");return}const v=x[1];if(!v.includes("|")||!v.includes("-")){ae.error("Second line must be a separator with pipes (|) and dashes (-)"),c("Import failed: Second line must be a separator with pipes (|) and dashes (-)");return}const E=nt(u,g);if(E.length===0){ae.error("No valid data rows found in the table"),c("Import failed: No valid data rows found in the table");return}c(null),g?(ce(me),pe(E)):(te(he),y(E)),Ye(g,E),Ae(!0),setTimeout(()=>{Ae(!1)},6e4),ae.success(`${g?"Mapping":"Relationships"} table imported successfully`)}catch(x){console.error("Error importing markdown table:",x),ae.error(`Import failed: ${x instanceof Error?x.message:"Unknown error"}`),c(`Import failed: ${x instanceof Error?x.message:"Unknown error"}`)}},Ht=u=>{u?(pe(X),Ye(!0,X),ce([])):(y(xe),Ye(!1,xe),te([])),Ae(!1),ae.success(`${u?"Mapping":"Relationships"} table reverted to previous state`)},Ye=async(u,g)=>{if(!h)return;const x=L.map(v=>v.id===h?{...v,mappingTable:u?g:v.mappingTable,relationshipsTable:u?v.relationshipsTable:g}:v);R(x),await Pe("translationCollections",x)},Bt=u=>{const g=Ze(u?me:he,u);u?F(g):$(g),ee(!0)},Tt=u=>{if(u===h)return;O();const g=L.find(x=>x.id===u);g&&(_(u),pe(g.mappingTable),y(g.relationshipsTable))},O=()=>{if(!h)return;const u=L.map(g=>g.id===h?{...g,mappingTable:me,relationshipsTable:he}:g);R(u),Pe("translationCollections",u)},ne=u=>{if(!u.trim()){ae.error("Please enter a name for the new collection"),c("Please enter a name for the new collection");return}O();const g={id:Date.now().toString(),name:u,mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]},x=[...L,g];R(x),_(g.id),pe([]),y([]),Pe("translationCollections",x),ae.success(`Collection "${u}" created`)},re=u=>{if(L.length<=1){ae.error("You must have at least one collection"),c("You must have at least one collection");return}const g=L.find(v=>v.id===u);if(!g)return;const x=L.filter(v=>v.id!==u);if(u===h&&x.length>0){const v=x[0];_(v.id),pe(v.mappingTable),y(v.relationshipsTable)}R(x),Pe("translationCollections",x).then(()=>{ae.success(`Collection "${g.name}" deleted`)}).catch(v=>{console.error("Failed to save collections after deletion:",v),ae.error("Failed to delete collection")}),u===z&&(G(""),J(""))},Z=()=>{ee(!V),V||(Re==="mapping"?F(Ze(me,!0)):$(Ze(he,!1)))},de=u=>{a(u.inputText),l(""),N(u.model),Tt(u.collectionId),C(!1),ae.info("Previous translation loaded")},Me=async()=>{d([]),await Pe("translationHistory",[]),ae.success("Translation history cleared")},Ee=async u=>{const g=L.find(E=>E.id===h);if(!g)return;const v=[{id:Date.now().toString(),timestamp:Date.now(),inputText:n,translatedText:u,model:j,collectionId:h,collectionName:g.name},...f].slice(0,50);d(v),await Pe("translationHistory",v)},We=async()=>{if(!n.trim()){ae.error("Please enter text to translate"),c("Please enter text to translate");return}O(),i(!0),c(null),ae.promise(async()=>{try{const u=Ze(me,!0),g=Ze(he,!1),x=await ps(n,u,g,P||"default-key",j,{onMappingTableUpdate:v=>{console.log("Received entries mapping table:",v);try{const{updatedCount:E,added:W,updated:fe}=ea(me,v,vl,(He,Qe)=>He.findIndex(Ut=>Ut.term===Qe.term));E>0&&kn("mapping",W,fe)}catch(E){console.error("Error updating mapping table:",E),ae.error("Failed to update mapping table")}},onRelationshipsTableUpdate:v=>{console.log("Received entries relationships table:",v);try{const{updatedCount:E,added:W,updated:fe}=ea(he,v,bl,(He,Qe)=>He.findIndex(Ut=>Ut.characterA===Qe.characterA&&Ut.characterB===Qe.characterB));E>0&&kn("relationships",W,fe)}catch(E){console.error("Error updating relationships table:",E),ae.error("Failed to update relationships table")}}});if(x.hasError)throw c(x.thinking||"Translation failed. Please try again."),new Error(x.thinking||"Translation failed");{const v=x.ocrText||"";return l(v),await Ee(v),v}}catch(u){throw console.error("Translation error:",u),c("An error occurred during translation. Please try again."),u}finally{i(!1)}},{loading:"Translating text...",success:"Translation completed successfully",error:u=>`Translation failed: ${u instanceof Error?u.message:"Unknown error"}`})},_e=()=>{navigator.clipboard.writeText(s),w(!0),ae.success("Copied to clipboard"),setTimeout(()=>w(!1),2e3)};I.useEffect(()=>{const u=()=>{window.scrollY>200?b(!0):b(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const Xe=()=>{if(console.log("Scrolling to top attempt"),ut.current){ut.current.scrollIntoView({behavior:"smooth"}),console.log("Used scrollIntoView");return}try{window.scroll({top:0,left:0,behavior:"smooth"}),console.log("Used window.scroll")}catch{window.scrollTo(0,0),console.log("Used fallback scrollTo")}},Ge=()=>{a(""),l(""),c(null),ae.info("Text cleared")},Ue=()=>{if(!z||!A.trim())return;const u=L.map(g=>g.id===z?{...g,name:A.trim()}:g);R(u),Pe("translationCollections",u),ae.success(`Collection renamed to "${A}"`)},ft=u=>{const g=!H;if(se(g),g){const x=L.find(v=>v.id===u);x&&(G(u),J(x.name))}};I.useEffect(()=>{H&&Ct.current&&setTimeout(()=>{var u;(u=Ct.current)==null||u.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[H]);const Ot=()=>{se(!1),G(""),J(""),Q(""),oe(!1),setTimeout(()=>{var u;(u=ut.current)==null||u.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},Va=u=>{console.log("Delete confirmation requested for collection:",u),Q(u),setTimeout(()=>{oe(!0),console.log("showDeleteConfirmation set to true")},0)},Wa=()=>{if(console.log("Confirming deletion of collection:",Y),!!Y)try{re(Y),oe(!1),Q("")}catch(u){console.error("Error deleting collection:",u),ae.error("Failed to delete collection")}},Ga=u=>{Tt(u),Ot()};I.useEffect(()=>{if(z){const u=L.find(g=>g.id===z);u&&J(u.name)}},[z,L]);const kn=(u,g,x)=>{const v={id:Date.now().toString(),timestamp:Date.now(),type:u,updates:{added:g,updated:x},status:"pending"};qe(E=>[...E,v]),ze(!0),Ke(!0),setTimeout(()=>Ke(!1),300),ae.info("New table update available for review",{description:`${g.length} new entries and ${x.length} updated entries`,action:{label:"Review",onClick:()=>ze(!0)}})},qa=async u=>{try{if(u.type==="mapping"){const g=[...me];u.updates.added.forEach(x=>g.push(x)),u.updates.updated.forEach(x=>{const v=g.findIndex(E=>E.term===x.term);v>=0&&(g[v]=x)}),pe(g),await Ye(!0,g)}else{const g=[...he];u.updates.added.forEach(x=>g.push(x)),u.updates.updated.forEach(x=>{const v=g.findIndex(E=>E.characterA===x.characterA&&E.characterB===x.characterB);v>=0&&(g[v]=x)}),y(g),await Ye(!1,g)}}catch(g){console.error("Error reapplying update:",g),ae.error("Failed to reapply update")}},rn=async(u,g)=>{try{if(g)if(u.type==="mapping"){const v=[...me];u.updates.added.forEach(E=>v.push(E)),u.updates.updated.forEach(E=>{const W=v.findIndex(fe=>fe.term===E.term);W>=0&&(v[W]=E)}),pe(v),await Ye(!0,v)}else{const v=[...he];u.updates.added.forEach(E=>v.push(E)),u.updates.updated.forEach(E=>{const W=v.findIndex(fe=>fe.characterA===E.characterA&&fe.characterB===E.characterB);W>=0&&(v[W]=E)}),y(v),await Ye(!1,v)}const x=L.map(v=>{if(v.id===h){const E=[...v.tableUpdateHistory||[]],W={...u,status:g?"approved":"rejected"};return E.push(W),{...v,tableUpdateHistory:E,mappingTable:g&&u.type==="mapping"?me:v.mappingTable,relationshipsTable:g&&u.type==="relationships"?he:v.relationshipsTable}}return v});R(x),await Pe("translationCollections",x),qe(v=>{const E=v.filter(W=>W.id!==u.id);return E.length===0&&ze(!1),E}),De(!1),D(null),ae.success(`Table update ${g?"approved":"rejected"} successfully`)}catch(x){console.error("Error handling update confirmation:",x),ae.error(`Failed to ${g?"approve":"reject"} update`)}};I.useEffect(()=>{if(L.length===0){_(""),pe([]),y([]);return}L.find(g=>g.id===h)||(_(L[0].id),pe(L[0].mappingTable),y(L[0].relationshipsTable))},[L,h]);const Ka=async u=>{const g=f.filter(x=>x.id!==u);d(g),await Pe("translationHistory",g)},Ya=async(u,g,x)=>{if(!z)return;const v=L.map(E=>{if(E.id===z){const W=E.mappingTable.map((fe,He)=>He===u?{...fe,[g]:x}:fe);return{...E,mappingTable:W}}return E});R(v),await Pe("translationCollections",v),h===z&&pe(v.find(E=>E.id===z).mappingTable)},Xa=async u=>{if(!z)return;const g=L.map(x=>{if(x.id===z){const v=x.mappingTable.filter((E,W)=>W!==u);return{...x,mappingTable:v}}return x});R(g),await Pe("translationCollections",g),h===z&&pe(g.find(x=>x.id===z).mappingTable)},Ja=async()=>{if(!z)return;const u={term:"",transcription:"",type:"",gender:"",notes:""},g=L.map(x=>x.id===z?{...x,mappingTable:[...x.mappingTable,u]}:x);R(g),await Pe("translationCollections",g),h===z&&pe(g.find(x=>x.id===z).mappingTable)},Za=async(u,g,x)=>{if(!z)return;const v=L.map(E=>{if(E.id===z){const W=E.relationshipsTable.map((fe,He)=>He===u?{...fe,[g]:x}:fe);return{...E,relationshipsTable:W}}return E});R(v),await Pe("translationCollections",v),h===z&&y(v.find(E=>E.id===z).relationshipsTable)},Qa=async u=>{if(!z)return;const g=L.map(x=>{if(x.id===z){const v=x.relationshipsTable.filter((E,W)=>W!==u);return{...x,relationshipsTable:v}}return x});R(g),await Pe("translationCollections",g),h===z&&y(g.find(x=>x.id===z).relationshipsTable)},es=async()=>{if(!z)return;const u={characterA:"",characterB:"",relationship:"",addressTermsAToB:"",addressTermsBToA:"",notes:""},g=L.map(x=>x.id===z?{...x,relationshipsTable:[...x.relationshipsTable,u]}:x);R(g),await Pe("translationCollections",g),h===z&&y(g.find(x=>x.id===z).relationshipsTable)};return e.jsxs("div",{className:"container mx-auto p-4 flex flex-col gap-6 pb-10 relative",children:[e.jsx("div",{ref:ut,className:"absolute top-0"}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Text Translator"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(q,{variant:"outline",onClick:Ge,"aria-label":"Clear all text",children:[e.jsx($s,{className:"h-5 w-5 mr-2"}),"Clear"]})})]}),e.jsx(tr,{inputText:n,setInputText:a,translatedText:s,isTranslating:r,error:o,isCopied:p,onTranslate:We,onCopy:_e,selectedModel:j,onModelChange:sn,models:m,selectedCollectionId:h,collections:L,onCollectionChange:Tt,isCollectionManagementVisible:H,onToggleCollectionManagement:ft,arcrylicBg:t,modelDescriptions:T}),e.jsx(gl,{isVisible:H,settingsPanelRef:Ct,collections:L,collectionToEdit:z,setCollectionToEdit:G,editedCollectionName:A,setEditedCollectionName:J,addNewCollection:ne,useCollection:Ga,renameCollection:Ue,requestDeleteCollection:Va,showDeleteConfirmation:ie,setShowDeleteConfirmation:oe,confirmDeleteCollection:Wa,collectionToDelete:Y,selectedCollectionId:h,error:o,setError:c,arcrylicBg:t,translationHistory:f,onClearHistory:Me,onUseHistoryEntry:de,onRemoveHistoryEntry:Ka,updateMappingEntry:Ya,removeMappingEntry:Xa,addMappingEntry:Ja,showMappingImportArea:V,toggleMappingImportArea:Z,mappingMarkdown:B,setMappingMarkdown:F,revertMappingImport:()=>Ht(!0),showMappingRevertButton:M,exportMappingMarkdown:()=>Bt(!0),importMappingMarkdown:()=>_t(B,!0),updateRelationshipEntry:Za,removeRelationshipEntry:Qa,addRelationshipEntry:es,showRelationshipImportArea:V,toggleRelationshipImportArea:Z,relationshipsMarkdown:U,setRelationshipsMarkdown:$,revertRelationshipImport:()=>Ht(!1),showRelationshipRevertButton:M,exportRelationshipMarkdown:()=>Bt(!1),importRelationshipMarkdown:()=>_t(U,!1),onApproveUpdate:qa,onRejectUpdate:u=>rn(u,!1)}),e.jsx(q,{variant:"default",size:"lg",className:"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-[9999] w-12 h-12 p-0",onClick:()=>{console.log("Button clicked"),Xe()},"aria-label":"Scroll to top",children:e.jsx(bn,{className:"h-6 w-6"})}),ke&&e.jsx(wl,{showTableUpdates:ke,isTableUpdatesAnimating:le,arcrylicBg:t,pendingTableUpdates:ge,expandedEntries:mt,toggleEntryExpansion:Lt,setShowTableUpdates:ze,setCurrentUpdateEntry:D,setShowUpdateConfirmation:De}),Ie&&Ne&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:e.jsx(Ve,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Confirm Table Update"}),e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{De(!1),D(null)},className:"h-8 w-8 p-0",children:e.jsx(Zt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Added Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:Ne.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:Ne.updates.added.map((u,g)=>e.jsx("tr",{className:"border-t",children:Ne.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.term}),e.jsx("td",{className:"p-2",children:u.transcription}),e.jsx("td",{className:"p-2",children:u.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.characterA}),e.jsx("td",{className:"p-2",children:u.characterB}),e.jsx("td",{className:"p-2",children:u.relationship})]})},g))})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Updated Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:Ne.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:Ne.updates.updated.map((u,g)=>e.jsx("tr",{className:"border-t",children:Ne.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.term}),e.jsx("td",{className:"p-2",children:u.transcription}),e.jsx("td",{className:"p-2",children:u.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.characterA}),e.jsx("td",{className:"p-2",children:u.characterB}),e.jsx("td",{className:"p-2",children:u.relationship})]})},g))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(q,{variant:"outline",onClick:()=>{Ne&&rn(Ne,!1)},children:"Reject"}),e.jsx(q,{variant:"default",onClick:()=>{Ne&&rn(Ne,!0)},children:"Approve"})]})]})]})})})]})};export{Il as default};
