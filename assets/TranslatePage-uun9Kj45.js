import{c as Te,ai as ts,r as I,aj as ns,ak as as,al as ss,am as rs,an as ls,ao as En,j as e,a as je,G as Rn,ap as is,B as q,a3 as os,l as cs,aq as ta,R as T,v as ae,F as na,ar as ds,a5 as Ft,a4 as Pe}from"./index-D0vzPyQ_.js";import{C as qe,a as ut,b as mt,c as aa,e as Mt}from"./card-BGxUJD7I.js";import{S as An,b as Mn,c as Pn,d as Dn,e as In,a as bn,G as us,C as sa,h as ms,f as fs,i as ps}from"./select-DRNEjsQk.js";import{T as Nt,a as $n}from"./index-BLq4s67r.js";import{T as Se,a as ve,b as be,c as ye}from"./tooltip-w3fwW2CY.js";import{B as st}from"./badge-Cfnda_Do.js";import{A as hs}from"./arrow-right-vUd8-FHh.js";import{I as Fe}from"./input-BfLFrxdn.js";import{T as ra,a as la,b as wt,c as vt}from"./index-BI9IXr5p.js";import{S as At,X as Qt}from"./scroll-area-Dg0CBmY5.js";import{T as xs,R as gs,C as ws,P as vs,O as bs}from"./index-CY0q2Vo6.js";import{T as ot}from"./trash-2-rY4rdIUB.js";import{C as ys}from"./copy-BPRuCt2U.js";import{F as ia}from"./file-down-kC9mc14Y.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Ns=Te("Archive",js);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],yn=Te("ArrowUp",Cs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],Ts=Te("ChevronsDown",Ss);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],zs=Te("ChevronsUp",ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rs=Te("CircleCheckBig",Es);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Yt=Te("CircleCheck",As);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Xt=Te("Clipboard",Ms);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ds=Te("Database",Ps);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],$s=Te("Eraser",Is);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],oa=Te("FilePlus",Ls);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Hs=Te("FileText",_s);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],pn=Te("Folder",Bs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Us=Te("History",Os);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ca=Te("Lightbulb",Fs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ws=Te("Pencil",Vs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jn=Te("Plus",Gs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],hn=Te("RotateCcw",qs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],Ys=Te("Text",Ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ln=Te("Users",Xs);function xn(t){const n=ts(()=>as(t)),{isStatic:a}=I.useContext(ns);if(a){const[,s]=I.useState(t);I.useEffect(()=>n.on("change",s),[])}return n}function Js(t,n){const a=xn(n()),s=()=>a.set(n());return s(),ss(()=>{const l=()=>rs.preRender(s,!1,!0),r=t.map(i=>i.on("change",l));return()=>{r.forEach(i=>i()),ls(s)}}),a}function Zs(t,...n){const a=t.length;function s(){let l="";for(let r=0;r<a;r++){l+=t[r];const i=n[r];i&&(l+=En(i)?i.get():i)}return l}return Js(n.filter(En),s)}const Qs=({text:t,className:n})=>{let a=xn(0),s=xn(0);const[l,r]=I.useState(""),[i,o]=I.useState(null);I.useEffect(()=>{if(i){const{width:h,height:y}=i.getBoundingClientRect(),f=h*y,d=Math.floor(f/36),C=_n(d);r(C)}},[i]);function c({currentTarget:h,clientX:y,clientY:f}){let{left:d,top:C}=h.getBoundingClientRect();a.set(y-d),s.set(f-C);const{width:w,height:b}=h.getBoundingClientRect(),N=w*b,m=Math.floor(N/36),S=_n(m);r(S)}return e.jsx("div",{className:je("p-0.5 bg-transparent flex items-center justify-center w-full h-full relative",n),children:e.jsxs("div",{ref:o,onMouseMove:c,className:"group/card rounded w-full relative overflow-hidden bg-transparent flex items-center justify-center h-full",children:[e.jsx(er,{mouseX:a,mouseY:s,randomString:l}),e.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:e.jsxs("div",{className:"relative h-full w-full max-w-[80%] max-h-[80%] rounded-full flex items-center justify-center text-white font-bold",children:[e.jsx("div",{className:"absolute w-full h-full bg-white/[0.8] dark:bg-black/[0.8] blur-sm rounded-full"}),e.jsx("span",{className:"dark:text-white text-black z-20 text-xl lg:text-3xl",children:t})]})})]})})};function er({mouseX:t,mouseY:n,randomString:a}){let s=Zs`radial-gradient(500px at ${t}px ${n}px, white, transparent)`,l={maskImage:s,WebkitMaskImage:s};return e.jsxs("div",{className:"pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0"}),e.jsx(Rn.div,{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-blue-700 opacity-0 group-hover/card:opacity-100 backdrop-blur-xl transition duration-500",style:l}),e.jsx(Rn.div,{className:"absolute inset-0 opacity-0 mix-blend-overlay  group-hover/card:opacity-100",style:l,children:e.jsx("p",{className:"absolute inset-x-0 text-4xl h-full break-words whitespace-pre-wrap text-white font-mono font-bold transition duration-500",children:a})})]})}const Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",_n=t=>{let n="";for(let a=0;a<t;a++)n+=Vt.charAt(Math.floor(Math.random()*(Vt==null?void 0:Vt.length)));return n},Hn=32e3,tr=({inputText:t,setInputText:n,translatedText:a,isTranslating:s,error:l,isCopied:r,onTranslate:i,onCopy:o,selectedModel:c,onModelChange:h,models:y,selectedCollectionId:f,collections:d,onCollectionChange:C,isCollectionManagementVisible:w,onToggleCollectionManagement:b,arcrylicBg:N,modelDescriptions:m})=>{var D;const[S,P]=I.useState(!0),k=t==null?void 0:t.length;return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 md:gap-8 min-h-[650px] w-full",children:[e.jsxs(qe,{className:je("flex-1 flex flex-col shadow-lg rounded-xl border-0 mb-6 lg:mb-0",N&&"arcrylic-blur"),children:[e.jsx(ut,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(mt,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"📝 Translate Text"}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(st,{variant:"outline",className:"px-2 sm:px-3 py-1 h-auto rounded-full text-sm sm:text-base bg-muted/40",children:[e.jsx(is,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"truncate max-w-[100px] sm:max-w-none",children:c})]})}),e.jsxs(ye,{side:"left",children:[e.jsx("p",{className:"text-xs",children:"Current translation model"}),m&&m[c]&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:m[c]})]})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Nt,{id:"inputText",placeholder:"Type or paste text to translate...",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] break-words break-all whitespace-pre-wrap",value:t,maxLength:Hn,onChange:R=>n(R.target.value),"aria-label":"Input text to translate"}),e.jsxs("span",{className:"absolute bottom-2 right-4 text-xs text-muted-foreground/70",children:[k,"/",Hn]}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"icon",onClick:()=>n(""),disabled:!t.trim()||s,className:"absolute top-2 right-2 rounded-full","aria-label":"Clear input",children:e.jsx(hn,{className:"h-5 w-5"})})}),e.jsx(ye,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Clear input"})})]})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center w-full sm:w-auto",children:[e.jsxs(An,{value:c,onValueChange:h,children:[e.jsx(Mn,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Pn,{placeholder:"Model",children:e.jsx("span",{className:"truncate",children:c})})}),e.jsx(Dn,{className:"z-[100]",children:y.map(R=>e.jsx(In,{value:R,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"truncate",children:R}),m&&m[R]&&e.jsx("span",{className:"text-xs text-muted-foreground",children:m[R]})]})},R))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(An,{value:f,onValueChange:C,children:[e.jsx(Mn,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Pn,{placeholder:"Collection",children:e.jsx("span",{className:"truncate",children:((D=d.find(R=>R.id===f))==null?void 0:D.name)||"Collection"})})}),e.jsx(Dn,{className:"z-[100]",children:d.map(R=>e.jsx(In,{value:R.id,children:e.jsx("span",{className:"truncate",children:R.name})},R.id))})]}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:w?"default":"outline",size:"icon",onClick:()=>b(f),className:"h-8 w-8 rounded-full ml-1","aria-label":"Manage collections",children:e.jsx(os,{className:"h-3 w-3"})})}),e.jsx(ye,{side:"top",children:e.jsx("p",{className:"text-xs",children:"Manage collections"})})]})})]})]}),e.jsx(q,{onClick:i,disabled:s||!t.trim(),className:"h-8 px-3 rounded-full shadow-sm text-sm w-full sm:w-auto",size:"default","aria-label":"Translate",children:s?e.jsxs(e.Fragment,{children:[e.jsx(cs,{className:"mr-2 h-3.5 w-3.5 animate-spin"})," Translating..."]}):e.jsxs(e.Fragment,{children:["Translate ",e.jsx(hs,{className:"ml-2 h-3.5 w-3.5"})]})})]})]})]}),e.jsxs(qe,{className:je("flex-1 flex flex-col shadow-lg rounded-3xl border-0 relative",N&&"arcrylic-blur"),children:[e.jsx(ut,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(mt,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"🌐 Translation"}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"icon",onClick:o,disabled:!a,className:"rounded-full","aria-label":"Copy translation",children:r?e.jsx(Yt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}):e.jsx(Xt,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsx(ye,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Copy translation"})})]})})]})}),l&&!l.includes("import")&&S&&e.jsx("div",{className:"mx-3 sm:mx-6 mt-3 sm:mt-4 mb-1 sm:mb-2",children:e.jsxs("div",{className:"flex items-center bg-destructive/10 border border-destructive/30 text-destructive rounded-lg px-3 sm:px-4 py-2 relative",children:[e.jsx(bn,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2 flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-xs sm:text-sm",children:l}),e.jsx(q,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 ml-1 sm:ml-2 text-destructive/70 hover:text-destructive p-0",onClick:()=>P(!1),"aria-label":"Dismiss error",children:"×"})]})}),e.jsx("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Nt,{id:"translatedText",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] break-words break-all whitespace-pre-wrap",value:s?"":a,readOnly:!0,placeholder:"Translation will appear here...","aria-label":"Translated text output"}),s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-xl z-10 min-h-[200px] sm:min-h-[300px] max-h-[calc(100vh-200px)]",children:e.jsx(Qs,{text:"Translating...",className:"w-full h-full"})}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"default",size:"icon",onClick:o,disabled:!a,className:"absolute bottom-3 right-3 rounded-full shadow-lg h-9 w-9 sm:h-10 sm:w-10","aria-label":"Copy translation",children:r?e.jsx(Yt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"}):e.jsx(Xt,{className:"h-5 w-5 sm:h-6 sm:w-6"})})}),e.jsx(ye,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Copy translation"})})]})})]})})]})]})},{createElement:Ct,createContext:nr,forwardRef:da,useCallback:_e,useContext:ua,useEffect:ct,useImperativeHandle:ma,useLayoutEffect:ar,useMemo:sr,useRef:He,useState:yt}=ta,Bn=ta[`useId${Math.random()}`.slice(0,5)],rr=ar,en=nr(null);en.displayName="PanelGroupContext";const dt=rr,lr=typeof Bn=="function"?Bn:()=>null;let ir=0;function Nn(t=null){const n=lr(),a=He(t||n||null);return a.current===null&&(a.current=""+ir++),t??a.current}function fa({children:t,className:n="",collapsedSize:a,collapsible:s,defaultSize:l,forwardedRef:r,id:i,maxSize:o,minSize:c,onCollapse:h,onExpand:y,onResize:f,order:d,style:C,tagName:w="div",...b}){const N=ua(en);if(N===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:m,expandPanel:S,getPanelSize:P,getPanelStyle:k,groupId:D,isPanelCollapsed:R,reevaluatePanelConstraints:x,registerPanel:L,resizePanel:_,unregisterPanel:se}=N,E=Nn(i),G=He({callbacks:{onCollapse:h,onExpand:y,onResize:f},constraints:{collapsedSize:a,collapsible:s,defaultSize:l,maxSize:o,minSize:c},id:E,idIsFromProps:i!==void 0,order:d});He({didLogMissingDefaultSizeWarning:!1}),dt(()=>{const{callbacks:X,constraints:J}=G.current,Q={...J};G.current.id=E,G.current.idIsFromProps=i!==void 0,G.current.order=d,X.onCollapse=h,X.onExpand=y,X.onResize=f,J.collapsedSize=a,J.collapsible=s,J.defaultSize=l,J.maxSize=o,J.minSize=c,(Q.collapsedSize!==J.collapsedSize||Q.collapsible!==J.collapsible||Q.maxSize!==J.maxSize||Q.minSize!==J.minSize)&&x(G.current,Q)}),dt(()=>{const X=G.current;return L(X),()=>{se(X)}},[d,E,L,se]),ma(r,()=>({collapse:()=>{m(G.current)},expand:X=>{S(G.current,X)},getId(){return E},getSize(){return P(G.current)},isCollapsed(){return R(G.current)},isExpanded(){return!R(G.current)},resize:X=>{_(G.current,X)}}),[m,S,P,R,E,_]);const A=k(G.current,l);return Ct(w,{...b,children:t,className:n,id:i,style:{...A,...C},"data-panel":"","data-panel-collapsible":s||void 0,"data-panel-group-id":D,"data-panel-id":E,"data-panel-size":parseFloat(""+A.flexGrow).toFixed(1)})}const pa=da((t,n)=>Ct(fa,{...t,forwardedRef:n}));fa.displayName="Panel";pa.displayName="forwardRef(Panel)";let gn=null,it=null;function or(t,n){if(n){const a=(n&va)!==0,s=(n&ba)!==0,l=(n&ya)!==0,r=(n&ja)!==0;if(a)return l?"se-resize":r?"ne-resize":"e-resize";if(s)return l?"sw-resize":r?"nw-resize":"w-resize";if(l)return"s-resize";if(r)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function cr(){it!==null&&(document.head.removeChild(it),gn=null,it=null)}function on(t,n){const a=or(t,n);gn!==a&&(gn=a,it===null&&(it=document.createElement("style"),document.head.appendChild(it)),it.innerHTML=`*{cursor: ${a}!important;}`)}function ha(t){return t.type==="keydown"}function xa(t){return t.type.startsWith("pointer")}function ga(t){return t.type.startsWith("mouse")}function tn(t){if(xa(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(ga(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function dr(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function ur(t,n,a){return t.x<n.x+n.width&&t.x+t.width>n.x&&t.y<n.y+n.height&&t.y+t.height>n.y}function mr(t,n){if(t===n)throw new Error("Cannot compare node with itself");const a={a:Fn(t),b:Fn(n)};let s;for(;a.a.at(-1)===a.b.at(-1);)t=a.a.pop(),n=a.b.pop(),s=t;K(s,"Stacking order can only be calculated for elements with a common ancestor");const l={a:Un(On(a.a)),b:Un(On(a.b))};if(l.a===l.b){const r=s.childNodes,i={a:a.a.at(-1),b:a.b.at(-1)};let o=r.length;for(;o--;){const c=r[o];if(c===i.a)return 1;if(c===i.b)return-1}}return Math.sign(l.a-l.b)}const fr=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function pr(t){var n;const a=getComputedStyle((n=wa(t))!==null&&n!==void 0?n:t).display;return a==="flex"||a==="inline-flex"}function hr(t){const n=getComputedStyle(t);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||pr(t))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||fr.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function On(t){let n=t.length;for(;n--;){const a=t[n];if(K(a,"Missing node"),hr(a))return a}return null}function Un(t){return t&&Number(getComputedStyle(t).zIndex)||0}function Fn(t){const n=[];for(;t;)n.push(t),t=wa(t);return n}function wa(t){const{parentNode:n}=t;return n&&n instanceof ShadowRoot?n.host:n}const va=1,ba=2,ya=4,ja=8,xr=dr()==="coarse";let Ge=[],jt=!1,at=new Map,nn=new Map;const Pt=new Set;function gr(t,n,a,s,l){var r;const{ownerDocument:i}=n,o={direction:a,element:n,hitAreaMargins:s,setResizeHandlerState:l},c=(r=at.get(i))!==null&&r!==void 0?r:0;return at.set(i,c+1),Pt.add(o),Jt(),function(){var y;nn.delete(t),Pt.delete(o);const f=(y=at.get(i))!==null&&y!==void 0?y:1;if(at.set(i,f-1),Jt(),f===1&&at.delete(i),Ge.includes(o)){const d=Ge.indexOf(o);d>=0&&Ge.splice(d,1),Sn(),l("up",!0,null)}}}function Vn(t){const{target:n}=t,{x:a,y:s}=tn(t);jt=!0,Cn({target:n,x:a,y:s}),Jt(),Ge.length>0&&(Zt("down",t),t.preventDefault(),t.stopPropagation())}function Tt(t){const{x:n,y:a}=tn(t);if(jt&&t.buttons===0&&(jt=!1,Zt("up",t)),!jt){const{target:s}=t;Cn({target:s,x:n,y:a})}Zt("move",t),Sn(),Ge.length>0&&t.preventDefault()}function ht(t){const{target:n}=t,{x:a,y:s}=tn(t);nn.clear(),jt=!1,Ge.length>0&&t.preventDefault(),Zt("up",t),Cn({target:n,x:a,y:s}),Sn(),Jt()}function Cn({target:t,x:n,y:a}){Ge.splice(0);let s=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(s=t),Pt.forEach(l=>{const{element:r,hitAreaMargins:i}=l,o=r.getBoundingClientRect(),{bottom:c,left:h,right:y,top:f}=o,d=xr?i.coarse:i.fine;if(n>=h-d&&n<=y+d&&a>=f-d&&a<=c+d){if(s!==null&&document.contains(s)&&r!==s&&!r.contains(s)&&!s.contains(r)&&mr(s,r)>0){let w=s,b=!1;for(;w&&!w.contains(r);){if(ur(w.getBoundingClientRect(),o)){b=!0;break}w=w.parentElement}if(b)return}Ge.push(l)}})}function cn(t,n){nn.set(t,n)}function Sn(){let t=!1,n=!1;Ge.forEach(s=>{const{direction:l}=s;l==="horizontal"?t=!0:n=!0});let a=0;nn.forEach(s=>{a|=s}),t&&n?on("intersection",a):t?on("horizontal",a):n?on("vertical",a):cr()}function Jt(){at.forEach((t,n)=>{const{body:a}=n;a.removeEventListener("contextmenu",ht),a.removeEventListener("pointerdown",Vn),a.removeEventListener("pointerleave",Tt),a.removeEventListener("pointermove",Tt)}),window.removeEventListener("pointerup",ht),window.removeEventListener("pointercancel",ht),Pt.size>0&&(jt?(Ge.length>0&&at.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("contextmenu",ht),a.addEventListener("pointerleave",Tt),a.addEventListener("pointermove",Tt))}),window.addEventListener("pointerup",ht),window.addEventListener("pointercancel",ht)):at.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("pointerdown",Vn,{capture:!0}),a.addEventListener("pointermove",Tt))}))}function Zt(t,n){Pt.forEach(a=>{const{setResizeHandlerState:s}=a,l=Ge.includes(a);s(t,l,n)})}function wr(){const[t,n]=yt(0);return _e(()=>n(a=>a+1),[])}function K(t,n){if(!t)throw console.error(n),Error(n)}const Tn=10;function ft(t,n,a=Tn){return t.toFixed(a)===n.toFixed(a)?0:t>n?1:-1}function tt(t,n,a=Tn){return ft(t,n,a)===0}function Ue(t,n,a){return ft(t,n,a)===0}function vr(t,n,a){if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++){const l=t[s],r=n[s];if(!Ue(l,r,a))return!1}return!0}function bt({panelConstraints:t,panelIndex:n,size:a}){const s=t[n];K(s!=null,`Panel constraints not found for index ${n}`);let{collapsedSize:l=0,collapsible:r,maxSize:i=100,minSize:o=0}=s;if(ft(a,o)<0)if(r){const c=(l+o)/2;ft(a,c)<0?a=l:a=o}else a=o;return a=Math.min(i,a),a=parseFloat(a.toFixed(Tn)),a}function Et({delta:t,initialLayout:n,panelConstraints:a,pivotIndices:s,prevLayout:l,trigger:r}){if(Ue(t,0))return n;const i=[...n],[o,c]=s;K(o!=null,"Invalid first pivot index"),K(c!=null,"Invalid second pivot index");let h=0;if(r==="keyboard"){{const f=t<0?c:o,d=a[f];K(d,`Panel constraints not found for index ${f}`);const{collapsedSize:C=0,collapsible:w,minSize:b=0}=d;if(w){const N=n[f];if(K(N!=null,`Previous layout not found for panel index ${f}`),Ue(N,C)){const m=b-N;ft(m,Math.abs(t))>0&&(t=t<0?0-m:m)}}}{const f=t<0?o:c,d=a[f];K(d,`No panel constraints found for index ${f}`);const{collapsedSize:C=0,collapsible:w,minSize:b=0}=d;if(w){const N=n[f];if(K(N!=null,`Previous layout not found for panel index ${f}`),Ue(N,b)){const m=N-C;ft(m,Math.abs(t))>0&&(t=t<0?0-m:m)}}}}{const f=t<0?1:-1;let d=t<0?c:o,C=0;for(;;){const b=n[d];K(b!=null,`Previous layout not found for panel index ${d}`);const m=bt({panelConstraints:a,panelIndex:d,size:100})-b;if(C+=m,d+=f,d<0||d>=a.length)break}const w=Math.min(Math.abs(t),Math.abs(C));t=t<0?0-w:w}{let d=t<0?o:c;for(;d>=0&&d<a.length;){const C=Math.abs(t)-Math.abs(h),w=n[d];K(w!=null,`Previous layout not found for panel index ${d}`);const b=w-C,N=bt({panelConstraints:a,panelIndex:d,size:b});if(!Ue(w,N)&&(h+=w-N,i[d]=N,h.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(vr(l,i))return l;{const f=t<0?c:o,d=n[f];K(d!=null,`Previous layout not found for panel index ${f}`);const C=d+h,w=bt({panelConstraints:a,panelIndex:f,size:C});if(i[f]=w,!Ue(w,C)){let b=C-w,m=t<0?c:o;for(;m>=0&&m<a.length;){const S=i[m];K(S!=null,`Previous layout not found for panel index ${m}`);const P=S+b,k=bt({panelConstraints:a,panelIndex:m,size:P});if(Ue(S,k)||(b-=k-S,i[m]=k),Ue(b,0))break;t>0?m--:m++}}}const y=i.reduce((f,d)=>d+f,0);return Ue(y,100)?i:l}function br({layout:t,panelsArray:n,pivotIndices:a}){let s=0,l=100,r=0,i=0;const o=a[0];K(o!=null,"No pivot index found"),n.forEach((f,d)=>{const{constraints:C}=f,{maxSize:w=100,minSize:b=0}=C;d===o?(s=b,l=w):(r+=b,i+=w)});const c=Math.min(l,100-r),h=Math.max(s,100-i),y=t[o];return{valueMax:c,valueMin:h,valueNow:y}}function Dt(t,n=document){return Array.from(n.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Na(t,n,a=document){const l=Dt(t,a).findIndex(r=>r.getAttribute("data-panel-resize-handle-id")===n);return l??null}function Ca(t,n,a){const s=Na(t,n,a);return s!=null?[s,s+1]:[-1,-1]}function Sa(t,n=document){var a;if(n instanceof HTMLElement&&(n==null||(a=n.dataset)===null||a===void 0?void 0:a.panelGroupId)==t)return n;const s=n.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return s||null}function an(t,n=document){const a=n.querySelector(`[data-panel-resize-handle-id="${t}"]`);return a||null}function yr(t,n,a,s=document){var l,r,i,o;const c=an(n,s),h=Dt(t,s),y=c?h.indexOf(c):-1,f=(l=(r=a[y])===null||r===void 0?void 0:r.id)!==null&&l!==void 0?l:null,d=(i=(o=a[y+1])===null||o===void 0?void 0:o.id)!==null&&i!==void 0?i:null;return[f,d]}function jr({committedValuesRef:t,eagerValuesRef:n,groupId:a,layout:s,panelDataArray:l,panelGroupElement:r,setLayout:i}){He({didWarnAboutMissingResizeHandle:!1}),dt(()=>{if(!r)return;const o=Dt(a,r);for(let c=0;c<l.length-1;c++){const{valueMax:h,valueMin:y,valueNow:f}=br({layout:s,panelsArray:l,pivotIndices:[c,c+1]}),d=o[c];if(d!=null){const C=l[c];K(C,`No panel data found for index "${c}"`),d.setAttribute("aria-controls",C.id),d.setAttribute("aria-valuemax",""+Math.round(h)),d.setAttribute("aria-valuemin",""+Math.round(y)),d.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{o.forEach((c,h)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[a,s,l,r]),ct(()=>{if(!r)return;const o=n.current;K(o,"Eager values not found");const{panelDataArray:c}=o,h=Sa(a,r);K(h!=null,`No group found for id "${a}"`);const y=Dt(a,r);K(y,`No resize handles found for group id "${a}"`);const f=y.map(d=>{const C=d.getAttribute("data-panel-resize-handle-id");K(C,"Resize handle element has no handle id attribute");const[w,b]=yr(a,C,c,r);if(w==null||b==null)return()=>{};const N=m=>{if(!m.defaultPrevented)switch(m.key){case"Enter":{m.preventDefault();const S=c.findIndex(P=>P.id===w);if(S>=0){const P=c[S];K(P,`No panel data found for index ${S}`);const k=s[S],{collapsedSize:D=0,collapsible:R,minSize:x=0}=P.constraints;if(k!=null&&R){const L=Et({delta:Ue(k,D)?x-D:D-k,initialLayout:s,panelConstraints:c.map(_=>_.constraints),pivotIndices:Ca(a,C,r),prevLayout:s,trigger:"keyboard"});s!==L&&i(L)}}break}}};return d.addEventListener("keydown",N),()=>{d.removeEventListener("keydown",N)}});return()=>{f.forEach(d=>d())}},[r,t,n,a,s,l,i])}function Wn(t,n){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==n[a])return!1;return!0}function Ta(t,n){const a=t==="horizontal",{x:s,y:l}=tn(n);return a?s:l}function Nr(t,n,a,s,l){const r=a==="horizontal",i=an(n,l);K(i,`No resize handle element found for id "${n}"`);const o=i.getAttribute("data-panel-group-id");K(o,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=s;const h=Ta(a,t),y=Sa(o,l);K(y,`No group element found for id "${o}"`);const f=y.getBoundingClientRect(),d=r?f.width:f.height;return(h-c)/d*100}function Cr(t,n,a,s,l,r){if(ha(t)){const i=a==="horizontal";let o=0;t.shiftKey?o=100:l!=null?o=l:o=10;let c=0;switch(t.key){case"ArrowDown":c=i?0:o;break;case"ArrowLeft":c=i?-o:0;break;case"ArrowRight":c=i?o:0;break;case"ArrowUp":c=i?0:-o;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return s==null?0:Nr(t,n,a,s,r)}function Sr({panelDataArray:t}){const n=Array(t.length),a=t.map(r=>r.constraints);let s=0,l=100;for(let r=0;r<t.length;r++){const i=a[r];K(i,`Panel constraints not found for index ${r}`);const{defaultSize:o}=i;o!=null&&(s++,n[r]=o,l-=o)}for(let r=0;r<t.length;r++){const i=a[r];K(i,`Panel constraints not found for index ${r}`);const{defaultSize:o}=i;if(o!=null)continue;const c=t.length-s,h=l/c;s++,n[r]=h,l-=h}return n}function xt(t,n,a){n.forEach((s,l)=>{const r=t[l];K(r,`Panel data not found for index ${l}`);const{callbacks:i,constraints:o,id:c}=r,{collapsedSize:h=0,collapsible:y}=o,f=a[c];if(f==null||s!==f){a[c]=s;const{onCollapse:d,onExpand:C,onResize:w}=i;w&&w(s,f),y&&(d||C)&&(C&&(f==null||tt(f,h))&&!tt(s,h)&&C(),d&&(f==null||!tt(f,h))&&tt(s,h)&&d())}})}function Wt(t,n){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!=n[a])return!1;return!0}function Tr({defaultSize:t,dragState:n,layout:a,panelData:s,panelIndex:l,precision:r=3}){const i=a[l];let o;return i==null?o=t!=null?t.toPrecision(r):"1":s.length===1?o="1":o=i.toPrecision(r),{flexBasis:0,flexGrow:o,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function kr(t,n=10){let a=null;return(...l)=>{a!==null&&clearTimeout(a),a=setTimeout(()=>{t(...l)},n)}}function Gn(t){try{if(typeof localStorage<"u")t.getItem=n=>localStorage.getItem(n),t.setItem=(n,a)=>{localStorage.setItem(n,a)};else throw new Error("localStorage not supported in this environment")}catch(n){console.error(n),t.getItem=()=>null,t.setItem=()=>{}}}function ka(t){return`react-resizable-panels:${t}`}function za(t){return t.map(n=>{const{constraints:a,id:s,idIsFromProps:l,order:r}=n;return l?s:r?`${r}:${JSON.stringify(a)}`:JSON.stringify(a)}).sort((n,a)=>n.localeCompare(a)).join(",")}function Ea(t,n){try{const a=ka(t),s=n.getItem(a);if(s){const l=JSON.parse(s);if(typeof l=="object"&&l!=null)return l}}catch{}return null}function zr(t,n,a){var s,l;const r=(s=Ea(t,a))!==null&&s!==void 0?s:{},i=za(n);return(l=r[i])!==null&&l!==void 0?l:null}function Er(t,n,a,s,l){var r;const i=ka(t),o=za(n),c=(r=Ea(t,l))!==null&&r!==void 0?r:{};c[o]={expandToSizes:Object.fromEntries(a.entries()),layout:s};try{l.setItem(i,JSON.stringify(c))}catch(h){console.error(h)}}function qn({layout:t,panelConstraints:n}){const a=[...t],s=a.reduce((r,i)=>r+i,0);if(a.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${a.map(r=>`${r}%`).join(", ")}`);if(!Ue(s,100)&&a.length>0)for(let r=0;r<n.length;r++){const i=a[r];K(i!=null,`No layout data found for index ${r}`);const o=100/s*i;a[r]=o}let l=0;for(let r=0;r<n.length;r++){const i=a[r];K(i!=null,`No layout data found for index ${r}`);const o=bt({panelConstraints:n,panelIndex:r,size:i});i!=o&&(l+=i-o,a[r]=o)}if(!Ue(l,0))for(let r=0;r<n.length;r++){const i=a[r];K(i!=null,`No layout data found for index ${r}`);const o=i+l,c=bt({panelConstraints:n,panelIndex:r,size:o});if(i!==c&&(l-=c-i,a[r]=c,Ue(l,0)))break}return a}const Rr=100,Rt={getItem:t=>(Gn(Rt),Rt.getItem(t)),setItem:(t,n)=>{Gn(Rt),Rt.setItem(t,n)}},Kn={};function Ra({autoSaveId:t=null,children:n,className:a="",direction:s,forwardedRef:l,id:r=null,onLayout:i=null,keyboardResizeBy:o=null,storage:c=Rt,style:h,tagName:y="div",...f}){const d=Nn(r),C=He(null),[w,b]=yt(null),[N,m]=yt([]),S=wr(),P=He({}),k=He(new Map),D=He(0),R=He({autoSaveId:t,direction:s,dragState:w,id:d,keyboardResizeBy:o,onLayout:i,storage:c}),x=He({layout:N,panelDataArray:[],panelDataArrayChanged:!1});He({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),ma(l,()=>({getId:()=>R.current.id,getLayout:()=>{const{layout:j}=x.current;return j},setLayout:j=>{const{onLayout:H}=R.current,{layout:V,panelDataArray:F}=x.current,$=qn({layout:j,panelConstraints:F.map(W=>W.constraints)});Wn(V,$)||(m($),x.current.layout=$,H&&H($),xt(F,$,P.current))}}),[]),dt(()=>{R.current.autoSaveId=t,R.current.direction=s,R.current.dragState=w,R.current.id=d,R.current.onLayout=i,R.current.storage=c}),jr({committedValuesRef:R,eagerValuesRef:x,groupId:d,layout:N,panelDataArray:x.current.panelDataArray,setLayout:m,panelGroupElement:C.current}),ct(()=>{const{panelDataArray:j}=x.current;if(t){if(N.length===0||N.length!==j.length)return;let H=Kn[t];H==null&&(H=kr(Er,Rr),Kn[t]=H);const V=[...j],F=new Map(k.current);H(t,V,F,N,c)}},[t,N,c]),ct(()=>{});const L=_e(j=>{const{onLayout:H}=R.current,{layout:V,panelDataArray:F}=x.current;if(j.constraints.collapsible){const $=F.map(oe=>oe.constraints),{collapsedSize:W=0,panelSize:ee,pivotIndices:Y}=lt(F,j,V);if(K(ee!=null,`Panel size not found for panel "${j.id}"`),!tt(ee,W)){k.current.set(j.id,ee);const he=gt(F,j)===F.length-1?ee-W:W-ee,te=Et({delta:he,initialLayout:V,panelConstraints:$,pivotIndices:Y,prevLayout:V,trigger:"imperative-api"});Wt(V,te)||(m(te),x.current.layout=te,H&&H(te),xt(F,te,P.current))}}},[]),_=_e((j,H)=>{const{onLayout:V}=R.current,{layout:F,panelDataArray:$}=x.current;if(j.constraints.collapsible){const W=$.map(M=>M.constraints),{collapsedSize:ee=0,panelSize:Y=0,minSize:oe=0,pivotIndices:he}=lt($,j,F),te=H??oe;if(tt(Y,ee)){const M=k.current.get(j.id),Ae=M!=null&&M>=te?M:te,ze=gt($,j)===$.length-1?Y-Ae:Ae-Y,xe=Et({delta:ze,initialLayout:F,panelConstraints:W,pivotIndices:he,prevLayout:F,trigger:"imperative-api"});Wt(F,xe)||(m(xe),x.current.layout=xe,V&&V(xe),xt($,xe,P.current))}}},[]),se=_e(j=>{const{layout:H,panelDataArray:V}=x.current,{panelSize:F}=lt(V,j,H);return K(F!=null,`Panel size not found for panel "${j.id}"`),F},[]),E=_e((j,H)=>{const{panelDataArray:V}=x.current,F=gt(V,j);return Tr({defaultSize:H,dragState:w,layout:N,panelData:V,panelIndex:F})},[w,N]),G=_e(j=>{const{layout:H,panelDataArray:V}=x.current,{collapsedSize:F=0,collapsible:$,panelSize:W}=lt(V,j,H);return K(W!=null,`Panel size not found for panel "${j.id}"`),$===!0&&tt(W,F)},[]),A=_e(j=>{const{layout:H,panelDataArray:V}=x.current,{collapsedSize:F=0,collapsible:$,panelSize:W}=lt(V,j,H);return K(W!=null,`Panel size not found for panel "${j.id}"`),!$||ft(W,F)>0},[]),X=_e(j=>{const{panelDataArray:H}=x.current;H.push(j),H.sort((V,F)=>{const $=V.order,W=F.order;return $==null&&W==null?0:$==null?-1:W==null?1:$-W}),x.current.panelDataArrayChanged=!0,S()},[S]);dt(()=>{if(x.current.panelDataArrayChanged){x.current.panelDataArrayChanged=!1;const{autoSaveId:j,onLayout:H,storage:V}=R.current,{layout:F,panelDataArray:$}=x.current;let W=null;if(j){const Y=zr(j,$,V);Y&&(k.current=new Map(Object.entries(Y.expandToSizes)),W=Y.layout)}W==null&&(W=Sr({panelDataArray:$}));const ee=qn({layout:W,panelConstraints:$.map(Y=>Y.constraints)});Wn(F,ee)||(m(ee),x.current.layout=ee,H&&H(ee),xt($,ee,P.current))}}),dt(()=>{const j=x.current;return()=>{j.layout=[]}},[]);const J=_e(j=>{let H=!1;const V=C.current;return V&&window.getComputedStyle(V,null).getPropertyValue("direction")==="rtl"&&(H=!0),function($){$.preventDefault();const W=C.current;if(!W)return()=>null;const{direction:ee,dragState:Y,id:oe,keyboardResizeBy:he,onLayout:te}=R.current,{layout:M,panelDataArray:Ae}=x.current,{initialLayout:ke}=Y??{},ze=Ca(oe,j,W);let xe=Cr($,j,ee,Y,he,W);const Je=ee==="horizontal";Je&&H&&(xe=-xe);const $e=Ae.map(Le=>Le.constraints),De=Et({delta:xe,initialLayout:ke??M,panelConstraints:$e,pivotIndices:ze,prevLayout:M,trigger:ha($)?"keyboard":"mouse-or-touch"}),Ne=!Wt(M,De);(xa($)||ga($))&&D.current!=xe&&(D.current=xe,!Ne&&xe!==0?Je?cn(j,xe<0?va:ba):cn(j,xe<0?ya:ja):cn(j,0)),Ne&&(m(De),x.current.layout=De,te&&te(De),xt(Ae,De,P.current))}},[]),Q=_e((j,H)=>{const{onLayout:V}=R.current,{layout:F,panelDataArray:$}=x.current,W=$.map(M=>M.constraints),{panelSize:ee,pivotIndices:Y}=lt($,j,F);K(ee!=null,`Panel size not found for panel "${j.id}"`);const he=gt($,j)===$.length-1?ee-H:H-ee,te=Et({delta:he,initialLayout:F,panelConstraints:W,pivotIndices:Y,prevLayout:F,trigger:"imperative-api"});Wt(F,te)||(m(te),x.current.layout=te,V&&V(te),xt($,te,P.current))},[]),le=_e((j,H)=>{const{layout:V,panelDataArray:F}=x.current,{collapsedSize:$=0,collapsible:W}=H,{collapsedSize:ee=0,collapsible:Y,maxSize:oe=100,minSize:he=0}=j.constraints,{panelSize:te}=lt(F,j,V);te!=null&&(W&&Y&&tt(te,$)?tt($,ee)||Q(j,ee):te<he?Q(j,he):te>oe&&Q(j,oe))},[Q]),ie=_e((j,H)=>{const{direction:V}=R.current,{layout:F}=x.current;if(!C.current)return;const $=an(j,C.current);K($,`Drag handle element not found for id "${j}"`);const W=Ta(V,H);b({dragHandleId:j,dragHandleRect:$.getBoundingClientRect(),initialCursorPosition:W,initialLayout:F})},[]),Re=_e(()=>{b(null)},[]),ue=_e(j=>{const{panelDataArray:H}=x.current,V=gt(H,j);V>=0&&(H.splice(V,1),delete P.current[j.id],x.current.panelDataArrayChanged=!0,S())},[S]),fe=sr(()=>({collapsePanel:L,direction:s,dragState:w,expandPanel:_,getPanelSize:se,getPanelStyle:E,groupId:d,isPanelCollapsed:G,isPanelExpanded:A,reevaluatePanelConstraints:le,registerPanel:X,registerResizeHandle:J,resizePanel:Q,startDragging:ie,stopDragging:Re,unregisterPanel:ue,panelGroupElement:C.current}),[L,w,s,_,se,E,d,G,A,le,X,J,Q,ie,Re,ue]),pe={display:"flex",flexDirection:s==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Ct(en.Provider,{value:fe},Ct(y,{...f,children:n,className:a,id:r,ref:C,style:{...pe,...h},"data-panel-group":"","data-panel-group-direction":s,"data-panel-group-id":d}))}const Aa=da((t,n)=>Ct(Ra,{...t,forwardedRef:n}));Ra.displayName="PanelGroup";Aa.displayName="forwardRef(PanelGroup)";function gt(t,n){return t.findIndex(a=>a===n||a.id===n.id)}function lt(t,n,a){const s=gt(t,n),r=s===t.length-1?[s-1,s]:[s,s+1],i=a[s];return{...n.constraints,panelSize:i,pivotIndices:r}}function Ar({disabled:t,handleId:n,resizeHandler:a,panelGroupElement:s}){ct(()=>{if(t||a==null||s==null)return;const l=an(n,s);if(l==null)return;const r=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),a(i);break}case"F6":{i.preventDefault();const o=l.getAttribute("data-panel-group-id");K(o,`No group element found for id "${o}"`);const c=Dt(o,s),h=Na(o,n,s);K(h!==null,`No resize element found for id "${n}"`);const y=i.shiftKey?h>0?h-1:c.length-1:h+1<c.length?h+1:0;c[y].focus();break}}};return l.addEventListener("keydown",r),()=>{l.removeEventListener("keydown",r)}},[s,t,n,a])}function Ma({children:t=null,className:n="",disabled:a=!1,hitAreaMargins:s,id:l,onBlur:r,onDragging:i,onFocus:o,style:c={},tabIndex:h=0,tagName:y="div",...f}){var d,C;const w=He(null),b=He({onDragging:i});ct(()=>{b.current.onDragging=i});const N=ua(en);if(N===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:m,groupId:S,registerResizeHandle:P,startDragging:k,stopDragging:D,panelGroupElement:R}=N,x=Nn(l),[L,_]=yt("inactive"),[se,E]=yt(!1),[G,A]=yt(null),X=He({state:L});dt(()=>{X.current.state=L}),ct(()=>{if(a)A(null);else{const ie=P(x);A(()=>ie)}},[a,x,P]);const J=(d=s==null?void 0:s.coarse)!==null&&d!==void 0?d:15,Q=(C=s==null?void 0:s.fine)!==null&&C!==void 0?C:5;return ct(()=>{if(a||G==null)return;const ie=w.current;return K(ie,"Element ref not attached"),gr(x,ie,m,{coarse:J,fine:Q},(ue,fe,pe)=>{if(fe)switch(ue){case"down":{_("drag"),K(pe,'Expected event to be defined for "down" action'),k(x,pe);const{onDragging:j}=b.current;j&&j(!0);break}case"move":{const{state:j}=X.current;j!=="drag"&&_("hover"),K(pe,'Expected event to be defined for "move" action'),G(pe);break}case"up":{_("hover"),D();const{onDragging:j}=b.current;j&&j(!1);break}}else _("inactive")})},[J,m,a,Q,P,x,G,k,D]),Ar({disabled:a,handleId:x,resizeHandler:G,panelGroupElement:R}),Ct(y,{...f,children:t,className:n,id:l,onBlur:()=>{E(!1),r==null||r()},onFocus:()=>{E(!0),o==null||o()},ref:w,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...c},tabIndex:h,"data-panel-group-direction":m,"data-panel-group-id":S,"data-resize-handle":"","data-resize-handle-active":L==="drag"?"pointer":se?"keyboard":void 0,"data-resize-handle-state":L,"data-panel-resize-handle-enabled":!a,"data-panel-resize-handle-id":x})}Ma.displayName="PanelResizeHandle";function Mr({className:t,...n}){return e.jsx(Aa,{"data-slot":"resizable-panel-group",className:je("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})}function Yn({...t}){return e.jsx(pa,{"data-slot":"resizable-panel",...t})}function Pr({withHandle:t,className:n,...a}){return e.jsx(Ma,{"data-slot":"resizable-handle",className:je("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...a,children:t&&e.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:e.jsx(us,{className:"size-2.5"})})})}function Dr(t){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}const Pa=T.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),It=()=>{const t=T.useContext(Pa);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};Dr(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Ir(){const t=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function $r(){return kn(/^Mac/)}function Lr(){return kn(/^iPhone/)}function Xn(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function _r(){return kn(/^iPad/)||$r()&&navigator.maxTouchPoints>1}function Da(){return Lr()||_r()}function kn(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const Hr=24,Br=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Jn(...t){return(...n)=>{for(let a of t)typeof a=="function"&&a(...n)}}const dn=typeof document<"u"&&window.visualViewport;function Zn(t){let n=window.getComputedStyle(t);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function Ia(t){for(Zn(t)&&(t=t.parentElement);t&&!Zn(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const Or=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Gt=0,un;function Ur(t={}){let{isDisabled:n}=t;Br(()=>{if(!n)return Gt++,Gt===1&&Da()&&(un=Fr()),()=>{Gt--,Gt===0&&(un==null||un())}},[n])}function Fr(){let t,n=0,a=f=>{t=Ia(f.target),!(t===document.documentElement&&t===document.body)&&(n=f.changedTouches[0].pageY)},s=f=>{if(!t||t===document.documentElement||t===document.body){f.preventDefault();return}let d=f.changedTouches[0].pageY,C=t.scrollTop,w=t.scrollHeight-t.clientHeight;w!==0&&((C<=0&&d>n||C>=w&&d<n)&&f.preventDefault(),n=d)},l=f=>{let d=f.target;wn(d)&&d!==document.activeElement&&(f.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},r=f=>{let d=f.target;wn(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",dn&&(dn.height<window.innerHeight?requestAnimationFrame(()=>{Qn(d)}):dn.addEventListener("resize",()=>Qn(d),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},o=window.pageXOffset,c=window.pageYOffset,h=Jn(Vr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let y=Jn(kt(document,"touchstart",a,{passive:!1,capture:!0}),kt(document,"touchmove",s,{passive:!1,capture:!0}),kt(document,"touchend",l,{passive:!1,capture:!0}),kt(document,"focus",r,!0),kt(window,"scroll",i));return()=>{h(),y(),window.scrollTo(o,c)}}function Vr(t,n,a){let s=t.style[n];return t.style[n]=a,()=>{t.style[n]=s}}function kt(t,n,a,s){return t.addEventListener(n,a,s),()=>{t.removeEventListener(n,a,s)}}function Qn(t){let n=document.scrollingElement||document.documentElement;for(;t&&t!==n;){let a=Ia(t);if(a!==document.documentElement&&a!==document.body&&a!==t){let s=a.getBoundingClientRect().top,l=t.getBoundingClientRect().top,r=t.getBoundingClientRect().bottom;const i=a.getBoundingClientRect().bottom+Hr;r>i&&(a.scrollTop+=l-s)}t=a.parentElement}}function wn(t){return t instanceof HTMLInputElement&&!Or.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function Wr(t,n){typeof t=="function"?t(n):t!=null&&(t.current=n)}function Gr(...t){return n=>t.forEach(a=>Wr(a,n))}function $a(...t){return I.useCallback(Gr(...t),t)}const La=new WeakMap;function Ce(t,n,a=!1){if(!t||!(t instanceof HTMLElement))return;let s={};Object.entries(n).forEach(([l,r])=>{if(l.startsWith("--")){t.style.setProperty(l,r);return}s[l]=t.style[l],t.style[l]=r}),!a&&La.set(t,s)}function qr(t,n){if(!t||!(t instanceof HTMLElement))return;let a=La.get(t);a&&(t.style[n]=a[n])}const we=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function qt(t,n){if(!t)return null;const a=window.getComputedStyle(t),s=a.transform||a.webkitTransform||a.mozTransform;let l=s.match(/^matrix3d\((.+)\)$/);return l?parseFloat(l[1].split(", ")[we(n)?13:12]):(l=s.match(/^matrix\((.+)\)$/),l?parseFloat(l[1].split(", ")[we(n)?5:4]):null)}function Kr(t){return 8*(Math.log(t+1)-2)}function mn(t,n){if(!t)return()=>{};const a=t.style.cssText;return Object.assign(t.style,n),()=>{t.style.cssText=a}}function Yr(...t){return(...n)=>{for(const a of t)typeof a=="function"&&a(...n)}}const de={DURATION:.5,EASE:[.32,.72,0,1]},_a=.4,Xr=.25,Jr=100,Ha=8,Kt=16,vn=26,fn="vaul-dragging";function Ba(t){const n=T.useRef(t);return T.useEffect(()=>{n.current=t}),T.useMemo(()=>(...a)=>n.current==null?void 0:n.current.call(n,...a),[])}function Zr({defaultProp:t,onChange:n}){const a=T.useState(t),[s]=a,l=T.useRef(s),r=Ba(n);return T.useEffect(()=>{l.current!==s&&(r(s),l.current=s)},[s,l,r]),a}function Oa({prop:t,defaultProp:n,onChange:a=()=>{}}){const[s,l]=Zr({defaultProp:n,onChange:a}),r=t!==void 0,i=r?t:s,o=Ba(a),c=T.useCallback(h=>{if(r){const f=typeof h=="function"?h(t):h;f!==t&&o(f)}else l(h)},[r,t,l,o]);return[i,c]}function Qr({activeSnapPointProp:t,setActiveSnapPointProp:n,snapPoints:a,drawerRef:s,overlayRef:l,fadeFromIndex:r,onSnapPointChange:i,direction:o="bottom",container:c,snapToSequentialPoint:h}){const[y,f]=Oa({prop:t,defaultProp:a==null?void 0:a[0],onChange:n}),[d,C]=T.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);T.useEffect(()=>{function x(){C({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const w=T.useMemo(()=>y===(a==null?void 0:a[a.length-1])||null,[a,y]),b=T.useMemo(()=>{var x;return(x=a==null?void 0:a.findIndex(L=>L===y))!=null?x:null},[a,y]),N=a&&a.length>0&&(r||r===0)&&!Number.isNaN(r)&&a[r]===y||!a,m=T.useMemo(()=>{const x=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var L;return(L=a==null?void 0:a.map(_=>{const se=typeof _=="string";let E=0;if(se&&(E=parseInt(_,10)),we(o)){const A=se?E:d?_*x.height:0;return d?o==="bottom"?x.height-A:-x.height+A:A}const G=se?E:d?_*x.width:0;return d?o==="right"?x.width-G:-x.width+G:G}))!=null?L:[]},[a,d,c]),S=T.useMemo(()=>b!==null?m==null?void 0:m[b]:null,[m,b]),P=T.useCallback(x=>{var L;const _=(L=m==null?void 0:m.findIndex(se=>se===x))!=null?L:null;i(_),Ce(s.current,{transition:`transform ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,transform:we(o)?`translate3d(0, ${x}px, 0)`:`translate3d(${x}px, 0, 0)`}),m&&_!==m.length-1&&r!==void 0&&_!==r&&_<r?Ce(l.current,{transition:`opacity ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,opacity:"0"}):Ce(l.current,{transition:`opacity ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,opacity:"1"}),f(a==null?void 0:a[Math.max(_,0)])},[s.current,a,m,r,l,f]);T.useEffect(()=>{if(y||t){var x;const L=(x=a==null?void 0:a.findIndex(_=>_===t||_===y))!=null?x:-1;m&&L!==-1&&typeof m[L]=="number"&&P(m[L])}},[y,t,a,m,P]);function k({draggedDistance:x,closeDrawer:L,velocity:_,dismissible:se}){if(r===void 0)return;const E=o==="bottom"||o==="right"?(S??0)-x:(S??0)+x,G=b===r-1,A=b===0,X=x>0;if(G&&Ce(l.current,{transition:`opacity ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`}),!h&&_>2&&!X){se?L():P(m[0]);return}if(!h&&_>2&&X&&m&&a){P(m[a.length-1]);return}const J=m==null?void 0:m.reduce((le,ie)=>typeof le!="number"||typeof ie!="number"?le:Math.abs(ie-E)<Math.abs(le-E)?ie:le),Q=we(o)?window.innerHeight:window.innerWidth;if(_>_a&&Math.abs(x)<Q*.4){const le=X?1:-1;if(le>0&&w&&a){P(m[a.length-1]);return}if(A&&le<0&&se&&L(),b===null)return;P(m[b+le]);return}P(J)}function D({draggedDistance:x}){if(S===null)return;const L=o==="bottom"||o==="right"?S-x:S+x;(o==="bottom"||o==="right")&&L<m[m.length-1]||(o==="top"||o==="left")&&L>m[m.length-1]||Ce(s.current,{transform:we(o)?`translate3d(0, ${L}px, 0)`:`translate3d(${L}px, 0, 0)`})}function R(x,L){if(!a||typeof b!="number"||!m||r===void 0)return null;const _=b===r-1;if(b>=r&&L)return 0;if(_&&!L)return 1;if(!N&&!_)return null;const E=_?b+1:b-1,G=_?m[E]-m[E-1]:m[E+1]-m[E],A=x/Math.abs(G);return _?1-A:A}return{isLastSnapPoint:w,activeSnapPoint:y,shouldFade:N,getPercentageDragged:R,setActiveSnapPoint:f,activeSnapPointIndex:b,onRelease:k,onDrag:D,snapPointsOffset:m}}const el=()=>()=>{};function tl(){const{direction:t,isOpen:n,shouldScaleBackground:a,setBackgroundColorOnScale:s,noBodyStyles:l}=It(),r=T.useRef(null),i=I.useMemo(()=>document.body.style.backgroundColor,[]);function o(){return(window.innerWidth-vn)/window.innerWidth}T.useEffect(()=>{if(n&&a){r.current&&clearTimeout(r.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;Yr(s&&!l?mn(document.body,{background:"black"}):el,mn(c,{transformOrigin:we(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${de.DURATION}s`,transitionTimingFunction:`cubic-bezier(${de.EASE.join(",")})`}));const h=mn(c,{borderRadius:`${Ha}px`,overflow:"hidden",...we(t)?{transform:`scale(${o()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${o()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{h(),r.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},de.DURATION*1e3)}}},[n,a,i])}let zt=null;function nl({isOpen:t,modal:n,nested:a,hasBeenOpened:s,preventScrollRestoration:l,noBodyStyles:r}){const[i,o]=T.useState(()=>typeof window<"u"?window.location.href:""),c=T.useRef(0),h=T.useCallback(()=>{if(Xn()&&zt===null&&t&&!r){zt={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:d}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const C=d-window.innerHeight;C&&c.current>=d&&(document.body.style.top=`${-(c.current+C)}px`)}),300)}},[t]),y=T.useCallback(()=>{if(Xn()&&zt!==null&&!r){const f=-parseInt(document.body.style.top,10),d=-parseInt(document.body.style.left,10);Object.assign(document.body.style,zt),window.requestAnimationFrame(()=>{if(l&&i!==window.location.href){o(window.location.href);return}window.scrollTo(d,f)}),zt=null}},[i]);return T.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),T.useEffect(()=>{if(n)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||y()}},[n,y]),T.useEffect(()=>{a||!s||(t?(!window.matchMedia("(display-mode: standalone)").matches&&h(),n||window.setTimeout(()=>{y()},500)):y())},[t,s,i,n,a,h,y]),{restorePositionSetting:y}}function al({open:t,onOpenChange:n,children:a,onDrag:s,onRelease:l,snapPoints:r,shouldScaleBackground:i=!1,setBackgroundColorOnScale:o=!0,closeThreshold:c=Xr,scrollLockTimeout:h=Jr,dismissible:y=!0,handleOnly:f=!1,fadeFromIndex:d=r&&r.length-1,activeSnapPoint:C,setActiveSnapPoint:w,fixed:b,modal:N=!0,onClose:m,nested:S,noBodyStyles:P=!1,direction:k="bottom",defaultOpen:D=!1,disablePreventScroll:R=!0,snapToSequentialPoint:x=!1,preventScrollRestoration:L=!1,repositionInputs:_=!0,onAnimationEnd:se,container:E,autoFocus:G=!1}){var A,X;const[J=!1,Q]=Oa({defaultProp:D,prop:t,onChange:B=>{n==null||n(B),!B&&!S&&Ie(),setTimeout(()=>{se==null||se(B)},de.DURATION*1e3),B&&!N&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),B||(document.body.style.pointerEvents="auto")}}),[le,ie]=T.useState(!1),[Re,ue]=T.useState(!1),[fe,pe]=T.useState(!1),j=T.useRef(null),H=T.useRef(null),V=T.useRef(null),F=T.useRef(null),$=T.useRef(null),W=T.useRef(!1),ee=T.useRef(null),Y=T.useRef(0),oe=T.useRef(!1),he=T.useRef(!D),te=T.useRef(0),M=T.useRef(null),Ae=T.useRef(((A=M.current)==null?void 0:A.getBoundingClientRect().height)||0),ke=T.useRef(((X=M.current)==null?void 0:X.getBoundingClientRect().width)||0),ze=T.useRef(0),xe=T.useCallback(B=>{r&&B===Le.length-1&&(H.current=new Date)},[]),{activeSnapPoint:Je,activeSnapPointIndex:$e,setActiveSnapPoint:De,onRelease:Ne,snapPointsOffset:Le,onDrag:U,shouldFade:ge,getPercentageDragged:Ze}=Qr({snapPoints:r,activeSnapPointProp:C,setActiveSnapPointProp:w,drawerRef:M,fadeFromIndex:d,overlayRef:j,onSnapPointChange:xe,direction:k,container:E,snapToSequentialPoint:x});Ur({isDisabled:!J||Re||!N||fe||!le||!_||!R});const{restorePositionSetting:Ie}=nl({isOpen:J,modal:N,nested:S??!1,hasBeenOpened:le,preventScrollRestoration:L,noBodyStyles:P});function Ke(){return(window.innerWidth-vn)/window.innerWidth}function sn(B){var ne,re;!y&&!r||M.current&&!M.current.contains(B.target)||(Ae.current=((ne=M.current)==null?void 0:ne.getBoundingClientRect().height)||0,ke.current=((re=M.current)==null?void 0:re.getBoundingClientRect().width)||0,ue(!0),V.current=new Date,Da()&&window.addEventListener("touchend",()=>W.current=!1,{once:!0}),B.target.setPointerCapture(B.pointerId),Y.current=we(k)?B.pageY:B.pageX)}function Lt(B,ne){var re;let Z=B;const ce=(re=window.getSelection())==null?void 0:re.toString(),Me=M.current?qt(M.current,k):null,Ee=new Date;if(Z.tagName==="SELECT"||Z.hasAttribute("data-vaul-no-drag")||Z.closest("[data-vaul-no-drag]"))return!1;if(k==="right"||k==="left")return!0;if(H.current&&Ee.getTime()-H.current.getTime()<500)return!1;if(Me!==null&&(k==="bottom"?Me>0:Me<0))return!0;if(ce&&ce.length>0)return!1;if($.current&&Ee.getTime()-$.current.getTime()<h&&Me===0||ne)return $.current=Ee,!1;for(;Z;){if(Z.scrollHeight>Z.clientHeight){if(Z.scrollTop!==0)return $.current=new Date,!1;if(Z.getAttribute("role")==="dialog")return!0}Z=Z.parentNode}return!0}function rn(B){if(M.current&&Re){const ne=k==="bottom"||k==="right"?1:-1,re=(Y.current-(we(k)?B.pageY:B.pageX))*ne,Z=re>0,ce=r&&!y&&!Z;if(ce&&$e===0)return;const Me=Math.abs(re),Ee=document.querySelector("[data-vaul-drawer-wrapper]"),Ye=k==="bottom"||k==="top"?Ae.current:ke.current;let Be=Me/Ye;const et=Ze(Me,Z);if(et!==null&&(Be=et),ce&&Be>=1||!W.current&&!Lt(B.target,Z))return;if(M.current.classList.add(fn),W.current=!0,Ce(M.current,{transition:"none"}),Ce(j.current,{transition:"none"}),r&&U({draggedDistance:re}),Z&&!r){const Ve=Kr(re),pt=Math.min(Ve*-1,0)*ne;Ce(M.current,{transform:we(k)?`translate3d(0, ${pt}px, 0)`:`translate3d(${pt}px, 0, 0)`});return}const Xe=1-Be;if((ge||d&&$e===d-1)&&(s==null||s(B,Be),Ce(j.current,{opacity:`${Xe}`,transition:"none"},!0)),Ee&&j.current&&i){const Ve=Math.min(Ke()+Be*(1-Ke()),1),pt=8-Be*8,Ot=Math.max(0,14-Be*14);Ce(Ee,{borderRadius:`${pt}px`,transform:we(k)?`scale(${Ve}) translate3d(0, ${Ot}px, 0)`:`scale(${Ve}) translate3d(${Ot}px, 0, 0)`,transition:"none"},!0)}if(!r){const Ve=Me*ne;Ce(M.current,{transform:we(k)?`translate3d(0, ${Ve}px, 0)`:`translate3d(${Ve}px, 0, 0)`})}}}T.useEffect(()=>{window.requestAnimationFrame(()=>{he.current=!0})},[]),T.useEffect(()=>{var B;function ne(){if(!M.current||!_)return;const re=document.activeElement;if(wn(re)||oe.current){var Z;const ce=((Z=window.visualViewport)==null?void 0:Z.height)||0,Me=window.innerHeight;let Ee=Me-ce;const Ye=M.current.getBoundingClientRect().height||0,Be=Ye>Me*.8;ze.current||(ze.current=Ye);const et=M.current.getBoundingClientRect().top;if(Math.abs(te.current-Ee)>60&&(oe.current=!oe.current),r&&r.length>0&&Le&&$e){const Xe=Le[$e]||0;Ee+=Xe}if(te.current=Ee,Ye>ce||oe.current){const Xe=M.current.getBoundingClientRect().height;let Ve=Xe;Xe>ce&&(Ve=ce-(Be?et:vn)),b?M.current.style.height=`${Xe-Math.max(Ee,0)}px`:M.current.style.height=`${Math.max(Ve,ce-et)}px`}else Ir()||(M.current.style.height=`${ze.current}px`);r&&r.length>0&&!oe.current?M.current.style.bottom="0px":M.current.style.bottom=`${Math.max(Ee,0)}px`}}return(B=window.visualViewport)==null||B.addEventListener("resize",ne),()=>{var re;return(re=window.visualViewport)==null?void 0:re.removeEventListener("resize",ne)}},[$e,r,Le]);function rt(B){_t(),m==null||m(),B||Q(!1),setTimeout(()=>{r&&De(r[0])},de.DURATION*1e3)}function nt(){if(!M.current)return;const B=document.querySelector("[data-vaul-drawer-wrapper]"),ne=qt(M.current,k);Ce(M.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`}),Ce(j.current,{transition:`opacity ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,opacity:"1"}),i&&ne&&ne>0&&J&&Ce(B,{borderRadius:`${Ha}px`,overflow:"hidden",...we(k)?{transform:`scale(${Ke()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ke()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${de.DURATION}s`,transitionTimingFunction:`cubic-bezier(${de.EASE.join(",")})`},!0)}function _t(){!Re||!M.current||(M.current.classList.remove(fn),W.current=!1,ue(!1),F.current=new Date)}function Ht(B){if(!Re||!M.current)return;M.current.classList.remove(fn),W.current=!1,ue(!1),F.current=new Date;const ne=qt(M.current,k);if(!B||!Lt(B.target,!1)||!ne||Number.isNaN(ne)||V.current===null)return;const re=F.current.getTime()-V.current.getTime(),Z=Y.current-(we(k)?B.pageY:B.pageX),ce=Math.abs(Z)/re;if(ce>.05&&(pe(!0),setTimeout(()=>{pe(!1)},200)),r){Ne({draggedDistance:Z*(k==="bottom"||k==="right"?1:-1),closeDrawer:rt,velocity:ce,dismissible:y}),l==null||l(B,!0);return}if(k==="bottom"||k==="right"?Z>0:Z<0){nt(),l==null||l(B,!0);return}if(ce>_a){rt(),l==null||l(B,!1);return}var Me;const Ee=Math.min((Me=M.current.getBoundingClientRect().height)!=null?Me:0,window.innerHeight);var Ye;const Be=Math.min((Ye=M.current.getBoundingClientRect().width)!=null?Ye:0,window.innerWidth),et=k==="left"||k==="right";if(Math.abs(ne)>=(et?Be:Ee)*c){rt(),l==null||l(B,!1);return}l==null||l(B,!0),nt()}T.useEffect(()=>(J&&(Ce(document.documentElement,{scrollBehavior:"auto"}),H.current=new Date),()=>{qr(document.documentElement,"scrollBehavior")}),[J]);function Qe(B){const ne=B?(window.innerWidth-Kt)/window.innerWidth:1,re=B?-16:0;ee.current&&window.clearTimeout(ee.current),Ce(M.current,{transition:`transform ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,transform:we(k)?`scale(${ne}) translate3d(0, ${re}px, 0)`:`scale(${ne}) translate3d(${re}px, 0, 0)`}),!B&&M.current&&(ee.current=setTimeout(()=>{const Z=qt(M.current,k);Ce(M.current,{transition:"none",transform:we(k)?`translate3d(0, ${Z}px, 0)`:`translate3d(${Z}px, 0, 0)`})},500))}function Bt(B,ne){if(ne<0)return;const re=(window.innerWidth-Kt)/window.innerWidth,Z=re+ne*(1-re),ce=-16+ne*Kt;Ce(M.current,{transform:we(k)?`scale(${Z}) translate3d(0, ${ce}px, 0)`:`scale(${Z}) translate3d(${ce}px, 0, 0)`,transition:"none"})}function St(B,ne){const re=we(k)?window.innerHeight:window.innerWidth,Z=ne?(re-Kt)/re:1,ce=ne?-16:0;ne&&Ce(M.current,{transition:`transform ${de.DURATION}s cubic-bezier(${de.EASE.join(",")})`,transform:we(k)?`scale(${Z}) translate3d(0, ${ce}px, 0)`:`scale(${Z}) translate3d(${ce}px, 0, 0)`})}return T.useEffect(()=>{N||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[N]),T.createElement(gs,{defaultOpen:D,onOpenChange:B=>{!y&&!B||(B?ie(!0):rt(!0),Q(B))},open:J},T.createElement(Pa.Provider,{value:{activeSnapPoint:Je,snapPoints:r,setActiveSnapPoint:De,drawerRef:M,overlayRef:j,onOpenChange:n,onPress:sn,onRelease:Ht,onDrag:rn,dismissible:y,shouldAnimate:he,handleOnly:f,isOpen:J,isDragging:Re,shouldFade:ge,closeDrawer:rt,onNestedDrag:Bt,onNestedOpenChange:Qe,onNestedRelease:St,keyboardIsOpen:oe,modal:N,snapPointsOffset:Le,activeSnapPointIndex:$e,direction:k,shouldScaleBackground:i,setBackgroundColorOnScale:o,noBodyStyles:P,container:E,autoFocus:G}},a))}const Ua=T.forwardRef(function({...t},n){const{overlayRef:a,snapPoints:s,onRelease:l,shouldFade:r,isOpen:i,modal:o,shouldAnimate:c}=It(),h=$a(n,a),y=s&&s.length>0;if(!o)return null;const f=T.useCallback(d=>l(d),[l]);return T.createElement(bs,{onMouseUp:f,ref:h,"data-vaul-overlay":"","data-vaul-snap-points":i&&y?"true":"false","data-vaul-snap-points-overlay":i&&r?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...t})});Ua.displayName="Drawer.Overlay";const Fa=T.forwardRef(function({onPointerDownOutside:t,style:n,onOpenAutoFocus:a,...s},l){const{drawerRef:r,onPress:i,onRelease:o,onDrag:c,keyboardIsOpen:h,snapPointsOffset:y,activeSnapPointIndex:f,modal:d,isOpen:C,direction:w,snapPoints:b,container:N,handleOnly:m,shouldAnimate:S,autoFocus:P}=It(),[k,D]=T.useState(!1),R=$a(l,r),x=T.useRef(null),L=T.useRef(null),_=T.useRef(!1),se=b&&b.length>0;tl();const E=(A,X,J=0)=>{if(_.current)return!0;const Q=Math.abs(A.y),le=Math.abs(A.x),ie=le>Q,Re=["bottom","right"].includes(X)?1:-1;if(X==="left"||X==="right"){if(!(A.x*Re<0)&&le>=0&&le<=J)return ie}else if(!(A.y*Re<0)&&Q>=0&&Q<=J)return!ie;return _.current=!0,!0};T.useEffect(()=>{se&&window.requestAnimationFrame(()=>{D(!0)})},[]);function G(A){x.current=null,_.current=!1,o(A)}return T.createElement(ws,{"data-vaul-drawer-direction":w,"data-vaul-drawer":"","data-vaul-delayed-snap-points":k?"true":"false","data-vaul-snap-points":C&&se?"true":"false","data-vaul-custom-container":N?"true":"false","data-vaul-animate":S!=null&&S.current?"true":"false",...s,ref:R,style:y&&y.length>0?{"--snap-point-height":`${y[f??0]}px`,...n}:n,onPointerDown:A=>{m||(s.onPointerDown==null||s.onPointerDown.call(s,A),x.current={x:A.pageX,y:A.pageY},i(A))},onOpenAutoFocus:A=>{a==null||a(A),P||A.preventDefault()},onPointerDownOutside:A=>{if(t==null||t(A),!d||A.defaultPrevented){A.preventDefault();return}h.current&&(h.current=!1)},onFocusOutside:A=>{if(!d){A.preventDefault();return}},onPointerMove:A=>{if(L.current=A,m||(s.onPointerMove==null||s.onPointerMove.call(s,A),!x.current))return;const X=A.pageY-x.current.y,J=A.pageX-x.current.x,Q=A.pointerType==="touch"?10:2;E({x:J,y:X},w,Q)?c(A):(Math.abs(J)>Q||Math.abs(X)>Q)&&(x.current=null)},onPointerUp:A=>{s.onPointerUp==null||s.onPointerUp.call(s,A),x.current=null,_.current=!1,o(A)},onPointerOut:A=>{s.onPointerOut==null||s.onPointerOut.call(s,A),G(L.current)},onContextMenu:A=>{s.onContextMenu==null||s.onContextMenu.call(s,A),L.current&&G(L.current)}})});Fa.displayName="Drawer.Content";const sl=250,rl=120,ll=T.forwardRef(function({preventCycle:t=!1,children:n,...a},s){const{closeDrawer:l,isDragging:r,snapPoints:i,activeSnapPoint:o,setActiveSnapPoint:c,dismissible:h,handleOnly:y,isOpen:f,onPress:d,onDrag:C}=It(),w=T.useRef(null),b=T.useRef(!1);function N(){if(b.current){P();return}window.setTimeout(()=>{m()},rl)}function m(){if(r||t||b.current){P();return}if(P(),!i||i.length===0){h||l();return}if(o===i[i.length-1]&&h){l();return}const D=i.findIndex(x=>x===o);if(D===-1)return;const R=i[D+1];c(R)}function S(){w.current=window.setTimeout(()=>{b.current=!0},sl)}function P(){w.current&&window.clearTimeout(w.current),b.current=!1}return T.createElement("div",{onClick:N,onPointerCancel:P,onPointerDown:k=>{y&&d(k),S()},onPointerMove:k=>{y&&C(k)},ref:s,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...a},T.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});ll.displayName="Drawer.Handle";function il(t){const n=It(),{container:a=n.container,...s}=t;return T.createElement(vs,{container:a,...s})}const $t={Root:al,Content:Fa,Overlay:Ua,Portal:il,Title:xs};function ol({...t}){return e.jsx($t.Root,{"data-slot":"drawer",...t})}function cl({...t}){return e.jsx($t.Portal,{"data-slot":"drawer-portal",...t})}function dl({className:t,...n}){return e.jsx($t.Overlay,{"data-slot":"drawer-overlay",className:je("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...n})}function ul({className:t,children:n,...a}){return e.jsxs(cl,{"data-slot":"drawer-portal",children:[e.jsx(dl,{}),e.jsxs($t.Content,{"data-slot":"drawer-content",className:je("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...a,children:[e.jsx("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),n]})]})}function ml({className:t,...n}){return e.jsx("div",{"data-slot":"drawer-header",className:je("flex flex-col gap-1.5 p-4",t),...n})}function fl({className:t,...n}){return e.jsx($t.Title,{"data-slot":"drawer-title",className:je("text-foreground font-semibold",t),...n})}const pl=({show:t,history:n,collections:a=[],selectedCollectionId:s="",onSelectCollection:l,onClear:r,onUseAgain:i,onRemoveEntry:o,hideCollectionSelector:c=!1})=>{const[h,y]=T.useState(null),[f,d]=T.useState(!1),[C,w]=T.useState("input"),b=Array.isArray(n)?n.filter(S=>S.collectionId===s):[],N=Array.isArray(a)?a.find(S=>S.id===s):void 0,m=b.find(S=>S.id===h)||null;return T.useEffect(()=>{y(null),d(!1)},[s,n]),I.useEffect(()=>{if(!f)return;const S=P=>{if(P.ctrlKey&&(P.key==="c"||P.key==="C")){P.preventDefault();const k=C==="input"?(m==null?void 0:m.inputText)||"":(m==null?void 0:m.translatedText)||"";k&&(navigator.clipboard.writeText(k),ae.success(`Copied ${C==="input"?"input text":"translated text"}`))}else P.ctrlKey&&(P.key==="v"||P.key==="V")?(P.preventDefault(),m&&i(m)):P.key==="Backspace"&&(P.preventDefault(),m&&(d(!1),o(m.id)))};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[f,C,m,i,o]),t?e.jsxs("div",{className:je("h-full w-full flex flex-col"),children:[e.jsx("div",{className:"my-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Us,{className:"h-5 w-5 mr-2 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold",children:"Translation History"}),e.jsx("span",{className:"block text-sm mt-1 text-muted-foreground",children:"Previously translated content, organized by collection"})]})]}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"destructive",size:"sm",onClick:r,disabled:(b==null?void 0:b.length)===0,className:"h-8 text-xs",children:[e.jsx(ot,{className:"h-3.5 w-3.5 mr-1.5"}),"Clear All"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete all translation history in this collection"})})]})})]})}),e.jsx("div",{className:"px-2 pb-0 flex-1 min-h-0",children:e.jsxs(Mr,{direction:"horizontal",className:"h-[500px] w-full",children:[!c&&e.jsxs(e.Fragment,{children:[e.jsx(Yn,{defaultSize:25,minSize:20,maxSize:40,className:"border-r border-border/40",children:e.jsx("div",{className:"h-full flex flex-col",children:e.jsx(At,{className:"flex-1 px-2 pb-2",children:e.jsx("div",{className:"flex flex-col gap-1",children:(a==null?void 0:a.length)===0?e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-4 text-center",children:"No collections"}):a.map(S=>e.jsxs("div",{className:je("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer transition-all",S.id===s?"bg-primary/10 text-primary font-semibold":"hover:bg-muted/60 text-gray-700 dark:text-gray-200"),onClick:()=>l(S.id),children:[e.jsx(pn,{className:"h-4 w-4 mr-1 text-primary/70"}),e.jsx("span",{className:"truncate text-sm",children:S.name})]},S.id))})})})}),e.jsx(Pr,{withHandle:!0})]}),e.jsx(Yn,{defaultSize:c?100:75,minSize:c?0:40,children:e.jsxs("div",{className:"h-full flex flex-col px-4",children:[e.jsxs("div",{className:" pt-4 pb-2 font-semibold text-base flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4 text-primary/70"}),N?N.name:"No Collection Selected"]}),e.jsxs("div",{className:"flex-1 px-0 pb-4",children:[(b==null?void 0:b.length)===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ns,{className:"h-12 w-12 text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No translation history yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 max-w-md",children:"Translations will be saved here automatically as you use the translator"})]}):e.jsx(At,{className:"h-[400px] pr-2",children:e.jsx("div",{className:"space-y-2",children:b.map(S=>e.jsx(qe,{className:je("transition-all cursor-pointer border-2",h===S.id&&f?"border-primary bg-primary/5":"border-transparent hover:border-border"),onClick:()=>{y(S.id),w("input"),d(!0)},children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(sa,{className:"h-3.5 w-3.5"}),new Date(S.timestamp).toLocaleString(),e.jsx(st,{variant:"outline",className:"ml-2 text-xs px-1.5 py-0 h-5",children:S.model})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-4 mt-1",children:[e.jsx("span",{className:"truncate text-sm font-medium text-primary/90 max-w-[180px] md:max-w-[220px]",title:S.inputText,children:S.inputText}),e.jsx("span",{className:"hidden md:inline text-muted-foreground",children:"→"}),e.jsx("span",{className:"truncate text-sm text-muted-foreground max-w-[180px] md:max-w-[220px]",title:S.translatedText,children:S.translatedText})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Se,{children:[e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"outline",size:"sm",onClick:P=>{P.stopPropagation(),i(S)},className:"h-8",children:[e.jsx(hn,{className:"h-3.5 w-3.5 mr-1.5"}),"Reuse"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Load this translation again"})})]}),e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"icon",onClick:P=>{P.stopPropagation(),o(S.id)},className:"h-8 w-8 text-destructive",children:e.jsx(ot,{className:"h-4 w-4"})})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete this entry"})})]})]})})]})},S.id))})}),e.jsx(ol,{open:f,onOpenChange:d,children:e.jsxs(ul,{className:"w-screen h-screen max-w-none max-h-none flex flex-col",children:[e.jsx(ml,{children:e.jsx(fl,{children:"Translation Details"})}),e.jsx("div",{className:"flex-1 px-4 pb-32 overflow-y-auto",children:e.jsxs(ra,{value:C,onValueChange:S=>w(S),className:"w-full",children:[e.jsxs(la,{className:"mb-4 w-full",children:[e.jsx(wt,{value:"input",className:"flex-1",children:"Input Text"}),e.jsx(wt,{value:"translated",className:"flex-1",children:"Translated Text"})]}),e.jsxs(vt,{value:"input",children:[e.jsxs($n,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(Xt,{className:"h-3 w-3 mr-1"}),"Input Text"]}),e.jsx(Nt,{value:(m==null?void 0:m.inputText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]}),e.jsxs(vt,{value:"translated",children:[e.jsxs($n,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(Xt,{className:"h-3 w-3 mr-1"}),"Translated Text"]}),e.jsx(Nt,{value:(m==null?void 0:m.translatedText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 w-full flex flex-col items-center bg-background/95 py-6 z-50 border-t gap-4",children:[e.jsxs(q,{variant:"outline",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:async()=>{const S=C==="input"?(m==null?void 0:m.inputText)||"":(m==null?void 0:m.translatedText)||"";S&&(await navigator.clipboard.writeText(S),ae.success(`Copied ${C==="input"?"input text":"translated text"}`))},children:[e.jsx(ys,{className:"h-5 w-5 mr-2"}),"Copy ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+C"})]}),m&&e.jsxs(q,{variant:"default",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>i(m),children:[e.jsx(hn,{className:"h-5 w-5 mr-2"}),"Reuse ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+V"})]}),m&&e.jsxs(q,{variant:"destructive",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>{d(!1),o(m.id)},children:[e.jsx(ot,{className:"h-5 w-5 mr-2"}),"Delete ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Backspace"})]})]})]})})]})]})})]})})]}):null},hl=({mappingTable:t,updateMappingEntry:n,removeMappingEntry:a,addMappingEntry:s,showImportArea:l,toggleImportArea:r,mappingMarkdown:i,setMappingMarkdown:o,revertImport:c,showRevertButton:h,exportMarkdownTable:y,importMarkdownTable:f,error:d,arcrylicBg:C})=>e.jsxs(qe,{className:je("border-border/60",C&&"arcrylic-blur"),children:[e.jsx(ut,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(mt,{className:"text-xl flex items-center",children:[e.jsx(Ys,{className:"h-5 w-5 mr-2 text-primary"}),"Mapping Table"]}),e.jsx(aa,{className:"text-sm text-muted-foreground mt-1",children:"Manage term mappings and transcriptions"})]}),e.jsxs(st,{variant:"outline",className:"h-6",children:[t==null?void 0:t.length," ",(t==null?void 0:t.length)===1?"Entry":"Entries"]})]})}),e.jsx(Mt,{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(jn,{className:"h-4 w-4 mr-2"}),"Add New Term"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Add a new term mapping entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:l?"default":"outline",onClick:r,size:"sm",className:"h-9",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Import or export mapping data as markdown"})})]})}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"outline",onClick:()=>{o(`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
|:----------- |:------------- |:------------------------- |:------------------ |:------ |
| 事情是这样的 | Chuyện là thế này | Phrase | | Opening phrase |
| 最近 | Gần đây | Time | | |
| 师兄 | Sư huynh | Title/Relationship | Male | Elder martial brother |
| 其实 | Thực ra | Adverb | | |`),l||r()},size:"sm",className:"h-9",children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Load a sample mapping table"})})]})})]})]}),e.jsx("div",{className:je("overflow-hidden transition-all duration-300 ease-in-out",l?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs(qe,{className:"border-dashed",children:[e.jsx(ut,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(mt,{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[h&&e.jsxs(q,{variant:"destructive",size:"sm",onClick:c,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(yn,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:y,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(ia,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:f,className:"text-xs h-8",children:[e.jsx(na,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs(Mt,{className:"py-2",children:[e.jsx(Nt,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:i,onChange:w=>o(w.target.value)}),d&&d.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(bn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:d})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Term / Name"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Transcription"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Gender"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:(t==null?void 0:t.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Hs,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No terms added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((w,b)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.term,onChange:N=>n(b,"term",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Term or name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.transcription,onChange:N=>n(b,"transcription",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Transcription"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.type,onChange:N=>n(b,"type",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.gender,onChange:N=>n(b,"gender",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Gender"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.notes,onChange:N=>n(b,"notes",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"destructive",size:"sm",onClick:()=>a(b),className:"w-full h-8",children:[e.jsx(ot,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete this mapping entry"})})]})})})]},b))})]})})]})})]}),xl=({relationshipsTable:t,updateRelationshipEntry:n,removeRelationshipEntry:a,addRelationshipEntry:s,showImportArea:l,toggleImportArea:r,relationshipsMarkdown:i,setRelationshipsMarkdown:o,revertImport:c,showRevertButton:h,exportMarkdownTable:y,importMarkdownTable:f,error:d,arcrylicBg:C})=>e.jsxs(qe,{className:je("border-border/60",C&&"arcrylic-blur"),children:[e.jsx(ut,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(mt,{className:"text-xl flex items-center",children:[e.jsx(Ln,{className:"h-5 w-5 mr-2 text-primary"}),"Relationships Table"]}),e.jsx(aa,{className:"text-sm text-muted-foreground mt-1",children:"Manage character relationships and address terms"})]}),e.jsxs(st,{variant:"outline",className:"h-6",children:[t==null?void 0:t.length," ",(t==null?void 0:t.length)===1?"Entry":"Entries"]})]})}),e.jsx(Mt,{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(jn,{className:"h-4 w-4 mr-2"}),"Add New Relationship"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Add a new character relationship entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:l?"default":"outline",onClick:r,size:"sm",className:"h-9",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Import or export relationship data as markdown"})})]})}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"outline",onClick:()=>{o(`| Character A | Character B | Relationship | Address Terms (A→B) | Address Terms (B→A) | Notes |
|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
| Vưu Thiên Thu | Triệu Không Minh | Adoptive Younger Sister -> Elder Brother | Huynh trưởng, Sư huynh | Ngươi | Formal/Respectful |
| Lâm Linh Dao | Vưu Thiên Thu | Female Lead 2 -> Female Lead 1 | Dao tỷ tỷ, Muội | Thiên Thu | Relationship strained |`),l||r()},size:"sm",className:"h-9",children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Load a sample relationship table"})})]})})]})]}),e.jsx("div",{className:je("overflow-hidden transition-all duration-300 ease-in-out",l?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs(qe,{className:"border-dashed",children:[e.jsx(ut,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(mt,{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[h&&e.jsxs(q,{variant:"destructive",size:"sm",onClick:c,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(yn,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:y,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(ia,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:f,className:"text-xs h-8",children:[e.jsx(na,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs(Mt,{className:"py-2",children:[e.jsx(Nt,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:i,onChange:w=>o(w.target.value)}),d&&d.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(bn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:d})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character A"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character B"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Relationship"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (A→B)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (B→A)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:(t==null?void 0:t.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Ln,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No relationships added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((w,b)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.characterA,onChange:N=>n(b,"characterA",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.characterB,onChange:N=>n(b,"characterB",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.relationship,onChange:N=>n(b,"relationship",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Relationship type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.addressTermsAToB,onChange:N=>n(b,"addressTermsAToB",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How A addresses B"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.addressTermsBToA,onChange:N=>n(b,"addressTermsBToA",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How B addresses A"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Fe,{value:w.notes,onChange:N=>n(b,"notes",N.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(q,{variant:"destructive",size:"sm",onClick:()=>a(b),className:"w-full h-8",children:[e.jsx(ot,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete this relationship entry"})})]})})})]},b))})]})})]})})]}),gl=({isVisible:t,settingsPanelRef:n,collections:a,collectionToEdit:s,setCollectionToEdit:l,editedCollectionName:r,setEditedCollectionName:i,addNewCollection:o,useCollection:c,renameCollection:h,requestDeleteCollection:y,showDeleteConfirmation:f,setShowDeleteConfirmation:d,confirmDeleteCollection:C,selectedCollectionId:w,error:b,setError:N,arcrylicBg:m,translationHistory:S,onClearHistory:P,onUseHistoryEntry:k,onRemoveHistoryEntry:D,updateMappingEntry:R,removeMappingEntry:x,addMappingEntry:L,showMappingImportArea:_,toggleMappingImportArea:se,mappingMarkdown:E,setMappingMarkdown:G,revertMappingImport:A,showMappingRevertButton:X,exportMappingMarkdown:J,importMappingMarkdown:Q,updateRelationshipEntry:le,removeRelationshipEntry:ie,addRelationshipEntry:Re,showRelationshipImportArea:ue,toggleRelationshipImportArea:fe,relationshipsMarkdown:pe,setRelationshipsMarkdown:j,revertRelationshipImport:H,showRelationshipRevertButton:V,exportRelationshipMarkdown:F,importRelationshipMarkdown:$,onApproveUpdate:W,onRejectUpdate:ee})=>{var Le;const Y=a.find(U=>U.id===s),[oe,he]=I.useState(!1),[te,M]=I.useState(""),Ae=I.useRef(null),[ke,ze]=I.useState(null),[xe,Je]=I.useState(""),$e=I.useRef(null);T.useEffect(()=>{oe&&Ae.current&&Ae.current.focus()},[oe]),T.useEffect(()=>{ke&&$e.current&&$e.current.focus()},[ke]);const De=()=>{te.trim()?(o(te.trim()),M(""),he(!1)):(he(!1),M(""))},Ne=()=>{ke&&xe.trim()&&(i(xe),l(ke),h()),ze(null)};return e.jsx("div",{ref:n,className:je("overflow-hidden transition-all duration-300 ease-in-out",t?"h-auto sm:h-[800px] opacity-100 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700":"h-0 opacity-0 mb-0 pb-0 border-b-0"),tabIndex:-1,children:e.jsxs(qe,{className:je("h-full w-full bg-white/90 dark:bg-zinc-900/90 shadow-xl rounded-2xl p-0 flex flex-col sm:flex-row border border-gray-100 dark:border-zinc-800 transition-all duration-300 overflow-hidden",m&&"backdrop-blur-md"),children:[e.jsxs("aside",{className:"w-full sm:w-1/3 bg-muted/40 dark:bg-muted/20 p-3 sm:p-4 flex flex-col gap-2 border-b sm:border-b-0 sm:border-r border-gray-200 dark:border-gray-800 min-h-[200px] sm:min-h-[320px] max-h-[220px] sm:max-h-none overflow-x-auto overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(pn,{className:"h-5 w-5 text-primary"}),"Collections"]}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{size:"icon",variant:"outline",onClick:()=>{he(!0),M("")},"aria-label":"Add new collection",children:e.jsx(jn,{className:"h-5 w-5"})})}),e.jsx(ye,{children:"Add new collection"})]})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[oe&&e.jsx("div",{className:"flex items-center gap-2 px-2 py-2 mb-1 rounded-lg bg-muted/30 dark:bg-muted/10",children:e.jsx(Fe,{ref:Ae,value:te,onChange:U=>M(U.target.value),onBlur:De,onKeyDown:U=>{U.key==="Enter"?De():U.key==="Escape"&&(he(!1),M(""))},placeholder:"Collection name",className:"flex-1 h-8 text-sm"})}),a.map(U=>e.jsxs("div",{className:je("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer group transition-all",U.id===s?"bg-primary/10 dark:bg-primary/20 text-primary":"hover:bg-muted/60 dark:hover:bg-muted/30 text-gray-700 dark:text-gray-200"),onClick:()=>{l(U.id),i(U.name),N(null)},children:[e.jsx(pn,{className:"h-4 w-4 mr-1 text-primary/70"}),ke===U.id?e.jsx(Fe,{ref:$e,value:r,onChange:ge=>i(ge.target.value),onBlur:Ne,onKeyDown:ge=>{ge.key==="Enter"?Ne():ge.key==="Escape"&&ze(null)},onClick:ge=>ge.stopPropagation(),className:"flex-1 h-8 text-sm",autoFocus:!0}):e.jsxs("div",{className:"flex flex-1 items-center min-w-0",children:[e.jsx("span",{className:"flex-1 truncate font-medium text-sm sm:text-base",children:U.name}),e.jsx(Ws,{className:"h-4 w-4 ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-primary transition-opacity cursor-pointer",onClick:ge=>{ge.stopPropagation(),l(U.id),i(U.name),ze(U.id),Je(U.name)}})]}),U.id===w?e.jsx(Yt,{className:"h-4 w-4 text-green-500 ml-1"}):e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{size:"icon",variant:"ghost",onClick:ge=>{ge.stopPropagation(),c(U.id)},className:"h-6 w-6 opacity-0 group-hover:opacity-100","aria-label":"Use this collection",children:e.jsx(Yt,{className:"h-4 w-4 text-green-500"})})}),e.jsx(ye,{children:"Use this collection"})]})}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{size:"icon",variant:"ghost",onClick:ge=>{ge.stopPropagation(),y(U.id)},className:"h-6 w-6 opacity-0 group-hover:opacity-100 text-red-500","aria-label":"Delete collection",children:e.jsx(ot,{className:"h-4 w-4"})})}),e.jsx(ye,{children:"Delete collection"})]})}),U.id===s&&ke!==U.id&&e.jsx("span",{className:"ml-2 text-xs font-semibold",children:"Editing"})]},U.id))]})]}),e.jsx("section",{className:"flex-1 min-w-0 p-3 sm:p-6 flex flex-col h-full",children:e.jsxs(ra,{defaultValue:"history",className:"h-full flex flex-col",children:[e.jsxs(la,{className:"mb-4",children:[e.jsx(wt,{value:"history",children:"History"}),e.jsx(wt,{value:"mapping",children:"Mapping"}),e.jsx(wt,{value:"relationships",children:"Relationships"}),e.jsx(wt,{value:"updates",children:"Updates"})]}),e.jsx(vt,{value:"history",className:"flex-1 overflow-auto",children:Y&&e.jsx(pl,{show:!0,history:S.filter(U=>U.collectionId===Y.id),collections:a,selectedCollectionId:Y.id,onSelectCollection:l,onClear:P,onUseAgain:k,arcrylicBg:m,onRemoveEntry:D,hideCollectionSelector:!0})}),e.jsx(vt,{value:"mapping",className:"flex-1 overflow-auto",children:Y&&e.jsx(hl,{mappingTable:Y.mappingTable,updateMappingEntry:R,removeMappingEntry:x,addMappingEntry:L,showImportArea:_,toggleImportArea:se,mappingMarkdown:E,setMappingMarkdown:G,revertImport:A,showRevertButton:X,exportMarkdownTable:J,importMarkdownTable:Q,error:b,arcrylicBg:m})}),e.jsx(vt,{value:"relationships",className:"flex-1 overflow-auto",children:Y&&e.jsx(xl,{relationshipsTable:Y.relationshipsTable,updateRelationshipEntry:le,removeRelationshipEntry:ie,addRelationshipEntry:Re,showImportArea:ue,toggleImportArea:fe,relationshipsMarkdown:pe,setRelationshipsMarkdown:j,revertImport:H,showRevertButton:V,exportMarkdownTable:F,importMarkdownTable:$,error:b,arcrylicBg:m})}),e.jsx(vt,{value:"updates",className:"flex-1 overflow-auto",children:(Le=Y==null?void 0:Y.tableUpdateHistory)!=null&&Le.length?Y.tableUpdateHistory.map(U=>{var ge,Ze;return e.jsx(qe,{className:"mb-4",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Update on ",new Date(U.timestamp).toLocaleString()]}),e.jsx("span",{className:`px-2 py-1 rounded text-sm ${U.status==="pending"?"bg-yellow-100 text-yellow-800":U.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.status})]}),U.updates.added&&((ge=U.updates.added)==null?void 0:ge.length)>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Added:"}),e.jsx("ul",{className:"list-disc list-inside",children:U.updates.added.map((Ie,Ke)=>e.jsx("li",{children:U.type==="mapping"?Ie.term:`${Ie.characterA}–${Ie.characterB}`},Ke))})]}),U.updates.updated&&((Ze=U.updates.updated)==null?void 0:Ze.length)>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Updated:"}),e.jsx("ul",{className:"list-disc list-inside",children:U.updates.updated.map((Ie,Ke)=>e.jsx("li",{children:U.type==="mapping"?Ie.term:`${Ie.characterA}–${Ie.characterB}`},Ke))})]}),U.status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(q,{variant:"outline",size:"sm",onClick:()=>ee(U),children:"Reject"}),e.jsx(q,{variant:"default",size:"sm",onClick:()=>W(U),children:"Approve"})]}),(U.status==="approved"||U.status==="rejected")&&e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsx(q,{variant:"secondary",size:"sm",onClick:Ie=>{Ie.stopPropagation(),!(U.status==="rejected"&&!window.confirm("This update was previously rejected. Do you want to reapply it?"))&&W(U)},children:"Reapply"})})]})},U.id)}):e.jsx("p",{className:"text-center text-muted-foreground",children:"No updates"})})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 px-2",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 sm:p-8 max-w-xs sm:max-w-md w-full mx-2 shadow-2xl border border-gray-200 dark:border-zinc-800 animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ot,{className:"h-6 w-6 text-destructive"})," Confirm Deletion"]}),e.jsx("p",{className:"mb-2 text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:"Are you sure you want to delete this collection?"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3 flex-col sm:flex-row",children:[e.jsx(q,{variant:"outline",onClick:()=>d(!1),className:"min-w-[90px]",children:"Cancel"}),e.jsx(q,{variant:"destructive",onClick:C,className:"min-w-[90px]",children:"Delete"})]})]})})]})})},wl=({showTableUpdates:t,isTableUpdatesAnimating:n,arcrylicBg:a,pendingTableUpdates:s,expandedEntries:l,toggleEntryExpansion:r,setShowTableUpdates:i,setCurrentUpdateEntry:o,setShowUpdateConfirmation:c})=>t?e.jsxs(qe,{className:je("fixed bottom-20 right-6 w-96 max-w-[calc(100vw-3rem)] z-[9998] shadow-lg transition-all duration-300 ease-in-out rounded-xl border-border/40",n?"translate-y-4 opacity-0":"translate-y-0 opacity-100",a&&"arcrylic-blur"),children:[e.jsxs(ut,{className:"p-4 pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mt,{className:"text-base font-medium",children:"Table Updates"}),e.jsx(st,{variant:"outline",className:"ml-2 text-xs",children:s==null?void 0:s.length})]}),e.jsx(q,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"h-8 w-8 rounded-full",children:e.jsx(Qt,{className:"h-4 w-4"})})]}),e.jsx(Mt,{className:"p-3",children:e.jsx(At,{className:"max-h-[60vh] pr-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-3",children:(s==null?void 0:s.length)>0?s.map(h=>{var y,f,d,C;return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-muted/30 p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:h.type==="mapping"?"Mapping Table":"Relationships Table"}),e.jsx(st,{variant:h.status==="pending"?"outline":h.status==="approved"?"secondary":"destructive",className:"ml-2 text-xs px-1.5",children:h.status})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(sa,{className:"h-3 w-3 mr-1"}),new Date(h.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:()=>r(h.id),children:l.has(h.id)?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(fs,{className:"h-4 w-4"})}),e.jsx(Se,{children:e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsx(q,{variant:"outline",size:"sm",className:"h-8",onClick:()=>{o(h),c(!0)},children:"Review"})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Review and approve/reject changes"})})]})})]})]}),l.has(h.id)&&e.jsxs("div",{className:"p-3 space-y-3 bg-background",children:[((y=h.updates.added)==null?void 0:y.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(zs,{className:"h-3.5 w-3.5 mr-1 text-emerald-500"}),"Added Entries"]}),e.jsx(st,{variant:"outline",className:"text-xs px-1.5 h-5",children:(f=h.updates.added)==null?void 0:f.length})]}),e.jsx(At,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:h.updates.added.map((w,b)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:h.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:w.term}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",w.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:w.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",w.characterB]})]})},b))})})]}),((d=h.updates.updated)==null?void 0:d.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(Ts,{className:"h-3.5 w-3.5 mr-1 text-blue-500"}),"Updated Entries"]}),e.jsx(st,{variant:"outline",className:"text-xs px-1.5 h-5",children:(C=h.updates.updated)==null?void 0:C.length})]}),e.jsx(At,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:h.updates.updated.map((w,b)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:h.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:w.term}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",w.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:w.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",w.characterB]})]})},b))})})]})]})]},h.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[e.jsx(Rs,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending updates"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates will appear here when available"})]})})})})]}):null,vl=t=>!t||typeof t!="object"?(console.warn("Invalid mapping entry:",t),null):{term:String(t.term||""),transcription:String(t.transcription||""),type:String(t.type||""),gender:String(t.gender||""),notes:String(t.notes||"")},bl=t=>!t||typeof t!="object"?(console.warn("Invalid relationship entry:",t),null):{characterA:String(t.characterA||""),characterB:String(t.characterB||""),relationship:String(t.relationship||""),addressTermsAToB:String(t.addressTermsAToB||""),addressTermsBToA:String(t.addressTermsBToA||""),notes:String(t.notes||"")},ea=(t,n,a,s)=>{if(!Array.isArray(n))return console.error("Invalid entries format:",n),{newTable:t,updatedCount:0,added:[],updated:[]};const l=[...t];let r=0;const i=[],o=[];return n.forEach(c=>{const h=a(c);if(h){const y=s(l,h);y>=0?(l[y]=h,o.push(h)):(l.push(h),i.push(h)),r++}}),{newTable:l,updatedCount:r,added:i,updated:o}},Il=()=>{const t=ds(),[n,a]=I.useState(""),[s,l]=I.useState(""),[r,i]=I.useState(!1),[o,c]=I.useState(null),[h,y]=I.useState(!1),[f,d]=I.useState([]),[,C]=I.useState(!1),[,w]=I.useState(!0),[b,N]=I.useState("gemini-2.0-flash-exp"),m=["gemini-2.0-flash-exp","gemini-2.0-flash-exp-image-generation","gemini-2.0-flash-thinking-exp-01-21","gemini-2.5-pro-exp-03-25"],S={"gemini-2.0-flash-exp":"Recommended","gemini-2.0-flash-exp-image-generation":"Image Generation","gemini-2.0-flash-thinking-exp-01-21":"No support for function calling","gemini-2.5-pro-exp-03-25":"Pro but Stupid (Super slow)"},[P,k]=I.useState(null),[D,R]=I.useState([]),[x,L]=I.useState(""),[_,se]=I.useState(!1),[E,G]=I.useState(""),[A,X]=I.useState(""),[J,Q]=I.useState(""),[le,ie]=I.useState(!1),[Re]=I.useState("mapping"),[ue,fe]=I.useState([]),[pe,j]=I.useState([]),[H,V]=I.useState(""),[F,$]=I.useState(""),[W,ee]=I.useState(!1),[Y,oe]=I.useState([]),[he,te]=I.useState([]),[M,Ae]=I.useState(!1),[ke,ze]=I.useState(!1),[xe,Je]=I.useState([]),[$e,De]=I.useState(!1),[Ne,Le]=I.useState(null),[U,ge]=I.useState(!1),Ze=T.useRef(null),Ie=I.useRef(null),[Ke,sn]=I.useState(new Set),Lt=u=>{sn(g=>{const p=new Set(g);return p.has(u)?p.delete(u):p.add(u),p})};I.useEffect(()=>{(async()=>{try{const g=await Ft("apiKey"),p=await Ft("translateModel"),v=await Ft("translationCollections"),z=await Ft("translationHistory");if(g&&k(g),p&&N(p),z&&d(z),v&&(v==null?void 0:v.length)>0)R(v),L(v[0].id),fe(v[0].mappingTable),j(v[0].relationshipsTable);else{const O={id:Date.now().toString(),name:"Default Collection",mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]};R([O]),L(O.id)}}catch(g){console.error("Error loading settings:",g)}})()},[]),I.useEffect(()=>{x&&!E&&G(x)},[x,E]);const rn=async u=>{N(u),await Pe("translateModel",u)},rt=(u,g)=>{try{const p=u.trim().split(`
`);if((p==null?void 0:p.length)<3)return[];const v=p.slice(2);return g?v.map(z=>{const O=z.split("|").filter((me,Oe,We)=>Oe!==0&&Oe!==(We==null?void 0:We.length)-1||me.trim()!=="").map(me=>me.trim());if((O==null?void 0:O.length)<5)for(console.warn("Row has fewer than expected columns:",z);(O==null?void 0:O.length)<5;)O.push("");return{term:O[0]||"",transcription:O[1]||"",type:O[2]||"",gender:O[3]||"",notes:O[4]||""}}):v.map(z=>{const O=z.split("|").filter((me,Oe,We)=>Oe!==0&&Oe!==(We==null?void 0:We.length)-1||me.trim()!=="").map(me=>me.trim());if((O==null?void 0:O.length)<6)for(console.warn("Row has fewer than expected columns:",z);(O==null?void 0:O.length)<6;)O.push("");return{characterA:O[0]||"",characterB:O[1]||"",relationship:O[2]||"",addressTermsAToB:O[3]||"",addressTermsBToA:O[4]||"",notes:O[5]||""}})}catch(p){return console.error("Error parsing markdown table:",p),[]}},nt=(u,g)=>{if((u==null?void 0:u.length)===0)return"";let p="";return g?(p=`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
`,p+=`|:----------- |:------------- |:------------------------- |:------------------ |:------ |
`,u.forEach(v=>{p+=`| ${v.term} | ${v.transcription} | ${v.type} | ${v.gender} | ${v.notes} |
`})):(p=`| Character A | Character B | Relationship | Address Terms (A→B) | Address Terms (B→A) | Notes |
`,p+=`|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
`,u.forEach(v=>{p+=`| ${v.characterA} | ${v.characterB} | ${v.relationship} | ${v.addressTermsAToB} | ${v.addressTermsBToA} | ${v.notes} |
`})),p},_t=(u,g)=>{try{if(!u.trim()){ae.error("Please enter a markdown table to import"),c("Please enter a markdown table to import");return}if(!u.includes("|")){ae.error("Invalid table format. Table must contain pipe characters (|)"),c("Import failed: Invalid table format. Table must contain pipe characters (|)");return}const p=u.trim().split(`
`);if((p==null?void 0:p.length)<3){ae.error("Table must contain at least 3 lines (header, separator, and data row)"),c("Import failed: Table must contain at least 3 lines (header, separator, and data row)");return}const v=p[1];if(!v.includes("|")||!v.includes("-")){ae.error("Second line must be a separator with pipes (|) and dashes (-)"),c("Import failed: Second line must be a separator with pipes (|) and dashes (-)");return}const z=rt(u,g);if((z==null?void 0:z.length)===0){ae.error("No valid data rows found in the table"),c("Import failed: No valid data rows found in the table");return}c(null),g?(oe(ue),fe(z)):(te(pe),j(z)),Qe(g,z),Ae(!0),setTimeout(()=>{Ae(!1)},6e4),ae.success(`${g?"Mapping":"Relationships"} table imported successfully`)}catch(p){console.error("Error importing markdown table:",p),ae.error(`Import failed: ${p instanceof Error?p.message:"Unknown error"}`),c(`Import failed: ${p instanceof Error?p.message:"Unknown error"}`)}},Ht=u=>{u?(fe(Y),Qe(!0,Y),oe([])):(j(he),Qe(!1,he),te([])),Ae(!1),ae.success(`${u?"Mapping":"Relationships"} table reverted to previous state`)},Qe=async(u,g)=>{if(!x)return;const p=D.map(v=>v.id===x?{...v,mappingTable:u?g:v.mappingTable,relationshipsTable:u?v.relationshipsTable:g}:v);R(p),await Pe("translationCollections",p)},Bt=u=>{const g=nt(u?ue:pe,u);u?V(g):$(g),ee(!0)},St=u=>{if(u===x)return;B();const g=D.find(p=>p.id===u);g&&(L(u),fe(g.mappingTable),j(g.relationshipsTable))},B=()=>{if(!x)return;const u=D.map(g=>g.id===x?{...g,mappingTable:ue,relationshipsTable:pe}:g);R(u),Pe("translationCollections",u)},ne=u=>{if(!u.trim()){ae.error("Please enter a name for the new collection"),c("Please enter a name for the new collection");return}B();const g={id:Date.now().toString(),name:u,mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]},p=[...D,g];R(p),L(g.id),fe([]),j([]),Pe("translationCollections",p),ae.success(`Collection "${u}" created`)},re=u=>{if((D==null?void 0:D.length)<=1){ae.error("You must have at least one collection"),c("You must have at least one collection");return}const g=D.find(v=>v.id===u);if(!g)return;const p=D.filter(v=>v.id!==u);if(u===x&&(p==null?void 0:p.length)>0){const v=p[0];L(v.id),fe(v.mappingTable),j(v.relationshipsTable)}R(p),Pe("translationCollections",p).then(()=>{ae.success(`Collection "${g.name}" deleted`)}).catch(v=>{console.error("Failed to save collections after deletion:",v),ae.error("Failed to delete collection")}),u===E&&(G(""),X(""))},Z=()=>{ee(!W),W||(Re==="mapping"?V(nt(ue,!0)):$(nt(pe,!1)))},ce=u=>{a(u.inputText),l(""),N(u.model),St(u.collectionId),C(!1),ae.info("Previous translation loaded")},Me=async()=>{d([]),await Pe("translationHistory",[]),ae.success("Translation history cleared")},Ee=async u=>{const g=D.find(z=>z.id===x);if(!g)return;const v=[{id:Date.now().toString(),timestamp:Date.now(),inputText:n,translatedText:u,model:b,collectionId:x,collectionName:g.name},...f].slice(0,50);d(v),await Pe("translationHistory",v)},Ye=async()=>{if(!n.trim()){ae.error("Please enter text to translate"),c("Please enter text to translate");return}B(),i(!0),c(null),ae.promise(async()=>{try{const u=nt(ue,!0),g=nt(pe,!1),p=await ps(n,u,g,P||"default-key",b,{onMappingTableUpdate:v=>{console.log("Received entries mapping table:",v);try{const{updatedCount:z,added:O,updated:me}=ea(ue,v,vl,(Oe,We)=>Oe.findIndex(Ut=>Ut.term===We.term));z>0&&zn("mapping",O,me)}catch(z){console.error("Error updating mapping table:",z),ae.error("Failed to update mapping table")}},onRelationshipsTableUpdate:v=>{console.log("Received entries relationships table:",v);try{const{updatedCount:z,added:O,updated:me}=ea(pe,v,bl,(Oe,We)=>Oe.findIndex(Ut=>Ut.characterA===We.characterA&&Ut.characterB===We.characterB));z>0&&zn("relationships",O,me)}catch(z){console.error("Error updating relationships table:",z),ae.error("Failed to update relationships table")}}});if(p.hasError)throw c(p.thinking||"Translation failed. Please try again."),new Error(p.thinking||"Translation failed");{const v=p.ocrText||"";return l(v),await Ee(v),v}}catch(u){throw console.error("Translation error:",u),c("An error occurred during translation. Please try again."),u}finally{i(!1)}},{loading:"Translating text...",success:"Translation completed successfully",error:u=>`Translation failed: ${u instanceof Error?u.message:"Unknown error"}`})},Be=()=>{navigator.clipboard.writeText(s),y(!0),ae.success("Copied to clipboard"),setTimeout(()=>y(!1),2e3)};I.useEffect(()=>{const u=()=>{window.scrollY>200?w(!0):w(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const et=()=>{if(console.log("Scrolling to top attempt"),Ze.current){Ze.current.scrollIntoView({behavior:"smooth"}),console.log("Used scrollIntoView");return}try{window.scroll({top:0,left:0,behavior:"smooth"}),console.log("Used window.scroll")}catch{window.scrollTo(0,0),console.log("Used fallback scrollTo")}},Xe=()=>{a(""),l(""),c(null),ae.info("Text cleared")},Ve=()=>{if(!E||!A.trim())return;const u=D.map(g=>g.id===E?{...g,name:A.trim()}:g);R(u),Pe("translationCollections",u),ae.success(`Collection renamed to "${A}"`)},pt=u=>{const g=!_;if(se(g),g){const p=D.find(v=>v.id===u);p&&(G(u),X(p.name))}};I.useEffect(()=>{_&&Ie.current&&setTimeout(()=>{var u;(u=Ie.current)==null||u.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[_]);const Ot=()=>{se(!1),G(""),X(""),Q(""),ie(!1),setTimeout(()=>{var u;(u=Ze.current)==null||u.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},Va=u=>{console.log("Delete confirmation requested for collection:",u),Q(u),setTimeout(()=>{ie(!0),console.log("showDeleteConfirmation set to true")},0)},Wa=()=>{if(console.log("Confirming deletion of collection:",J),!!J)try{re(J),ie(!1),Q("")}catch(u){console.error("Error deleting collection:",u),ae.error("Failed to delete collection")}},Ga=u=>{St(u),Ot()};I.useEffect(()=>{if(E){const u=D.find(g=>g.id===E);u&&X(u.name)}},[E,D]);const zn=(u,g,p)=>{const v={id:Date.now().toString(),timestamp:Date.now(),type:u,updates:{added:g,updated:p},status:"pending"};Je(z=>[...z,v]),ze(!0),ge(!0),setTimeout(()=>ge(!1),300),ae.info("New table update available for review",{description:`${g==null?void 0:g.length} new entries and ${p==null?void 0:p.length} updated entries`,action:{label:"Review",onClick:()=>ze(!0)}})},qa=async u=>{try{if(u.type==="mapping"){const g=[...ue];u.updates.added.forEach(p=>g.push(p)),u.updates.updated.forEach(p=>{const v=g.findIndex(z=>z.term===p.term);v>=0&&(g[v]=p)}),fe(g),await Qe(!0,g)}else{const g=[...pe];u.updates.added.forEach(p=>g.push(p)),u.updates.updated.forEach(p=>{const v=g.findIndex(z=>z.characterA===p.characterA&&z.characterB===p.characterB);v>=0&&(g[v]=p)}),j(g),await Qe(!1,g)}}catch(g){console.error("Error reapplying update:",g),ae.error("Failed to reapply update")}},ln=async(u,g)=>{try{if(g)if(u.type==="mapping"){const v=[...ue];u.updates.added.forEach(z=>v.push(z)),u.updates.updated.forEach(z=>{const O=v.findIndex(me=>me.term===z.term);O>=0&&(v[O]=z)}),fe(v),await Qe(!0,v)}else{const v=[...pe];u.updates.added.forEach(z=>v.push(z)),u.updates.updated.forEach(z=>{const O=v.findIndex(me=>me.characterA===z.characterA&&me.characterB===z.characterB);O>=0&&(v[O]=z)}),j(v),await Qe(!1,v)}const p=D.map(v=>{if(v.id===x){const z=[...v.tableUpdateHistory||[]],O={...u,status:g?"approved":"rejected"};return z.push(O),{...v,tableUpdateHistory:z,mappingTable:g&&u.type==="mapping"?ue:v.mappingTable,relationshipsTable:g&&u.type==="relationships"?pe:v.relationshipsTable}}return v});R(p),await Pe("translationCollections",p),Je(v=>{const z=v.filter(O=>O.id!==u.id);return(z==null?void 0:z.length)===0&&ze(!1),z}),De(!1),Le(null),ae.success(`Table update ${g?"approved":"rejected"} successfully`)}catch(p){console.error("Error handling update confirmation:",p),ae.error(`Failed to ${g?"approve":"reject"} update`)}};I.useEffect(()=>{if((D==null?void 0:D.length)===0){L(""),fe([]),j([]);return}D.find(g=>g.id===x)||(L(D[0].id),fe(D[0].mappingTable),j(D[0].relationshipsTable))},[D,x]);const Ka=async u=>{const g=f.filter(p=>p.id!==u);d(g),await Pe("translationHistory",g)},Ya=async(u,g,p)=>{if(!E)return;const v=D.map(z=>{if(z.id===E){const O=z.mappingTable.map((me,Oe)=>Oe===u?{...me,[g]:p}:me);return{...z,mappingTable:O}}return z});R(v),await Pe("translationCollections",v),x===E&&fe(v.find(z=>z.id===E).mappingTable)},Xa=async u=>{if(!E)return;const g=D.map(p=>{if(p.id===E){const v=p.mappingTable.filter((z,O)=>O!==u);return{...p,mappingTable:v}}return p});R(g),await Pe("translationCollections",g),x===E&&fe(g.find(p=>p.id===E).mappingTable)},Ja=async()=>{if(!E)return;const u={term:"",transcription:"",type:"",gender:"",notes:""},g=D.map(p=>p.id===E?{...p,mappingTable:[...p.mappingTable,u]}:p);R(g),await Pe("translationCollections",g),x===E&&fe(g.find(p=>p.id===E).mappingTable)},Za=async(u,g,p)=>{if(!E)return;const v=D.map(z=>{if(z.id===E){const O=z.relationshipsTable.map((me,Oe)=>Oe===u?{...me,[g]:p}:me);return{...z,relationshipsTable:O}}return z});R(v),await Pe("translationCollections",v),x===E&&j(v.find(z=>z.id===E).relationshipsTable)},Qa=async u=>{if(!E)return;const g=D.map(p=>{if(p.id===E){const v=p.relationshipsTable.filter((z,O)=>O!==u);return{...p,relationshipsTable:v}}return p});R(g),await Pe("translationCollections",g),x===E&&j(g.find(p=>p.id===E).relationshipsTable)},es=async()=>{if(!E)return;const u={characterA:"",characterB:"",relationship:"",addressTermsAToB:"",addressTermsBToA:"",notes:""},g=D.map(p=>p.id===E?{...p,relationshipsTable:[...p.relationshipsTable,u]}:p);R(g),await Pe("translationCollections",g),x===E&&j(g.find(p=>p.id===E).relationshipsTable)};return e.jsxs("div",{className:"container mx-auto p-4 flex flex-col gap-6 pb-10 relative",children:[e.jsx("div",{ref:Ze,className:"absolute top-0"}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Text Translator"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(q,{variant:"outline",onClick:Xe,"aria-label":"Clear all text",children:[e.jsx($s,{className:"h-5 w-5 mr-2"}),"Clear"]})})]}),e.jsx(tr,{inputText:n,setInputText:a,translatedText:s,isTranslating:r,error:o,isCopied:h,onTranslate:Ye,onCopy:Be,selectedModel:b,onModelChange:rn,models:m,selectedCollectionId:x,collections:D,onCollectionChange:St,isCollectionManagementVisible:_,onToggleCollectionManagement:pt,arcrylicBg:t,modelDescriptions:S}),e.jsx(gl,{isVisible:_,settingsPanelRef:Ie,collections:D,collectionToEdit:E,setCollectionToEdit:G,editedCollectionName:A,setEditedCollectionName:X,addNewCollection:ne,useCollection:Ga,renameCollection:Ve,requestDeleteCollection:Va,showDeleteConfirmation:le,setShowDeleteConfirmation:ie,confirmDeleteCollection:Wa,selectedCollectionId:x,error:o,setError:c,arcrylicBg:t,translationHistory:f,onClearHistory:Me,onUseHistoryEntry:ce,onRemoveHistoryEntry:Ka,updateMappingEntry:Ya,removeMappingEntry:Xa,addMappingEntry:Ja,showMappingImportArea:W,toggleMappingImportArea:Z,mappingMarkdown:H,setMappingMarkdown:V,revertMappingImport:()=>Ht(!0),showMappingRevertButton:M,exportMappingMarkdown:()=>Bt(!0),importMappingMarkdown:()=>_t(H,!0),updateRelationshipEntry:Za,removeRelationshipEntry:Qa,addRelationshipEntry:es,showRelationshipImportArea:W,toggleRelationshipImportArea:Z,relationshipsMarkdown:F,setRelationshipsMarkdown:$,revertRelationshipImport:()=>Ht(!1),showRelationshipRevertButton:M,exportRelationshipMarkdown:()=>Bt(!1),importRelationshipMarkdown:()=>_t(F,!1),onApproveUpdate:qa,onRejectUpdate:u=>ln(u,!1)}),e.jsx(q,{variant:"default",size:"lg",className:"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-[9999] w-12 h-12 p-0",onClick:()=>{console.log("Button clicked"),et()},"aria-label":"Scroll to top",children:e.jsx(yn,{className:"h-6 w-6"})}),ke&&e.jsx(wl,{showTableUpdates:ke,isTableUpdatesAnimating:U,arcrylicBg:t,pendingTableUpdates:xe,expandedEntries:Ke,toggleEntryExpansion:Lt,setShowTableUpdates:ze,setCurrentUpdateEntry:Le,setShowUpdateConfirmation:De}),$e&&Ne&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:e.jsx(qe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Confirm Table Update"}),e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{De(!1),Le(null)},className:"h-8 w-8 p-0",children:e.jsx(Qt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Added Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:Ne.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:Ne.updates.added.map((u,g)=>e.jsx("tr",{className:"border-t",children:Ne.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.term}),e.jsx("td",{className:"p-2",children:u.transcription}),e.jsx("td",{className:"p-2",children:u.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.characterA}),e.jsx("td",{className:"p-2",children:u.characterB}),e.jsx("td",{className:"p-2",children:u.relationship})]})},g))})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Updated Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:Ne.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:Ne.updates.updated.map((u,g)=>e.jsx("tr",{className:"border-t",children:Ne.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.term}),e.jsx("td",{className:"p-2",children:u.transcription}),e.jsx("td",{className:"p-2",children:u.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.characterA}),e.jsx("td",{className:"p-2",children:u.characterB}),e.jsx("td",{className:"p-2",children:u.relationship})]})},g))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(q,{variant:"outline",onClick:()=>{Ne&&ln(Ne,!1)},children:"Reject"}),e.jsx(q,{variant:"default",onClick:()=>{Ne&&ln(Ne,!0)},children:"Approve"})]})]})]})})})]})};export{Il as default};
