import{c as Z,af as zn,r as T,ag as Tn,ah as kn,ai as An,aj as En,ak as Pn,al as Yt,am as bs,j as e,a as le,R as _e,B as L,A as Zt,an as Mn,a0 as Rn,L as In,ao as vs,ap as Ln,a2 as mt,t as q,a1 as ve}from"./index-Op_HYEVp.js";import{C as pe,b as Ae,c as Ee,e as It,a as Xe}from"./card-_t2vIDVB.js";import{T as Ns,a as ys,b as ht,c as pt}from"./index-CCb2oMLj.js";import{G as $n,C as Cs,S as Jt,b as Qt,c as es,d as ts,e as ss,a as Lt,h as Dn,f as _n,i as Hn}from"./select-BgWkC6Qh.js";import{a as ns,T as Ye}from"./index-Nc4AdDOt.js";import{S as nt}from"./scroll-area-vPYKEwyZ.js";import{B as ke}from"./badge-C3ZllU98.js";import{T as te,a as se,b as ne,c as ae}from"./tooltip-DIIDBgTk.js";import{D as Bn,a as Un,b as Fn,c as Vn,e as Gn,A as qn,X as wt}from"./dialog-D5rVM-5V.js";import{T as lt}from"./trash-2-CfP7wfP1.js";import{I as ue}from"./input-4UKMEhR_.js";import{F as Ss}from"./file-down-D3eW-IG1.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],On=Z("Archive",Kn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],$t=Z("ArrowUp",Wn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],Yn=Z("ChevronsDown",Xn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],Jn=Z("ChevronsUp",Zn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ea=Z("CircleCheckBig",Qn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Et=Z("CircleCheck",ta);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],na=Z("CircleX",sa);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],ft=Z("Clipboard",aa);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ra=Z("Database",la);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],oa=Z("Eraser",ia);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],zs=Z("FilePlus",ca);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ua=Z("FileText",da);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],at=Z("Folder",ma);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ts=Z("History",xa);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ks=Z("Lightbulb",ha);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],as=Z("Pencil",pa);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dt=Z("Plus",fa);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Pt=Z("RotateCcw",ga);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],wa=Z("Text",ja);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ls=Z("Users",ba);function Mt(t){const s=zn(()=>kn(t)),{isStatic:n}=T.useContext(Tn);if(n){const[,a]=T.useState(t);T.useEffect(()=>s.on("change",a),[])}return s}function va(t,s){const n=Mt(s()),a=()=>n.set(s());return a(),An(()=>{const r=()=>En.preRender(a,!1,!0),l=t.map(o=>o.on("change",r));return()=>{l.forEach(o=>o()),Pn(a)}}),n}function Na(t,...s){const n=t.length;function a(){let r="";for(let l=0;l<n;l++){r+=t[l];const o=s[l];o&&(r+=Yt(o)?o.get():o)}return r}return va(s.filter(Yt),a)}const{createElement:Ze,createContext:ya,forwardRef:As,useCallback:ce,useContext:Es,useEffect:Be,useImperativeHandle:Ps,useLayoutEffect:Ca,useMemo:Sa,useRef:de,useState:Oe}=bs,rs=bs[`useId${Math.random()}`.slice(0,5)],za=Ca,bt=ya(null);bt.displayName="PanelGroupContext";const Ue=za,Ta=typeof rs=="function"?rs:()=>null;let ka=0;function _t(t=null){const s=Ta(),n=de(t||s||null);return n.current===null&&(n.current=""+ka++),t??n.current}function Ms({children:t,className:s="",collapsedSize:n,collapsible:a,defaultSize:r,forwardedRef:l,id:o,maxSize:d,minSize:c,onCollapse:x,onExpand:N,onResize:f,order:u,style:y,tagName:g="div",...C}){const w=Es(bt);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:j,expandPanel:H,getPanelSize:B,getPanelStyle:V,groupId:X,isPanelCollapsed:b,reevaluatePanelConstraints:z,registerPanel:R,resizePanel:K,unregisterPanel:re}=w,J=_t(o),$=de({callbacks:{onCollapse:x,onExpand:N,onResize:f},constraints:{collapsedSize:n,collapsible:a,defaultSize:r,maxSize:d,minSize:c},id:J,idIsFromProps:o!==void 0,order:u});de({didLogMissingDefaultSizeWarning:!1}),Ue(()=>{const{callbacks:W,constraints:E}=$.current,U={...E};$.current.id=J,$.current.idIsFromProps=o!==void 0,$.current.order=u,W.onCollapse=x,W.onExpand=N,W.onResize=f,E.collapsedSize=n,E.collapsible=a,E.defaultSize=r,E.maxSize=d,E.minSize=c,(U.collapsedSize!==E.collapsedSize||U.collapsible!==E.collapsible||U.maxSize!==E.maxSize||U.minSize!==E.minSize)&&z($.current,U)}),Ue(()=>{const W=$.current;return R(W),()=>{re(W)}},[u,J,R,re]),Ps(l,()=>({collapse:()=>{j($.current)},expand:W=>{H($.current,W)},getId(){return J},getSize(){return B($.current)},isCollapsed(){return b($.current)},isExpanded(){return!b($.current)},resize:W=>{K($.current,W)}}),[j,H,B,b,J,K]);const Q=V($.current,r);return Ze(g,{...C,children:t,className:s,id:o,style:{...Q,...y},"data-panel":"","data-panel-collapsible":a||void 0,"data-panel-group-id":X,"data-panel-id":J,"data-panel-size":parseFloat(""+Q.flexGrow).toFixed(1)})}const Rs=As((t,s)=>Ze(Ms,{...t,forwardedRef:s}));Ms.displayName="Panel";Rs.displayName="forwardRef(Panel)";let Rt=null,He=null;function Aa(t,s){if(s){const n=(s&_s)!==0,a=(s&Hs)!==0,r=(s&Bs)!==0,l=(s&Us)!==0;if(n)return r?"se-resize":l?"ne-resize":"e-resize";if(a)return r?"sw-resize":l?"nw-resize":"w-resize";if(r)return"s-resize";if(l)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Ea(){He!==null&&(document.head.removeChild(He),Rt=null,He=null)}function kt(t,s){const n=Aa(t,s);Rt!==n&&(Rt=n,He===null&&(He=document.createElement("style"),document.head.appendChild(He)),He.innerHTML=`*{cursor: ${n}!important;}`)}function Is(t){return t.type==="keydown"}function Ls(t){return t.type.startsWith("pointer")}function $s(t){return t.type.startsWith("mouse")}function vt(t){if(Ls(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if($s(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function Pa(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Ma(t,s,n){return t.x<s.x+s.width&&t.x+t.width>s.x&&t.y<s.y+s.height&&t.y+t.height>s.y}function Ra(t,s){if(t===s)throw new Error("Cannot compare node with itself");const n={a:cs(t),b:cs(s)};let a;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),s=n.b.pop(),a=t;I(a,"Stacking order can only be calculated for elements with a common ancestor");const r={a:os(is(n.a)),b:os(is(n.b))};if(r.a===r.b){const l=a.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let d=l.length;for(;d--;){const c=l[d];if(c===o.a)return 1;if(c===o.b)return-1}}return Math.sign(r.a-r.b)}const Ia=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function La(t){var s;const n=getComputedStyle((s=Ds(t))!==null&&s!==void 0?s:t).display;return n==="flex"||n==="inline-flex"}function $a(t){const s=getComputedStyle(t);return!!(s.position==="fixed"||s.zIndex!=="auto"&&(s.position!=="static"||La(t))||+s.opacity<1||"transform"in s&&s.transform!=="none"||"webkitTransform"in s&&s.webkitTransform!=="none"||"mixBlendMode"in s&&s.mixBlendMode!=="normal"||"filter"in s&&s.filter!=="none"||"webkitFilter"in s&&s.webkitFilter!=="none"||"isolation"in s&&s.isolation==="isolate"||Ia.test(s.willChange)||s.webkitOverflowScrolling==="touch")}function is(t){let s=t.length;for(;s--;){const n=t[s];if(I(n,"Missing node"),$a(n))return n}return null}function os(t){return t&&Number(getComputedStyle(t).zIndex)||0}function cs(t){const s=[];for(;t;)s.push(t),t=Ds(t);return s}function Ds(t){const{parentNode:s}=t;return s&&s instanceof ShadowRoot?s.host:s}const _s=1,Hs=2,Bs=4,Us=8,Da=Pa()==="coarse";let je=[],We=!1,Te=new Map,Nt=new Map;const rt=new Set;function _a(t,s,n,a,r){var l;const{ownerDocument:o}=s,d={direction:n,element:s,hitAreaMargins:a,setResizeHandlerState:r},c=(l=Te.get(o))!==null&&l!==void 0?l:0;return Te.set(o,c+1),rt.add(d),gt(),function(){var N;Nt.delete(t),rt.delete(d);const f=(N=Te.get(o))!==null&&N!==void 0?N:1;if(Te.set(o,f-1),gt(),f===1&&Te.delete(o),je.includes(d)){const u=je.indexOf(d);u>=0&&je.splice(u,1),Bt(),r("up",!0,null)}}}function ds(t){const{target:s}=t,{x:n,y:a}=vt(t);We=!0,Ht({target:s,x:n,y:a}),gt(),je.length>0&&(jt("down",t),t.preventDefault(),t.stopPropagation())}function et(t){const{x:s,y:n}=vt(t);if(We&&t.buttons===0&&(We=!1,jt("up",t)),!We){const{target:a}=t;Ht({target:a,x:s,y:n})}jt("move",t),Bt(),je.length>0&&t.preventDefault()}function Ve(t){const{target:s}=t,{x:n,y:a}=vt(t);Nt.clear(),We=!1,je.length>0&&t.preventDefault(),jt("up",t),Ht({target:s,x:n,y:a}),Bt(),gt()}function Ht({target:t,x:s,y:n}){je.splice(0);let a=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(a=t),rt.forEach(r=>{const{element:l,hitAreaMargins:o}=r,d=l.getBoundingClientRect(),{bottom:c,left:x,right:N,top:f}=d,u=Da?o.coarse:o.fine;if(s>=x-u&&s<=N+u&&n>=f-u&&n<=c+u){if(a!==null&&document.contains(a)&&l!==a&&!l.contains(a)&&!a.contains(l)&&Ra(a,l)>0){let g=a,C=!1;for(;g&&!g.contains(l);){if(Ma(g.getBoundingClientRect(),d)){C=!0;break}g=g.parentElement}if(C)return}je.push(r)}})}function At(t,s){Nt.set(t,s)}function Bt(){let t=!1,s=!1;je.forEach(a=>{const{direction:r}=a;r==="horizontal"?t=!0:s=!0});let n=0;Nt.forEach(a=>{n|=a}),t&&s?kt("intersection",n):t?kt("horizontal",n):s?kt("vertical",n):Ea()}function gt(){Te.forEach((t,s)=>{const{body:n}=s;n.removeEventListener("contextmenu",Ve),n.removeEventListener("pointerdown",ds),n.removeEventListener("pointerleave",et),n.removeEventListener("pointermove",et)}),window.removeEventListener("pointerup",Ve),window.removeEventListener("pointercancel",Ve),rt.size>0&&(We?(je.length>0&&Te.forEach((t,s)=>{const{body:n}=s;t>0&&(n.addEventListener("contextmenu",Ve),n.addEventListener("pointerleave",et),n.addEventListener("pointermove",et))}),window.addEventListener("pointerup",Ve),window.addEventListener("pointercancel",Ve)):Te.forEach((t,s)=>{const{body:n}=s;t>0&&(n.addEventListener("pointerdown",ds,{capture:!0}),n.addEventListener("pointermove",et))}))}function jt(t,s){rt.forEach(n=>{const{setResizeHandlerState:a}=n,r=je.includes(n);a(t,r,s)})}function Ha(){const[t,s]=Oe(0);return ce(()=>s(n=>n+1),[])}function I(t,s){if(!t)throw console.error(s),Error(s)}const Ut=10;function Fe(t,s,n=Ut){return t.toFixed(n)===s.toFixed(n)?0:t>s?1:-1}function Ne(t,s,n=Ut){return Fe(t,s,n)===0}function he(t,s,n){return Fe(t,s,n)===0}function Ba(t,s,n){if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++){const r=t[a],l=s[a];if(!he(r,l,n))return!1}return!0}function Ke({panelConstraints:t,panelIndex:s,size:n}){const a=t[s];I(a!=null,`Panel constraints not found for index ${s}`);let{collapsedSize:r=0,collapsible:l,maxSize:o=100,minSize:d=0}=a;if(Fe(n,d)<0)if(l){const c=(r+d)/2;Fe(n,c)<0?n=r:n=d}else n=d;return n=Math.min(o,n),n=parseFloat(n.toFixed(Ut)),n}function tt({delta:t,initialLayout:s,panelConstraints:n,pivotIndices:a,prevLayout:r,trigger:l}){if(he(t,0))return s;const o=[...s],[d,c]=a;I(d!=null,"Invalid first pivot index"),I(c!=null,"Invalid second pivot index");let x=0;if(l==="keyboard"){{const f=t<0?c:d,u=n[f];I(u,`Panel constraints not found for index ${f}`);const{collapsedSize:y=0,collapsible:g,minSize:C=0}=u;if(g){const w=s[f];if(I(w!=null,`Previous layout not found for panel index ${f}`),he(w,y)){const j=C-w;Fe(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}{const f=t<0?d:c,u=n[f];I(u,`No panel constraints found for index ${f}`);const{collapsedSize:y=0,collapsible:g,minSize:C=0}=u;if(g){const w=s[f];if(I(w!=null,`Previous layout not found for panel index ${f}`),he(w,C)){const j=w-y;Fe(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}}{const f=t<0?1:-1;let u=t<0?c:d,y=0;for(;;){const C=s[u];I(C!=null,`Previous layout not found for panel index ${u}`);const j=Ke({panelConstraints:n,panelIndex:u,size:100})-C;if(y+=j,u+=f,u<0||u>=n.length)break}const g=Math.min(Math.abs(t),Math.abs(y));t=t<0?0-g:g}{let u=t<0?d:c;for(;u>=0&&u<n.length;){const y=Math.abs(t)-Math.abs(x),g=s[u];I(g!=null,`Previous layout not found for panel index ${u}`);const C=g-y,w=Ke({panelConstraints:n,panelIndex:u,size:C});if(!he(g,w)&&(x+=g-w,o[u]=w,x.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?u--:u++}}if(Ba(r,o))return r;{const f=t<0?c:d,u=s[f];I(u!=null,`Previous layout not found for panel index ${f}`);const y=u+x,g=Ke({panelConstraints:n,panelIndex:f,size:y});if(o[f]=g,!he(g,y)){let C=y-g,j=t<0?c:d;for(;j>=0&&j<n.length;){const H=o[j];I(H!=null,`Previous layout not found for panel index ${j}`);const B=H+C,V=Ke({panelConstraints:n,panelIndex:j,size:B});if(he(H,V)||(C-=V-H,o[j]=V),he(C,0))break;t>0?j--:j++}}}const N=o.reduce((f,u)=>u+f,0);return he(N,100)?o:r}function Ua({layout:t,panelsArray:s,pivotIndices:n}){let a=0,r=100,l=0,o=0;const d=n[0];I(d!=null,"No pivot index found"),s.forEach((f,u)=>{const{constraints:y}=f,{maxSize:g=100,minSize:C=0}=y;u===d?(a=C,r=g):(l+=C,o+=g)});const c=Math.min(r,100-l),x=Math.max(a,100-o),N=t[d];return{valueMax:c,valueMin:x,valueNow:N}}function it(t,s=document){return Array.from(s.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Fs(t,s,n=document){const r=it(t,n).findIndex(l=>l.getAttribute("data-panel-resize-handle-id")===s);return r??null}function Vs(t,s,n){const a=Fs(t,s,n);return a!=null?[a,a+1]:[-1,-1]}function Gs(t,s=document){var n;if(s instanceof HTMLElement&&(s==null||(n=s.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return s;const a=s.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return a||null}function yt(t,s=document){const n=s.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function Fa(t,s,n,a=document){var r,l,o,d;const c=yt(s,a),x=it(t,a),N=c?x.indexOf(c):-1,f=(r=(l=n[N])===null||l===void 0?void 0:l.id)!==null&&r!==void 0?r:null,u=(o=(d=n[N+1])===null||d===void 0?void 0:d.id)!==null&&o!==void 0?o:null;return[f,u]}function Va({committedValuesRef:t,eagerValuesRef:s,groupId:n,layout:a,panelDataArray:r,panelGroupElement:l,setLayout:o}){de({didWarnAboutMissingResizeHandle:!1}),Ue(()=>{if(!l)return;const d=it(n,l);for(let c=0;c<r.length-1;c++){const{valueMax:x,valueMin:N,valueNow:f}=Ua({layout:a,panelsArray:r,pivotIndices:[c,c+1]}),u=d[c];if(u!=null){const y=r[c];I(y,`No panel data found for index "${c}"`),u.setAttribute("aria-controls",y.id),u.setAttribute("aria-valuemax",""+Math.round(x)),u.setAttribute("aria-valuemin",""+Math.round(N)),u.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{d.forEach((c,x)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[n,a,r,l]),Be(()=>{if(!l)return;const d=s.current;I(d,"Eager values not found");const{panelDataArray:c}=d,x=Gs(n,l);I(x!=null,`No group found for id "${n}"`);const N=it(n,l);I(N,`No resize handles found for group id "${n}"`);const f=N.map(u=>{const y=u.getAttribute("data-panel-resize-handle-id");I(y,"Resize handle element has no handle id attribute");const[g,C]=Fa(n,y,c,l);if(g==null||C==null)return()=>{};const w=j=>{if(!j.defaultPrevented)switch(j.key){case"Enter":{j.preventDefault();const H=c.findIndex(B=>B.id===g);if(H>=0){const B=c[H];I(B,`No panel data found for index ${H}`);const V=a[H],{collapsedSize:X=0,collapsible:b,minSize:z=0}=B.constraints;if(V!=null&&b){const R=tt({delta:he(V,X)?z-X:X-V,initialLayout:a,panelConstraints:c.map(K=>K.constraints),pivotIndices:Vs(n,y,l),prevLayout:a,trigger:"keyboard"});a!==R&&o(R)}}break}}};return u.addEventListener("keydown",w),()=>{u.removeEventListener("keydown",w)}});return()=>{f.forEach(u=>u())}},[l,t,s,n,a,r,o])}function us(t,s){if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==s[n])return!1;return!0}function qs(t,s){const n=t==="horizontal",{x:a,y:r}=vt(s);return n?a:r}function Ga(t,s,n,a,r){const l=n==="horizontal",o=yt(s,r);I(o,`No resize handle element found for id "${s}"`);const d=o.getAttribute("data-panel-group-id");I(d,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=a;const x=qs(n,t),N=Gs(d,r);I(N,`No group element found for id "${d}"`);const f=N.getBoundingClientRect(),u=l?f.width:f.height;return(x-c)/u*100}function qa(t,s,n,a,r,l){if(Is(t)){const o=n==="horizontal";let d=0;t.shiftKey?d=100:r!=null?d=r:d=10;let c=0;switch(t.key){case"ArrowDown":c=o?0:d;break;case"ArrowLeft":c=o?-d:0;break;case"ArrowRight":c=o?d:0;break;case"ArrowUp":c=o?0:-d;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return a==null?0:Ga(t,s,n,a,l)}function Ka({panelDataArray:t}){const s=Array(t.length),n=t.map(l=>l.constraints);let a=0,r=100;for(let l=0;l<t.length;l++){const o=n[l];I(o,`Panel constraints not found for index ${l}`);const{defaultSize:d}=o;d!=null&&(a++,s[l]=d,r-=d)}for(let l=0;l<t.length;l++){const o=n[l];I(o,`Panel constraints not found for index ${l}`);const{defaultSize:d}=o;if(d!=null)continue;const c=t.length-a,x=r/c;a++,s[l]=x,r-=x}return s}function Ge(t,s,n){s.forEach((a,r)=>{const l=t[r];I(l,`Panel data not found for index ${r}`);const{callbacks:o,constraints:d,id:c}=l,{collapsedSize:x=0,collapsible:N}=d,f=n[c];if(f==null||a!==f){n[c]=a;const{onCollapse:u,onExpand:y,onResize:g}=o;g&&g(a,f),N&&(u||y)&&(y&&(f==null||Ne(f,x))&&!Ne(a,x)&&y(),u&&(f==null||!Ne(f,x))&&Ne(a,x)&&u())}})}function xt(t,s){if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=s[n])return!1;return!0}function Oa({defaultSize:t,dragState:s,layout:n,panelData:a,panelIndex:r,precision:l=3}){const o=n[r];let d;return o==null?d=t!=null?t.toPrecision(l):"1":a.length===1?d="1":d=o.toPrecision(l),{flexBasis:0,flexGrow:d,flexShrink:1,overflow:"hidden",pointerEvents:s!==null?"none":void 0}}function Wa(t,s=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},s)}}function ms(t){try{if(typeof localStorage<"u")t.getItem=s=>localStorage.getItem(s),t.setItem=(s,n)=>{localStorage.setItem(s,n)};else throw new Error("localStorage not supported in this environment")}catch(s){console.error(s),t.getItem=()=>null,t.setItem=()=>{}}}function Ks(t){return`react-resizable-panels:${t}`}function Os(t){return t.map(s=>{const{constraints:n,id:a,idIsFromProps:r,order:l}=s;return r?a:l?`${l}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((s,n)=>s.localeCompare(n)).join(",")}function Ws(t,s){try{const n=Ks(t),a=s.getItem(n);if(a){const r=JSON.parse(a);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function Xa(t,s,n){var a,r;const l=(a=Ws(t,n))!==null&&a!==void 0?a:{},o=Os(s);return(r=l[o])!==null&&r!==void 0?r:null}function Ya(t,s,n,a,r){var l;const o=Ks(t),d=Os(s),c=(l=Ws(t,r))!==null&&l!==void 0?l:{};c[d]={expandToSizes:Object.fromEntries(n.entries()),layout:a};try{r.setItem(o,JSON.stringify(c))}catch(x){console.error(x)}}function xs({layout:t,panelConstraints:s}){const n=[...t],a=n.reduce((l,o)=>l+o,0);if(n.length!==s.length)throw Error(`Invalid ${s.length} panel layout: ${n.map(l=>`${l}%`).join(", ")}`);if(!he(a,100)&&n.length>0)for(let l=0;l<s.length;l++){const o=n[l];I(o!=null,`No layout data found for index ${l}`);const d=100/a*o;n[l]=d}let r=0;for(let l=0;l<s.length;l++){const o=n[l];I(o!=null,`No layout data found for index ${l}`);const d=Ke({panelConstraints:s,panelIndex:l,size:o});o!=d&&(r+=o-d,n[l]=d)}if(!he(r,0))for(let l=0;l<s.length;l++){const o=n[l];I(o!=null,`No layout data found for index ${l}`);const d=o+r,c=Ke({panelConstraints:s,panelIndex:l,size:d});if(o!==c&&(r-=c-o,n[l]=c,he(r,0)))break}return n}const Za=100,st={getItem:t=>(ms(st),st.getItem(t)),setItem:(t,s)=>{ms(st),st.setItem(t,s)}},hs={};function Xs({autoSaveId:t=null,children:s,className:n="",direction:a,forwardedRef:r,id:l=null,onLayout:o=null,keyboardResizeBy:d=null,storage:c=st,style:x,tagName:N="div",...f}){const u=_t(l),y=de(null),[g,C]=Oe(null),[w,j]=Oe([]),H=Ha(),B=de({}),V=de(new Map),X=de(0),b=de({autoSaveId:t,direction:a,dragState:g,id:u,keyboardResizeBy:d,onLayout:o,storage:c}),z=de({layout:w,panelDataArray:[],panelDataArrayChanged:!1});de({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Ps(r,()=>({getId:()=>b.current.id,getLayout:()=>{const{layout:p}=z.current;return p},setLayout:p=>{const{onLayout:S}=b.current,{layout:k,panelDataArray:P}=z.current,A=xs({layout:p,panelConstraints:P.map(D=>D.constraints)});us(k,A)||(j(A),z.current.layout=A,S&&S(A),Ge(P,A,B.current))}}),[]),Ue(()=>{b.current.autoSaveId=t,b.current.direction=a,b.current.dragState=g,b.current.id=u,b.current.onLayout=o,b.current.storage=c}),Va({committedValuesRef:b,eagerValuesRef:z,groupId:u,layout:w,panelDataArray:z.current.panelDataArray,setLayout:j,panelGroupElement:y.current}),Be(()=>{const{panelDataArray:p}=z.current;if(t){if(w.length===0||w.length!==p.length)return;let S=hs[t];S==null&&(S=Wa(Ya,Za),hs[t]=S);const k=[...p],P=new Map(V.current);S(t,k,P,w,c)}},[t,w,c]),Be(()=>{});const R=ce(p=>{const{onLayout:S}=b.current,{layout:k,panelDataArray:P}=z.current;if(p.constraints.collapsible){const A=P.map(me=>me.constraints),{collapsedSize:D=0,panelSize:F,pivotIndices:G}=De(P,p,k);if(I(F!=null,`Panel size not found for panel "${p.id}"`),!Ne(F,D)){V.current.set(p.id,F);const xe=qe(P,p)===P.length-1?F-D:D-F,O=tt({delta:xe,initialLayout:k,panelConstraints:A,pivotIndices:G,prevLayout:k,trigger:"imperative-api"});xt(k,O)||(j(O),z.current.layout=O,S&&S(O),Ge(P,O,B.current))}}},[]),K=ce((p,S)=>{const{onLayout:k}=b.current,{layout:P,panelDataArray:A}=z.current;if(p.constraints.collapsible){const D=A.map(oe=>oe.constraints),{collapsedSize:F=0,panelSize:G=0,minSize:me=0,pivotIndices:xe}=De(A,p,P),O=S??me;if(Ne(G,F)){const oe=V.current.get(p.id),Ce=oe!=null&&oe>=O?oe:O,Ie=qe(A,p)===A.length-1?G-Ce:Ce-G,ee=tt({delta:Ie,initialLayout:P,panelConstraints:D,pivotIndices:xe,prevLayout:P,trigger:"imperative-api"});xt(P,ee)||(j(ee),z.current.layout=ee,k&&k(ee),Ge(A,ee,B.current))}}},[]),re=ce(p=>{const{layout:S,panelDataArray:k}=z.current,{panelSize:P}=De(k,p,S);return I(P!=null,`Panel size not found for panel "${p.id}"`),P},[]),J=ce((p,S)=>{const{panelDataArray:k}=z.current,P=qe(k,p);return Oa({defaultSize:S,dragState:g,layout:w,panelData:k,panelIndex:P})},[g,w]),$=ce(p=>{const{layout:S,panelDataArray:k}=z.current,{collapsedSize:P=0,collapsible:A,panelSize:D}=De(k,p,S);return I(D!=null,`Panel size not found for panel "${p.id}"`),A===!0&&Ne(D,P)},[]),Q=ce(p=>{const{layout:S,panelDataArray:k}=z.current,{collapsedSize:P=0,collapsible:A,panelSize:D}=De(k,p,S);return I(D!=null,`Panel size not found for panel "${p.id}"`),!A||Fe(D,P)>0},[]),W=ce(p=>{const{panelDataArray:S}=z.current;S.push(p),S.sort((k,P)=>{const A=k.order,D=P.order;return A==null&&D==null?0:A==null?-1:D==null?1:A-D}),z.current.panelDataArrayChanged=!0,H()},[H]);Ue(()=>{if(z.current.panelDataArrayChanged){z.current.panelDataArrayChanged=!1;const{autoSaveId:p,onLayout:S,storage:k}=b.current,{layout:P,panelDataArray:A}=z.current;let D=null;if(p){const G=Xa(p,A,k);G&&(V.current=new Map(Object.entries(G.expandToSizes)),D=G.layout)}D==null&&(D=Ka({panelDataArray:A}));const F=xs({layout:D,panelConstraints:A.map(G=>G.constraints)});us(P,F)||(j(F),z.current.layout=F,S&&S(F),Ge(A,F,B.current))}}),Ue(()=>{const p=z.current;return()=>{p.layout=[]}},[]);const E=ce(p=>{let S=!1;const k=y.current;return k&&window.getComputedStyle(k,null).getPropertyValue("direction")==="rtl"&&(S=!0),function(A){A.preventDefault();const D=y.current;if(!D)return()=>null;const{direction:F,dragState:G,id:me,keyboardResizeBy:xe,onLayout:O}=b.current,{layout:oe,panelDataArray:Ce}=z.current,{initialLayout:Re}=G??{},Ie=Vs(me,p,D);let ee=qa(A,p,F,G,xe,D);const Le=F==="horizontal";Le&&S&&(ee=-ee);const Ct=Ce.map(Qe=>Qe.constraints),Se=tt({delta:ee,initialLayout:Re??oe,panelConstraints:Ct,pivotIndices:Ie,prevLayout:oe,trigger:Is(A)?"keyboard":"mouse-or-touch"}),ot=!xt(oe,Se);(Ls(A)||$s(A))&&X.current!=ee&&(X.current=ee,!ot&&ee!==0?Le?At(p,ee<0?_s:Hs):At(p,ee<0?Bs:Us):At(p,0)),ot&&(j(Se),z.current.layout=Se,O&&O(Se),Ge(Ce,Se,B.current))}},[]),U=ce((p,S)=>{const{onLayout:k}=b.current,{layout:P,panelDataArray:A}=z.current,D=A.map(oe=>oe.constraints),{panelSize:F,pivotIndices:G}=De(A,p,P);I(F!=null,`Panel size not found for panel "${p.id}"`);const xe=qe(A,p)===A.length-1?F-S:S-F,O=tt({delta:xe,initialLayout:P,panelConstraints:D,pivotIndices:G,prevLayout:P,trigger:"imperative-api"});xt(P,O)||(j(O),z.current.layout=O,k&&k(O),Ge(A,O,B.current))},[]),Pe=ce((p,S)=>{const{layout:k,panelDataArray:P}=z.current,{collapsedSize:A=0,collapsible:D}=S,{collapsedSize:F=0,collapsible:G,maxSize:me=100,minSize:xe=0}=p.constraints,{panelSize:O}=De(P,p,k);O!=null&&(D&&G&&Ne(O,A)?Ne(A,F)||U(p,F):O<xe?U(p,xe):O>me&&U(p,me))},[U]),we=ce((p,S)=>{const{direction:k}=b.current,{layout:P}=z.current;if(!y.current)return;const A=yt(p,y.current);I(A,`Drag handle element not found for id "${p}"`);const D=qs(k,S);C({dragHandleId:p,dragHandleRect:A.getBoundingClientRect(),initialCursorPosition:D,initialLayout:P})},[]),ye=ce(()=>{C(null)},[]),Me=ce(p=>{const{panelDataArray:S}=z.current,k=qe(S,p);k>=0&&(S.splice(k,1),delete B.current[p.id],z.current.panelDataArrayChanged=!0,H())},[H]),Je=Sa(()=>({collapsePanel:R,direction:a,dragState:g,expandPanel:K,getPanelSize:re,getPanelStyle:J,groupId:u,isPanelCollapsed:$,isPanelExpanded:Q,reevaluatePanelConstraints:Pe,registerPanel:W,registerResizeHandle:E,resizePanel:U,startDragging:we,stopDragging:ye,unregisterPanel:Me,panelGroupElement:y.current}),[R,g,a,K,re,J,u,$,Q,Pe,W,E,U,we,ye,Me]),Y={display:"flex",flexDirection:a==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Ze(bt.Provider,{value:Je},Ze(N,{...f,children:s,className:n,id:l,ref:y,style:{...Y,...x},"data-panel-group":"","data-panel-group-direction":a,"data-panel-group-id":u}))}const Ys=As((t,s)=>Ze(Xs,{...t,forwardedRef:s}));Xs.displayName="PanelGroup";Ys.displayName="forwardRef(PanelGroup)";function qe(t,s){return t.findIndex(n=>n===s||n.id===s.id)}function De(t,s,n){const a=qe(t,s),l=a===t.length-1?[a-1,a]:[a,a+1],o=n[a];return{...s.constraints,panelSize:o,pivotIndices:l}}function Ja({disabled:t,handleId:s,resizeHandler:n,panelGroupElement:a}){Be(()=>{if(t||n==null||a==null)return;const r=yt(s,a);if(r==null)return;const l=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const d=r.getAttribute("data-panel-group-id");I(d,`No group element found for id "${d}"`);const c=it(d,a),x=Fs(d,s,a);I(x!==null,`No resize element found for id "${s}"`);const N=o.shiftKey?x>0?x-1:c.length-1:x+1<c.length?x+1:0;c[N].focus();break}}};return r.addEventListener("keydown",l),()=>{r.removeEventListener("keydown",l)}},[a,t,s,n])}function Zs({children:t=null,className:s="",disabled:n=!1,hitAreaMargins:a,id:r,onBlur:l,onDragging:o,onFocus:d,style:c={},tabIndex:x=0,tagName:N="div",...f}){var u,y;const g=de(null),C=de({onDragging:o});Be(()=>{C.current.onDragging=o});const w=Es(bt);if(w===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:H,registerResizeHandle:B,startDragging:V,stopDragging:X,panelGroupElement:b}=w,z=_t(r),[R,K]=Oe("inactive"),[re,J]=Oe(!1),[$,Q]=Oe(null),W=de({state:R});Ue(()=>{W.current.state=R}),Be(()=>{if(n)Q(null);else{const we=B(z);Q(()=>we)}},[n,z,B]);const E=(u=a==null?void 0:a.coarse)!==null&&u!==void 0?u:15,U=(y=a==null?void 0:a.fine)!==null&&y!==void 0?y:5;return Be(()=>{if(n||$==null)return;const we=g.current;return I(we,"Element ref not attached"),_a(z,we,j,{coarse:E,fine:U},(Me,Je,Y)=>{if(Je)switch(Me){case"down":{K("drag"),I(Y,'Expected event to be defined for "down" action'),V(z,Y);const{onDragging:p}=C.current;p&&p(!0);break}case"move":{const{state:p}=W.current;p!=="drag"&&K("hover"),I(Y,'Expected event to be defined for "move" action'),$(Y);break}case"up":{K("hover"),X();const{onDragging:p}=C.current;p&&p(!1);break}}else K("inactive")})},[E,j,n,U,B,z,$,V,X]),Ja({disabled:n,handleId:z,resizeHandler:$,panelGroupElement:b}),Ze(N,{...f,children:t,className:s,id:r,onBlur:()=>{J(!1),l==null||l()},onFocus:()=>{J(!0),d==null||d()},ref:g,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...c},tabIndex:x,"data-panel-group-direction":j,"data-panel-group-id":H,"data-resize-handle":"","data-resize-handle-active":R==="drag"?"pointer":re?"keyboard":void 0,"data-resize-handle-state":R,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":z})}Zs.displayName="PanelResizeHandle";function Qa({className:t,...s}){return e.jsx(Ys,{"data-slot":"resizable-panel-group",className:le("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...s})}function ps({...t}){return e.jsx(Rs,{"data-slot":"resizable-panel",...t})}function el({withHandle:t,className:s,...n}){return e.jsx(Zs,{"data-slot":"resizable-handle",className:le("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",s),...n,children:t&&e.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:e.jsx($n,{className:"size-2.5"})})})}const tl=({show:t,history:s,collections:n=[],selectedCollectionId:a="",onSelectCollection:r,onClear:l,onUseAgain:o,arcrylicBg:d})=>{const[c,x]=_e.useState(null),[N,f]=_e.useState(!1),[u,y]=_e.useState("input"),g=Array.isArray(s)?s.filter(j=>j.collectionId===a):[],C=Array.isArray(n)?n.find(j=>j.id===a):void 0,w=g.find(j=>j.id===c)||null;return _e.useEffect(()=>{x(null),f(!1)},[a,s]),t?e.jsxs(pe,{className:le("border-border/60",d&&"arcrylic-blur","h-full"),children:[e.jsx(Ae,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ts,{className:"h-5 w-5 mr-2 text-primary"}),e.jsxs("div",{children:[e.jsx(Ee,{className:"text-xl",children:"Translation History"}),e.jsx(It,{className:"text-sm mt-1",children:"Previously translated content, organized by collection"})]})]}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(L,{variant:"destructive",size:"sm",onClick:l,disabled:g.length===0,className:"h-8 text-xs",children:[e.jsx(lt,{className:"h-3.5 w-3.5 mr-1.5"}),"Clear All"]})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Delete all translation history in this collection"})})]})})]})}),e.jsx(Xe,{className:"px-2 pb-0",children:e.jsxs(Qa,{direction:"horizontal",className:"h-[500px] w-full",children:[e.jsx(ps,{defaultSize:25,minSize:20,maxSize:40,className:"border-r border-border/40",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"px-4 pt-4 pb-2 font-semibold text-sm flex items-center gap-2",children:[e.jsx(at,{className:"h-4 w-4 text-primary"}),"Collections"]}),e.jsx(nt,{className:"flex-1 px-2 pb-2",children:e.jsx("div",{className:"flex flex-col gap-1",children:n.length===0?e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-4 text-center",children:"No collections"}):n.map(j=>e.jsxs("div",{className:le("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer transition-all",j.id===a?"bg-primary/10 text-primary font-semibold":"hover:bg-muted/60 text-gray-700 dark:text-gray-200"),onClick:()=>r(j.id),children:[e.jsx(at,{className:"h-4 w-4 mr-1 text-primary/70"}),e.jsx("span",{className:"truncate text-sm",children:j.name})]},j.id))})})]})}),e.jsx(el,{withHandle:!0}),e.jsx(ps,{defaultSize:75,minSize:40,children:e.jsxs("div",{className:"h-full flex flex-col px-4",children:[e.jsxs("div",{className:" pt-4 pb-2 font-semibold text-base flex items-center gap-2",children:[e.jsx(ra,{className:"h-4 w-4 text-primary/70"}),C?C.name:"No Collection Selected"]}),e.jsxs("div",{className:"flex-1 px-0 pb-4",children:[g.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(On,{className:"h-12 w-12 text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No translation history yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 max-w-md",children:"Translations will be saved here automatically as you use the translator"})]}):e.jsx(nt,{className:"h-[400px] pr-2",children:e.jsx("div",{className:"space-y-2",children:g.map(j=>e.jsx(pe,{className:le("transition-all cursor-pointer border-2",c===j.id&&N?"border-primary bg-primary/5":"border-transparent hover:border-border"),onClick:()=>{x(j.id),y("input"),f(!0)},children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Cs,{className:"h-3.5 w-3.5"}),new Date(j.timestamp).toLocaleString(),e.jsx(ke,{variant:"outline",className:"ml-2 text-xs px-1.5 py-0 h-5",children:j.model})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-4 mt-1",children:[e.jsx("span",{className:"truncate text-sm font-medium text-primary/90 max-w-[180px] md:max-w-[220px]",title:j.inputText,children:j.inputText}),e.jsx("span",{className:"hidden md:inline text-muted-foreground",children:"→"}),e.jsx("span",{className:"truncate text-sm text-muted-foreground max-w-[180px] md:max-w-[220px]",title:j.translatedText,children:j.translatedText})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(L,{variant:"outline",size:"sm",onClick:H=>{H.stopPropagation(),o(j)},className:"h-8",children:[e.jsx(Pt,{className:"h-3.5 w-3.5 mr-1.5"}),"Reuse"]})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Load this translation again"})})]})})})]})},j.id))})}),e.jsx(Bn,{open:N,onOpenChange:f,children:e.jsxs(Un,{className:"max-w-lg w-full",children:[e.jsx(Fn,{children:e.jsx(Vn,{children:"Translation Details"})}),e.jsxs(Ns,{value:u,onValueChange:j=>y(j),className:"w-full",children:[e.jsxs(ys,{className:"mb-4 w-full",children:[e.jsx(ht,{value:"input",className:"flex-1",children:"Input Text"}),e.jsx(ht,{value:"translated",className:"flex-1",children:"Translated Text"})]}),e.jsxs(pt,{value:"input",children:[e.jsxs(ns,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),"Input Text"]}),e.jsx(Ye,{value:(w==null?void 0:w.inputText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]}),e.jsxs(pt,{value:"translated",children:[e.jsxs(ns,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),"Translated Text"]}),e.jsx(Ye,{value:(w==null?void 0:w.translatedText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(Gn,{asChild:!0,children:e.jsx(L,{variant:"outline",size:"sm",children:"Close"})}),w&&e.jsxs(L,{variant:"default",size:"sm",onClick:()=>o(w),children:[e.jsx(Pt,{className:"h-3.5 w-3.5 mr-1.5"}),"Reuse"]})]})]})})]})]})})]})})]}):null},sl=({text:t,className:s})=>{let n=Mt(0),a=Mt(0);const[r,l]=T.useState(""),[o,d]=T.useState(null);T.useEffect(()=>{if(o){const{width:x,height:N}=o.getBoundingClientRect(),f=x*N,u=Math.floor(f/36),y=gs(u);l(y)}},[o]);function c({currentTarget:x,clientX:N,clientY:f}){let{left:u,top:y}=x.getBoundingClientRect();n.set(N-u),a.set(f-y);const{width:g,height:C}=x.getBoundingClientRect(),w=g*C,j=Math.floor(w/36),H=gs(j);l(H)}return e.jsx("div",{className:le("p-0.5 bg-transparent flex items-center justify-center w-full h-full relative",s),children:e.jsxs("div",{ref:d,onMouseMove:c,className:"group/card rounded w-full relative overflow-hidden bg-transparent flex items-center justify-center h-full",children:[e.jsx(nl,{mouseX:n,mouseY:a,randomString:r}),e.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:e.jsxs("div",{className:"relative h-full w-full max-w-[80%] max-h-[80%] rounded-full flex items-center justify-center text-white font-bold",children:[e.jsx("div",{className:"absolute w-full h-full bg-white/[0.8] dark:bg-black/[0.8] blur-sm rounded-full"}),e.jsx("span",{className:"dark:text-white text-black z-20 text-xl lg:text-3xl",children:t})]})})]})})};function nl({mouseX:t,mouseY:s,randomString:n}){let a=Na`radial-gradient(500px at ${t}px ${s}px, white, transparent)`,r={maskImage:a,WebkitMaskImage:a};return e.jsxs("div",{className:"pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0"}),e.jsx(Zt.div,{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-blue-700 opacity-0 group-hover/card:opacity-100 backdrop-blur-xl transition duration-500",style:r}),e.jsx(Zt.div,{className:"absolute inset-0 opacity-0 mix-blend-overlay  group-hover/card:opacity-100",style:r,children:e.jsx("p",{className:"absolute inset-x-0 text-4xl h-full break-words whitespace-pre-wrap text-white font-mono font-bold transition duration-500",children:n})})]})}const fs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",gs=t=>{let s="";for(let n=0;n<t;n++)s+=fs.charAt(Math.floor(Math.random()*fs.length));return s},js=32e3,al=({inputText:t,setInputText:s,translatedText:n,isTranslating:a,error:r,isCopied:l,onTranslate:o,onCopy:d,selectedModel:c,onModelChange:x,models:N,selectedCollectionId:f,collections:u,onCollectionChange:y,isCollectionManagementVisible:g,onToggleCollectionManagement:C,arcrylicBg:w,modelDescriptions:j})=>{var X;const[H,B]=T.useState(!0),V=t.length;return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 md:gap-8 min-h-[650px] w-full",children:[e.jsxs(pe,{className:le("flex-1 flex flex-col shadow-lg rounded-xl border-0 mb-6 lg:mb-0",w&&"arcrylic-blur"),children:[e.jsx(Ae,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ee,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"📝 Translate Text"}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(ke,{variant:"outline",className:"px-2 sm:px-3 py-1 h-auto rounded-full text-sm sm:text-base bg-muted/40",children:[e.jsx(Mn,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"truncate max-w-[100px] sm:max-w-none",children:c})]})}),e.jsxs(ae,{side:"left",children:[e.jsx("p",{className:"text-xs",children:"Current translation model"}),j&&j[c]&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j[c]})]})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ye,{id:"inputText",placeholder:"Type or paste text to translate...",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] break-words break-all whitespace-pre-wrap",value:t,maxLength:js,onChange:b=>s(b.target.value),"aria-label":"Input text to translate"}),e.jsxs("span",{className:"absolute bottom-2 right-4 text-xs text-muted-foreground/70",children:[V,"/",js]}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>s(""),disabled:!t.trim()||a,className:"absolute top-2 right-2 rounded-full","aria-label":"Clear input",children:e.jsx(Pt,{className:"h-5 w-5"})})}),e.jsx(ae,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Clear input"})})]})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center w-full sm:w-auto",children:[e.jsxs(Jt,{value:c,onValueChange:x,children:[e.jsx(Qt,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(es,{placeholder:"Model",children:e.jsx("span",{className:"truncate",children:c})})}),e.jsx(ts,{className:"z-[100]",children:N.map(b=>e.jsx(ss,{value:b,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"truncate",children:b}),j&&j[b]&&e.jsx("span",{className:"text-xs text-muted-foreground",children:j[b]})]})},b))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Jt,{value:f,onValueChange:y,children:[e.jsx(Qt,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(es,{placeholder:"Collection",children:e.jsx("span",{className:"truncate",children:((X=u.find(b=>b.id===f))==null?void 0:X.name)||"Collection"})})}),e.jsx(ts,{className:"z-[100]",children:u.map(b=>e.jsx(ss,{value:b.id,children:e.jsx("span",{className:"truncate",children:b.name})},b.id))})]}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(L,{variant:g?"default":"outline",size:"icon",onClick:()=>C(f),className:"h-8 w-8 rounded-full ml-1","aria-label":"Manage collections",children:e.jsx(Rn,{className:"h-3 w-3"})})}),e.jsx(ae,{side:"top",children:e.jsx("p",{className:"text-xs",children:"Manage collections"})})]})})]})]}),e.jsx(L,{onClick:o,disabled:a||!t.trim(),className:"h-8 px-3 rounded-full shadow-sm text-sm w-full sm:w-auto",size:"default","aria-label":"Translate",children:a?e.jsxs(e.Fragment,{children:[e.jsx(In,{className:"mr-2 h-3.5 w-3.5 animate-spin"})," Translating..."]}):e.jsxs(e.Fragment,{children:["Translate ",e.jsx(qn,{className:"ml-2 h-3.5 w-3.5"})]})})]})]})]}),e.jsxs(pe,{className:le("flex-1 flex flex-col shadow-lg rounded-3xl border-0 relative",w&&"arcrylic-blur"),children:[e.jsx(Ae,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ee,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"🌐 Translation"}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(L,{variant:"ghost",size:"icon",onClick:d,disabled:!n,className:"rounded-full","aria-label":"Copy translation",children:l?e.jsx(Et,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}):e.jsx(ft,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsx(ae,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Copy translation"})})]})})]})}),r&&!r.includes("import")&&H&&e.jsx("div",{className:"mx-3 sm:mx-6 mt-3 sm:mt-4 mb-1 sm:mb-2",children:e.jsxs("div",{className:"flex items-center bg-destructive/10 border border-destructive/30 text-destructive rounded-lg px-3 sm:px-4 py-2 relative",children:[e.jsx(Lt,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2 flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-xs sm:text-sm",children:r}),e.jsx(L,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 ml-1 sm:ml-2 text-destructive/70 hover:text-destructive p-0",onClick:()=>B(!1),"aria-label":"Dismiss error",children:"×"})]})}),e.jsx("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ye,{id:"translatedText",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] break-words break-all whitespace-pre-wrap",value:a?"":n,readOnly:!0,placeholder:"Translation will appear here...","aria-label":"Translated text output"}),a&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-xl z-10 min-h-[200px] sm:min-h-[300px] max-h-[calc(100vh-200px)]",children:e.jsx(sl,{text:"Translating...",className:"w-full h-full"})}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(L,{variant:"default",size:"icon",onClick:d,disabled:!n,className:"absolute bottom-3 right-3 rounded-full shadow-lg h-9 w-9 sm:h-10 sm:w-10","aria-label":"Copy translation",children:l?e.jsx(Et,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"}):e.jsx(ft,{className:"h-5 w-5 sm:h-6 sm:w-6"})})}),e.jsx(ae,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Copy translation"})})]})})]})})]})]})},ll=({isVisible:t,settingsPanelRef:s,collections:n,collectionToEdit:a,setCollectionToEdit:r,editedCollectionName:l,setEditedCollectionName:o,addNewCollection:d,useCollection:c,renameCollection:x,requestDeleteCollection:N,showDeleteConfirmation:f,setShowDeleteConfirmation:u,confirmDeleteCollection:y,selectedCollectionId:g,error:C,setError:w,arcrylicBg:j})=>{const H=n.find(E=>E.id===a),[B,V]=T.useState(!1),[X,b]=T.useState(""),z=T.useRef(null),[R,K]=T.useState(null),[re,J]=T.useState(""),$=T.useRef(null);_e.useEffect(()=>{B&&z.current&&z.current.focus()},[B]),_e.useEffect(()=>{R&&$.current&&$.current.focus()},[R]);const Q=()=>{X.trim()?(d(X.trim()),b(""),V(!1)):(V(!1),b(""))},W=()=>{R&&re.trim()&&(o(re),r(R),x()),K(null)};return e.jsx("div",{ref:s,className:le("overflow-hidden transition-all duration-300 ease-in-out",t?"h-auto sm:h-[400px] opacity-100 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700":"h-0 opacity-0 mb-0 pb-0 border-b-0"),tabIndex:-1,children:e.jsxs(pe,{className:le("h-full w-full bg-white/90 dark:bg-zinc-900/90 shadow-xl rounded-2xl p-0 flex flex-col sm:flex-row border border-gray-100 dark:border-zinc-800 transition-all duration-300 overflow-hidden",j&&"backdrop-blur-md"),children:[e.jsxs("aside",{className:"w-full sm:w-1/3 bg-muted/40 dark:bg-muted/20 p-3 sm:p-4 flex flex-col gap-2 border-b sm:border-b-0 sm:border-r border-gray-200 dark:border-gray-800 min-h-[200px] sm:min-h-[320px] max-h-[220px] sm:max-h-none overflow-x-auto overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(at,{className:"h-5 w-5 text-primary"}),"Collections"]}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(L,{size:"icon",variant:"outline",onClick:()=>{V(!0),b("")},"aria-label":"Add new collection",children:e.jsx(Dt,{className:"h-5 w-5"})})}),e.jsx(ae,{children:"Add new collection"})]})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[B&&e.jsx("div",{className:"flex items-center gap-2 px-2 py-2 mb-1 rounded-lg bg-muted/30 dark:bg-muted/10",children:e.jsx(ue,{ref:z,value:X,onChange:E=>b(E.target.value),onBlur:Q,onKeyDown:E=>{E.key==="Enter"?Q():E.key==="Escape"&&(V(!1),b(""))},placeholder:"Collection name",className:"flex-1 h-8 text-sm"})}),n.map(E=>e.jsxs("div",{className:le("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer group transition-all",E.id===a?"bg-primary/10 dark:bg-primary/20 text-primary":"hover:bg-muted/60 dark:hover:bg-muted/30 text-gray-700 dark:text-gray-200"),onClick:()=>{r(E.id),o(E.name),w(null)},children:[e.jsx(at,{className:"h-4 w-4 mr-1 text-primary/70"}),R===E.id?e.jsx(ue,{ref:$,value:l,onChange:U=>o(U.target.value),onBlur:W,onKeyDown:U=>{U.key==="Enter"?W():U.key==="Escape"&&K(null)},onClick:U=>U.stopPropagation(),className:"flex-1 h-8 text-sm",autoFocus:!0}):e.jsxs("div",{className:"flex flex-1 items-center",children:[e.jsx("span",{className:"flex-1 truncate font-medium text-sm sm:text-base",children:E.name}),e.jsx(as,{className:"h-4 w-4 ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-primary transition-opacity cursor-pointer",onClick:U=>{U.stopPropagation(),r(E.id),o(E.name),K(E.id),J(E.name)}})]}),E.id===g&&e.jsx(Et,{className:"h-4 w-4 text-green-500 ml-1"}),E.id===a&&R!==E.id&&e.jsx("span",{className:"ml-2 text-xs font-semibold",children:"Editing"})]},E.id))]})]}),e.jsxs("section",{className:"flex-1 p-3 sm:p-6 flex flex-col gap-4 sm:gap-6",children:[a&&H&&e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 max-w-full sm:max-w-lg mx-auto w-full",children:[e.jsx("div",{className:"flex flex-col xs:flex-row items-start xs:items-center gap-2 xs:gap-3 mb-2",children:e.jsxs("div",{className:"flex items-center gap-2 flex-1 w-full",children:[e.jsx(at,{className:"h-6 w-6 text-primary/80"}),e.jsx("h4",{className:"text-lg sm:text-xl font-bold flex-1 truncate",children:H.name})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[e.jsx(ue,{value:l,onChange:E=>o(E.target.value),placeholder:"Rename collection",className:"flex-1 h-10"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(L,{size:"icon",variant:"secondary",onClick:x,disabled:!l.trim(),className:"h-10 w-10","aria-label":"Save collection name",children:e.jsx(as,{className:"h-4 w-4"})}),e.jsx(L,{size:"icon",variant:"destructive",onClick:()=>{n.length>1?N(a):w("You must have at least one collection")},disabled:n.length<=1,className:"h-10 w-10","aria-label":"Delete collection",children:e.jsx(lt,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex gap-2 mt-2",children:e.jsx(L,{variant:"default",onClick:()=>c(a),className:"flex-1",children:"Use This Collection"})})]}),C&&e.jsxs("div",{className:"text-red-500 text-xs sm:text-sm mt-2 font-medium flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),C]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 px-2",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 sm:p-8 max-w-xs sm:max-w-md w-full mx-2 shadow-2xl border border-gray-200 dark:border-zinc-800 animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(lt,{className:"h-6 w-6 text-destructive"})," Confirm Deletion"]}),e.jsx("p",{className:"mb-2 text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:"Are you sure you want to delete this collection?"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3 flex-col sm:flex-row",children:[e.jsx(L,{variant:"outline",onClick:()=>u(!1),className:"min-w-[90px]",children:"Cancel"}),e.jsx(L,{variant:"destructive",onClick:y,className:"min-w-[90px]",children:"Delete"})]})]})})]})})},rl=({mappingTable:t,updateMappingEntry:s,removeMappingEntry:n,addMappingEntry:a,showImportArea:r,toggleImportArea:l,mappingMarkdown:o,setMappingMarkdown:d,revertImport:c,showRevertButton:x,exportMarkdownTable:N,importMarkdownTable:f,error:u,arcrylicBg:y})=>e.jsxs(pe,{className:le("border-border/60",y&&"arcrylic-blur"),children:[e.jsx(Ae,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(Ee,{className:"text-xl flex items-center",children:[e.jsx(wa,{className:"h-5 w-5 mr-2 text-primary"}),"Mapping Table"]}),e.jsx(It,{className:"text-sm text-muted-foreground mt-1",children:"Manage term mappings and transcriptions"})]}),e.jsxs(ke,{variant:"outline",className:"h-6",children:[t.length," ",t.length===1?"Entry":"Entries"]})]})}),e.jsx(Xe,{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(L,{onClick:a,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add New Term"]})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Add a new term mapping entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(L,{variant:r?"default":"outline",onClick:l,size:"sm",className:"h-9",children:r?e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Import or export mapping data as markdown"})})]})}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(L,{variant:"outline",onClick:()=>{d(`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
|:----------- |:------------- |:------------------------- |:------------------ |:------ |
| 事情是这样的 | Chuyện là thế này | Phrase | | Opening phrase |
| 最近 | Gần đây | Time | | |
| 师兄 | Sư huynh | Title/Relationship | Male | Elder martial brother |
| 其实 | Thực ra | Adverb | | |`),r||l()},size:"sm",className:"h-9",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Load a sample mapping table"})})]})})]})]}),e.jsx("div",{className:le("overflow-hidden transition-all duration-300 ease-in-out",r?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs(pe,{className:"border-dashed",children:[e.jsx(Ae,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(Ee,{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[x&&e.jsxs(L,{variant:"destructive",size:"sm",onClick:c,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx($t,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(L,{variant:"outline",size:"sm",onClick:N,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(Ss,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(L,{variant:"outline",size:"sm",onClick:f,className:"text-xs h-8",children:[e.jsx(vs,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs(Xe,{className:"py-2",children:[e.jsx(Ye,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:o,onChange:g=>d(g.target.value)}),u&&u.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:u})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Term / Name"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Transcription"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Gender"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ua,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No terms added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((g,C)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.term,onChange:w=>s(C,"term",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Term or name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.transcription,onChange:w=>s(C,"transcription",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Transcription"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.type,onChange:w=>s(C,"type",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.gender,onChange:w=>s(C,"gender",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Gender"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.notes,onChange:w=>s(C,"notes",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(L,{variant:"destructive",size:"sm",onClick:()=>n(C),className:"w-full h-8",children:[e.jsx(lt,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Delete this mapping entry"})})]})})})]},C))})]})})]})})]}),il=({relationshipsTable:t,updateRelationshipEntry:s,removeRelationshipEntry:n,addRelationshipEntry:a,showImportArea:r,toggleImportArea:l,relationshipsMarkdown:o,setRelationshipsMarkdown:d,revertImport:c,showRevertButton:x,exportMarkdownTable:N,importMarkdownTable:f,error:u,arcrylicBg:y})=>e.jsxs(pe,{className:le("border-border/60",y&&"arcrylic-blur"),children:[e.jsx(Ae,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(Ee,{className:"text-xl flex items-center",children:[e.jsx(ls,{className:"h-5 w-5 mr-2 text-primary"}),"Relationships Table"]}),e.jsx(It,{className:"text-sm text-muted-foreground mt-1",children:"Manage character relationships and address terms"})]}),e.jsxs(ke,{variant:"outline",className:"h-6",children:[t.length," ",t.length===1?"Entry":"Entries"]})]})}),e.jsx(Xe,{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(L,{onClick:a,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add New Relationship"]})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Add a new character relationship entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(L,{variant:r?"default":"outline",onClick:l,size:"sm",className:"h-9",children:r?e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Import or export relationship data as markdown"})})]})}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(L,{variant:"outline",onClick:()=>{d(`| Character A | Character B | Relationship | Address Terms (A→B) | Address Terms (B→A) | Notes |
|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
| Vưu Thiên Thu | Triệu Không Minh | Adoptive Younger Sister -> Elder Brother | Huynh trưởng, Sư huynh | Ngươi | Formal/Respectful |
| Lâm Linh Dao | Vưu Thiên Thu | Female Lead 2 -> Female Lead 1 | Dao tỷ tỷ, Muội | Thiên Thu | Relationship strained |`),r||l()},size:"sm",className:"h-9",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Load a sample relationship table"})})]})})]})]}),e.jsx("div",{className:le("overflow-hidden transition-all duration-300 ease-in-out",r?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs(pe,{className:"border-dashed",children:[e.jsx(Ae,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(Ee,{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[x&&e.jsxs(L,{variant:"destructive",size:"sm",onClick:c,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx($t,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(L,{variant:"outline",size:"sm",onClick:N,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(Ss,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(L,{variant:"outline",size:"sm",onClick:f,className:"text-xs h-8",children:[e.jsx(vs,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs(Xe,{className:"py-2",children:[e.jsx(Ye,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:o,onChange:g=>d(g.target.value)}),u&&u.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(Lt,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:u})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character A"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character B"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Relationship"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (A→B)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (B→A)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ls,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No relationships added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((g,C)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.characterA,onChange:w=>s(C,"characterA",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.characterB,onChange:w=>s(C,"characterB",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.relationship,onChange:w=>s(C,"relationship",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Relationship type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.addressTermsAToB,onChange:w=>s(C,"addressTermsAToB",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How A addresses B"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.addressTermsBToA,onChange:w=>s(C,"addressTermsBToA",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How B addresses A"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ue,{value:g.notes,onChange:w=>s(C,"notes",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(L,{variant:"destructive",size:"sm",onClick:()=>n(C),className:"w-full h-8",children:[e.jsx(lt,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Delete this relationship entry"})})]})})})]},C))})]})})]})})]}),ol=({showTableUpdates:t,isTableUpdatesAnimating:s,arcrylicBg:n,pendingTableUpdates:a,expandedEntries:r,toggleEntryExpansion:l,setShowTableUpdates:o,setCurrentUpdateEntry:d,setShowUpdateConfirmation:c})=>t?e.jsxs(pe,{className:le("fixed bottom-20 right-6 w-96 max-w-[calc(100vw-3rem)] z-[9998] shadow-lg transition-all duration-300 ease-in-out rounded-xl border-border/40",s?"translate-y-4 opacity-0":"translate-y-0 opacity-100",n&&"arcrylic-blur"),children:[e.jsxs(Ae,{className:"p-4 pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"text-base font-medium",children:"Table Updates"}),e.jsx(ke,{variant:"outline",className:"ml-2 text-xs",children:a.length})]}),e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>o(!1),className:"h-8 w-8 rounded-full",children:e.jsx(wt,{className:"h-4 w-4"})})]}),e.jsx(Xe,{className:"p-3",children:e.jsx(nt,{className:"max-h-[60vh] pr-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-3",children:a.length>0?a.map(x=>e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-muted/30 p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:x.type==="mapping"?"Mapping Table":"Relationships Table"}),e.jsx(ke,{variant:x.status==="pending"?"outline":x.status==="approved"?"secondary":"destructive",className:"ml-2 text-xs px-1.5",children:x.status})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(Cs,{className:"h-3 w-3 mr-1"}),new Date(x.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:()=>l(x.id),children:r.has(x.id)?e.jsx(Dn,{className:"h-4 w-4"}):e.jsx(_n,{className:"h-4 w-4"})}),e.jsx(te,{children:e.jsxs(se,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(L,{variant:"outline",size:"sm",className:"h-8",onClick:()=>{d(x),c(!0)},children:"Review"})}),e.jsx(ae,{children:e.jsx("p",{className:"text-xs",children:"Review and approve/reject changes"})})]})})]})]}),r.has(x.id)&&e.jsxs("div",{className:"p-3 space-y-3 bg-background",children:[x.updates.added.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(Jn,{className:"h-3.5 w-3.5 mr-1 text-emerald-500"}),"Added Entries"]}),e.jsx(ke,{variant:"outline",className:"text-xs px-1.5 h-5",children:x.updates.added.length})]}),e.jsx(nt,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:x.updates.added.map((N,f)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:x.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:N.term}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",N.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:N.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",N.characterB]})]})},f))})})]}),x.updates.updated.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(Yn,{className:"h-3.5 w-3.5 mr-1 text-blue-500"}),"Updated Entries"]}),e.jsx(ke,{variant:"outline",className:"text-xs px-1.5 h-5",children:x.updates.updated.length})]}),e.jsx(nt,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:x.updates.updated.map((N,f)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:x.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:N.term}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",N.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:N.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",N.characterB]})]})},f))})})]})]})]},x.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[e.jsx(ea,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending updates"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates will appear here when available"})]})})})})]}):null,cl=t=>!t||typeof t!="object"?(console.warn("Invalid mapping entry:",t),null):{term:String(t.term||""),transcription:String(t.transcription||""),type:String(t.type||""),gender:String(t.gender||""),notes:String(t.notes||"")},dl=t=>!t||typeof t!="object"?(console.warn("Invalid relationship entry:",t),null):{characterA:String(t.characterA||""),characterB:String(t.characterB||""),relationship:String(t.relationship||""),addressTermsAToB:String(t.addressTermsAToB||""),addressTermsBToA:String(t.addressTermsBToA||""),notes:String(t.notes||"")},ws=(t,s,n,a)=>{if(!Array.isArray(s))return console.error("Invalid entries format:",s),{newTable:t,updatedCount:0,added:[],updated:[]};const r=[...t];let l=0;const o=[],d=[];return s.forEach(c=>{const x=n(c);if(x){const N=a(r,x);N>=0?(r[N]=x,d.push(x)):(r.push(x),o.push(x)),l++}}),{newTable:r,updatedCount:l,added:o,updated:d}},yl=()=>{var Xt;const t=Ln(),[s,n]=T.useState(""),[a,r]=T.useState(""),[l,o]=T.useState(!1),[d,c]=T.useState(null),[x,N]=T.useState(!1),[f,u]=T.useState([]),[y,g]=T.useState(!1),[,C]=T.useState(!0),[w,j]=T.useState("gemini-2.0-flash-exp"),H=["gemini-2.0-flash-exp","gemini-2.0-flash-exp-image-generation","gemini-2.0-flash-thinking-exp-01-21","gemini-2.5-pro-exp-03-25"],B={"gemini-2.0-flash-exp":"Recommended","gemini-2.0-flash-exp-image-generation":"Image Generation","gemini-2.0-flash-thinking-exp-01-21":"No support for function calling","gemini-2.5-pro-exp-03-25":"Pro but Stupid (Super slow)"},[V,X]=T.useState(null),[b,z]=T.useState([]),[R,K]=T.useState(""),[re,J]=T.useState(!1),[$,Q]=T.useState(""),[W,E]=T.useState(""),[U,Pe]=T.useState(""),[we,ye]=T.useState(!1),[Me,Je]=T.useState("mapping"),[Y,p]=T.useState([]),[S,k]=T.useState([]),[P,A]=T.useState(""),[D,F]=T.useState(""),[G,me]=T.useState(!1),[xe,O]=T.useState([]),[oe,Ce]=T.useState([]),[Re,Ie]=T.useState(!1),[ee,Le]=T.useState(!1),[Ct,Se]=T.useState([]),[ot,Qe]=T.useState(!1),[fe,St]=T.useState(null),[Js,Ft]=T.useState(!1),ct=_e.useRef(null),zt=T.useRef(null),[Qs,en]=T.useState(new Set),tn=i=>{en(h=>{const v=new Set(h);return v.has(i)?v.delete(i):v.add(i),v})};T.useEffect(()=>{(async()=>{try{const h=await mt("apiKey"),v=await mt("translateModel"),m=await mt("translationCollections"),M=await mt("translationHistory");if(h&&X(h),v&&j(v),M&&u(M),m&&m.length>0)z(m),K(m[0].id),p(m[0].mappingTable),k(m[0].relationshipsTable);else{const _={id:Date.now().toString(),name:"Default Collection",mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]};z([_]),K(_.id)}}catch(h){console.error("Error loading settings:",h)}})()},[]),T.useEffect(()=>{R&&!$&&Q(R)},[R,$]);const sn=async i=>{j(i),await ve("translateModel",i)},nn=(i,h)=>{try{const v=i.trim().split(`
`);if(v.length<3)return[];const m=v.slice(2);return h?m.map(M=>{const _=M.split("|").filter((ie,be,ze)=>be!==0&&be!==ze.length-1||ie.trim()!=="").map(ie=>ie.trim());if(_.length<5)for(console.warn("Row has fewer than expected columns:",M);_.length<5;)_.push("");return{term:_[0]||"",transcription:_[1]||"",type:_[2]||"",gender:_[3]||"",notes:_[4]||""}}):m.map(M=>{const _=M.split("|").filter((ie,be,ze)=>be!==0&&be!==ze.length-1||ie.trim()!=="").map(ie=>ie.trim());if(_.length<6)for(console.warn("Row has fewer than expected columns:",M);_.length<6;)_.push("");return{characterA:_[0]||"",characterB:_[1]||"",relationship:_[2]||"",addressTermsAToB:_[3]||"",addressTermsBToA:_[4]||"",notes:_[5]||""}})}catch(v){return console.error("Error parsing markdown table:",v),[]}},$e=(i,h)=>{if(i.length===0)return"";let v="";return h?(v=`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
`,v+=`|:----------- |:------------- |:------------------------- |:------------------ |:------ |
`,i.forEach(m=>{v+=`| ${m.term} | ${m.transcription} | ${m.type} | ${m.gender} | ${m.notes} |
`})):(v=`| Character A | Character B | Relationship | Address Terms (A→B) | Address Terms (B→A) | Notes |
`,v+=`|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
`,i.forEach(m=>{v+=`| ${m.characterA} | ${m.characterB} | ${m.relationship} | ${m.addressTermsAToB} | ${m.addressTermsBToA} | ${m.notes} |
`})),v},Vt=(i,h)=>{try{if(!i.trim()){q.error("Please enter a markdown table to import"),c("Please enter a markdown table to import");return}if(!i.includes("|")){q.error("Invalid table format. Table must contain pipe characters (|)"),c("Import failed: Invalid table format. Table must contain pipe characters (|)");return}const v=i.trim().split(`
`);if(v.length<3){q.error("Table must contain at least 3 lines (header, separator, and data row)"),c("Import failed: Table must contain at least 3 lines (header, separator, and data row)");return}const m=v[1];if(!m.includes("|")||!m.includes("-")){q.error("Second line must be a separator with pipes (|) and dashes (-)"),c("Import failed: Second line must be a separator with pipes (|) and dashes (-)");return}const M=nn(i,h);if(M.length===0){q.error("No valid data rows found in the table"),c("Import failed: No valid data rows found in the table");return}c(null),h?(O(Y),p(M)):(Ce(S),k(M)),ge(h,M),Ie(!0),setTimeout(()=>{Ie(!1)},6e4),q.success(`${h?"Mapping":"Relationships"} table imported successfully`)}catch(v){console.error("Error importing markdown table:",v),q.error(`Import failed: ${v instanceof Error?v.message:"Unknown error"}`),c(`Import failed: ${v instanceof Error?v.message:"Unknown error"}`)}},Gt=i=>{i?(p(xe),ge(!0,xe),O([])):(k(oe),ge(!1,oe),Ce([])),Ie(!1),q.success(`${i?"Mapping":"Relationships"} table reverted to previous state`)},ge=async(i,h)=>{if(!R)return;const v=b.map(m=>m.id===R?{...m,mappingTable:i?h:m.mappingTable,relationshipsTable:i?m.relationshipsTable:h}:m);z(v),await ve("translationCollections",v)},qt=i=>{const h=$e(i?Y:S,i);i?A(h):F(h),me(!0)},dt=i=>{if(i===R)return;Tt();const h=b.find(v=>v.id===i);h&&(K(i),p(h.mappingTable),k(h.relationshipsTable))},Tt=()=>{if(!R)return;const i=b.map(h=>h.id===R?{...h,mappingTable:Y,relationshipsTable:S}:h);z(i),ve("translationCollections",i)},an=i=>{if(!i.trim()){q.error("Please enter a name for the new collection"),c("Please enter a name for the new collection");return}Tt();const h={id:Date.now().toString(),name:i,mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]},v=[...b,h];z(v),K(h.id),p([]),k([]),ve("translationCollections",v),q.success(`Collection "${i}" created`)},ln=i=>{if(b.length<=1){q.error("You must have at least one collection"),c("You must have at least one collection");return}const h=b.find(m=>m.id===i);if(!h)return;const v=b.filter(m=>m.id!==i);if(i===R&&v.length>0){const m=v[0];K(m.id),p(m.mappingTable),k(m.relationshipsTable)}z(v),ve("translationCollections",v).then(()=>{q.success(`Collection "${h.name}" deleted`)}).catch(m=>{console.error("Failed to save collections after deletion:",m),q.error("Failed to delete collection")}),i===$&&(Q(""),E(""))},Kt=()=>{me(!G),G||(Me==="mapping"?A($e(Y,!0)):F($e(S,!1)))},rn=i=>{n(i.inputText),r(""),j(i.model),dt(i.collectionId),g(!1),q.info("Previous translation loaded")},on=async()=>{u([]),await ve("translationHistory",[]),q.success("Translation history cleared")},cn=async i=>{const h=b.find(M=>M.id===R);if(!h)return;const m=[{id:Date.now().toString(),timestamp:Date.now(),inputText:s,translatedText:i,model:w,collectionId:R,collectionName:h.name},...f].slice(0,50);u(m),await ve("translationHistory",m)},dn=async()=>{if(!s.trim()){q.error("Please enter text to translate"),c("Please enter text to translate");return}Tt(),o(!0),c(null),q.promise(async()=>{try{const i=$e(Y,!0),h=$e(S,!1),v=await Hn(s,i,h,V||"default-key",w,{onMappingTableUpdate:m=>{console.log("Received entries mapping table:",m);try{const{updatedCount:M,added:_,updated:ie}=ws(Y,m,cl,(be,ze)=>be.findIndex(ut=>ut.term===ze.term));M>0&&Ot("mapping",_,ie)}catch(M){console.error("Error updating mapping table:",M),q.error("Failed to update mapping table")}},onRelationshipsTableUpdate:m=>{console.log("Received entries relationships table:",m);try{const{updatedCount:M,added:_,updated:ie}=ws(S,m,dl,(be,ze)=>be.findIndex(ut=>ut.characterA===ze.characterA&&ut.characterB===ze.characterB));M>0&&Ot("relationships",_,ie)}catch(M){console.error("Error updating relationships table:",M),q.error("Failed to update relationships table")}}});if(v.hasError)throw c(v.thinking||"Translation failed. Please try again."),new Error(v.thinking||"Translation failed");{const m=v.ocrText||"";return r(m),await cn(m),m}}catch(i){throw console.error("Translation error:",i),c("An error occurred during translation. Please try again."),i}finally{o(!1)}},{loading:"Translating text...",success:"Translation completed successfully",error:i=>`Translation failed: ${i instanceof Error?i.message:"Unknown error"}`})},un=()=>{navigator.clipboard.writeText(a),N(!0),q.success("Copied to clipboard"),setTimeout(()=>N(!1),2e3)},mn=()=>{const i={term:"",transcription:"",type:"",gender:"",notes:""},h=[...Y,i];p(h),ge(!0,h)},xn=(i,h,v)=>{const m=[...Y];m[i]={...m[i],[h]:v},p(m),ge(!0,m)},hn=i=>{const h=Y.filter((v,m)=>m!==i);p(h),ge(!0,h)},pn=()=>{const i={characterA:"",characterB:"",relationship:"",addressTermsAToB:"",addressTermsBToA:"",notes:""},h=[...S,i];k(h),ge(!1,h)},fn=(i,h,v)=>{const m=[...S];m[i]={...m[i],[h]:v},k(m),ge(!1,m)},gn=i=>{const h=S.filter((v,m)=>m!==i);k(h),ge(!1,h)};T.useEffect(()=>{const i=()=>{window.scrollY>200?C(!0):C(!1)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[]);const jn=()=>{if(console.log("Scrolling to top attempt"),ct.current){ct.current.scrollIntoView({behavior:"smooth"}),console.log("Used scrollIntoView");return}try{window.scroll({top:0,left:0,behavior:"smooth"}),console.log("Used window.scroll")}catch{window.scrollTo(0,0),console.log("Used fallback scrollTo")}},wn=()=>{n(""),r(""),c(null),q.info("Text cleared")},bn=()=>{if(!$||!W.trim())return;const i=b.map(h=>h.id===$?{...h,name:W.trim()}:h);z(i),ve("translationCollections",i),q.success(`Collection renamed to "${W}"`)},vn=i=>{const h=!re;if(J(h),h){const v=b.find(m=>m.id===i);v&&(Q(i),E(v.name))}};T.useEffect(()=>{re&&zt.current&&setTimeout(()=>{var i;(i=zt.current)==null||i.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[re]);const Nn=()=>{J(!1),Q(""),E(""),Pe(""),ye(!1),setTimeout(()=>{var i;(i=ct.current)==null||i.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},yn=i=>{console.log("Delete confirmation requested for collection:",i),Pe(i),setTimeout(()=>{ye(!0),console.log("showDeleteConfirmation set to true")},0)},Cn=()=>{if(console.log("Confirming deletion of collection:",U),!!U)try{ln(U),ye(!1),Pe("")}catch(i){console.error("Error deleting collection:",i),q.error("Failed to delete collection")}},Sn=i=>{dt(i),Nn()};T.useEffect(()=>{if($){const i=b.find(h=>h.id===$);i&&E(i.name)}},[$,b]);const Ot=(i,h,v)=>{const m={id:Date.now().toString(),timestamp:Date.now(),type:i,updates:{added:h,updated:v},status:"pending"};Se(M=>[...M,m]),Le(!0),Ft(!0),setTimeout(()=>Ft(!1),300),q.info("New table update available for review",{description:`${h.length} new entries and ${v.length} updated entries`,action:{label:"Review",onClick:()=>Le(!0)}})},Wt=async(i,h)=>{try{if(h)if(i.type==="mapping"){const m=[...Y];i.updates.added.forEach(M=>m.push(M)),i.updates.updated.forEach(M=>{const _=m.findIndex(ie=>ie.term===M.term);_>=0&&(m[_]=M)}),p(m),await ge(!0,m)}else{const m=[...S];i.updates.added.forEach(M=>m.push(M)),i.updates.updated.forEach(M=>{const _=m.findIndex(ie=>ie.characterA===M.characterA&&ie.characterB===M.characterB);_>=0&&(m[_]=M)}),k(m),await ge(!1,m)}const v=b.map(m=>{if(m.id===R){const M=[...m.tableUpdateHistory||[]],_={...i,status:h?"approved":"rejected"};return M.push(_),{...m,tableUpdateHistory:M,mappingTable:h&&i.type==="mapping"?Y:m.mappingTable,relationshipsTable:h&&i.type==="relationships"?S:m.relationshipsTable}}return m});z(v),await ve("translationCollections",v),Se(m=>{const M=m.filter(_=>_.id!==i.id);return M.length===0&&Le(!1),M}),Qe(!1),St(null),q.success(`Table update ${h?"approved":"rejected"} successfully`)}catch(v){console.error("Error handling update confirmation:",v),q.error(`Failed to ${h?"approve":"reject"} update`)}};return T.useEffect(()=>{if(b.length===0){K(""),p([]),k([]);return}b.find(h=>h.id===R)||(K(b[0].id),p(b[0].mappingTable),k(b[0].relationshipsTable))},[b,R]),e.jsxs("div",{className:"container mx-auto p-4 flex flex-col gap-6 pb-10 relative",children:[e.jsx("div",{ref:ct,className:"absolute top-0"}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Text Translator"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{variant:"outline",onClick:()=>g(!y),"aria-label":"Show translation history",children:[e.jsx(Ts,{className:"h-5 w-5 mr-2"}),"History"]}),e.jsxs(L,{variant:"outline",onClick:wn,"aria-label":"Clear all text",children:[e.jsx(oa,{className:"h-5 w-5 mr-2"}),"Clear"]})]})]}),e.jsx(tl,{show:y,history:f,collections:b,selectedCollectionId:R,onSelectCollection:dt,onClear:on,onUseAgain:rn,arcrylicBg:t}),e.jsx(al,{inputText:s,setInputText:n,translatedText:a,isTranslating:l,error:d,isCopied:x,onTranslate:dn,onCopy:un,selectedModel:w,onModelChange:sn,models:H,selectedCollectionId:R,collections:b,onCollectionChange:dt,isCollectionManagementVisible:re,onToggleCollectionManagement:vn,arcrylicBg:t,modelDescriptions:B}),e.jsxs(pe,{className:le("p-6",t&&"arcrylic-blur"),children:[e.jsx(ll,{isVisible:re,settingsPanelRef:zt,collections:b,collectionToEdit:$,setCollectionToEdit:Q,editedCollectionName:W,setEditedCollectionName:E,addNewCollection:an,useCollection:Sn,renameCollection:bn,requestDeleteCollection:yn,showDeleteConfirmation:we,setShowDeleteConfirmation:ye,confirmDeleteCollection:Cn,collectionToDelete:U,selectedCollectionId:R,error:d,setError:c,arcrylicBg:t}),e.jsxs(Ns,{defaultValue:Me,onValueChange:i=>{Je(i),G&&(i==="mapping"?A($e(Y,!0)):F($e(S,!1)))},className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold",children:["Translation Mapping Tables",R&&e.jsxs("span",{className:"text-base sm:text-lg font-medium ml-2 text-muted-foreground",children:["-"," ",((Xt=b.find(i=>i.id===R))==null?void 0:Xt.name)||""]})]}),e.jsxs(ys,{className:"w-full sm:w-auto mt-2 sm:mt-0",children:[e.jsx(ht,{value:"mapping",className:"text-xs sm:text-sm px-2 sm:px-4 flex-1 sm:flex-initial",children:"Mapping Table"}),e.jsx(ht,{value:"relationships",className:"text-xs sm:text-sm px-2 sm:px-4 flex-1 sm:flex-initial",children:"Relationships Table"})]})]}),e.jsx(pt,{value:"mapping",className:"mt-4",children:e.jsx(rl,{mappingTable:Y,updateMappingEntry:xn,removeMappingEntry:hn,addMappingEntry:mn,showImportArea:G,toggleImportArea:Kt,mappingMarkdown:P,setMappingMarkdown:A,revertImport:()=>Gt(!0),showRevertButton:Re,exportMarkdownTable:()=>qt(!0),importMarkdownTable:()=>Vt(P,!0),error:d,arcrylicBg:t})}),e.jsx(pt,{value:"relationships",className:"mt-4",children:e.jsx(il,{relationshipsTable:S,updateRelationshipEntry:fn,removeRelationshipEntry:gn,addRelationshipEntry:pn,showImportArea:G,toggleImportArea:Kt,relationshipsMarkdown:D,setRelationshipsMarkdown:F,revertImport:()=>Gt(!1),showRevertButton:Re,exportMarkdownTable:()=>qt(!1),importMarkdownTable:()=>Vt(D,!1),error:d,arcrylicBg:t})})]})]}),e.jsx(L,{variant:"default",size:"lg",className:"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-[9999] w-12 h-12 p-0",onClick:()=>{console.log("Button clicked"),jn()},"aria-label":"Scroll to top",children:e.jsx($t,{className:"h-6 w-6"})}),ee&&e.jsx(ol,{showTableUpdates:ee,isTableUpdatesAnimating:Js,arcrylicBg:t,pendingTableUpdates:Ct,expandedEntries:Qs,toggleEntryExpansion:tn,setShowTableUpdates:Le,setCurrentUpdateEntry:St,setShowUpdateConfirmation:Qe}),ot&&fe&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:e.jsx(pe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Confirm Table Update"}),e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>{Qe(!1),St(null)},className:"h-8 w-8 p-0",children:e.jsx(wt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Added Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:fe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:fe.updates.added.map((i,h)=>e.jsx("tr",{className:"border-t",children:fe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:i.term}),e.jsx("td",{className:"p-2",children:i.transcription}),e.jsx("td",{className:"p-2",children:i.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:i.characterA}),e.jsx("td",{className:"p-2",children:i.characterB}),e.jsx("td",{className:"p-2",children:i.relationship})]})},h))})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Updated Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:fe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:fe.updates.updated.map((i,h)=>e.jsx("tr",{className:"border-t",children:fe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:i.term}),e.jsx("td",{className:"p-2",children:i.transcription}),e.jsx("td",{className:"p-2",children:i.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:i.characterA}),e.jsx("td",{className:"p-2",children:i.characterB}),e.jsx("td",{className:"p-2",children:i.relationship})]})},h))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(L,{variant:"outline",onClick:()=>{fe&&Wt(fe,!1)},children:"Reject"}),e.jsx(L,{variant:"default",onClick:()=>{fe&&Wt(fe,!0)},children:"Approve"})]})]})]})})})]})};export{yl as default};
