import{c as Re,ai as cs,r as L,aj as ds,ak as us,al as ms,am as fs,an as ps,ao as Un,j as e,a as ke,G as On,ap as hs,B as G,a3 as xs,l as gs,aq as fa,R as S,v as Z,F as pa,ar as ws,a4 as Se,a5 as Ft}from"./index-Bur2vjGJ.js";import{C as Tt,a as wn,b as vn,e as vs}from"./card-DrL2V-W-.js";import{S as Fn,b as Vn,c as Wn,d as Gn,e as qn,a as kn,G as bs,C as zn,h as ha,f as xa,i as js}from"./select--72jfKyx.js";import{T as $t,a as Kn}from"./index-eLNd_WF8.js";import{T as ze,a as be,b as je,c as ye}from"./tooltip-BTLBmUbe.js";import{B as Xe}from"./badge-ByMJbQ0w.js";import{A as ys}from"./arrow-right-DcKS8yQR.js";import{I as qe}from"./input-B-okpEUI.js";import{T as ga,a as wa,b as jt,c as yt}from"./index-C2nFYNp_.js";import{S as Dt,X as Zt}from"./scroll-area-BQRKOwMF.js";import{T as Ns,R as Cs,C as Ss,P as Ts,O as ks}from"./index-lWEFEufw.js";import{T as ut}from"./trash-2-y6bXx74Z.js";import{C as zs}from"./copy-BQR6QsER.js";import{F as va}from"./file-down-BYSeJz8I.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Es=Re("Archive",Rs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Rn=Re("ArrowUp",As);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],ba=Re("ChevronsDown",Ms);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],ja=Re("ChevronsUp",Ps);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ds=Re("CircleCheckBig",Is);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Yt=Re("CircleCheck",$s);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],bn=Re("Clipboard",Ls);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],_s=Re("Database",Hs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],Us=Re("Eraser",Bs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],ya=Re("FilePlus",Os);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Vs=Re("FileText",Fs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],jn=Re("Folder",Ws);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],qs=Re("History",Gs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Na=Re("Lightbulb",Ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Xs=Re("Pencil",Ys);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],En=Re("Plus",Js);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yn=Re("RotateCcw",Zs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],er=Re("Text",Qs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Yn=Re("Users",tr);function Nn(t){const a=cs(()=>us(t)),{isStatic:n}=L.useContext(ds);if(n){const[,s]=L.useState(t);L.useEffect(()=>a.on("change",s),[])}return a}function nr(t,a){const n=Nn(a()),s=()=>n.set(a());return s(),ms(()=>{const l=()=>fs.preRender(s,!1,!0),r=t.map(o=>o.on("change",l));return()=>{r.forEach(o=>o()),ps(s)}}),n}function ar(t,...a){const n=t.length;function s(){let l="";for(let r=0;r<n;r++){l+=t[r];const o=a[r];o&&(l+=Un(o)?o.get():o)}return l}return nr(a.filter(Un),s)}const sr=({text:t,className:a})=>{let n=Nn(0),s=Nn(0);const[l,r]=L.useState(""),[o,c]=L.useState(null);L.useEffect(()=>{if(o){const{width:v,height:y}=o.getBoundingClientRect(),p=v*y,u=Math.floor(p/36),g=Xn(u);r(g)}},[o]);function i({currentTarget:v,clientX:y,clientY:p}){let{left:u,top:g}=v.getBoundingClientRect();n.set(y-u),s.set(p-g);const{width:j,height:w}=v.getBoundingClientRect(),$=j*w,f=Math.floor($/36),C=Xn(f);r(C)}return e.jsx("div",{className:ke("p-0.5 bg-transparent flex items-center justify-center w-full h-full relative",a),children:e.jsxs("div",{ref:c,onMouseMove:i,className:"group/card rounded w-full relative overflow-hidden bg-transparent flex items-center justify-center h-full",children:[e.jsx(rr,{mouseX:n,mouseY:s,randomString:l}),e.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:e.jsxs("div",{className:"relative h-full w-full max-w-[80%] max-h-[80%] rounded-full flex items-center justify-center text-white font-bold",children:[e.jsx("div",{className:"absolute w-full h-full bg-white/[0.8] dark:bg-black/[0.8] blur-sm rounded-full"}),e.jsx("span",{className:"dark:text-white text-black z-20 text-xl lg:text-3xl",children:t})]})})]})})};function rr({mouseX:t,mouseY:a,randomString:n}){let s=ar`radial-gradient(500px at ${t}px ${a}px, white, transparent)`,l={maskImage:s,WebkitMaskImage:s};return e.jsxs("div",{className:"pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0"}),e.jsx(On.div,{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-blue-700 opacity-0 group-hover/card:opacity-100 backdrop-blur-xl transition duration-500",style:l}),e.jsx(On.div,{className:"absolute inset-0 opacity-0 mix-blend-overlay  group-hover/card:opacity-100",style:l,children:e.jsx("p",{className:"absolute inset-x-0 text-4xl h-full break-words whitespace-pre-wrap text-white font-mono font-bold transition duration-500",children:n})})]})}const Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Xn=t=>{let a="";for(let n=0;n<t;n++)a+=Vt.charAt(Math.floor(Math.random()*(Vt==null?void 0:Vt.length)));return a},Jn=32e3,lr=({inputText:t,setInputText:a,translatedText:n,isTranslating:s,error:l,isCopied:r,onTranslate:o,onCopy:c,selectedModel:i,onModelChange:v,models:y,selectedCollectionId:p,collections:u,onCollectionChange:g,isCollectionManagementVisible:j,onToggleCollectionManagement:w,arcrylicBg:$,modelDescriptions:f,clearInputText:C,setErrorMessage:D})=>{var A;const T=(t==null?void 0:t.length)||0;return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 md:gap-8 min-h-[650px] max-h-[calc(100vh-200px)] w-full overflow-hidden",children:[e.jsxs(Tt,{className:ke("flex-1 flex flex-col shadow-lg rounded-xl border-0 mb-6 lg:mb-0",$&&"arcrylic-blur"),children:[e.jsx(wn,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(vn,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"📝 Translate Text"}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsxs(Xe,{variant:"outline",className:"px-2 sm:px-3 py-1 h-auto rounded-full text-sm sm:text-base bg-muted/40",children:[e.jsx(hs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"truncate max-w-[100px] sm:max-w-none",children:i})]})}),e.jsxs(ye,{side:"left",children:[e.jsx("p",{className:"text-xs",children:"Current translation model"}),f&&f[i]&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f[i]})]})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4 overflow-hidden",children:[e.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[e.jsx($t,{id:"inputText",placeholder:"Type or paste text to translate...",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] overflow-auto break-words break-all whitespace-pre-wrap",value:t,maxLength:Jn,onChange:R=>a(R.target.value),"aria-label":"Input text to translate"}),e.jsxs("span",{className:"absolute bottom-2 right-4 text-xs text-muted-foreground/70",children:[T,"/",Jn]}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{variant:"ghost",size:"icon",onClick:C,disabled:!t.trim()||s,className:"absolute top-2 right-2 rounded-full","aria-label":"Clear input",children:e.jsx(yn,{className:"h-5 w-5"})})}),e.jsx(ye,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Clear input"})})]})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center w-full sm:w-auto",children:[e.jsxs(Fn,{value:i,onValueChange:v,children:[e.jsx(Vn,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Wn,{placeholder:"Model",children:e.jsx("span",{className:"truncate",children:i})})}),e.jsx(Gn,{className:"z-[100]",children:y.map(R=>e.jsx(qn,{value:R,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"truncate",children:R}),f&&f[R]&&e.jsx("span",{className:"text-xs text-muted-foreground",children:f[R]})]})},R))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Fn,{value:p,onValueChange:g,children:[e.jsx(Vn,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Wn,{placeholder:"Collection",children:e.jsx("span",{className:"truncate",children:((A=u.find(R=>R.id===p))==null?void 0:A.name)||"Collection"})})}),e.jsx(Gn,{className:"z-[100]",children:u.map(R=>e.jsx(qn,{value:R.id,children:e.jsx("span",{className:"truncate",children:R.name})},R.id))})]}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{variant:j?"default":"outline",size:"icon",onClick:()=>w(p),className:"h-8 w-8 rounded-full ml-1","aria-label":"Manage collections",children:e.jsx(xs,{className:"h-3 w-3"})})}),e.jsx(ye,{side:"top",children:e.jsx("p",{className:"text-xs",children:"Manage collections"})})]})})]})]}),e.jsx(G,{onClick:o,disabled:s||!t.trim(),className:"h-8 px-3 rounded-full shadow-sm text-sm w-full sm:w-auto",size:"default","aria-label":"Translate",children:s?e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"mr-2 h-3.5 w-3.5 animate-spin"})," Translating..."]}):e.jsxs(e.Fragment,{children:["Translate ",e.jsx(ys,{className:"ml-2 h-3.5 w-3.5"})]})})]})]})]}),e.jsxs(Tt,{className:ke("flex-1 flex flex-col shadow-lg rounded-3xl border-0 relative",$&&"arcrylic-blur"),children:[e.jsx(wn,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(vn,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"🌐 Translation"}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{variant:"ghost",size:"icon",onClick:c,disabled:!n,className:"rounded-full","aria-label":"Copy translation",children:r?e.jsx(Yt,{className:"h-4 w-4 text-green-500"}):e.jsx(bn,{className:"h-4 w-4"})})}),e.jsx(ye,{side:"left",children:e.jsx("p",{className:"text-xs",children:r?"Copied!":"Copy to clipboard"})})]})})]})}),e.jsx("div",{className:"p-3 sm:p-4 flex-1 overflow-hidden",children:l?e.jsxs("div",{className:"text-destructive flex items-start p-3 rounded-lg bg-destructive/10 mb-3",children:[e.jsx(kn,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:l}),e.jsx(G,{variant:"ghost",size:"sm",className:"h-7 mt-2 text-xs px-2 py-1",onClick:()=>D(null),children:"Dismiss"})]})]}):e.jsx(e.Fragment,{children:n?e.jsx("div",{className:"rounded-xl h-full overflow-y-auto px-4 py-3 bg-muted/30",children:e.jsx("p",{className:"text-sm sm:text-base whitespace-pre-wrap break-words",children:n})}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6 text-muted-foreground",children:[e.jsx(sr,{text:"Translation",className:"w-64 h-64 opacity-30 mb-4"}),e.jsx("p",{className:"text-sm",children:"Enter text and click Translate to see results here"})]})})})]})]})},{createElement:kt,createContext:ir,forwardRef:Ca,useCallback:Fe,useContext:Sa,useEffect:mt,useImperativeHandle:Ta,useLayoutEffect:or,useMemo:cr,useRef:Ve,useState:Ct}=fa,Zn=fa[`useId${Math.random()}`.slice(0,5)],dr=or,Qt=ir(null);Qt.displayName="PanelGroupContext";const ft=dr,ur=typeof Zn=="function"?Zn:()=>null;let mr=0;function An(t=null){const a=ur(),n=Ve(t||a||null);return n.current===null&&(n.current=""+mr++),t??n.current}function ka({children:t,className:a="",collapsedSize:n,collapsible:s,defaultSize:l,forwardedRef:r,id:o,maxSize:c,minSize:i,onCollapse:v,onExpand:y,onResize:p,order:u,style:g,tagName:j="div",...w}){const $=Sa(Qt);if($===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:f,expandPanel:C,getPanelSize:D,getPanelStyle:T,groupId:A,isPanelCollapsed:R,reevaluatePanelConstraints:h,registerPanel:_,resizePanel:B,unregisterPanel:re}=$,E=An(o),q=Ve({callbacks:{onCollapse:v,onExpand:y,onResize:p},constraints:{collapsedSize:n,collapsible:s,defaultSize:l,maxSize:c,minSize:i},id:E,idIsFromProps:o!==void 0,order:u});Ve({didLogMissingDefaultSizeWarning:!1}),ft(()=>{const{callbacks:J,constraints:X}=q.current,ee={...X};q.current.id=E,q.current.idIsFromProps=o!==void 0,q.current.order=u,J.onCollapse=v,J.onExpand=y,J.onResize=p,X.collapsedSize=n,X.collapsible=s,X.defaultSize=l,X.maxSize=c,X.minSize=i,(ee.collapsedSize!==X.collapsedSize||ee.collapsible!==X.collapsible||ee.maxSize!==X.maxSize||ee.minSize!==X.minSize)&&h(q.current,ee)}),ft(()=>{const J=q.current;return _(J),()=>{re(J)}},[u,E,_,re]),Ta(r,()=>({collapse:()=>{f(q.current)},expand:J=>{C(q.current,J)},getId(){return E},getSize(){return D(q.current)},isCollapsed(){return R(q.current)},isExpanded(){return!R(q.current)},resize:J=>{B(q.current,J)}}),[f,C,D,R,E,B]);const P=T(q.current,l);return kt(j,{...w,children:t,className:a,id:o,style:{...P,...g},"data-panel":"","data-panel-collapsible":s||void 0,"data-panel-group-id":A,"data-panel-id":E,"data-panel-size":parseFloat(""+P.flexGrow).toFixed(1)})}const za=Ca((t,a)=>kt(ka,{...t,forwardedRef:a}));ka.displayName="Panel";za.displayName="forwardRef(Panel)";let Cn=null,dt=null;function fr(t,a){if(a){const n=(a&Pa)!==0,s=(a&Ia)!==0,l=(a&Da)!==0,r=(a&$a)!==0;if(n)return l?"se-resize":r?"ne-resize":"e-resize";if(s)return l?"sw-resize":r?"nw-resize":"w-resize";if(l)return"s-resize";if(r)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function pr(){dt!==null&&(document.head.removeChild(dt),Cn=null,dt=null)}function mn(t,a){const n=fr(t,a);Cn!==n&&(Cn=n,dt===null&&(dt=document.createElement("style"),document.head.appendChild(dt)),dt.innerHTML=`*{cursor: ${n}!important;}`)}function Ra(t){return t.type==="keydown"}function Ea(t){return t.type.startsWith("pointer")}function Aa(t){return t.type.startsWith("mouse")}function en(t){if(Ea(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(Aa(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function hr(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function xr(t,a,n){return t.x<a.x+a.width&&t.x+t.width>a.x&&t.y<a.y+a.height&&t.y+t.height>a.y}function gr(t,a){if(t===a)throw new Error("Cannot compare node with itself");const n={a:ta(t),b:ta(a)};let s;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),a=n.b.pop(),s=t;Y(s,"Stacking order can only be calculated for elements with a common ancestor");const l={a:ea(Qn(n.a)),b:ea(Qn(n.b))};if(l.a===l.b){const r=s.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let c=r.length;for(;c--;){const i=r[c];if(i===o.a)return 1;if(i===o.b)return-1}}return Math.sign(l.a-l.b)}const wr=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function vr(t){var a;const n=getComputedStyle((a=Ma(t))!==null&&a!==void 0?a:t).display;return n==="flex"||n==="inline-flex"}function br(t){const a=getComputedStyle(t);return!!(a.position==="fixed"||a.zIndex!=="auto"&&(a.position!=="static"||vr(t))||+a.opacity<1||"transform"in a&&a.transform!=="none"||"webkitTransform"in a&&a.webkitTransform!=="none"||"mixBlendMode"in a&&a.mixBlendMode!=="normal"||"filter"in a&&a.filter!=="none"||"webkitFilter"in a&&a.webkitFilter!=="none"||"isolation"in a&&a.isolation==="isolate"||wr.test(a.willChange)||a.webkitOverflowScrolling==="touch")}function Qn(t){let a=t.length;for(;a--;){const n=t[a];if(Y(n,"Missing node"),br(n))return n}return null}function ea(t){return t&&Number(getComputedStyle(t).zIndex)||0}function ta(t){const a=[];for(;t;)a.push(t),t=Ma(t);return a}function Ma(t){const{parentNode:a}=t;return a&&a instanceof ShadowRoot?a.host:a}const Pa=1,Ia=2,Da=4,$a=8,jr=hr()==="coarse";let Je=[],St=!1,st=new Map,tn=new Map;const Lt=new Set;function yr(t,a,n,s,l){var r;const{ownerDocument:o}=a,c={direction:n,element:a,hitAreaMargins:s,setResizeHandlerState:l},i=(r=st.get(o))!==null&&r!==void 0?r:0;return st.set(o,i+1),Lt.add(c),Xt(),function(){var y;tn.delete(t),Lt.delete(c);const p=(y=st.get(o))!==null&&y!==void 0?y:1;if(st.set(o,p-1),Xt(),p===1&&st.delete(o),Je.includes(c)){const u=Je.indexOf(c);u>=0&&Je.splice(u,1),Pn(),l("up",!0,null)}}}function na(t){const{target:a}=t,{x:n,y:s}=en(t);St=!0,Mn({target:a,x:n,y:s}),Xt(),Je.length>0&&(Jt("down",t),t.preventDefault(),t.stopPropagation())}function Et(t){const{x:a,y:n}=en(t);if(St&&t.buttons===0&&(St=!1,Jt("up",t)),!St){const{target:s}=t;Mn({target:s,x:a,y:n})}Jt("move",t),Pn(),Je.length>0&&t.preventDefault()}function wt(t){const{target:a}=t,{x:n,y:s}=en(t);tn.clear(),St=!1,Je.length>0&&t.preventDefault(),Jt("up",t),Mn({target:a,x:n,y:s}),Pn(),Xt()}function Mn({target:t,x:a,y:n}){Je.splice(0);let s=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(s=t),Lt.forEach(l=>{const{element:r,hitAreaMargins:o}=l,c=r.getBoundingClientRect(),{bottom:i,left:v,right:y,top:p}=c,u=jr?o.coarse:o.fine;if(a>=v-u&&a<=y+u&&n>=p-u&&n<=i+u){if(s!==null&&document.contains(s)&&r!==s&&!r.contains(s)&&!s.contains(r)&&gr(s,r)>0){let j=s,w=!1;for(;j&&!j.contains(r);){if(xr(j.getBoundingClientRect(),c)){w=!0;break}j=j.parentElement}if(w)return}Je.push(l)}})}function fn(t,a){tn.set(t,a)}function Pn(){let t=!1,a=!1;Je.forEach(s=>{const{direction:l}=s;l==="horizontal"?t=!0:a=!0});let n=0;tn.forEach(s=>{n|=s}),t&&a?mn("intersection",n):t?mn("horizontal",n):a?mn("vertical",n):pr()}function Xt(){st.forEach((t,a)=>{const{body:n}=a;n.removeEventListener("contextmenu",wt),n.removeEventListener("pointerdown",na),n.removeEventListener("pointerleave",Et),n.removeEventListener("pointermove",Et)}),window.removeEventListener("pointerup",wt),window.removeEventListener("pointercancel",wt),Lt.size>0&&(St?(Je.length>0&&st.forEach((t,a)=>{const{body:n}=a;t>0&&(n.addEventListener("contextmenu",wt),n.addEventListener("pointerleave",Et),n.addEventListener("pointermove",Et))}),window.addEventListener("pointerup",wt),window.addEventListener("pointercancel",wt)):st.forEach((t,a)=>{const{body:n}=a;t>0&&(n.addEventListener("pointerdown",na,{capture:!0}),n.addEventListener("pointermove",Et))}))}function Jt(t,a){Lt.forEach(n=>{const{setResizeHandlerState:s}=n,l=Je.includes(n);s(t,l,a)})}function Nr(){const[t,a]=Ct(0);return Fe(()=>a(n=>n+1),[])}function Y(t,a){if(!t)throw console.error(a),Error(a)}const In=10;function pt(t,a,n=In){return t.toFixed(n)===a.toFixed(n)?0:t>a?1:-1}function nt(t,a,n=In){return pt(t,a,n)===0}function Ge(t,a,n){return pt(t,a,n)===0}function Cr(t,a,n){if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++){const l=t[s],r=a[s];if(!Ge(l,r,n))return!1}return!0}function Nt({panelConstraints:t,panelIndex:a,size:n}){const s=t[a];Y(s!=null,`Panel constraints not found for index ${a}`);let{collapsedSize:l=0,collapsible:r,maxSize:o=100,minSize:c=0}=s;if(pt(n,c)<0)if(r){const i=(l+c)/2;pt(n,i)<0?n=l:n=c}else n=c;return n=Math.min(o,n),n=parseFloat(n.toFixed(In)),n}function Pt({delta:t,initialLayout:a,panelConstraints:n,pivotIndices:s,prevLayout:l,trigger:r}){if(Ge(t,0))return a;const o=[...a],[c,i]=s;Y(c!=null,"Invalid first pivot index"),Y(i!=null,"Invalid second pivot index");let v=0;if(r==="keyboard"){{const p=t<0?i:c,u=n[p];Y(u,`Panel constraints not found for index ${p}`);const{collapsedSize:g=0,collapsible:j,minSize:w=0}=u;if(j){const $=a[p];if(Y($!=null,`Previous layout not found for panel index ${p}`),Ge($,g)){const f=w-$;pt(f,Math.abs(t))>0&&(t=t<0?0-f:f)}}}{const p=t<0?c:i,u=n[p];Y(u,`No panel constraints found for index ${p}`);const{collapsedSize:g=0,collapsible:j,minSize:w=0}=u;if(j){const $=a[p];if(Y($!=null,`Previous layout not found for panel index ${p}`),Ge($,w)){const f=$-g;pt(f,Math.abs(t))>0&&(t=t<0?0-f:f)}}}}{const p=t<0?1:-1;let u=t<0?i:c,g=0;for(;;){const w=a[u];Y(w!=null,`Previous layout not found for panel index ${u}`);const f=Nt({panelConstraints:n,panelIndex:u,size:100})-w;if(g+=f,u+=p,u<0||u>=n.length)break}const j=Math.min(Math.abs(t),Math.abs(g));t=t<0?0-j:j}{let u=t<0?c:i;for(;u>=0&&u<n.length;){const g=Math.abs(t)-Math.abs(v),j=a[u];Y(j!=null,`Previous layout not found for panel index ${u}`);const w=j-g,$=Nt({panelConstraints:n,panelIndex:u,size:w});if(!Ge(j,$)&&(v+=j-$,o[u]=$,v.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?u--:u++}}if(Cr(l,o))return l;{const p=t<0?i:c,u=a[p];Y(u!=null,`Previous layout not found for panel index ${p}`);const g=u+v,j=Nt({panelConstraints:n,panelIndex:p,size:g});if(o[p]=j,!Ge(j,g)){let w=g-j,f=t<0?i:c;for(;f>=0&&f<n.length;){const C=o[f];Y(C!=null,`Previous layout not found for panel index ${f}`);const D=C+w,T=Nt({panelConstraints:n,panelIndex:f,size:D});if(Ge(C,T)||(w-=T-C,o[f]=T),Ge(w,0))break;t>0?f--:f++}}}const y=o.reduce((p,u)=>u+p,0);return Ge(y,100)?o:l}function Sr({layout:t,panelsArray:a,pivotIndices:n}){let s=0,l=100,r=0,o=0;const c=n[0];Y(c!=null,"No pivot index found"),a.forEach((p,u)=>{const{constraints:g}=p,{maxSize:j=100,minSize:w=0}=g;u===c?(s=w,l=j):(r+=w,o+=j)});const i=Math.min(l,100-r),v=Math.max(s,100-o),y=t[c];return{valueMax:i,valueMin:v,valueNow:y}}function Ht(t,a=document){return Array.from(a.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function La(t,a,n=document){const l=Ht(t,n).findIndex(r=>r.getAttribute("data-panel-resize-handle-id")===a);return l??null}function Ha(t,a,n){const s=La(t,a,n);return s!=null?[s,s+1]:[-1,-1]}function _a(t,a=document){var n;if(a instanceof HTMLElement&&(a==null||(n=a.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return a;const s=a.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return s||null}function nn(t,a=document){const n=a.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function Tr(t,a,n,s=document){var l,r,o,c;const i=nn(a,s),v=Ht(t,s),y=i?v.indexOf(i):-1,p=(l=(r=n[y])===null||r===void 0?void 0:r.id)!==null&&l!==void 0?l:null,u=(o=(c=n[y+1])===null||c===void 0?void 0:c.id)!==null&&o!==void 0?o:null;return[p,u]}function kr({committedValuesRef:t,eagerValuesRef:a,groupId:n,layout:s,panelDataArray:l,panelGroupElement:r,setLayout:o}){Ve({didWarnAboutMissingResizeHandle:!1}),ft(()=>{if(!r)return;const c=Ht(n,r);for(let i=0;i<l.length-1;i++){const{valueMax:v,valueMin:y,valueNow:p}=Sr({layout:s,panelsArray:l,pivotIndices:[i,i+1]}),u=c[i];if(u!=null){const g=l[i];Y(g,`No panel data found for index "${i}"`),u.setAttribute("aria-controls",g.id),u.setAttribute("aria-valuemax",""+Math.round(v)),u.setAttribute("aria-valuemin",""+Math.round(y)),u.setAttribute("aria-valuenow",p!=null?""+Math.round(p):"")}}return()=>{c.forEach((i,v)=>{i.removeAttribute("aria-controls"),i.removeAttribute("aria-valuemax"),i.removeAttribute("aria-valuemin"),i.removeAttribute("aria-valuenow")})}},[n,s,l,r]),mt(()=>{if(!r)return;const c=a.current;Y(c,"Eager values not found");const{panelDataArray:i}=c,v=_a(n,r);Y(v!=null,`No group found for id "${n}"`);const y=Ht(n,r);Y(y,`No resize handles found for group id "${n}"`);const p=y.map(u=>{const g=u.getAttribute("data-panel-resize-handle-id");Y(g,"Resize handle element has no handle id attribute");const[j,w]=Tr(n,g,i,r);if(j==null||w==null)return()=>{};const $=f=>{if(!f.defaultPrevented)switch(f.key){case"Enter":{f.preventDefault();const C=i.findIndex(D=>D.id===j);if(C>=0){const D=i[C];Y(D,`No panel data found for index ${C}`);const T=s[C],{collapsedSize:A=0,collapsible:R,minSize:h=0}=D.constraints;if(T!=null&&R){const _=Pt({delta:Ge(T,A)?h-A:A-T,initialLayout:s,panelConstraints:i.map(B=>B.constraints),pivotIndices:Ha(n,g,r),prevLayout:s,trigger:"keyboard"});s!==_&&o(_)}}break}}};return u.addEventListener("keydown",$),()=>{u.removeEventListener("keydown",$)}});return()=>{p.forEach(u=>u())}},[r,t,a,n,s,l,o])}function aa(t,a){if(t.length!==a.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==a[n])return!1;return!0}function Ba(t,a){const n=t==="horizontal",{x:s,y:l}=en(a);return n?s:l}function zr(t,a,n,s,l){const r=n==="horizontal",o=nn(a,l);Y(o,`No resize handle element found for id "${a}"`);const c=o.getAttribute("data-panel-group-id");Y(c,"Resize handle element has no group id attribute");let{initialCursorPosition:i}=s;const v=Ba(n,t),y=_a(c,l);Y(y,`No group element found for id "${c}"`);const p=y.getBoundingClientRect(),u=r?p.width:p.height;return(v-i)/u*100}function Rr(t,a,n,s,l,r){if(Ra(t)){const o=n==="horizontal";let c=0;t.shiftKey?c=100:l!=null?c=l:c=10;let i=0;switch(t.key){case"ArrowDown":i=o?0:c;break;case"ArrowLeft":i=o?-c:0;break;case"ArrowRight":i=o?c:0;break;case"ArrowUp":i=o?0:-c;break;case"End":i=100;break;case"Home":i=-100;break}return i}else return s==null?0:zr(t,a,n,s,r)}function Er({panelDataArray:t}){const a=Array(t.length),n=t.map(r=>r.constraints);let s=0,l=100;for(let r=0;r<t.length;r++){const o=n[r];Y(o,`Panel constraints not found for index ${r}`);const{defaultSize:c}=o;c!=null&&(s++,a[r]=c,l-=c)}for(let r=0;r<t.length;r++){const o=n[r];Y(o,`Panel constraints not found for index ${r}`);const{defaultSize:c}=o;if(c!=null)continue;const i=t.length-s,v=l/i;s++,a[r]=v,l-=v}return a}function vt(t,a,n){a.forEach((s,l)=>{const r=t[l];Y(r,`Panel data not found for index ${l}`);const{callbacks:o,constraints:c,id:i}=r,{collapsedSize:v=0,collapsible:y}=c,p=n[i];if(p==null||s!==p){n[i]=s;const{onCollapse:u,onExpand:g,onResize:j}=o;j&&j(s,p),y&&(u||g)&&(g&&(p==null||nt(p,v))&&!nt(s,v)&&g(),u&&(p==null||!nt(p,v))&&nt(s,v)&&u())}})}function Wt(t,a){if(t.length!==a.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=a[n])return!1;return!0}function Ar({defaultSize:t,dragState:a,layout:n,panelData:s,panelIndex:l,precision:r=3}){const o=n[l];let c;return o==null?c=t!=null?t.toPrecision(r):"1":s.length===1?c="1":c=o.toPrecision(r),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:a!==null?"none":void 0}}function Mr(t,a=10){let n=null;return(...l)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...l)},a)}}function sa(t){try{if(typeof localStorage<"u")t.getItem=a=>localStorage.getItem(a),t.setItem=(a,n)=>{localStorage.setItem(a,n)};else throw new Error("localStorage not supported in this environment")}catch(a){console.error(a),t.getItem=()=>null,t.setItem=()=>{}}}function Ua(t){return`react-resizable-panels:${t}`}function Oa(t){return t.map(a=>{const{constraints:n,id:s,idIsFromProps:l,order:r}=a;return l?s:r?`${r}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((a,n)=>a.localeCompare(n)).join(",")}function Fa(t,a){try{const n=Ua(t),s=a.getItem(n);if(s){const l=JSON.parse(s);if(typeof l=="object"&&l!=null)return l}}catch{}return null}function Pr(t,a,n){var s,l;const r=(s=Fa(t,n))!==null&&s!==void 0?s:{},o=Oa(a);return(l=r[o])!==null&&l!==void 0?l:null}function Ir(t,a,n,s,l){var r;const o=Ua(t),c=Oa(a),i=(r=Fa(t,l))!==null&&r!==void 0?r:{};i[c]={expandToSizes:Object.fromEntries(n.entries()),layout:s};try{l.setItem(o,JSON.stringify(i))}catch(v){console.error(v)}}function ra({layout:t,panelConstraints:a}){const n=[...t],s=n.reduce((r,o)=>r+o,0);if(n.length!==a.length)throw Error(`Invalid ${a.length} panel layout: ${n.map(r=>`${r}%`).join(", ")}`);if(!Ge(s,100)&&n.length>0)for(let r=0;r<a.length;r++){const o=n[r];Y(o!=null,`No layout data found for index ${r}`);const c=100/s*o;n[r]=c}let l=0;for(let r=0;r<a.length;r++){const o=n[r];Y(o!=null,`No layout data found for index ${r}`);const c=Nt({panelConstraints:a,panelIndex:r,size:o});o!=c&&(l+=o-c,n[r]=c)}if(!Ge(l,0))for(let r=0;r<a.length;r++){const o=n[r];Y(o!=null,`No layout data found for index ${r}`);const c=o+l,i=Nt({panelConstraints:a,panelIndex:r,size:c});if(o!==i&&(l-=i-o,n[r]=i,Ge(l,0)))break}return n}const Dr=100,It={getItem:t=>(sa(It),It.getItem(t)),setItem:(t,a)=>{sa(It),It.setItem(t,a)}},la={};function Va({autoSaveId:t=null,children:a,className:n="",direction:s,forwardedRef:l,id:r=null,onLayout:o=null,keyboardResizeBy:c=null,storage:i=It,style:v,tagName:y="div",...p}){const u=An(r),g=Ve(null),[j,w]=Ct(null),[$,f]=Ct([]),C=Nr(),D=Ve({}),T=Ve(new Map),A=Ve(0),R=Ve({autoSaveId:t,direction:s,dragState:j,id:u,keyboardResizeBy:c,onLayout:o,storage:i}),h=Ve({layout:$,panelDataArray:[],panelDataArrayChanged:!1});Ve({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Ta(l,()=>({getId:()=>R.current.id,getLayout:()=>{const{layout:N}=h.current;return N},setLayout:N=>{const{onLayout:U}=R.current,{layout:V,panelDataArray:F}=h.current,H=ra({layout:N,panelConstraints:F.map(W=>W.constraints)});aa(V,H)||(f(H),h.current.layout=H,U&&U(H),vt(F,H,D.current))}}),[]),ft(()=>{R.current.autoSaveId=t,R.current.direction=s,R.current.dragState=j,R.current.id=u,R.current.onLayout=o,R.current.storage=i}),kr({committedValuesRef:R,eagerValuesRef:h,groupId:u,layout:$,panelDataArray:h.current.panelDataArray,setLayout:f,panelGroupElement:g.current}),mt(()=>{const{panelDataArray:N}=h.current;if(t){if($.length===0||$.length!==N.length)return;let U=la[t];U==null&&(U=Mr(Ir,Dr),la[t]=U);const V=[...N],F=new Map(T.current);U(t,V,F,$,i)}},[t,$,i]),mt(()=>{});const _=Fe(N=>{const{onLayout:U}=R.current,{layout:V,panelDataArray:F}=h.current;if(N.constraints.collapsible){const H=F.map(ce=>ce.constraints),{collapsedSize:W=0,panelSize:te,pivotIndices:K}=ct(F,N,V);if(Y(te!=null,`Panel size not found for panel "${N.id}"`),!nt(te,W)){T.current.set(N.id,te);const pe=bt(F,N)===F.length-1?te-W:W-te,ne=Pt({delta:pe,initialLayout:V,panelConstraints:H,pivotIndices:K,prevLayout:V,trigger:"imperative-api"});Wt(V,ne)||(f(ne),h.current.layout=ne,U&&U(ne),vt(F,ne,D.current))}}},[]),B=Fe((N,U)=>{const{onLayout:V}=R.current,{layout:F,panelDataArray:H}=h.current;if(N.constraints.collapsible){const W=H.map(I=>I.constraints),{collapsedSize:te=0,panelSize:K=0,minSize:ce=0,pivotIndices:pe}=ct(H,N,F),ne=U??ce;if(nt(K,te)){const I=T.current.get(N.id),$e=I!=null&&I>=ne?I:ne,Ce=bt(H,N)===H.length-1?K-$e:$e-K,he=Pt({delta:Ce,initialLayout:F,panelConstraints:W,pivotIndices:pe,prevLayout:F,trigger:"imperative-api"});Wt(F,he)||(f(he),h.current.layout=he,V&&V(he),vt(H,he,D.current))}}},[]),re=Fe(N=>{const{layout:U,panelDataArray:V}=h.current,{panelSize:F}=ct(V,N,U);return Y(F!=null,`Panel size not found for panel "${N.id}"`),F},[]),E=Fe((N,U)=>{const{panelDataArray:V}=h.current,F=bt(V,N);return Ar({defaultSize:U,dragState:j,layout:$,panelData:V,panelIndex:F})},[j,$]),q=Fe(N=>{const{layout:U,panelDataArray:V}=h.current,{collapsedSize:F=0,collapsible:H,panelSize:W}=ct(V,N,U);return Y(W!=null,`Panel size not found for panel "${N.id}"`),H===!0&&nt(W,F)},[]),P=Fe(N=>{const{layout:U,panelDataArray:V}=h.current,{collapsedSize:F=0,collapsible:H,panelSize:W}=ct(V,N,U);return Y(W!=null,`Panel size not found for panel "${N.id}"`),!H||pt(W,F)>0},[]),J=Fe(N=>{const{panelDataArray:U}=h.current;U.push(N),U.sort((V,F)=>{const H=V.order,W=F.order;return H==null&&W==null?0:H==null?-1:W==null?1:H-W}),h.current.panelDataArrayChanged=!0,C()},[C]);ft(()=>{if(h.current.panelDataArrayChanged){h.current.panelDataArrayChanged=!1;const{autoSaveId:N,onLayout:U,storage:V}=R.current,{layout:F,panelDataArray:H}=h.current;let W=null;if(N){const K=Pr(N,H,V);K&&(T.current=new Map(Object.entries(K.expandToSizes)),W=K.layout)}W==null&&(W=Er({panelDataArray:H}));const te=ra({layout:W,panelConstraints:H.map(K=>K.constraints)});aa(F,te)||(f(te),h.current.layout=te,U&&U(te),vt(H,te,D.current))}}),ft(()=>{const N=h.current;return()=>{N.layout=[]}},[]);const X=Fe(N=>{let U=!1;const V=g.current;return V&&window.getComputedStyle(V,null).getPropertyValue("direction")==="rtl"&&(U=!0),function(H){H.preventDefault();const W=g.current;if(!W)return()=>null;const{direction:te,dragState:K,id:ce,keyboardResizeBy:pe,onLayout:ne}=R.current,{layout:I,panelDataArray:$e}=h.current,{initialLayout:Ae}=K??{},Ce=Ha(ce,N,W);let he=Rr(H,N,te,K,pe,W);const Ke=te==="horizontal";Ke&&U&&(he=-he);const Ue=$e.map(Be=>Be.constraints),_e=Pt({delta:he,initialLayout:Ae??I,panelConstraints:Ue,pivotIndices:Ce,prevLayout:I,trigger:Ra(H)?"keyboard":"mouse-or-touch"}),fe=!Wt(I,_e);(Ea(H)||Aa(H))&&A.current!=he&&(A.current=he,!fe&&he!==0?Ke?fn(N,he<0?Pa:Ia):fn(N,he<0?Da:$a):fn(N,0)),fe&&(f(_e),h.current.layout=_e,ne&&ne(_e),vt($e,_e,D.current))}},[]),ee=Fe((N,U)=>{const{onLayout:V}=R.current,{layout:F,panelDataArray:H}=h.current,W=H.map(I=>I.constraints),{panelSize:te,pivotIndices:K}=ct(H,N,F);Y(te!=null,`Panel size not found for panel "${N.id}"`);const pe=bt(H,N)===H.length-1?te-U:U-te,ne=Pt({delta:pe,initialLayout:F,panelConstraints:W,pivotIndices:K,prevLayout:F,trigger:"imperative-api"});Wt(F,ne)||(f(ne),h.current.layout=ne,V&&V(ne),vt(H,ne,D.current))},[]),oe=Fe((N,U)=>{const{layout:V,panelDataArray:F}=h.current,{collapsedSize:H=0,collapsible:W}=U,{collapsedSize:te=0,collapsible:K,maxSize:ce=100,minSize:pe=0}=N.constraints,{panelSize:ne}=ct(F,N,V);ne!=null&&(W&&K&&nt(ne,H)?nt(H,te)||ee(N,te):ne<pe?ee(N,pe):ne>ce&&ee(N,ce))},[ee]),de=Fe((N,U)=>{const{direction:V}=R.current,{layout:F}=h.current;if(!g.current)return;const H=nn(N,g.current);Y(H,`Drag handle element not found for id "${N}"`);const W=Ba(V,U);w({dragHandleId:N,dragHandleRect:H.getBoundingClientRect(),initialCursorPosition:W,initialLayout:F})},[]),De=Fe(()=>{w(null)},[]),ge=Fe(N=>{const{panelDataArray:U}=h.current,V=bt(U,N);V>=0&&(U.splice(V,1),delete D.current[N.id],h.current.panelDataArrayChanged=!0,C())},[C]),we=cr(()=>({collapsePanel:_,direction:s,dragState:j,expandPanel:B,getPanelSize:re,getPanelStyle:E,groupId:u,isPanelCollapsed:q,isPanelExpanded:P,reevaluatePanelConstraints:oe,registerPanel:J,registerResizeHandle:X,resizePanel:ee,startDragging:de,stopDragging:De,unregisterPanel:ge,panelGroupElement:g.current}),[_,j,s,B,re,E,u,q,P,oe,J,X,ee,de,De,ge]),Ne={display:"flex",flexDirection:s==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return kt(Qt.Provider,{value:we},kt(y,{...p,children:a,className:n,id:r,ref:g,style:{...Ne,...v},"data-panel-group":"","data-panel-group-direction":s,"data-panel-group-id":u}))}const Wa=Ca((t,a)=>kt(Va,{...t,forwardedRef:a}));Va.displayName="PanelGroup";Wa.displayName="forwardRef(PanelGroup)";function bt(t,a){return t.findIndex(n=>n===a||n.id===a.id)}function ct(t,a,n){const s=bt(t,a),r=s===t.length-1?[s-1,s]:[s,s+1],o=n[s];return{...a.constraints,panelSize:o,pivotIndices:r}}function $r({disabled:t,handleId:a,resizeHandler:n,panelGroupElement:s}){mt(()=>{if(t||n==null||s==null)return;const l=nn(a,s);if(l==null)return;const r=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const c=l.getAttribute("data-panel-group-id");Y(c,`No group element found for id "${c}"`);const i=Ht(c,s),v=La(c,a,s);Y(v!==null,`No resize element found for id "${a}"`);const y=o.shiftKey?v>0?v-1:i.length-1:v+1<i.length?v+1:0;i[y].focus();break}}};return l.addEventListener("keydown",r),()=>{l.removeEventListener("keydown",r)}},[s,t,a,n])}function Ga({children:t=null,className:a="",disabled:n=!1,hitAreaMargins:s,id:l,onBlur:r,onDragging:o,onFocus:c,style:i={},tabIndex:v=0,tagName:y="div",...p}){var u,g;const j=Ve(null),w=Ve({onDragging:o});mt(()=>{w.current.onDragging=o});const $=Sa(Qt);if($===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,groupId:C,registerResizeHandle:D,startDragging:T,stopDragging:A,panelGroupElement:R}=$,h=An(l),[_,B]=Ct("inactive"),[re,E]=Ct(!1),[q,P]=Ct(null),J=Ve({state:_});ft(()=>{J.current.state=_}),mt(()=>{if(n)P(null);else{const de=D(h);P(()=>de)}},[n,h,D]);const X=(u=s==null?void 0:s.coarse)!==null&&u!==void 0?u:15,ee=(g=s==null?void 0:s.fine)!==null&&g!==void 0?g:5;return mt(()=>{if(n||q==null)return;const de=j.current;return Y(de,"Element ref not attached"),yr(h,de,f,{coarse:X,fine:ee},(ge,we,Ne)=>{if(we)switch(ge){case"down":{B("drag"),Y(Ne,'Expected event to be defined for "down" action'),T(h,Ne);const{onDragging:N}=w.current;N&&N(!0);break}case"move":{const{state:N}=J.current;N!=="drag"&&B("hover"),Y(Ne,'Expected event to be defined for "move" action'),q(Ne);break}case"up":{B("hover"),A();const{onDragging:N}=w.current;N&&N(!1);break}}else B("inactive")})},[X,f,n,ee,D,h,q,T,A]),$r({disabled:n,handleId:h,resizeHandler:q,panelGroupElement:R}),kt(y,{...p,children:t,className:a,id:l,onBlur:()=>{E(!1),r==null||r()},onFocus:()=>{E(!0),c==null||c()},ref:j,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...i},tabIndex:v,"data-panel-group-direction":f,"data-panel-group-id":C,"data-resize-handle":"","data-resize-handle-active":_==="drag"?"pointer":re?"keyboard":void 0,"data-resize-handle-state":_,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":h})}Ga.displayName="PanelResizeHandle";function Lr({className:t,...a}){return e.jsx(Wa,{"data-slot":"resizable-panel-group",className:ke("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a})}function ia({...t}){return e.jsx(za,{"data-slot":"resizable-panel",...t})}function Hr({withHandle:t,className:a,...n}){return e.jsx(Ga,{"data-slot":"resizable-handle",className:ke("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",a),...n,children:t&&e.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:e.jsx(bs,{className:"size-2.5"})})})}function _r(t){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const qa=S.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),_t=()=>{const t=S.useContext(qa);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};_r(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Br(){const t=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function Ur(){return Dn(/^Mac/)}function Or(){return Dn(/^iPhone/)}function oa(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Fr(){return Dn(/^iPad/)||Ur()&&navigator.maxTouchPoints>1}function Ka(){return Or()||Fr()}function Dn(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const Vr=24,Wr=typeof window<"u"?L.useLayoutEffect:L.useEffect;function ca(...t){return(...a)=>{for(let n of t)typeof n=="function"&&n(...a)}}const pn=typeof document<"u"&&window.visualViewport;function da(t){let a=window.getComputedStyle(t);return/(auto|scroll)/.test(a.overflow+a.overflowX+a.overflowY)}function Ya(t){for(da(t)&&(t=t.parentElement);t&&!da(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const Gr=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Gt=0,hn;function qr(t={}){let{isDisabled:a}=t;Wr(()=>{if(!a)return Gt++,Gt===1&&Ka()&&(hn=Kr()),()=>{Gt--,Gt===0&&(hn==null||hn())}},[a])}function Kr(){let t,a=0,n=p=>{t=Ya(p.target),!(t===document.documentElement&&t===document.body)&&(a=p.changedTouches[0].pageY)},s=p=>{if(!t||t===document.documentElement||t===document.body){p.preventDefault();return}let u=p.changedTouches[0].pageY,g=t.scrollTop,j=t.scrollHeight-t.clientHeight;j!==0&&((g<=0&&u>a||g>=j&&u<a)&&p.preventDefault(),a=u)},l=p=>{let u=p.target;Sn(u)&&u!==document.activeElement&&(p.preventDefault(),u.style.transform="translateY(-2000px)",u.focus(),requestAnimationFrame(()=>{u.style.transform=""}))},r=p=>{let u=p.target;Sn(u)&&(u.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{u.style.transform="",pn&&(pn.height<window.innerHeight?requestAnimationFrame(()=>{ua(u)}):pn.addEventListener("resize",()=>ua(u),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},c=window.pageXOffset,i=window.pageYOffset,v=ca(Yr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let y=ca(At(document,"touchstart",n,{passive:!1,capture:!0}),At(document,"touchmove",s,{passive:!1,capture:!0}),At(document,"touchend",l,{passive:!1,capture:!0}),At(document,"focus",r,!0),At(window,"scroll",o));return()=>{v(),y(),window.scrollTo(c,i)}}function Yr(t,a,n){let s=t.style[a];return t.style[a]=n,()=>{t.style[a]=s}}function At(t,a,n,s){return t.addEventListener(a,n,s),()=>{t.removeEventListener(a,n,s)}}function ua(t){let a=document.scrollingElement||document.documentElement;for(;t&&t!==a;){let n=Ya(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let s=n.getBoundingClientRect().top,l=t.getBoundingClientRect().top,r=t.getBoundingClientRect().bottom;const o=n.getBoundingClientRect().bottom+Vr;r>o&&(n.scrollTop+=l-s)}t=n.parentElement}}function Sn(t){return t instanceof HTMLInputElement&&!Gr.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function Xr(t,a){typeof t=="function"?t(a):t!=null&&(t.current=a)}function Jr(...t){return a=>t.forEach(n=>Xr(n,a))}function Xa(...t){return L.useCallback(Jr(...t),t)}const Ja=new WeakMap;function Te(t,a,n=!1){if(!t||!(t instanceof HTMLElement))return;let s={};Object.entries(a).forEach(([l,r])=>{if(l.startsWith("--")){t.style.setProperty(l,r);return}s[l]=t.style[l],t.style[l]=r}),!n&&Ja.set(t,s)}function Zr(t,a){if(!t||!(t instanceof HTMLElement))return;let n=Ja.get(t);n&&(t.style[a]=n[a])}const ve=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function qt(t,a){if(!t)return null;const n=window.getComputedStyle(t),s=n.transform||n.webkitTransform||n.mozTransform;let l=s.match(/^matrix3d\((.+)\)$/);return l?parseFloat(l[1].split(", ")[ve(a)?13:12]):(l=s.match(/^matrix\((.+)\)$/),l?parseFloat(l[1].split(", ")[ve(a)?5:4]):null)}function Qr(t){return 8*(Math.log(t+1)-2)}function xn(t,a){if(!t)return()=>{};const n=t.style.cssText;return Object.assign(t.style,a),()=>{t.style.cssText=n}}function el(...t){return(...a)=>{for(const n of t)typeof n=="function"&&n(...a)}}const me={DURATION:.5,EASE:[.32,.72,0,1]},Za=.4,tl=.25,nl=100,Qa=8,Kt=16,Tn=26,gn="vaul-dragging";function es(t){const a=S.useRef(t);return S.useEffect(()=>{a.current=t}),S.useMemo(()=>(...n)=>a.current==null?void 0:a.current.call(a,...n),[])}function al({defaultProp:t,onChange:a}){const n=S.useState(t),[s]=n,l=S.useRef(s),r=es(a);return S.useEffect(()=>{l.current!==s&&(r(s),l.current=s)},[s,l,r]),n}function ts({prop:t,defaultProp:a,onChange:n=()=>{}}){const[s,l]=al({defaultProp:a,onChange:n}),r=t!==void 0,o=r?t:s,c=es(n),i=S.useCallback(v=>{if(r){const p=typeof v=="function"?v(t):v;p!==t&&c(p)}else l(v)},[r,t,l,c]);return[o,i]}function sl({activeSnapPointProp:t,setActiveSnapPointProp:a,snapPoints:n,drawerRef:s,overlayRef:l,fadeFromIndex:r,onSnapPointChange:o,direction:c="bottom",container:i,snapToSequentialPoint:v}){const[y,p]=ts({prop:t,defaultProp:n==null?void 0:n[0],onChange:a}),[u,g]=S.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);S.useEffect(()=>{function h(){g({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const j=S.useMemo(()=>y===(n==null?void 0:n[n.length-1])||null,[n,y]),w=S.useMemo(()=>{var h;return(h=n==null?void 0:n.findIndex(_=>_===y))!=null?h:null},[n,y]),$=n&&n.length>0&&(r||r===0)&&!Number.isNaN(r)&&n[r]===y||!n,f=S.useMemo(()=>{const h=i?{width:i.getBoundingClientRect().width,height:i.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var _;return(_=n==null?void 0:n.map(B=>{const re=typeof B=="string";let E=0;if(re&&(E=parseInt(B,10)),ve(c)){const P=re?E:u?B*h.height:0;return u?c==="bottom"?h.height-P:-h.height+P:P}const q=re?E:u?B*h.width:0;return u?c==="right"?h.width-q:-h.width+q:q}))!=null?_:[]},[n,u,i]),C=S.useMemo(()=>w!==null?f==null?void 0:f[w]:null,[f,w]),D=S.useCallback(h=>{var _;const B=(_=f==null?void 0:f.findIndex(re=>re===h))!=null?_:null;o(B),Te(s.current,{transition:`transform ${me.DURATION}s cubic-bezier(${me.EASE.join(",")})`,transform:ve(c)?`translate3d(0, ${h}px, 0)`:`translate3d(${h}px, 0, 0)`}),f&&B!==f.length-1&&r!==void 0&&B!==r&&B<r?Te(l.current,{transition:`opacity ${me.DURATION}s cubic-bezier(${me.EASE.join(",")})`,opacity:"0"}):Te(l.current,{transition:`opacity ${me.DURATION}s cubic-bezier(${me.EASE.join(",")})`,opacity:"1"}),p(n==null?void 0:n[Math.max(B,0)])},[s.current,n,f,r,l,p]);S.useEffect(()=>{if(y||t){var h;const _=(h=n==null?void 0:n.findIndex(B=>B===t||B===y))!=null?h:-1;f&&_!==-1&&typeof f[_]=="number"&&D(f[_])}},[y,t,n,f,D]);function T({draggedDistance:h,closeDrawer:_,velocity:B,dismissible:re}){if(r===void 0)return;const E=c==="bottom"||c==="right"?(C??0)-h:(C??0)+h,q=w===r-1,P=w===0,J=h>0;if(q&&Te(l.current,{transition:`opacity ${me.DURATION}s cubic-bezier(${me.EASE.join(",")})`}),!v&&B>2&&!J){re?_():D(f[0]);return}if(!v&&B>2&&J&&f&&n){D(f[n.length-1]);return}const X=f==null?void 0:f.reduce((oe,de)=>typeof oe!="number"||typeof de!="number"?oe:Math.abs(de-E)<Math.abs(oe-E)?de:oe),ee=ve(c)?window.innerHeight:window.innerWidth;if(B>Za&&Math.abs(h)<ee*.4){const oe=J?1:-1;if(oe>0&&j&&n){D(f[n.length-1]);return}if(P&&oe<0&&re&&_(),w===null)return;D(f[w+oe]);return}D(X)}function A({draggedDistance:h}){if(C===null)return;const _=c==="bottom"||c==="right"?C-h:C+h;(c==="bottom"||c==="right")&&_<f[f.length-1]||(c==="top"||c==="left")&&_>f[f.length-1]||Te(s.current,{transform:ve(c)?`translate3d(0, ${_}px, 0)`:`translate3d(${_}px, 0, 0)`})}function R(h,_){if(!n||typeof w!="number"||!f||r===void 0)return null;const B=w===r-1;if(w>=r&&_)return 0;if(B&&!_)return 1;if(!$&&!B)return null;const E=B?w+1:w-1,q=B?f[E]-f[E-1]:f[E+1]-f[E],P=h/Math.abs(q);return B?1-P:P}return{isLastSnapPoint:j,activeSnapPoint:y,shouldFade:$,getPercentageDragged:R,setActiveSnapPoint:p,activeSnapPointIndex:w,onRelease:T,onDrag:A,snapPointsOffset:f}}const rl=()=>()=>{};function ll(){const{direction:t,isOpen:a,shouldScaleBackground:n,setBackgroundColorOnScale:s,noBodyStyles:l}=_t(),r=S.useRef(null),o=L.useMemo(()=>document.body.style.backgroundColor,[]);function c(){return(window.innerWidth-Tn)/window.innerWidth}S.useEffect(()=>{if(a&&n){r.current&&clearTimeout(r.current);const i=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!i)return;el(s&&!l?xn(document.body,{background:"black"}):rl,xn(i,{transformOrigin:ve(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${me.DURATION}s`,transitionTimingFunction:`cubic-bezier(${me.EASE.join(",")})`}));const v=xn(i,{borderRadius:`${Qa}px`,overflow:"hidden",...ve(t)?{transform:`scale(${c()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${c()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{v(),r.current=window.setTimeout(()=>{o?document.body.style.background=o:document.body.style.removeProperty("background")},me.DURATION*1e3)}}},[a,n,o])}let Mt=null;function il({isOpen:t,modal:a,nested:n,hasBeenOpened:s,preventScrollRestoration:l,noBodyStyles:r}){const[o,c]=S.useState(()=>typeof window<"u"?window.location.href:""),i=S.useRef(0),v=S.useCallback(()=>{if(oa()&&Mt===null&&t&&!r){Mt={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:p,innerHeight:u}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-i.current}px`,left:`${-p}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const g=u-window.innerHeight;g&&i.current>=u&&(document.body.style.top=`${-(i.current+g)}px`)}),300)}},[t]),y=S.useCallback(()=>{if(oa()&&Mt!==null&&!r){const p=-parseInt(document.body.style.top,10),u=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Mt),window.requestAnimationFrame(()=>{if(l&&o!==window.location.href){c(window.location.href);return}window.scrollTo(u,p)}),Mt=null}},[o]);return S.useEffect(()=>{function p(){i.current=window.scrollY}return p(),window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[]),S.useEffect(()=>{if(a)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||y()}},[a,y]),S.useEffect(()=>{n||!s||(t?(!window.matchMedia("(display-mode: standalone)").matches&&v(),a||window.setTimeout(()=>{y()},500)):y())},[t,s,o,a,n,v,y]),{restorePositionSetting:y}}function ol({open:t,onOpenChange:a,children:n,onDrag:s,onRelease:l,snapPoints:r,shouldScaleBackground:o=!1,setBackgroundColorOnScale:c=!0,closeThreshold:i=tl,scrollLockTimeout:v=nl,dismissible:y=!0,handleOnly:p=!1,fadeFromIndex:u=r&&r.length-1,activeSnapPoint:g,setActiveSnapPoint:j,fixed:w,modal:$=!0,onClose:f,nested:C,noBodyStyles:D=!1,direction:T="bottom",defaultOpen:A=!1,disablePreventScroll:R=!0,snapToSequentialPoint:h=!1,preventScrollRestoration:_=!1,repositionInputs:B=!0,onAnimationEnd:re,container:E,autoFocus:q=!1}){var P,J;const[X=!1,ee]=ts({defaultProp:A,prop:t,onChange:O=>{a==null||a(O),!O&&!C&&at(),setTimeout(()=>{re==null||re(O)},me.DURATION*1e3),O&&!$&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),O||(document.body.style.pointerEvents="auto")}}),[oe,de]=S.useState(!1),[De,ge]=S.useState(!1),[we,Ne]=S.useState(!1),N=S.useRef(null),U=S.useRef(null),V=S.useRef(null),F=S.useRef(null),H=S.useRef(null),W=S.useRef(!1),te=S.useRef(null),K=S.useRef(0),ce=S.useRef(!1),pe=S.useRef(!A),ne=S.useRef(0),I=S.useRef(null),$e=S.useRef(((P=I.current)==null?void 0:P.getBoundingClientRect().height)||0),Ae=S.useRef(((J=I.current)==null?void 0:J.getBoundingClientRect().width)||0),Ce=S.useRef(0),he=S.useCallback(O=>{r&&O===Be.length-1&&(U.current=new Date)},[]),{activeSnapPoint:Ke,activeSnapPointIndex:Ue,setActiveSnapPoint:_e,onRelease:fe,snapPointsOffset:Be,onDrag:ht,shouldFade:k,getPercentageDragged:le}=sl({snapPoints:r,activeSnapPointProp:g,setActiveSnapPointProp:j,drawerRef:I,fadeFromIndex:u,overlayRef:N,onSnapPointChange:he,direction:T,container:E,snapToSequentialPoint:h});qr({isDisabled:!X||De||!$||we||!oe||!B||!R});const{restorePositionSetting:at}=il({isOpen:X,modal:$,nested:C??!1,hasBeenOpened:oe,preventScrollRestoration:_,noBodyStyles:D});function et(){return(window.innerWidth-Tn)/window.innerWidth}function xt(O){var ae,se;!y&&!r||I.current&&!I.current.contains(O.target)||($e.current=((ae=I.current)==null?void 0:ae.getBoundingClientRect().height)||0,Ae.current=((se=I.current)==null?void 0:se.getBoundingClientRect().width)||0,ge(!0),V.current=new Date,Ka()&&window.addEventListener("touchend",()=>W.current=!1,{once:!0}),O.target.setPointerCapture(O.pointerId),K.current=ve(T)?O.pageY:O.pageX)}function rt(O,ae){var se;let Q=O;const ue=(se=window.getSelection())==null?void 0:se.toString(),Le=I.current?qt(I.current,T):null,Pe=new Date;if(Q.tagName==="SELECT"||Q.hasAttribute("data-vaul-no-drag")||Q.closest("[data-vaul-no-drag]"))return!1;if(T==="right"||T==="left")return!0;if(U.current&&Pe.getTime()-U.current.getTime()<500)return!1;if(Le!==null&&(T==="bottom"?Le>0:Le<0))return!0;if(ue&&ue.length>0)return!1;if(H.current&&Pe.getTime()-H.current.getTime()<v&&Le===0||ae)return H.current=Pe,!1;for(;Q;){if(Q.scrollHeight>Q.clientHeight){if(Q.scrollTop!==0)return H.current=new Date,!1;if(Q.getAttribute("role")==="dialog")return!0}Q=Q.parentNode}return!0}function Ee(O){if(I.current&&De){const ae=T==="bottom"||T==="right"?1:-1,se=(K.current-(ve(T)?O.pageY:O.pageX))*ae,Q=se>0,ue=r&&!y&&!Q;if(ue&&Ue===0)return;const Le=Math.abs(se),Pe=document.querySelector("[data-vaul-drawer-wrapper]"),Ze=T==="bottom"||T==="top"?$e.current:Ae.current;let We=Le/Ze;const tt=le(Le,Q);if(tt!==null&&(We=tt),ue&&We>=1||!W.current&&!rt(O.target,Q))return;if(I.current.classList.add(gn),W.current=!0,Te(I.current,{transition:"none"}),Te(N.current,{transition:"none"}),r&&ht({draggedDistance:se}),Q&&!r){const Ye=Qr(se),gt=Math.min(Ye*-1,0)*ae;Te(I.current,{transform:ve(T)?`translate3d(0, ${gt}px, 0)`:`translate3d(${gt}px, 0, 0)`});return}const Qe=1-We;if((k||u&&Ue===u-1)&&(s==null||s(O,We),Te(N.current,{opacity:`${Qe}`,transition:"none"},!0)),Pe&&N.current&&o){const Ye=Math.min(et()+We*(1-et()),1),gt=8-We*8,Ut=Math.max(0,14-We*14);Te(Pe,{borderRadius:`${gt}px`,transform:ve(T)?`scale(${Ye}) translate3d(0, ${Ut}px, 0)`:`scale(${Ye}) translate3d(${Ut}px, 0, 0)`,transition:"none"},!0)}if(!r){const Ye=Le*ae;Te(I.current,{transform:ve(T)?`translate3d(0, ${Ye}px, 0)`:`translate3d(${Ye}px, 0, 0)`})}}}S.useEffect(()=>{window.requestAnimationFrame(()=>{pe.current=!0})},[]),S.useEffect(()=>{var O;function ae(){if(!I.current||!B)return;const se=document.activeElement;if(Sn(se)||ce.current){var Q;const ue=((Q=window.visualViewport)==null?void 0:Q.height)||0,Le=window.innerHeight;let Pe=Le-ue;const Ze=I.current.getBoundingClientRect().height||0,We=Ze>Le*.8;Ce.current||(Ce.current=Ze);const tt=I.current.getBoundingClientRect().top;if(Math.abs(ne.current-Pe)>60&&(ce.current=!ce.current),r&&r.length>0&&Be&&Ue){const Qe=Be[Ue]||0;Pe+=Qe}if(ne.current=Pe,Ze>ue||ce.current){const Qe=I.current.getBoundingClientRect().height;let Ye=Qe;Qe>ue&&(Ye=ue-(We?tt:Tn)),w?I.current.style.height=`${Qe-Math.max(Pe,0)}px`:I.current.style.height=`${Math.max(Ye,ue-tt)}px`}else Br()||(I.current.style.height=`${Ce.current}px`);r&&r.length>0&&!ce.current?I.current.style.bottom="0px":I.current.style.bottom=`${Math.max(Pe,0)}px`}}return(O=window.visualViewport)==null||O.addEventListener("resize",ae),()=>{var se;return(se=window.visualViewport)==null?void 0:se.removeEventListener("resize",ae)}},[Ue,r,Be]);function Me(O){an(),f==null||f(),O||ee(!1),setTimeout(()=>{r&&_e(r[0])},me.DURATION*1e3)}function lt(){if(!I.current)return;const O=document.querySelector("[data-vaul-drawer-wrapper]"),ae=qt(I.current,T);Te(I.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${me.DURATION}s cubic-bezier(${me.EASE.join(",")})`}),Te(N.current,{transition:`opacity ${me.DURATION}s cubic-bezier(${me.EASE.join(",")})`,opacity:"1"}),o&&ae&&ae>0&&X&&Te(O,{borderRadius:`${Qa}px`,overflow:"hidden",...ve(T)?{transform:`scale(${et()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${et()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${me.DURATION}s`,transitionTimingFunction:`cubic-bezier(${me.EASE.join(",")})`},!0)}function an(){!De||!I.current||(I.current.classList.remove(gn),W.current=!1,ge(!1),F.current=new Date)}function sn(O){if(!De||!I.current)return;I.current.classList.remove(gn),W.current=!1,ge(!1),F.current=new Date;const ae=qt(I.current,T);if(!O||!rt(O.target,!1)||!ae||Number.isNaN(ae)||V.current===null)return;const se=F.current.getTime()-V.current.getTime(),Q=K.current-(ve(T)?O.pageY:O.pageX),ue=Math.abs(Q)/se;if(ue>.05&&(Ne(!0),setTimeout(()=>{Ne(!1)},200)),r){fe({draggedDistance:Q*(T==="bottom"||T==="right"?1:-1),closeDrawer:Me,velocity:ue,dismissible:y}),l==null||l(O,!0);return}if(T==="bottom"||T==="right"?Q>0:Q<0){lt(),l==null||l(O,!0);return}if(ue>Za){Me(),l==null||l(O,!1);return}var Le;const Pe=Math.min((Le=I.current.getBoundingClientRect().height)!=null?Le:0,window.innerHeight);var Ze;const We=Math.min((Ze=I.current.getBoundingClientRect().width)!=null?Ze:0,window.innerWidth),tt=T==="left"||T==="right";if(Math.abs(ae)>=(tt?We:Pe)*i){Me(),l==null||l(O,!1);return}l==null||l(O,!0),lt()}S.useEffect(()=>(X&&(Te(document.documentElement,{scrollBehavior:"auto"}),U.current=new Date),()=>{Zr(document.documentElement,"scrollBehavior")}),[X]);function rn(O){const ae=O?(window.innerWidth-Kt)/window.innerWidth:1,se=O?-16:0;te.current&&window.clearTimeout(te.current),Te(I.current,{transition:`transform ${me.DURATION}s cubic-bezier(${me.EASE.join(",")})`,transform:ve(T)?`scale(${ae}) translate3d(0, ${se}px, 0)`:`scale(${ae}) translate3d(${se}px, 0, 0)`}),!O&&I.current&&(te.current=setTimeout(()=>{const Q=qt(I.current,T);Te(I.current,{transition:"none",transform:ve(T)?`translate3d(0, ${Q}px, 0)`:`translate3d(${Q}px, 0, 0)`})},500))}function ln(O,ae){if(ae<0)return;const se=(window.innerWidth-Kt)/window.innerWidth,Q=se+ae*(1-se),ue=-16+ae*Kt;Te(I.current,{transform:ve(T)?`scale(${Q}) translate3d(0, ${ue}px, 0)`:`scale(${Q}) translate3d(${ue}px, 0, 0)`,transition:"none"})}function on(O,ae){const se=ve(T)?window.innerHeight:window.innerWidth,Q=ae?(se-Kt)/se:1,ue=ae?-16:0;ae&&Te(I.current,{transition:`transform ${me.DURATION}s cubic-bezier(${me.EASE.join(",")})`,transform:ve(T)?`scale(${Q}) translate3d(0, ${ue}px, 0)`:`scale(${Q}) translate3d(${ue}px, 0, 0)`})}return S.useEffect(()=>{$||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[$]),S.createElement(Cs,{defaultOpen:A,onOpenChange:O=>{!y&&!O||(O?de(!0):Me(!0),ee(O))},open:X},S.createElement(qa.Provider,{value:{activeSnapPoint:Ke,snapPoints:r,setActiveSnapPoint:_e,drawerRef:I,overlayRef:N,onOpenChange:a,onPress:xt,onRelease:sn,onDrag:Ee,dismissible:y,shouldAnimate:pe,handleOnly:p,isOpen:X,isDragging:De,shouldFade:k,closeDrawer:Me,onNestedDrag:ln,onNestedOpenChange:rn,onNestedRelease:on,keyboardIsOpen:ce,modal:$,snapPointsOffset:Be,activeSnapPointIndex:Ue,direction:T,shouldScaleBackground:o,setBackgroundColorOnScale:c,noBodyStyles:D,container:E,autoFocus:q}},n))}const ns=S.forwardRef(function({...t},a){const{overlayRef:n,snapPoints:s,onRelease:l,shouldFade:r,isOpen:o,modal:c,shouldAnimate:i}=_t(),v=Xa(a,n),y=s&&s.length>0;if(!c)return null;const p=S.useCallback(u=>l(u),[l]);return S.createElement(ks,{onMouseUp:p,ref:v,"data-vaul-overlay":"","data-vaul-snap-points":o&&y?"true":"false","data-vaul-snap-points-overlay":o&&r?"true":"false","data-vaul-animate":i!=null&&i.current?"true":"false",...t})});ns.displayName="Drawer.Overlay";const as=S.forwardRef(function({onPointerDownOutside:t,style:a,onOpenAutoFocus:n,...s},l){const{drawerRef:r,onPress:o,onRelease:c,onDrag:i,keyboardIsOpen:v,snapPointsOffset:y,activeSnapPointIndex:p,modal:u,isOpen:g,direction:j,snapPoints:w,container:$,handleOnly:f,shouldAnimate:C,autoFocus:D}=_t(),[T,A]=S.useState(!1),R=Xa(l,r),h=S.useRef(null),_=S.useRef(null),B=S.useRef(!1),re=w&&w.length>0;ll();const E=(P,J,X=0)=>{if(B.current)return!0;const ee=Math.abs(P.y),oe=Math.abs(P.x),de=oe>ee,De=["bottom","right"].includes(J)?1:-1;if(J==="left"||J==="right"){if(!(P.x*De<0)&&oe>=0&&oe<=X)return de}else if(!(P.y*De<0)&&ee>=0&&ee<=X)return!de;return B.current=!0,!0};S.useEffect(()=>{re&&window.requestAnimationFrame(()=>{A(!0)})},[]);function q(P){h.current=null,B.current=!1,c(P)}return S.createElement(Ss,{"data-vaul-drawer-direction":j,"data-vaul-drawer":"","data-vaul-delayed-snap-points":T?"true":"false","data-vaul-snap-points":g&&re?"true":"false","data-vaul-custom-container":$?"true":"false","data-vaul-animate":C!=null&&C.current?"true":"false",...s,ref:R,style:y&&y.length>0?{"--snap-point-height":`${y[p??0]}px`,...a}:a,onPointerDown:P=>{f||(s.onPointerDown==null||s.onPointerDown.call(s,P),h.current={x:P.pageX,y:P.pageY},o(P))},onOpenAutoFocus:P=>{n==null||n(P),D||P.preventDefault()},onPointerDownOutside:P=>{if(t==null||t(P),!u||P.defaultPrevented){P.preventDefault();return}v.current&&(v.current=!1)},onFocusOutside:P=>{if(!u){P.preventDefault();return}},onPointerMove:P=>{if(_.current=P,f||(s.onPointerMove==null||s.onPointerMove.call(s,P),!h.current))return;const J=P.pageY-h.current.y,X=P.pageX-h.current.x,ee=P.pointerType==="touch"?10:2;E({x:X,y:J},j,ee)?i(P):(Math.abs(X)>ee||Math.abs(J)>ee)&&(h.current=null)},onPointerUp:P=>{s.onPointerUp==null||s.onPointerUp.call(s,P),h.current=null,B.current=!1,c(P)},onPointerOut:P=>{s.onPointerOut==null||s.onPointerOut.call(s,P),q(_.current)},onContextMenu:P=>{s.onContextMenu==null||s.onContextMenu.call(s,P),_.current&&q(_.current)}})});as.displayName="Drawer.Content";const cl=250,dl=120,ul=S.forwardRef(function({preventCycle:t=!1,children:a,...n},s){const{closeDrawer:l,isDragging:r,snapPoints:o,activeSnapPoint:c,setActiveSnapPoint:i,dismissible:v,handleOnly:y,isOpen:p,onPress:u,onDrag:g}=_t(),j=S.useRef(null),w=S.useRef(!1);function $(){if(w.current){D();return}window.setTimeout(()=>{f()},dl)}function f(){if(r||t||w.current){D();return}if(D(),!o||o.length===0){v||l();return}if(c===o[o.length-1]&&v){l();return}const A=o.findIndex(h=>h===c);if(A===-1)return;const R=o[A+1];i(R)}function C(){j.current=window.setTimeout(()=>{w.current=!0},cl)}function D(){j.current&&window.clearTimeout(j.current),w.current=!1}return S.createElement("div",{onClick:$,onPointerCancel:D,onPointerDown:T=>{y&&u(T),C()},onPointerMove:T=>{y&&g(T)},ref:s,"data-vaul-drawer-visible":p?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},S.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},a))});ul.displayName="Drawer.Handle";function ml(t){const a=_t(),{container:n=a.container,...s}=t;return S.createElement(Ts,{container:n,...s})}const Bt={Root:ol,Content:as,Overlay:ns,Portal:ml,Title:Ns};function fl({...t}){return e.jsx(Bt.Root,{"data-slot":"drawer",...t})}function pl({...t}){return e.jsx(Bt.Portal,{"data-slot":"drawer-portal",...t})}function hl({className:t,...a}){return e.jsx(Bt.Overlay,{"data-slot":"drawer-overlay",className:ke("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...a})}function xl({className:t,children:a,...n}){return e.jsxs(pl,{"data-slot":"drawer-portal",children:[e.jsx(hl,{}),e.jsxs(Bt.Content,{"data-slot":"drawer-content",className:ke("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...n,children:[e.jsx("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),a]})]})}function gl({className:t,...a}){return e.jsx("div",{"data-slot":"drawer-header",className:ke("flex flex-col gap-1.5 p-4",t),...a})}function wl({className:t,...a}){return e.jsx(Bt.Title,{"data-slot":"drawer-title",className:ke("text-foreground font-semibold",t),...a})}const vl=({show:t,history:a,collections:n=[],selectedCollectionId:s="",onSelectCollection:l,onClear:r,onUseAgain:o,onRemoveEntry:c,hideCollectionSelector:i=!1})=>{const[v,y]=S.useState(null),[p,u]=S.useState(!1),[g,j]=S.useState("input"),w=Array.isArray(a)?a.filter(C=>C.collectionId===s):[],$=Array.isArray(n)?n.find(C=>C.id===s):void 0,f=w.find(C=>C.id===v)||null;return S.useEffect(()=>{y(null),u(!1)},[s,a]),L.useEffect(()=>{if(!p)return;const C=D=>{if(D.ctrlKey&&(D.key==="c"||D.key==="C")){D.preventDefault();const T=g==="input"?(f==null?void 0:f.inputText)||"":(f==null?void 0:f.translatedText)||"";T&&(navigator.clipboard.writeText(T),Z.success(`Copied ${g==="input"?"input text":"translated text"}`))}else D.ctrlKey&&(D.key==="v"||D.key==="V")?(D.preventDefault(),f&&o(f)):D.key==="Backspace"&&(D.preventDefault(),f&&(u(!1),c(f.id)))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[p,g,f,o,c]),t?e.jsxs("div",{className:ke("h-full w-full flex flex-col"),children:[e.jsx("div",{className:"my-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(qs,{className:"h-5 w-5 mr-2 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold",children:"Translation History"}),e.jsx("span",{className:"block text-sm mt-1 text-muted-foreground",children:"Previously translated content, organized by collection"})]})]}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsxs(G,{variant:"destructive",size:"sm",onClick:r,disabled:(w==null?void 0:w.length)===0,className:"h-8 text-xs",children:[e.jsx(ut,{className:"h-3.5 w-3.5 mr-1.5"}),"Clear All"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete all translation history in this collection"})})]})})]})}),e.jsx("div",{className:"px-2 pb-0 flex-1 min-h-0",children:e.jsxs(Lr,{direction:"horizontal",className:"h-[500px] w-full",children:[!i&&e.jsxs(e.Fragment,{children:[e.jsx(ia,{defaultSize:25,minSize:20,maxSize:40,className:"border-r border-border/40",children:e.jsx("div",{className:"h-full flex flex-col",children:e.jsx(Dt,{className:"flex-1 px-2 pb-2",children:e.jsx("div",{className:"flex flex-col gap-1",children:(n==null?void 0:n.length)===0?e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-4 text-center",children:"No collections"}):n.map(C=>e.jsxs("div",{className:ke("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer transition-all",C.id===s?"bg-primary/10 text-primary font-semibold":"hover:bg-muted/60 text-gray-700 dark:text-gray-200"),onClick:()=>l(C.id),children:[e.jsx(jn,{className:"h-4 w-4 mr-1 text-primary/70"}),e.jsx("span",{className:"truncate text-sm",children:C.name})]},C.id))})})})}),e.jsx(Hr,{withHandle:!0})]}),e.jsx(ia,{defaultSize:i?100:75,minSize:i?0:40,children:e.jsxs("div",{className:"h-full flex flex-col px-4",children:[e.jsxs("div",{className:" pt-4 pb-2 font-semibold text-base flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4 text-primary/70"}),$?$.name:"No Collection Selected"]}),e.jsxs("div",{className:"flex-1 px-0 pb-4",children:[(w==null?void 0:w.length)===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Es,{className:"h-12 w-12 text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No translation history yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 max-w-md",children:"Translations will be saved here automatically as you use the translator"})]}):e.jsx(Dt,{className:"h-[400px] pr-2",children:e.jsx("div",{className:"space-y-2",children:w.map(C=>e.jsx(Tt,{className:ke("transition-all cursor-pointer border-2",v===C.id&&p?"border-primary bg-primary/5":"border-transparent hover:border-border"),onClick:()=>{y(C.id),j("input"),u(!0)},children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(zn,{className:"h-3.5 w-3.5"}),new Date(C.timestamp).toLocaleString(),e.jsx(Xe,{variant:"outline",className:"ml-2 text-xs px-1.5 py-0 h-5",children:C.model})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-4 mt-1",children:[e.jsx("span",{className:"truncate text-sm font-medium text-primary/90 max-w-[180px] md:max-w-[220px]",title:C.inputText,children:C.inputText}),e.jsx("span",{className:"hidden md:inline text-muted-foreground",children:"→"}),e.jsx("span",{className:"truncate text-sm text-muted-foreground max-w-[180px] md:max-w-[220px]",title:C.translatedText,children:C.translatedText})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ze,{children:[e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsxs(G,{variant:"outline",size:"sm",onClick:D=>{D.stopPropagation(),o(C)},className:"h-8",children:[e.jsx(yn,{className:"h-3.5 w-3.5 mr-1.5"}),"Reuse"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Load this translation again"})})]}),e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{variant:"ghost",size:"icon",onClick:D=>{D.stopPropagation(),c(C.id)},className:"h-8 w-8 text-destructive",children:e.jsx(ut,{className:"h-4 w-4"})})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete this entry"})})]})]})})]})},C.id))})}),e.jsx(fl,{open:p,onOpenChange:u,children:e.jsxs(xl,{className:"w-screen h-screen max-w-none max-h-none flex flex-col",children:[e.jsx(gl,{children:e.jsx(wl,{children:"Translation Details"})}),e.jsx("div",{className:"flex-1 px-4 pb-32 overflow-y-auto",children:e.jsxs(ga,{value:g,onValueChange:C=>j(C),className:"w-full",children:[e.jsxs(wa,{className:"mb-4 w-full",children:[e.jsx(jt,{value:"input",className:"flex-1",children:"Input Text"}),e.jsx(jt,{value:"translated",className:"flex-1",children:"Translated Text"})]}),e.jsxs(yt,{value:"input",children:[e.jsxs(Kn,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(bn,{className:"h-3 w-3 mr-1"}),"Input Text"]}),e.jsx($t,{value:(f==null?void 0:f.inputText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]}),e.jsxs(yt,{value:"translated",children:[e.jsxs(Kn,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(bn,{className:"h-3 w-3 mr-1"}),"Translated Text"]}),e.jsx($t,{value:(f==null?void 0:f.translatedText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 w-full flex flex-col items-center bg-background/95 py-6 z-50 border-t gap-4",children:[e.jsxs(G,{variant:"outline",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:async()=>{const C=g==="input"?(f==null?void 0:f.inputText)||"":(f==null?void 0:f.translatedText)||"";C&&(await navigator.clipboard.writeText(C),Z.success(`Copied ${g==="input"?"input text":"translated text"}`))},children:[e.jsx(zs,{className:"h-5 w-5 mr-2"}),"Copy ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+C"})]}),f&&e.jsxs(G,{variant:"default",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>o(f),children:[e.jsx(yn,{className:"h-5 w-5 mr-2"}),"Reuse ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+V"})]}),f&&e.jsxs(G,{variant:"destructive",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>{u(!1),c(f.id)},children:[e.jsx(ut,{className:"h-5 w-5 mr-2"}),"Delete ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Backspace"})]})]})]})})]})]})})]})})]}):null},bl=({mappingTable:t,updateMappingEntry:a,removeMappingEntry:n,addMappingEntry:s,showImportArea:l,toggleImportArea:r,mappingMarkdown:o,setMappingMarkdown:c,revertImport:i,showRevertButton:v,exportMarkdownTable:y,importMarkdownTable:p,error:u})=>e.jsxs("div",{children:[e.jsx("div",{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl flex items-center font-semibold",children:[e.jsx(er,{className:"h-5 w-5 mr-2 text-primary"}),"Mapping Table"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage term mappings and transcriptions"})]}),e.jsxs(Xe,{variant:"outline",className:"h-6",children:[t==null?void 0:t.length," ",(t==null?void 0:t.length)===1?"Entry":"Entries"]})]})}),e.jsx("div",{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsxs(G,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(En,{className:"h-4 w-4 mr-2"}),"Add New Term"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Add a new term mapping entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{variant:l?"default":"outline",onClick:r,size:"sm",className:"h-9",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Import or export mapping data as markdown"})})]})}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsxs(G,{variant:"outline",onClick:()=>{c(`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
|:----------- |:------------- |:------------------------- |:------------------ |:------ |
| 事情是这样的 | Chuyện là thế này | Phrase | | Opening phrase |
| 最近 | Gần đây | Time | | |
| 师兄 | Sư huynh | Title/Relationship | Male | Elder martial brother |
| 其实 | Thực ra | Adverb | | |`),l||r()},size:"sm",className:"h-9",children:[e.jsx(Na,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Load a sample mapping table"})})]})})]})]}),e.jsx("div",{className:ke("overflow-hidden transition-all duration-300 ease-in-out",l?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs("div",{className:"border border-dashed rounded-md",children:[e.jsx("div",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("h3",{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[v&&e.jsxs(G,{variant:"destructive",size:"sm",onClick:i,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(Rn,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:y,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(va,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:p,className:"text-xs h-8",children:[e.jsx(pa,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs("div",{className:"py-2 px-4",children:[e.jsx($t,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:o,onChange:g=>c(g.target.value)}),u&&u.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(kn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:u})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Term / Name"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Transcription"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Gender"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:(t==null?void 0:t.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Vs,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No terms added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((g,j)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.term,onChange:w=>a(j,"term",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Term or name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.transcription,onChange:w=>a(j,"transcription",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Transcription"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.type,onChange:w=>a(j,"type",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.gender,onChange:w=>a(j,"gender",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Gender"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.notes,onChange:w=>a(j,"notes",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsxs(G,{variant:"destructive",size:"sm",onClick:()=>n(j),className:"w-full h-8",children:[e.jsx(ut,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete this mapping entry"})})]})})})]},j))})]})})]})})]}),jl=({relationshipsTable:t,updateRelationshipEntry:a,removeRelationshipEntry:n,addRelationshipEntry:s,showImportArea:l,toggleImportArea:r,relationshipsMarkdown:o,setRelationshipsMarkdown:c,revertImport:i,showRevertButton:v,exportMarkdownTable:y,importMarkdownTable:p,error:u})=>e.jsxs("div",{children:[e.jsx("div",{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl flex items-center font-semibold",children:[e.jsx(Yn,{className:"h-5 w-5 mr-2 text-primary"}),"Relationships Table"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage character relationships and address terms"})]}),e.jsxs(Xe,{variant:"outline",className:"h-6",children:[t==null?void 0:t.length," ",(t==null?void 0:t.length)===1?"Entry":"Entries"]})]})}),e.jsx("div",{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsxs(G,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(En,{className:"h-4 w-4 mr-2"}),"Add New Relationship"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Add a new character relationship entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{variant:l?"default":"outline",onClick:r,size:"sm",className:"h-9",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Import or export relationship data as markdown"})})]})}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsxs(G,{variant:"outline",onClick:()=>{c(`| Character A | Character B | Relationship | Address Terms (A→B) | Address Terms (B→A) | Notes |
|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
| Vưu Thiên Thu | Triệu Không Minh | Adoptive Younger Sister -> Elder Brother | Huynh trưởng, Sư huynh | Ngươi | Formal/Respectful |
| Lâm Linh Dao | Vưu Thiên Thu | Female Lead 2 -> Female Lead 1 | Dao tỷ tỷ, Muội | Thiên Thu | Relationship strained |`),l||r()},size:"sm",className:"h-9",children:[e.jsx(Na,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Load a sample relationship table"})})]})})]})]}),e.jsx("div",{className:ke("overflow-hidden transition-all duration-300 ease-in-out",l?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs("div",{className:"border border-dashed rounded-md",children:[e.jsx("div",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("h3",{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[v&&e.jsxs(G,{variant:"destructive",size:"sm",onClick:i,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(Rn,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:y,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(va,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:p,className:"text-xs h-8",children:[e.jsx(pa,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs("div",{className:"py-2 px-4",children:[e.jsx($t,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:o,onChange:g=>c(g.target.value)}),u&&u.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(kn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:u})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character A"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character B"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Relationship"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (A→B)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (B→A)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:(t==null?void 0:t.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Yn,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No relationships added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((g,j)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.characterA,onChange:w=>a(j,"characterA",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.characterB,onChange:w=>a(j,"characterB",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.relationship,onChange:w=>a(j,"relationship",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Relationship type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.addressTermsAToB,onChange:w=>a(j,"addressTermsAToB",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How A addresses B"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.addressTermsBToA,onChange:w=>a(j,"addressTermsBToA",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How B addresses A"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(qe,{value:g.notes,onChange:w=>a(j,"notes",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsxs(G,{variant:"destructive",size:"sm",onClick:()=>n(j),className:"w-full h-8",children:[e.jsx(ut,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Delete this relationship entry"})})]})})})]},j))})]})})]})})]}),yl=({isVisible:t,settingsPanelRef:a,collections:n,collectionToEdit:s,setCollectionToEdit:l,editedCollectionName:r,setEditedCollectionName:o,addNewCollection:c,useCollection:i,renameCollection:v,requestDeleteCollection:y,showDeleteConfirmation:p,setShowDeleteConfirmation:u,confirmDeleteCollection:g,selectedCollectionId:j,error:w,setError:$,arcrylicBg:f,translationHistory:C,onClearHistory:D,onUseHistoryEntry:T,onRemoveHistoryEntry:A,updateMappingEntry:R,removeMappingEntry:h,addMappingEntry:_,showMappingImportArea:B,toggleMappingImportArea:re,mappingMarkdown:E,setMappingMarkdown:q,revertMappingImport:P,showMappingRevertButton:J,exportMappingMarkdown:X,importMappingMarkdown:ee,updateRelationshipEntry:oe,removeRelationshipEntry:de,addRelationshipEntry:De,showRelationshipImportArea:ge,toggleRelationshipImportArea:we,relationshipsMarkdown:Ne,setRelationshipsMarkdown:N,revertRelationshipImport:U,showRelationshipRevertButton:V,exportRelationshipMarkdown:F,importRelationshipMarkdown:H,onApproveUpdate:W,onRejectUpdate:te})=>{const K=n.find(k=>k.id===s),[ce,pe]=L.useState(!1),[ne,I]=L.useState(""),$e=L.useRef(null),[Ae,Ce]=L.useState(null),[he,Ke]=L.useState(""),Ue=L.useRef(null),[_e,fe]=L.useState(null);S.useEffect(()=>{ce&&$e.current&&$e.current.focus()},[ce]),S.useEffect(()=>{Ae&&Ue.current&&Ue.current.focus()},[Ae]);const Be=()=>{ne.trim()?(c(ne.trim()),I(""),pe(!1)):(pe(!1),I(""))},ht=()=>{Ae&&he.trim()&&(o(he),l(Ae),v()),Ce(null)};return e.jsx("div",{ref:a,className:ke("overflow-hidden transition-all duration-300 ease-in-out",t?"h-auto sm:h-[800px] opacity-100 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700":"h-0 opacity-0 mb-0 pb-0 border-b-0"),tabIndex:-1,children:e.jsxs(Tt,{className:ke("h-full w-full bg-white/90 dark:bg-zinc-900/90 shadow-xl rounded-2xl p-0 flex flex-col sm:flex-row border border-gray-100 dark:border-zinc-800 transition-all duration-300 overflow-hidden",f&&"backdrop-blur-md"),children:[e.jsxs("aside",{className:"w-full sm:w-1/3 bg-muted/40 dark:bg-muted/20 p-3 sm:p-4 flex flex-col gap-2 border-b sm:border-b-0 sm:border-r border-gray-200 dark:border-gray-800 min-h-[200px] sm:min-h-[320px] max-h-[220px] sm:max-h-none overflow-x-auto overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(jn,{className:"h-5 w-5 text-primary"}),"Collections"]}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{size:"icon",variant:"outline",onClick:()=>{pe(!0),I("")},"aria-label":"Add new collection",children:e.jsx(En,{className:"h-5 w-5"})})}),e.jsx(ye,{children:"Add new collection"})]})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[ce&&e.jsx("div",{className:"flex items-center gap-2 px-2 py-2 mb-1 rounded-lg bg-muted/30 dark:bg-muted/10",children:e.jsx(qe,{ref:$e,value:ne,onChange:k=>I(k.target.value),onBlur:Be,onKeyDown:k=>{k.key==="Enter"?Be():k.key==="Escape"&&(pe(!1),I(""))},placeholder:"Collection name",className:"flex-1 h-8 text-sm"})}),n.map(k=>e.jsxs("div",{className:ke("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer group transition-all",k.id===s?"bg-primary/10 dark:bg-primary/20 text-primary":"hover:bg-muted/60 dark:hover:bg-muted/30 text-gray-700 dark:text-gray-200"),onClick:()=>{l(k.id),o(k.name),$(null)},children:[e.jsx(jn,{className:"h-4 w-4 mr-1 text-primary/70"}),Ae===k.id?e.jsx(qe,{ref:Ue,value:r,onChange:le=>o(le.target.value),onBlur:ht,onKeyDown:le=>{le.key==="Enter"?ht():le.key==="Escape"&&Ce(null)},onClick:le=>le.stopPropagation(),className:"flex-1 h-8 text-sm",autoFocus:!0}):e.jsxs("div",{className:"flex flex-1 items-center min-w-0",children:[e.jsx("span",{className:"flex-1 truncate font-medium text-sm sm:text-base",children:k.name}),e.jsx(Xs,{className:"h-4 w-4 ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-primary transition-opacity cursor-pointer",onClick:le=>{le.stopPropagation(),l(k.id),o(k.name),Ce(k.id),Ke(k.name)}})]}),k.id===j?e.jsx(Yt,{className:"h-4 w-4 text-green-500 ml-1"}):e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{size:"icon",variant:"ghost",onClick:le=>{le.stopPropagation(),i(k.id)},className:"h-6 w-6 opacity-0 group-hover:opacity-100","aria-label":"Use this collection",children:e.jsx(Yt,{className:"h-4 w-4 text-green-500"})})}),e.jsx(ye,{children:"Use this collection"})]})}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{size:"icon",variant:"ghost",onClick:le=>{le.stopPropagation(),y(k.id)},className:"h-6 w-6 opacity-0 group-hover:opacity-100 text-red-500","aria-label":"Delete collection",children:e.jsx(ut,{className:"h-4 w-4"})})}),e.jsx(ye,{children:"Delete collection"})]})}),k.id===s&&Ae!==k.id&&e.jsx("span",{className:"ml-2 text-xs font-semibold",children:"Editing"})]},k.id))]})]}),e.jsx("section",{className:"flex-1 min-w-0 p-3 sm:p-6 flex flex-col h-full",children:e.jsxs(ga,{defaultValue:"history",className:"h-full flex flex-col",children:[e.jsxs(wa,{className:"mb-4",children:[e.jsx(jt,{value:"history",children:"History"}),e.jsx(jt,{value:"mapping",children:"Mapping"}),e.jsx(jt,{value:"relationships",children:"Relationships"}),e.jsx(jt,{value:"updates",children:"Updates"})]}),e.jsx(yt,{value:"history",className:"flex-1 overflow-auto",children:K&&e.jsx(vl,{show:!0,history:C.filter(k=>k.collectionId===K.id),collections:n,selectedCollectionId:K.id,onSelectCollection:l,onClear:D,onUseAgain:T,arcrylicBg:f,onRemoveEntry:A,hideCollectionSelector:!0})}),e.jsx(yt,{value:"mapping",className:"flex-1 overflow-auto",children:K&&e.jsx(bl,{mappingTable:K.mappingTable,updateMappingEntry:R,removeMappingEntry:h,addMappingEntry:_,showImportArea:B,toggleImportArea:re,mappingMarkdown:E,setMappingMarkdown:q,revertImport:P,showRevertButton:J,exportMarkdownTable:X,importMarkdownTable:ee,error:w,arcrylicBg:f})}),e.jsx(yt,{value:"relationships",className:"flex-1 overflow-auto",children:K&&e.jsx(jl,{relationshipsTable:K.relationshipsTable,updateRelationshipEntry:oe,removeRelationshipEntry:de,addRelationshipEntry:De,showImportArea:ge,toggleImportArea:we,relationshipsMarkdown:Ne,setRelationshipsMarkdown:N,revertImport:U,showRevertButton:V,exportMarkdownTable:F,importMarkdownTable:H,error:w,arcrylicBg:f})}),e.jsx(yt,{value:"updates",className:"flex-1 overflow-auto",children:K!=null&&K.tableUpdateHistory&&K.tableUpdateHistory.length>0?e.jsx("div",{className:"space-y-3",children:[...K.tableUpdateHistory].sort((k,le)=>le.timestamp-k.timestamp).map(k=>{var at,et,xt,rt;const le=_e===k.id;return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-muted/30 p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:k.type==="mapping"?"Mapping Table":"Relationships Table"}),e.jsx(Xe,{variant:k.status==="pending"?"outline":k.status==="approved"?"secondary":"destructive",className:ke("ml-2 text-xs px-1.5",k.status==="pending"&&"bg-amber-100 text-amber-700 hover:bg-amber-100 dark:bg-amber-900/30 dark:text-amber-400 dark:hover:bg-amber-900/30",k.status==="approved"&&"bg-emerald-100 text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-900/30 dark:text-emerald-400 dark:hover:bg-emerald-900/30",k.status==="rejected"&&"bg-red-100 hover:bg-red-100 dark:bg-red-900/30 dark:hover:bg-red-900/30"),children:k.status})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(zn,{className:"h-3 w-3 mr-1"}),new Date(k.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:()=>fe(le?null:k.id),children:le?e.jsx(ha,{className:"h-4 w-4"}):e.jsx(xa,{className:"h-4 w-4"})}),k.status==="pending"&&e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{variant:"outline",size:"sm",className:"h-8",onClick:()=>fe(le?null:k.id),children:"Review"})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Review and approve/reject changes"})})]})}),(k.status==="approved"||k.status==="rejected")&&e.jsx(G,{variant:"outline",size:"sm",className:"h-8",onClick:Ee=>{var Me,lt;Ee.stopPropagation(),!(k.status==="rejected"&&!window.confirm("This update was previously rejected. Do you want to reapply it?"))&&(W(k),Z.success(`${k.type==="mapping"?"Mapping":"Relationships"} table update reapplied`,{description:`${((Me=k.updates.added)==null?void 0:Me.length)||0} new entries and ${((lt=k.updates.updated)==null?void 0:lt.length)||0} updated entries`}))},children:"Reapply"})]})]}),le&&e.jsxs("div",{className:"p-3 space-y-3 bg-background",children:[((at=k.updates.added)==null?void 0:at.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(ja,{className:"h-3.5 w-3.5 mr-1 text-emerald-500"}),"Added Entries"]}),e.jsx(Xe,{variant:"outline",className:"text-xs px-1.5 h-5",children:(et=k.updates.added)==null?void 0:et.length})]}),e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:k.updates.added.map((Ee,Me)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:k.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:Ee.term}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",Ee.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:Ee.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",Ee.characterB]})]})},Me))})]}),((xt=k.updates.updated)==null?void 0:xt.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(ba,{className:"h-3.5 w-3.5 mr-1 text-blue-500"}),"Updated Entries"]}),e.jsx(Xe,{variant:"outline",className:"text-xs px-1.5 h-5",children:(rt=k.updates.updated)==null?void 0:rt.length})]}),e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:k.updates.updated.map((Ee,Me)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:k.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:Ee.term}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",Ee.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:Ee.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",Ee.characterB]})]})},Me))})]}),k.status==="pending"&&e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(G,{variant:"outline",onClick:()=>fe(null),children:"Cancel"}),e.jsx(G,{variant:"destructive",onClick:()=>{te(k),fe(null)},children:"Reject"}),e.jsx(G,{variant:"default",onClick:()=>{var Ee,Me;W(k),Z.success(`${k.type==="mapping"?"Mapping":"Relationships"} table update approved`,{description:`${((Ee=k.updates.added)==null?void 0:Ee.length)||0} new entries and ${((Me=k.updates.updated)==null?void 0:Me.length)||0} updated entries`}),fe(null)},children:"Approve"})]})]})]},k.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[e.jsx(Yt,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No updates available"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates will appear here when available"})]})})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 px-2",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 sm:p-8 max-w-xs sm:max-w-md w-full mx-2 shadow-2xl border border-gray-200 dark:border-zinc-800 animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ut,{className:"h-6 w-6 text-destructive"})," Confirm Deletion"]}),e.jsx("p",{className:"mb-2 text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:"Are you sure you want to delete this collection?"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3 flex-col sm:flex-row",children:[e.jsx(G,{variant:"outline",onClick:()=>u(!1),className:"min-w-[90px]",children:"Cancel"}),e.jsx(G,{variant:"destructive",onClick:g,className:"min-w-[90px]",children:"Delete"})]})]})})]})})},Nl=({showTableUpdates:t,isTableUpdatesAnimating:a,pendingTableUpdates:n,expandedEntries:s,toggleEntryExpansion:l,setShowTableUpdates:r,handleUpdateConfirmation:o,showUpdateConfirmation:c})=>t?e.jsxs(Tt,{className:ke("fixed bottom-20 right-6 w-96 max-w-[calc(100vw-3rem)] z-[9998] shadow-lg transition-all duration-300 ease-in-out rounded-xl border-border/40",a?"translate-y-4 opacity-0":"translate-y-0 opacity-100"),children:[e.jsxs(wn,{className:"p-4 pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vn,{className:"text-base font-medium",children:"Table Updates"}),e.jsx(Xe,{variant:"outline",className:"ml-2 text-xs",children:n==null?void 0:n.length})]}),e.jsx(G,{variant:"ghost",size:"icon",onClick:()=>r(!1),className:"h-8 w-8 rounded-full",children:e.jsx(Zt,{className:"h-4 w-4"})})]}),e.jsx(vs,{className:"p-3",children:e.jsx(Dt,{className:"max-h-[60vh] pr-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-3",children:(n==null?void 0:n.length)>0?n.map(i=>{var v,y,p,u;return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-muted/30 p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:i.type==="mapping"?"Mapping Table":"Relationships Table"}),e.jsx(Xe,{variant:i.status==="pending"?"outline":i.status==="approved"?"secondary":"destructive",className:"ml-2 text-xs px-1.5",children:i.status})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(zn,{className:"h-3 w-3 mr-1"}),new Date(i.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:()=>l(i.id),children:s.has(i.id)?e.jsx(ha,{className:"h-4 w-4"}):e.jsx(xa,{className:"h-4 w-4"})}),e.jsx(ze,{children:e.jsxs(be,{children:[e.jsx(je,{asChild:!0,children:e.jsx(G,{variant:"outline",size:"sm",className:"h-8",onClick:()=>c(i),children:"Review"})}),e.jsx(ye,{children:e.jsx("p",{className:"text-xs",children:"Review and approve/reject changes"})})]})})]})]}),s.has(i.id)&&e.jsxs("div",{className:"p-3 space-y-3 bg-background",children:[((v=i.updates.added)==null?void 0:v.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(ja,{className:"h-3.5 w-3.5 mr-1 text-emerald-500"}),"Added Entries"]}),e.jsx(Xe,{variant:"outline",className:"text-xs px-1.5 h-5",children:(y=i.updates.added)==null?void 0:y.length})]}),e.jsx(Dt,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:i.updates.added.map((g,j)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:i.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:g.term}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",g.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:g.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",g.characterB]})]})},j))})})]}),((p=i.updates.updated)==null?void 0:p.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(ba,{className:"h-3.5 w-3.5 mr-1 text-blue-500"}),"Updated Entries"]}),e.jsx(Xe,{variant:"outline",className:"text-xs px-1.5 h-5",children:(u=i.updates.updated)==null?void 0:u.length})]}),e.jsx(Dt,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:i.updates.updated.map((g,j)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:i.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:g.term}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",g.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:g.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["→ ",g.characterB]})]})},j))})})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx(G,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>o(i,!1),children:"Reject"}),e.jsx(G,{variant:"default",size:"sm",className:"h-7 text-xs",onClick:()=>o(i,!0),children:"Approve"})]})]})]},i.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[e.jsx(Ds,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending updates"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates will appear here when available"})]})})})})]}):null,Cl=t=>!t||typeof t!="object"?(console.warn("Invalid mapping entry:",t),null):{term:String(t.term||""),transcription:String(t.transcription||""),type:String(t.type||""),gender:String(t.gender||""),notes:String(t.notes||"")},Sl=t=>!t||typeof t!="object"?(console.warn("Invalid relationship entry:",t),null):{characterA:String(t.characterA||""),characterB:String(t.characterB||""),relationship:String(t.relationship||""),addressTermsAToB:String(t.addressTermsAToB||""),addressTermsBToA:String(t.addressTermsBToA||""),notes:String(t.notes||"")},ma=(t,a,n,s)=>{if(!Array.isArray(a))return console.error("Invalid entries format:",a),{newTable:t,updatedCount:0,added:[],updated:[]};const l=[...t];let r=0;const o=[],c=[];return a.forEach(i=>{const v=n(i);if(v){const y=s(l,v);y>=0?(l[y]=v,c.push(v)):(l.push(v),o.push(v)),r++}}),{newTable:l,updatedCount:r,added:o,updated:c}},Bl=()=>{const t=ws(),[a,n]=L.useState(""),[s,l]=L.useState(""),[r,o]=L.useState(!1),[c,i]=L.useState(null),[v,y]=L.useState(!1),[p,u]=L.useState([]),[,g]=L.useState(!1),[,j]=L.useState(!0),[w,$]=L.useState("gemini-2.0-flash-exp"),f=["gemini-2.0-flash-exp","gemini-2.0-flash-exp-image-generation","gemini-2.0-flash-thinking-exp-01-21","gemini-2.5-pro-exp-03-25"],C={"gemini-2.0-flash-exp":"Recommended","gemini-2.0-flash-exp-image-generation":"Image Generation","gemini-2.0-flash-thinking-exp-01-21":"No support for function calling","gemini-2.5-pro-exp-03-25":"Pro but Stupid (Super slow)"},[D,T]=L.useState(null),[A,R]=L.useState([]),[h,_]=L.useState(""),[B,re]=L.useState(!1),[E,q]=L.useState(""),[P,J]=L.useState(""),[X,ee]=L.useState(""),[oe,de]=L.useState(!1),[De]=L.useState("mapping"),[ge,we]=L.useState([]),[Ne,N]=L.useState([]),[U,V]=L.useState(""),[F,H]=L.useState(""),[W,te]=L.useState(!1),[K,ce]=L.useState([]),[pe,ne]=L.useState([]),[I,$e]=L.useState(!1),[Ae,Ce]=L.useState(!1),[he,Ke]=L.useState([]),[Ue,_e]=L.useState(!1),[fe,Be]=L.useState(null),[ht,k]=L.useState(!1),le=S.useRef(null),at=L.useRef(null),[et,xt]=L.useState(new Set),rt=d=>{xt(x=>{const m=new Set(x);return m.has(d)?m.delete(d):m.add(d),m})},Ee=()=>{n("")},Me=()=>{n(""),l(""),i(null),Z.info("Text cleared")},lt=()=>{navigator.clipboard.writeText(s),y(!0),Z.success("Copied to clipboard"),setTimeout(()=>y(!1),2e3)},an=d=>{i(d)},sn=d=>{Be(d),_e(!!d)},rn=d=>{const x=!B;if(re(x),x){const m=A.find(b=>b.id===d);m&&(q(d),J(m.name))}},ln=()=>{if(!E||!P.trim())return;const d=A.map(x=>x.id===E?{...x,name:P.trim()}:x);R(d),Se("translationCollections",d),Z.success(`Collection renamed to "${P}"`)},on=d=>{console.log("Delete confirmation requested for collection:",d),ee(d),setTimeout(()=>{de(!0),console.log("showDeleteConfirmation set to true")},0)},O=()=>{if(console.log("Confirming deletion of collection:",X),!!X)try{os(X),de(!1),ee("")}catch(d){console.error("Error deleting collection:",d),Z.error("Failed to delete collection")}},ae=d=>{cn(d)},se=async()=>{if(!a.trim()){Z.error("Please enter text to translate"),i("Please enter text to translate");return}dn(),o(!0),i(null),Z.promise(async()=>{try{const d=zt(ge,!0),x=zt(Ne,!1),m=await js(a,d,x,D||"default-key",w,{onMappingTableUpdate:b=>{console.log("Received entries mapping table:",b);try{const{updatedCount:z,added:M,updated:ie}=ma(ge,b,Cl,(Ie,Oe)=>Ie.findIndex(it=>it.term===Oe.term));z>0&&Bn("mapping",M,ie)}catch(z){console.error("Error updating mapping table:",z),Z.error("Failed to update mapping table")}},onRelationshipsTableUpdate:b=>{console.log("Received entries relationships table:",b);try{const{updatedCount:z,added:M,updated:ie}=ma(Ne,b,Sl,(Ie,Oe)=>Ie.findIndex(it=>it.characterA===Oe.characterA&&it.characterB===Oe.characterB));z>0&&Bn("relationships",M,ie)}catch(z){console.error("Error updating relationships table:",z),Z.error("Failed to update relationships table")}}});if(m.hasError)throw i(m.thinking||"Translation failed. Please try again."),new Error(m.thinking||"Translation failed");{const b=m.ocrText||"";return l(b),await ue(b),b}}catch(d){throw console.error("Translation error:",d),i("An error occurred during translation. Please try again."),d}finally{o(!1)}},{loading:"Translating text...",success:"Translation completed successfully",error:d=>`Translation failed: ${d instanceof Error?d.message:"Unknown error"}`})},Q=async()=>{u([]),await Se("translationHistory",[]),Z.success("Translation history cleared")},ue=async d=>{const x=A.find(z=>z.id===h);if(!x)return;const b=[{id:Date.now().toString(),timestamp:Date.now(),inputText:a,translatedText:d,model:w,collectionId:h,collectionName:x.name},...p].slice(0,50);u(b),await Se("translationHistory",b)},Le=d=>{n(d.inputText),l(""),$(d.model),cn(d.collectionId),g(!1),Z.info("Previous translation loaded")},Pe=async d=>{const x=p.filter(m=>m.id!==d);u(x),await Se("translationHistory",x)},Ze=async(d,x,m)=>{if(!E)return;const b=A.map(z=>{if(z.id===E){const M=z.mappingTable.map((ie,Ie)=>Ie===d?{...ie,[x]:m}:ie);return{...z,mappingTable:M}}return z});R(b),await Se("translationCollections",b),h===E&&we(b.find(z=>z.id===E).mappingTable)},We=async d=>{if(!E)return;const x=A.map(m=>{if(m.id===E){const b=m.mappingTable.filter((z,M)=>M!==d);return{...m,mappingTable:b}}return m});R(x),await Se("translationCollections",x),h===E&&we(x.find(m=>m.id===E).mappingTable)},tt=async()=>{if(!E)return;const d={term:"",transcription:"",type:"",gender:"",notes:""},x=A.map(m=>m.id===E?{...m,mappingTable:[...m.mappingTable,d]}:m);R(x),await Se("translationCollections",x),h===E&&we(x.find(m=>m.id===E).mappingTable)},Qe=async(d,x,m)=>{if(!E)return;const b=A.map(z=>{if(z.id===E){const M=z.relationshipsTable.map((ie,Ie)=>Ie===d?{...ie,[x]:m}:ie);return{...z,relationshipsTable:M}}return z});R(b),await Se("translationCollections",b),h===E&&N(b.find(z=>z.id===E).relationshipsTable)},Ye=async d=>{if(!E)return;const x=A.map(m=>{if(m.id===E){const b=m.relationshipsTable.filter((z,M)=>M!==d);return{...m,relationshipsTable:b}}return m});R(x),await Se("translationCollections",x),h===E&&N(x.find(m=>m.id===E).relationshipsTable)},gt=async()=>{if(!E)return;const d={characterA:"",characterB:"",relationship:"",addressTermsAToB:"",addressTermsBToA:"",notes:""},x=A.map(m=>m.id===E?{...m,relationshipsTable:[...m.relationshipsTable,d]}:m);R(x),await Se("translationCollections",x),h===E&&N(x.find(m=>m.id===E).relationshipsTable)},Ut=async d=>{try{if(d.type==="mapping"){const x=[...ge];d.updates.added.forEach(m=>x.push(m)),d.updates.updated.forEach(m=>{const b=x.findIndex(z=>z.term===m.term);b>=0&&(x[b]=m)}),we(x),await Rt(!0,x)}else{const x=[...Ne];d.updates.added.forEach(m=>x.push(m)),d.updates.updated.forEach(m=>{const b=x.findIndex(z=>z.characterA===m.characterA&&z.characterB===m.characterB);b>=0&&(x[b]=m)}),N(x),await Rt(!1,x)}if(d.status==="rejected"){const x=A.map(m=>{var b;if(m.id===h){const z=((b=m.tableUpdateHistory)==null?void 0:b.map(M=>M.id===d.id?{...M,status:"approved"}:M))||[];return{...m,tableUpdateHistory:z}}return m});R(x),await Se("translationCollections",x)}}catch(x){console.error("Error reapplying update:",x),Z.error("Failed to reapply update")}},ss=()=>{if(console.log("Scrolling to top attempt"),le.current){le.current.scrollIntoView({behavior:"smooth"}),console.log("Used scrollIntoView");return}try{window.scroll({top:0,left:0,behavior:"smooth"}),console.log("Used window.scroll")}catch{window.scrollTo(0,0),console.log("Used fallback scrollTo")}},rs=async d=>{$(d),await Se("translateModel",d)};L.useEffect(()=>{(async()=>{var x;try{const m=await Ft("apiKey"),b=await Ft("translateModel"),z=await Ft("translationCollections"),M=await Ft("translationHistory");if(m&&T(m),b&&$(b),M&&u(M),z&&(z==null?void 0:z.length)>0){R(z),_(z[0].id),we(z[0].mappingTable),N(z[0].relationshipsTable);const ie=((x=z[0].tableUpdateHistory)==null?void 0:x.filter(Ie=>Ie.status==="pending"))||[];Ke(ie),ie.length>0&&Ce(!0)}else{const ie={id:Date.now().toString(),name:"Default Collection",mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]};R([ie]),_(ie.id)}}catch(m){console.error("Error loading settings:",m)}})()},[]),L.useEffect(()=>{h&&!E&&q(h)},[h,E]),L.useEffect(()=>{const d=()=>{window.scrollY>200?j(!0):j(!1)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),L.useEffect(()=>{B&&at.current&&setTimeout(()=>{var d;(d=at.current)==null||d.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[B]),L.useEffect(()=>{if(E){const d=A.find(x=>x.id===E);d&&J(d.name)}},[E,A]);const ls=(d,x)=>{try{const m=d.trim().split(`
`);if((m==null?void 0:m.length)<3)return[];const b=m.slice(2);return x?b.map(z=>{const M=z.split("|").filter((ie,Ie,Oe)=>Ie!==0&&Ie!==(Oe==null?void 0:Oe.length)-1||ie.trim()!=="").map(ie=>ie.trim());if((M==null?void 0:M.length)<5)for(console.warn("Row has fewer than expected columns:",z);(M==null?void 0:M.length)<5;)M.push("");return{term:M[0]||"",transcription:M[1]||"",type:M[2]||"",gender:M[3]||"",notes:M[4]||""}}):b.map(z=>{const M=z.split("|").filter((ie,Ie,Oe)=>Ie!==0&&Ie!==(Oe==null?void 0:Oe.length)-1||ie.trim()!=="").map(ie=>ie.trim());if((M==null?void 0:M.length)<6)for(console.warn("Row has fewer than expected columns:",z);(M==null?void 0:M.length)<6;)M.push("");return{characterA:M[0]||"",characterB:M[1]||"",relationship:M[2]||"",addressTermsAToB:M[3]||"",addressTermsBToA:M[4]||"",notes:M[5]||""}})}catch(m){return console.error("Error parsing markdown table:",m),[]}},zt=(d,x)=>{if((d==null?void 0:d.length)===0)return"";let m="";return x?(m=`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
`,m+=`|:----------- |:------------- |:------------------------- |:------------------ |:------ |
`,d.forEach(b=>{m+=`| ${b.term} | ${b.transcription} | ${b.type} | ${b.gender} | ${b.notes} |
`})):(m=`| Character A | Character B | Relationship | Address Terms (A→B) | Address Terms (B→A) | Notes |
`,m+=`|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
`,d.forEach(b=>{m+=`| ${b.characterA} | ${b.characterB} | ${b.relationship} | ${b.addressTermsAToB} | ${b.addressTermsBToA} | ${b.notes} |
`})),m},$n=(d,x)=>{try{if(!d.trim()){Z.error("Please enter a markdown table to import"),i("Please enter a markdown table to import");return}if(!d.includes("|")){Z.error("Invalid table format. Table must contain pipe characters (|)"),i("Import failed: Invalid table format. Table must contain pipe characters (|)");return}const m=d.trim().split(`
`);if((m==null?void 0:m.length)<3){Z.error("Table must contain at least 3 lines (header, separator, and data row)"),i("Import failed: Table must contain at least 3 lines (header, separator, and data row)");return}const b=m[1];if(!b.includes("|")||!b.includes("-")){Z.error("Second line must be a separator with pipes (|) and dashes (-)"),i("Import failed: Second line must be a separator with pipes (|) and dashes (-)");return}const z=ls(d,x);if((z==null?void 0:z.length)===0){Z.error("No valid data rows found in the table"),i("Import failed: No valid data rows found in the table");return}i(null),x?(ce(ge),we(z)):(ne(Ne),N(z)),Rt(x,z),$e(!0),setTimeout(()=>{$e(!1)},6e4),Z.success(`${x?"Mapping":"Relationships"} table imported successfully`)}catch(m){console.error("Error importing markdown table:",m),Z.error(`Import failed: ${m instanceof Error?m.message:"Unknown error"}`),i(`Import failed: ${m instanceof Error?m.message:"Unknown error"}`)}},Ln=d=>{d?(we(K),Rt(!0,K),ce([])):(N(pe),Rt(!1,pe),ne([])),$e(!1),Z.success(`${d?"Mapping":"Relationships"} table reverted to previous state`)},Rt=async(d,x)=>{if(!h)return;const m=A.map(b=>b.id===h?{...b,mappingTable:d?x:b.mappingTable,relationshipsTable:d?b.relationshipsTable:x}:b);R(m),await Se("translationCollections",m)},Hn=d=>{const x=zt(d?ge:Ne,d);d?V(x):H(x),te(!0)},cn=d=>{var m;if(d===h)return;dn();const x=A.find(b=>b.id===d);if(x){_(d),we(x.mappingTable),N(x.relationshipsTable);const b=((m=x.tableUpdateHistory)==null?void 0:m.filter(z=>z.status==="pending"))||[];Ke(b),Ce(b.length>0)}},dn=()=>{if(!h)return;const d=A.map(x=>x.id===h?{...x,mappingTable:ge,relationshipsTable:Ne}:x);R(d),Se("translationCollections",d)},is=d=>{if(!d.trim()){Z.error("Please enter a name for the new collection"),i("Please enter a name for the new collection");return}dn();const x={id:Date.now().toString(),name:d,mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]},m=[...A,x];R(m),_(x.id),we([]),N([]),Se("translationCollections",m),Z.success(`Collection "${d}" created`)},os=d=>{if((A==null?void 0:A.length)<=1){Z.error("You must have at least one collection"),i("You must have at least one collection");return}const x=A.find(b=>b.id===d);if(!x)return;const m=A.filter(b=>b.id!==d);if(d===h&&(m==null?void 0:m.length)>0){const b=m[0];_(b.id),we(b.mappingTable),N(b.relationshipsTable)}R(m),Se("translationCollections",m).then(()=>{Z.success(`Collection "${x.name}" deleted`)}).catch(b=>{console.error("Failed to save collections after deletion:",b),Z.error("Failed to delete collection")}),d===E&&(q(""),J(""))},_n=()=>{te(!W),W||(De==="mapping"?V(zt(ge,!0)):H(zt(Ne,!1)))},Bn=(d,x,m)=>{console.log("handleTableUpdate called with type:",d,"added:",x,"updated:",m);const b={id:crypto.randomUUID(),timestamp:Date.now(),type:d,updates:{added:x,updated:m},status:"pending"};Ke(M=>[...M,b]),Ce(!0),k(!0),setTimeout(()=>k(!1),300);const z=A.map(M=>M.id===h?(M.tableUpdateHistory.push(b),{...M,tableUpdateHistory:M.tableUpdateHistory}):M);R(z),Se("translationCollections",z).catch(M=>{console.error("Error saving pending update to database:",M),Z.error("Failed to save pending update to database")}),Z.info("New table update available for review",{description:`${x==null?void 0:x.length} new entries and ${m==null?void 0:m.length} updated entries`,action:{label:"Review",onClick:()=>Ce(!0)}})},un=async(d,x)=>{if(!h){console.error("handleUpdateConfirmation error: No collection selected."),Z.error("Error: No collection selected to apply updates.");return}const m=A.findIndex(xe=>xe.id===h);if(m===-1){console.error(`handleUpdateConfirmation error: Collection with ID ${h} not found.`),Z.error("Error: Selected collection could not be found."),_e(!1),Be(null);return}const b=A[m];let z=b.mappingTable||[],M=b.relationshipsTable||[];if(x)if(d.type==="mapping"){let xe=[...z];d.updates.added.forEach(He=>xe.push(He)),d.updates.updated.forEach(He=>{const ot=xe.findIndex(Ot=>Ot.term===He.term);ot>=0?xe[ot]=He:console.warn(`Mapping term "${He.term}" marked for update not found in current table.`)}),z=xe}else{let xe=[...M];d.updates.added.forEach(He=>xe.push(He)),d.updates.updated.forEach(He=>{const ot=xe.findIndex(Ot=>Ot.characterA===He.characterA&&Ot.characterB===He.characterB);ot>=0?xe[ot]=He:console.warn(`Relationship between "${He.characterA}" and "${He.characterB}" marked for update not found.`)}),M=xe}const ie={...d,status:x?"approved":"rejected"},Ie=(b.tableUpdateHistory||[]).map(xe=>xe.id===d.id?ie:xe),Oe={...b,tableUpdateHistory:Ie,mappingTable:x&&d.type==="mapping"?z:b.mappingTable,relationshipsTable:x&&d.type==="relationships"?M:b.relationshipsTable},it=A.map(xe=>xe.id===h?Oe:xe);try{R(it),await Se("translationCollections",it),Ke(xe=>{const He=xe.filter(ot=>ot.id!==d.id);return He.length===0&&Ce(!1),He}),_e(!1),Be(null),Z.success(`Table update ${x?"approved":"rejected"} successfully.`)}catch(xe){console.error("Error saving update confirmation:",xe),Z.error(`Failed to ${x?"approve":"reject"} update. Database save failed. Please try again.`)}};return L.useEffect(()=>{if((A==null?void 0:A.length)===0){_(""),we([]),N([]);return}A.find(x=>x.id===h)||(_(A[0].id),we(A[0].mappingTable),N(A[0].relationshipsTable))},[A,h]),e.jsxs("div",{className:"container mx-auto p-4 flex flex-col gap-6 pb-10 relative",children:[e.jsx("div",{ref:le,className:"absolute top-0"}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Text Translator"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(G,{variant:"outline",onClick:Me,"aria-label":"Clear all text",children:[e.jsx(Us,{className:"h-5 w-5 mr-2"}),"Clear"]})})]}),e.jsx(lr,{inputText:a,setInputText:n,translatedText:s,isTranslating:r,error:c,isCopied:v,onTranslate:se,onCopy:lt,selectedModel:w,onModelChange:rs,models:f,selectedCollectionId:h,collections:A,onCollectionChange:cn,isCollectionManagementVisible:B,onToggleCollectionManagement:rn,arcrylicBg:t,modelDescriptions:C,clearInputText:Ee,setErrorMessage:an}),e.jsx(yl,{isVisible:B,settingsPanelRef:at,collections:A,collectionToEdit:E,setCollectionToEdit:q,editedCollectionName:P,setEditedCollectionName:J,addNewCollection:is,useCollection:ae,renameCollection:ln,requestDeleteCollection:on,showDeleteConfirmation:oe,setShowDeleteConfirmation:de,confirmDeleteCollection:O,selectedCollectionId:h,error:c,setError:i,arcrylicBg:t,translationHistory:p,onClearHistory:Q,onUseHistoryEntry:Le,onRemoveHistoryEntry:Pe,updateMappingEntry:Ze,removeMappingEntry:We,addMappingEntry:tt,showMappingImportArea:W,toggleMappingImportArea:_n,mappingMarkdown:U,setMappingMarkdown:V,revertMappingImport:()=>Ln(!0),showMappingRevertButton:I,exportMappingMarkdown:()=>Hn(!0),importMappingMarkdown:()=>$n(U,!0),updateRelationshipEntry:Qe,removeRelationshipEntry:Ye,addRelationshipEntry:gt,showRelationshipImportArea:W,toggleRelationshipImportArea:_n,relationshipsMarkdown:F,setRelationshipsMarkdown:H,revertRelationshipImport:()=>Ln(!1),showRelationshipRevertButton:I,exportRelationshipMarkdown:()=>Hn(!1),importRelationshipMarkdown:()=>$n(F,!1),onApproveUpdate:Ut,onRejectUpdate:d=>{const x=A.map(m=>{var b;if(m.id===h){const z=((b=m.tableUpdateHistory)==null?void 0:b.map(M=>M.id===d.id?{...M,status:"rejected"}:M))||[];return{...m,tableUpdateHistory:z}}return m});R(x),Se("translationCollections",x),Ke(m=>m.filter(b=>b.id!==d.id)),Z.success("Table update rejected successfully")}}),e.jsx(G,{variant:"default",size:"lg",className:"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-[9999] w-12 h-12 p-0",onClick:()=>{console.log("Button clicked"),ss()},"aria-label":"Scroll to top",children:e.jsx(Rn,{className:"h-6 w-6"})}),Ae&&e.jsx(Nl,{showTableUpdates:Ae,isTableUpdatesAnimating:ht,arcrylicBg:t,pendingTableUpdates:he,expandedEntries:et,toggleEntryExpansion:rt,setShowTableUpdates:Ce,handleUpdateConfirmation:un,showUpdateConfirmation:sn}),Ue&&fe&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:e.jsx(Tt,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Confirm Table Update"}),e.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{_e(!1),Be(null)},className:"h-8 w-8 p-0",children:e.jsx(Zt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Added Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:fe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:fe.updates.added.map((d,x)=>e.jsx("tr",{className:"border-t",children:fe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:d.term}),e.jsx("td",{className:"p-2",children:d.transcription}),e.jsx("td",{className:"p-2",children:d.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:d.characterA}),e.jsx("td",{className:"p-2",children:d.characterB}),e.jsx("td",{className:"p-2",children:d.relationship})]})},x))})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Updated Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:fe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:fe.updates.updated.map((d,x)=>e.jsx("tr",{className:"border-t",children:fe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:d.term}),e.jsx("td",{className:"p-2",children:d.transcription}),e.jsx("td",{className:"p-2",children:d.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:d.characterA}),e.jsx("td",{className:"p-2",children:d.characterB}),e.jsx("td",{className:"p-2",children:d.relationship})]})},x))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(G,{variant:"outline",onClick:()=>{fe&&un(fe,!1)},children:"Reject"}),e.jsx(G,{variant:"default",onClick:()=>{fe&&un(fe,!0)},children:"Approve"})]})]})]})})})]})};export{Bl as default};
