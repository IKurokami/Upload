import{c as me,af as ss,r as M,ag as rs,ah as ls,ai as is,aj as os,ak as cs,al as En,am as aa,j as e,a as ce,R as C,B as W,t as se,A as Rn,an as ds,a0 as us,L as ms,ao as sa,ap as fs,a1 as Ve,a2 as Bt}from"./index-CZPfekFY.js";import{C as He,b as it,c as ot,e as ra,a as zt}from"./card-CWw46NXu.js";import{T as la,a as ia,b as Gt,c as qt}from"./index-C5dPAa-A.js";import{G as hs,C as oa,S as An,b as Pn,c as Dn,d as Mn,e as In,a as wn,h as ps,f as xs,i as gs}from"./select-x3ysrd5l.js";import{a as $n,T as vt}from"./index-MAHk6Som.js";import{S as kt,X as Jt}from"./scroll-area-BPletNme.js";import{B as Qe}from"./badge-Ly5NClYn.js";import{T as je,a as xe,b as ge,c as we}from"./tooltip-DzW3cToV.js";import{T as ws,R as vs,C as bs,P as ys,O as js,A as Ns,D as Cs,a as Ss}from"./dialog-AJgLBeFe.js";import{T as st}from"./trash-2-B8OUn3Cp.js";import{C as Ts}from"./copy-DtVGApnL.js";import{I as ke}from"./input-DZQc0_nn.js";import{F as ca}from"./file-down-A7DrjIZP.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],zs=me("Archive",ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],vn=me("ArrowUp",Es);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],As=me("ChevronsDown",Rs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],Ds=me("ChevronsUp",Ps);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Is=me("CircleCheckBig",Ms);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],mn=me("CircleCheck",$s);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_s=me("CircleX",Ls);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Kt=me("Clipboard",Hs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Os=me("Database",Bs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],Fs=me("Eraser",Us);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],da=me("FilePlus",Vs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Gs=me("FileText",Ws);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Wt=me("Folder",qs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ua=me("History",Ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ma=me("Lightbulb",Ys);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ln=me("Pencil",Xs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bn=me("Plus",Js);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],fn=me("RotateCcw",Zs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],er=me("Text",Qs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],_n=me("Users",tr);function hn(t){const n=ss(()=>ls(t)),{isStatic:a}=M.useContext(rs);if(a){const[,s]=M.useState(t);M.useEffect(()=>n.on("change",s),[])}return n}function nr(t,n){const a=hn(n()),s=()=>a.set(n());return s(),is(()=>{const l=()=>os.preRender(s,!1,!0),r=t.map(i=>i.on("change",l));return()=>{r.forEach(i=>i()),cs(s)}}),a}function ar(t,...n){const a=t.length;function s(){let l="";for(let r=0;r<a;r++){l+=t[r];const i=n[r];i&&(l+=En(i)?i.get():i)}return l}return nr(n.filter(En),s)}const{createElement:bt,createContext:sr,forwardRef:fa,useCallback:Se,useContext:ha,useEffect:rt,useImperativeHandle:pa,useLayoutEffect:rr,useMemo:lr,useRef:Te,useState:gt}=aa,Hn=aa[`useId${Math.random()}`.slice(0,5)],ir=rr,Zt=sr(null);Zt.displayName="PanelGroupContext";const lt=ir,or=typeof Hn=="function"?Hn:()=>null;let cr=0;function yn(t=null){const n=or(),a=Te(t||n||null);return a.current===null&&(a.current=""+cr++),t??a.current}function xa({children:t,className:n="",collapsedSize:a,collapsible:s,defaultSize:l,forwardedRef:r,id:i,maxSize:o,minSize:c,onCollapse:h,onExpand:x,onResize:f,order:d,style:S,tagName:v="div",...j}){const p=ha(Zt);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:m,expandPanel:A,getPanelSize:_,getPanelStyle:k,groupId:ee,isPanelCollapsed:N,reevaluatePanelConstraints:g,registerPanel:T,resizePanel:D,unregisterPanel:Z}=p,Y=yn(i),B=Te({callbacks:{onCollapse:h,onExpand:x,onResize:f},constraints:{collapsedSize:a,collapsible:s,defaultSize:l,maxSize:o,minSize:c},id:Y,idIsFromProps:i!==void 0,order:d});Te({didLogMissingDefaultSizeWarning:!1}),lt(()=>{const{callbacks:q,constraints:R}=B.current,U={...R};B.current.id=Y,B.current.idIsFromProps=i!==void 0,B.current.order=d,q.onCollapse=h,q.onExpand=x,q.onResize=f,R.collapsedSize=a,R.collapsible=s,R.defaultSize=l,R.maxSize=o,R.minSize=c,(U.collapsedSize!==R.collapsedSize||U.collapsible!==R.collapsible||U.maxSize!==R.maxSize||U.minSize!==R.minSize)&&g(B.current,U)}),lt(()=>{const q=B.current;return T(q),()=>{Z(q)}},[d,Y,T,Z]),pa(r,()=>({collapse:()=>{m(B.current)},expand:q=>{A(B.current,q)},getId(){return Y},getSize(){return _(B.current)},isCollapsed(){return N(B.current)},isExpanded(){return!N(B.current)},resize:q=>{D(B.current,q)}}),[m,A,_,N,Y,D]);const E=k(B.current,l);return bt(v,{...j,children:t,className:n,id:i,style:{...E,...S},"data-panel":"","data-panel-collapsible":s||void 0,"data-panel-group-id":ee,"data-panel-id":Y,"data-panel-size":parseFloat(""+E.flexGrow).toFixed(1)})}const ga=fa((t,n)=>bt(xa,{...t,forwardedRef:n}));xa.displayName="Panel";ga.displayName="forwardRef(Panel)";let pn=null,at=null;function dr(t,n){if(n){const a=(n&ja)!==0,s=(n&Na)!==0,l=(n&Ca)!==0,r=(n&Sa)!==0;if(a)return l?"se-resize":r?"ne-resize":"e-resize";if(s)return l?"sw-resize":r?"nw-resize":"w-resize";if(l)return"s-resize";if(r)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function ur(){at!==null&&(document.head.removeChild(at),pn=null,at=null)}function rn(t,n){const a=dr(t,n);pn!==a&&(pn=a,at===null&&(at=document.createElement("style"),document.head.appendChild(at)),at.innerHTML=`*{cursor: ${a}!important;}`)}function wa(t){return t.type==="keydown"}function va(t){return t.type.startsWith("pointer")}function ba(t){return t.type.startsWith("mouse")}function Qt(t){if(va(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(ba(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function mr(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function fr(t,n,a){return t.x<n.x+n.width&&t.x+t.width>n.x&&t.y<n.y+n.height&&t.y+t.height>n.y}function hr(t,n){if(t===n)throw new Error("Cannot compare node with itself");const a={a:Un(t),b:Un(n)};let s;for(;a.a.at(-1)===a.b.at(-1);)t=a.a.pop(),n=a.b.pop(),s=t;G(s,"Stacking order can only be calculated for elements with a common ancestor");const l={a:On(Bn(a.a)),b:On(Bn(a.b))};if(l.a===l.b){const r=s.childNodes,i={a:a.a.at(-1),b:a.b.at(-1)};let o=r.length;for(;o--;){const c=r[o];if(c===i.a)return 1;if(c===i.b)return-1}}return Math.sign(l.a-l.b)}const pr=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function xr(t){var n;const a=getComputedStyle((n=ya(t))!==null&&n!==void 0?n:t).display;return a==="flex"||a==="inline-flex"}function gr(t){const n=getComputedStyle(t);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||xr(t))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||pr.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function Bn(t){let n=t.length;for(;n--;){const a=t[n];if(G(a,"Missing node"),gr(a))return a}return null}function On(t){return t&&Number(getComputedStyle(t).zIndex)||0}function Un(t){const n=[];for(;t;)n.push(t),t=ya(t);return n}function ya(t){const{parentNode:n}=t;return n&&n instanceof ShadowRoot?n.host:n}const ja=1,Na=2,Ca=4,Sa=8,wr=mr()==="coarse";let _e=[],wt=!1,Ze=new Map,en=new Map;const Et=new Set;function vr(t,n,a,s,l){var r;const{ownerDocument:i}=n,o={direction:a,element:n,hitAreaMargins:s,setResizeHandlerState:l},c=(r=Ze.get(i))!==null&&r!==void 0?r:0;return Ze.set(i,c+1),Et.add(o),Yt(),function(){var x;en.delete(t),Et.delete(o);const f=(x=Ze.get(i))!==null&&x!==void 0?x:1;if(Ze.set(i,f-1),Yt(),f===1&&Ze.delete(i),_e.includes(o)){const d=_e.indexOf(o);d>=0&&_e.splice(d,1),Nn(),l("up",!0,null)}}}function Fn(t){const{target:n}=t,{x:a,y:s}=Qt(t);wt=!0,jn({target:n,x:a,y:s}),Yt(),_e.length>0&&(Xt("down",t),t.preventDefault(),t.stopPropagation())}function jt(t){const{x:n,y:a}=Qt(t);if(wt&&t.buttons===0&&(wt=!1,Xt("up",t)),!wt){const{target:s}=t;jn({target:s,x:n,y:a})}Xt("move",t),Nn(),_e.length>0&&t.preventDefault()}function ft(t){const{target:n}=t,{x:a,y:s}=Qt(t);en.clear(),wt=!1,_e.length>0&&t.preventDefault(),Xt("up",t),jn({target:n,x:a,y:s}),Nn(),Yt()}function jn({target:t,x:n,y:a}){_e.splice(0);let s=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(s=t),Et.forEach(l=>{const{element:r,hitAreaMargins:i}=l,o=r.getBoundingClientRect(),{bottom:c,left:h,right:x,top:f}=o,d=wr?i.coarse:i.fine;if(n>=h-d&&n<=x+d&&a>=f-d&&a<=c+d){if(s!==null&&document.contains(s)&&r!==s&&!r.contains(s)&&!s.contains(r)&&hr(s,r)>0){let v=s,j=!1;for(;v&&!v.contains(r);){if(fr(v.getBoundingClientRect(),o)){j=!0;break}v=v.parentElement}if(j)return}_e.push(l)}})}function ln(t,n){en.set(t,n)}function Nn(){let t=!1,n=!1;_e.forEach(s=>{const{direction:l}=s;l==="horizontal"?t=!0:n=!0});let a=0;en.forEach(s=>{a|=s}),t&&n?rn("intersection",a):t?rn("horizontal",a):n?rn("vertical",a):ur()}function Yt(){Ze.forEach((t,n)=>{const{body:a}=n;a.removeEventListener("contextmenu",ft),a.removeEventListener("pointerdown",Fn),a.removeEventListener("pointerleave",jt),a.removeEventListener("pointermove",jt)}),window.removeEventListener("pointerup",ft),window.removeEventListener("pointercancel",ft),Et.size>0&&(wt?(_e.length>0&&Ze.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("contextmenu",ft),a.addEventListener("pointerleave",jt),a.addEventListener("pointermove",jt))}),window.addEventListener("pointerup",ft),window.addEventListener("pointercancel",ft)):Ze.forEach((t,n)=>{const{body:a}=n;t>0&&(a.addEventListener("pointerdown",Fn,{capture:!0}),a.addEventListener("pointermove",jt))}))}function Xt(t,n){Et.forEach(a=>{const{setResizeHandlerState:s}=a,l=_e.includes(a);s(t,l,n)})}function br(){const[t,n]=gt(0);return Se(()=>n(a=>a+1),[])}function G(t,n){if(!t)throw console.error(n),Error(n)}const Cn=10;function ct(t,n,a=Cn){return t.toFixed(a)===n.toFixed(a)?0:t>n?1:-1}function Xe(t,n,a=Cn){return ct(t,n,a)===0}function Pe(t,n,a){return ct(t,n,a)===0}function yr(t,n,a){if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++){const l=t[s],r=n[s];if(!Pe(l,r,a))return!1}return!0}function xt({panelConstraints:t,panelIndex:n,size:a}){const s=t[n];G(s!=null,`Panel constraints not found for index ${n}`);let{collapsedSize:l=0,collapsible:r,maxSize:i=100,minSize:o=0}=s;if(ct(a,o)<0)if(r){const c=(l+o)/2;ct(a,c)<0?a=l:a=o}else a=o;return a=Math.min(i,a),a=parseFloat(a.toFixed(Cn)),a}function St({delta:t,initialLayout:n,panelConstraints:a,pivotIndices:s,prevLayout:l,trigger:r}){if(Pe(t,0))return n;const i=[...n],[o,c]=s;G(o!=null,"Invalid first pivot index"),G(c!=null,"Invalid second pivot index");let h=0;if(r==="keyboard"){{const f=t<0?c:o,d=a[f];G(d,`Panel constraints not found for index ${f}`);const{collapsedSize:S=0,collapsible:v,minSize:j=0}=d;if(v){const p=n[f];if(G(p!=null,`Previous layout not found for panel index ${f}`),Pe(p,S)){const m=j-p;ct(m,Math.abs(t))>0&&(t=t<0?0-m:m)}}}{const f=t<0?o:c,d=a[f];G(d,`No panel constraints found for index ${f}`);const{collapsedSize:S=0,collapsible:v,minSize:j=0}=d;if(v){const p=n[f];if(G(p!=null,`Previous layout not found for panel index ${f}`),Pe(p,j)){const m=p-S;ct(m,Math.abs(t))>0&&(t=t<0?0-m:m)}}}}{const f=t<0?1:-1;let d=t<0?c:o,S=0;for(;;){const j=n[d];G(j!=null,`Previous layout not found for panel index ${d}`);const m=xt({panelConstraints:a,panelIndex:d,size:100})-j;if(S+=m,d+=f,d<0||d>=a.length)break}const v=Math.min(Math.abs(t),Math.abs(S));t=t<0?0-v:v}{let d=t<0?o:c;for(;d>=0&&d<a.length;){const S=Math.abs(t)-Math.abs(h),v=n[d];G(v!=null,`Previous layout not found for panel index ${d}`);const j=v-S,p=xt({panelConstraints:a,panelIndex:d,size:j});if(!Pe(v,p)&&(h+=v-p,i[d]=p,h.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(yr(l,i))return l;{const f=t<0?c:o,d=n[f];G(d!=null,`Previous layout not found for panel index ${f}`);const S=d+h,v=xt({panelConstraints:a,panelIndex:f,size:S});if(i[f]=v,!Pe(v,S)){let j=S-v,m=t<0?c:o;for(;m>=0&&m<a.length;){const A=i[m];G(A!=null,`Previous layout not found for panel index ${m}`);const _=A+j,k=xt({panelConstraints:a,panelIndex:m,size:_});if(Pe(A,k)||(j-=k-A,i[m]=k),Pe(j,0))break;t>0?m--:m++}}}const x=i.reduce((f,d)=>d+f,0);return Pe(x,100)?i:l}function jr({layout:t,panelsArray:n,pivotIndices:a}){let s=0,l=100,r=0,i=0;const o=a[0];G(o!=null,"No pivot index found"),n.forEach((f,d)=>{const{constraints:S}=f,{maxSize:v=100,minSize:j=0}=S;d===o?(s=j,l=v):(r+=j,i+=v)});const c=Math.min(l,100-r),h=Math.max(s,100-i),x=t[o];return{valueMax:c,valueMin:h,valueNow:x}}function Rt(t,n=document){return Array.from(n.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function Ta(t,n,a=document){const l=Rt(t,a).findIndex(r=>r.getAttribute("data-panel-resize-handle-id")===n);return l??null}function ka(t,n,a){const s=Ta(t,n,a);return s!=null?[s,s+1]:[-1,-1]}function za(t,n=document){var a;if(n instanceof HTMLElement&&(n==null||(a=n.dataset)===null||a===void 0?void 0:a.panelGroupId)==t)return n;const s=n.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return s||null}function tn(t,n=document){const a=n.querySelector(`[data-panel-resize-handle-id="${t}"]`);return a||null}function Nr(t,n,a,s=document){var l,r,i,o;const c=tn(n,s),h=Rt(t,s),x=c?h.indexOf(c):-1,f=(l=(r=a[x])===null||r===void 0?void 0:r.id)!==null&&l!==void 0?l:null,d=(i=(o=a[x+1])===null||o===void 0?void 0:o.id)!==null&&i!==void 0?i:null;return[f,d]}function Cr({committedValuesRef:t,eagerValuesRef:n,groupId:a,layout:s,panelDataArray:l,panelGroupElement:r,setLayout:i}){Te({didWarnAboutMissingResizeHandle:!1}),lt(()=>{if(!r)return;const o=Rt(a,r);for(let c=0;c<l.length-1;c++){const{valueMax:h,valueMin:x,valueNow:f}=jr({layout:s,panelsArray:l,pivotIndices:[c,c+1]}),d=o[c];if(d!=null){const S=l[c];G(S,`No panel data found for index "${c}"`),d.setAttribute("aria-controls",S.id),d.setAttribute("aria-valuemax",""+Math.round(h)),d.setAttribute("aria-valuemin",""+Math.round(x)),d.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{o.forEach((c,h)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[a,s,l,r]),rt(()=>{if(!r)return;const o=n.current;G(o,"Eager values not found");const{panelDataArray:c}=o,h=za(a,r);G(h!=null,`No group found for id "${a}"`);const x=Rt(a,r);G(x,`No resize handles found for group id "${a}"`);const f=x.map(d=>{const S=d.getAttribute("data-panel-resize-handle-id");G(S,"Resize handle element has no handle id attribute");const[v,j]=Nr(a,S,c,r);if(v==null||j==null)return()=>{};const p=m=>{if(!m.defaultPrevented)switch(m.key){case"Enter":{m.preventDefault();const A=c.findIndex(_=>_.id===v);if(A>=0){const _=c[A];G(_,`No panel data found for index ${A}`);const k=s[A],{collapsedSize:ee=0,collapsible:N,minSize:g=0}=_.constraints;if(k!=null&&N){const T=St({delta:Pe(k,ee)?g-ee:ee-k,initialLayout:s,panelConstraints:c.map(D=>D.constraints),pivotIndices:ka(a,S,r),prevLayout:s,trigger:"keyboard"});s!==T&&i(T)}}break}}};return d.addEventListener("keydown",p),()=>{d.removeEventListener("keydown",p)}});return()=>{f.forEach(d=>d())}},[r,t,n,a,s,l,i])}function Vn(t,n){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==n[a])return!1;return!0}function Ea(t,n){const a=t==="horizontal",{x:s,y:l}=Qt(n);return a?s:l}function Sr(t,n,a,s,l){const r=a==="horizontal",i=tn(n,l);G(i,`No resize handle element found for id "${n}"`);const o=i.getAttribute("data-panel-group-id");G(o,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=s;const h=Ea(a,t),x=za(o,l);G(x,`No group element found for id "${o}"`);const f=x.getBoundingClientRect(),d=r?f.width:f.height;return(h-c)/d*100}function Tr(t,n,a,s,l,r){if(wa(t)){const i=a==="horizontal";let o=0;t.shiftKey?o=100:l!=null?o=l:o=10;let c=0;switch(t.key){case"ArrowDown":c=i?0:o;break;case"ArrowLeft":c=i?-o:0;break;case"ArrowRight":c=i?o:0;break;case"ArrowUp":c=i?0:-o;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return s==null?0:Sr(t,n,a,s,r)}function kr({panelDataArray:t}){const n=Array(t.length),a=t.map(r=>r.constraints);let s=0,l=100;for(let r=0;r<t.length;r++){const i=a[r];G(i,`Panel constraints not found for index ${r}`);const{defaultSize:o}=i;o!=null&&(s++,n[r]=o,l-=o)}for(let r=0;r<t.length;r++){const i=a[r];G(i,`Panel constraints not found for index ${r}`);const{defaultSize:o}=i;if(o!=null)continue;const c=t.length-s,h=l/c;s++,n[r]=h,l-=h}return n}function ht(t,n,a){n.forEach((s,l)=>{const r=t[l];G(r,`Panel data not found for index ${l}`);const{callbacks:i,constraints:o,id:c}=r,{collapsedSize:h=0,collapsible:x}=o,f=a[c];if(f==null||s!==f){a[c]=s;const{onCollapse:d,onExpand:S,onResize:v}=i;v&&v(s,f),x&&(d||S)&&(S&&(f==null||Xe(f,h))&&!Xe(s,h)&&S(),d&&(f==null||!Xe(f,h))&&Xe(s,h)&&d())}})}function Ot(t,n){if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!=n[a])return!1;return!0}function zr({defaultSize:t,dragState:n,layout:a,panelData:s,panelIndex:l,precision:r=3}){const i=a[l];let o;return i==null?o=t!=null?t.toPrecision(r):"1":s.length===1?o="1":o=i.toPrecision(r),{flexBasis:0,flexGrow:o,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function Er(t,n=10){let a=null;return(...l)=>{a!==null&&clearTimeout(a),a=setTimeout(()=>{t(...l)},n)}}function Wn(t){try{if(typeof localStorage<"u")t.getItem=n=>localStorage.getItem(n),t.setItem=(n,a)=>{localStorage.setItem(n,a)};else throw new Error("localStorage not supported in this environment")}catch(n){console.error(n),t.getItem=()=>null,t.setItem=()=>{}}}function Ra(t){return`react-resizable-panels:${t}`}function Aa(t){return t.map(n=>{const{constraints:a,id:s,idIsFromProps:l,order:r}=n;return l?s:r?`${r}:${JSON.stringify(a)}`:JSON.stringify(a)}).sort((n,a)=>n.localeCompare(a)).join(",")}function Pa(t,n){try{const a=Ra(t),s=n.getItem(a);if(s){const l=JSON.parse(s);if(typeof l=="object"&&l!=null)return l}}catch{}return null}function Rr(t,n,a){var s,l;const r=(s=Pa(t,a))!==null&&s!==void 0?s:{},i=Aa(n);return(l=r[i])!==null&&l!==void 0?l:null}function Ar(t,n,a,s,l){var r;const i=Ra(t),o=Aa(n),c=(r=Pa(t,l))!==null&&r!==void 0?r:{};c[o]={expandToSizes:Object.fromEntries(a.entries()),layout:s};try{l.setItem(i,JSON.stringify(c))}catch(h){console.error(h)}}function Gn({layout:t,panelConstraints:n}){const a=[...t],s=a.reduce((r,i)=>r+i,0);if(a.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${a.map(r=>`${r}%`).join(", ")}`);if(!Pe(s,100)&&a.length>0)for(let r=0;r<n.length;r++){const i=a[r];G(i!=null,`No layout data found for index ${r}`);const o=100/s*i;a[r]=o}let l=0;for(let r=0;r<n.length;r++){const i=a[r];G(i!=null,`No layout data found for index ${r}`);const o=xt({panelConstraints:n,panelIndex:r,size:i});i!=o&&(l+=i-o,a[r]=o)}if(!Pe(l,0))for(let r=0;r<n.length;r++){const i=a[r];G(i!=null,`No layout data found for index ${r}`);const o=i+l,c=xt({panelConstraints:n,panelIndex:r,size:o});if(i!==c&&(l-=c-i,a[r]=c,Pe(l,0)))break}return a}const Pr=100,Tt={getItem:t=>(Wn(Tt),Tt.getItem(t)),setItem:(t,n)=>{Wn(Tt),Tt.setItem(t,n)}},qn={};function Da({autoSaveId:t=null,children:n,className:a="",direction:s,forwardedRef:l,id:r=null,onLayout:i=null,keyboardResizeBy:o=null,storage:c=Tt,style:h,tagName:x="div",...f}){const d=yn(r),S=Te(null),[v,j]=gt(null),[p,m]=gt([]),A=br(),_=Te({}),k=Te(new Map),ee=Te(0),N=Te({autoSaveId:t,direction:s,dragState:v,id:d,keyboardResizeBy:o,onLayout:i,storage:c}),g=Te({layout:p,panelDataArray:[],panelDataArrayChanged:!1});Te({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),pa(l,()=>({getId:()=>N.current.id,getLayout:()=>{const{layout:b}=g.current;return b},setLayout:b=>{const{onLayout:P}=N.current,{layout:L,panelDataArray:O}=g.current,I=Gn({layout:b,panelConstraints:O.map(V=>V.constraints)});Vn(L,I)||(m(I),g.current.layout=I,P&&P(I),ht(O,I,_.current))}}),[]),lt(()=>{N.current.autoSaveId=t,N.current.direction=s,N.current.dragState=v,N.current.id=d,N.current.onLayout=i,N.current.storage=c}),Cr({committedValuesRef:N,eagerValuesRef:g,groupId:d,layout:p,panelDataArray:g.current.panelDataArray,setLayout:m,panelGroupElement:S.current}),rt(()=>{const{panelDataArray:b}=g.current;if(t){if(p.length===0||p.length!==b.length)return;let P=qn[t];P==null&&(P=Er(Ar,Pr),qn[t]=P);const L=[...b],O=new Map(k.current);P(t,L,O,p,c)}},[t,p,c]),rt(()=>{});const T=Se(b=>{const{onLayout:P}=N.current,{layout:L,panelDataArray:O}=g.current;if(b.constraints.collapsible){const I=O.map(de=>de.constraints),{collapsedSize:V=0,panelSize:Q,pivotIndices:te}=nt(O,b,L);if(G(Q!=null,`Panel size not found for panel "${b.id}"`),!Xe(Q,V)){k.current.set(b.id,Q);const Ne=pt(O,b)===O.length-1?Q-V:V-Q,ae=St({delta:Ne,initialLayout:L,panelConstraints:I,pivotIndices:te,prevLayout:L,trigger:"imperative-api"});Ot(L,ae)||(m(ae),g.current.layout=ae,P&&P(ae),ht(O,ae,_.current))}}},[]),D=Se((b,P)=>{const{onLayout:L}=N.current,{layout:O,panelDataArray:I}=g.current;if(b.constraints.collapsible){const V=I.map($=>$.constraints),{collapsedSize:Q=0,panelSize:te=0,minSize:de=0,pivotIndices:Ne}=nt(I,b,O),ae=P??de;if(Xe(te,Q)){const $=k.current.get(b.id),Me=$!=null&&$>=ae?$:ae,Ie=pt(I,b)===I.length-1?te-Me:Me-te,he=St({delta:Ie,initialLayout:O,panelConstraints:V,pivotIndices:Ne,prevLayout:O,trigger:"imperative-api"});Ot(O,he)||(m(he),g.current.layout=he,L&&L(he),ht(I,he,_.current))}}},[]),Z=Se(b=>{const{layout:P,panelDataArray:L}=g.current,{panelSize:O}=nt(L,b,P);return G(O!=null,`Panel size not found for panel "${b.id}"`),O},[]),Y=Se((b,P)=>{const{panelDataArray:L}=g.current,O=pt(L,b);return zr({defaultSize:P,dragState:v,layout:p,panelData:L,panelIndex:O})},[v,p]),B=Se(b=>{const{layout:P,panelDataArray:L}=g.current,{collapsedSize:O=0,collapsible:I,panelSize:V}=nt(L,b,P);return G(V!=null,`Panel size not found for panel "${b.id}"`),I===!0&&Xe(V,O)},[]),E=Se(b=>{const{layout:P,panelDataArray:L}=g.current,{collapsedSize:O=0,collapsible:I,panelSize:V}=nt(L,b,P);return G(V!=null,`Panel size not found for panel "${b.id}"`),!I||ct(V,O)>0},[]),q=Se(b=>{const{panelDataArray:P}=g.current;P.push(b),P.sort((L,O)=>{const I=L.order,V=O.order;return I==null&&V==null?0:I==null?-1:V==null?1:I-V}),g.current.panelDataArrayChanged=!0,A()},[A]);lt(()=>{if(g.current.panelDataArrayChanged){g.current.panelDataArrayChanged=!1;const{autoSaveId:b,onLayout:P,storage:L}=N.current,{layout:O,panelDataArray:I}=g.current;let V=null;if(b){const te=Rr(b,I,L);te&&(k.current=new Map(Object.entries(te.expandToSizes)),V=te.layout)}V==null&&(V=kr({panelDataArray:I}));const Q=Gn({layout:V,panelConstraints:I.map(te=>te.constraints)});Vn(O,Q)||(m(Q),g.current.layout=Q,P&&P(Q),ht(I,Q,_.current))}}),lt(()=>{const b=g.current;return()=>{b.layout=[]}},[]);const R=Se(b=>{let P=!1;const L=S.current;return L&&window.getComputedStyle(L,null).getPropertyValue("direction")==="rtl"&&(P=!0),function(I){I.preventDefault();const V=S.current;if(!V)return()=>null;const{direction:Q,dragState:te,id:de,keyboardResizeBy:Ne,onLayout:ae}=N.current,{layout:$,panelDataArray:Me}=g.current,{initialLayout:Be}=te??{},Ie=ka(de,b,V);let he=Tr(I,b,Q,te,Ne,V);const We=Q==="horizontal";We&&P&&(he=-he);const Oe=Me.map(Le=>Le.constraints),$e=St({delta:he,initialLayout:Be??$,panelConstraints:Oe,pivotIndices:Ie,prevLayout:$,trigger:wa(I)?"keyboard":"mouse-or-touch"}),dt=!Ot($,$e);(va(I)||ba(I))&&ee.current!=he&&(ee.current=he,!dt&&he!==0?We?ln(b,he<0?ja:Na):ln(b,he<0?Ca:Sa):ln(b,0)),dt&&(m($e),g.current.layout=$e,ae&&ae($e),ht(Me,$e,_.current))}},[]),U=Se((b,P)=>{const{onLayout:L}=N.current,{layout:O,panelDataArray:I}=g.current,V=I.map($=>$.constraints),{panelSize:Q,pivotIndices:te}=nt(I,b,O);G(Q!=null,`Panel size not found for panel "${b.id}"`);const Ne=pt(I,b)===I.length-1?Q-P:P-Q,ae=St({delta:Ne,initialLayout:O,panelConstraints:V,pivotIndices:te,prevLayout:O,trigger:"imperative-api"});Ot(O,ae)||(m(ae),g.current.layout=ae,L&&L(ae),ht(I,ae,_.current))},[]),re=Se((b,P)=>{const{layout:L,panelDataArray:O}=g.current,{collapsedSize:I=0,collapsible:V}=P,{collapsedSize:Q=0,collapsible:te,maxSize:de=100,minSize:Ne=0}=b.constraints,{panelSize:ae}=nt(O,b,L);ae!=null&&(V&&te&&Xe(ae,I)?Xe(I,Q)||U(b,Q):ae<Ne?U(b,Ne):ae>de&&U(b,de))},[U]),fe=Se((b,P)=>{const{direction:L}=N.current,{layout:O}=g.current;if(!S.current)return;const I=tn(b,S.current);G(I,`Drag handle element not found for id "${b}"`);const V=Ea(L,P);j({dragHandleId:b,dragHandleRect:I.getBoundingClientRect(),initialCursorPosition:V,initialLayout:O})},[]),ve=Se(()=>{j(null)},[]),ze=Se(b=>{const{panelDataArray:P}=g.current,L=pt(P,b);L>=0&&(P.splice(L,1),delete _.current[b.id],g.current.panelDataArrayChanged=!0,A())},[A]),et=lr(()=>({collapsePanel:T,direction:s,dragState:v,expandPanel:D,getPanelSize:Z,getPanelStyle:Y,groupId:d,isPanelCollapsed:B,isPanelExpanded:E,reevaluatePanelConstraints:re,registerPanel:q,registerResizeHandle:R,resizePanel:U,startDragging:fe,stopDragging:ve,unregisterPanel:ze,panelGroupElement:S.current}),[T,v,s,D,Z,Y,d,B,E,re,q,R,U,fe,ve,ze]),le={display:"flex",flexDirection:s==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return bt(Zt.Provider,{value:et},bt(x,{...f,children:n,className:a,id:r,ref:S,style:{...le,...h},"data-panel-group":"","data-panel-group-direction":s,"data-panel-group-id":d}))}const Ma=fa((t,n)=>bt(Da,{...t,forwardedRef:n}));Da.displayName="PanelGroup";Ma.displayName="forwardRef(PanelGroup)";function pt(t,n){return t.findIndex(a=>a===n||a.id===n.id)}function nt(t,n,a){const s=pt(t,n),r=s===t.length-1?[s-1,s]:[s,s+1],i=a[s];return{...n.constraints,panelSize:i,pivotIndices:r}}function Dr({disabled:t,handleId:n,resizeHandler:a,panelGroupElement:s}){rt(()=>{if(t||a==null||s==null)return;const l=tn(n,s);if(l==null)return;const r=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),a(i);break}case"F6":{i.preventDefault();const o=l.getAttribute("data-panel-group-id");G(o,`No group element found for id "${o}"`);const c=Rt(o,s),h=Ta(o,n,s);G(h!==null,`No resize element found for id "${n}"`);const x=i.shiftKey?h>0?h-1:c.length-1:h+1<c.length?h+1:0;c[x].focus();break}}};return l.addEventListener("keydown",r),()=>{l.removeEventListener("keydown",r)}},[s,t,n,a])}function Ia({children:t=null,className:n="",disabled:a=!1,hitAreaMargins:s,id:l,onBlur:r,onDragging:i,onFocus:o,style:c={},tabIndex:h=0,tagName:x="div",...f}){var d,S;const v=Te(null),j=Te({onDragging:i});rt(()=>{j.current.onDragging=i});const p=ha(Zt);if(p===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:m,groupId:A,registerResizeHandle:_,startDragging:k,stopDragging:ee,panelGroupElement:N}=p,g=yn(l),[T,D]=gt("inactive"),[Z,Y]=gt(!1),[B,E]=gt(null),q=Te({state:T});lt(()=>{q.current.state=T}),rt(()=>{if(a)E(null);else{const fe=_(g);E(()=>fe)}},[a,g,_]);const R=(d=s==null?void 0:s.coarse)!==null&&d!==void 0?d:15,U=(S=s==null?void 0:s.fine)!==null&&S!==void 0?S:5;return rt(()=>{if(a||B==null)return;const fe=v.current;return G(fe,"Element ref not attached"),vr(g,fe,m,{coarse:R,fine:U},(ze,et,le)=>{if(et)switch(ze){case"down":{D("drag"),G(le,'Expected event to be defined for "down" action'),k(g,le);const{onDragging:b}=j.current;b&&b(!0);break}case"move":{const{state:b}=q.current;b!=="drag"&&D("hover"),G(le,'Expected event to be defined for "move" action'),B(le);break}case"up":{D("hover"),ee();const{onDragging:b}=j.current;b&&b(!1);break}}else D("inactive")})},[R,m,a,U,_,g,B,k,ee]),Dr({disabled:a,handleId:g,resizeHandler:B,panelGroupElement:N}),bt(x,{...f,children:t,className:n,id:l,onBlur:()=>{Y(!1),r==null||r()},onFocus:()=>{Y(!0),o==null||o()},ref:v,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...c},tabIndex:h,"data-panel-group-direction":m,"data-panel-group-id":A,"data-resize-handle":"","data-resize-handle-active":T==="drag"?"pointer":Z?"keyboard":void 0,"data-resize-handle-state":T,"data-panel-resize-handle-enabled":!a,"data-panel-resize-handle-id":g})}Ia.displayName="PanelResizeHandle";function Mr({className:t,...n}){return e.jsx(Ma,{"data-slot":"resizable-panel-group",className:ce("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})}function Kn({...t}){return e.jsx(ga,{"data-slot":"resizable-panel",...t})}function Ir({withHandle:t,className:n,...a}){return e.jsx(Ia,{"data-slot":"resizable-handle",className:ce("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...a,children:t&&e.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:e.jsx(hs,{className:"size-2.5"})})})}function $r(t){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}const $a=C.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),At=()=>{const t=C.useContext($a);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};$r(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Lr(){const t=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function _r(){return Sn(/^Mac/)}function Hr(){return Sn(/^iPhone/)}function Yn(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Br(){return Sn(/^iPad/)||_r()&&navigator.maxTouchPoints>1}function La(){return Hr()||Br()}function Sn(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const Or=24,Ur=typeof window<"u"?M.useLayoutEffect:M.useEffect;function Xn(...t){return(...n)=>{for(let a of t)typeof a=="function"&&a(...n)}}const on=typeof document<"u"&&window.visualViewport;function Jn(t){let n=window.getComputedStyle(t);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function _a(t){for(Jn(t)&&(t=t.parentElement);t&&!Jn(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const Fr=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Ut=0,cn;function Vr(t={}){let{isDisabled:n}=t;Ur(()=>{if(!n)return Ut++,Ut===1&&La()&&(cn=Wr()),()=>{Ut--,Ut===0&&(cn==null||cn())}},[n])}function Wr(){let t,n=0,a=f=>{t=_a(f.target),!(t===document.documentElement&&t===document.body)&&(n=f.changedTouches[0].pageY)},s=f=>{if(!t||t===document.documentElement||t===document.body){f.preventDefault();return}let d=f.changedTouches[0].pageY,S=t.scrollTop,v=t.scrollHeight-t.clientHeight;v!==0&&((S<=0&&d>n||S>=v&&d<n)&&f.preventDefault(),n=d)},l=f=>{let d=f.target;xn(d)&&d!==document.activeElement&&(f.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},r=f=>{let d=f.target;xn(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",on&&(on.height<window.innerHeight?requestAnimationFrame(()=>{Zn(d)}):on.addEventListener("resize",()=>Zn(d),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},o=window.pageXOffset,c=window.pageYOffset,h=Xn(Gr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let x=Xn(Nt(document,"touchstart",a,{passive:!1,capture:!0}),Nt(document,"touchmove",s,{passive:!1,capture:!0}),Nt(document,"touchend",l,{passive:!1,capture:!0}),Nt(document,"focus",r,!0),Nt(window,"scroll",i));return()=>{h(),x(),window.scrollTo(o,c)}}function Gr(t,n,a){let s=t.style[n];return t.style[n]=a,()=>{t.style[n]=s}}function Nt(t,n,a,s){return t.addEventListener(n,a,s),()=>{t.removeEventListener(n,a,s)}}function Zn(t){let n=document.scrollingElement||document.documentElement;for(;t&&t!==n;){let a=_a(t);if(a!==document.documentElement&&a!==document.body&&a!==t){let s=a.getBoundingClientRect().top,l=t.getBoundingClientRect().top,r=t.getBoundingClientRect().bottom;const i=a.getBoundingClientRect().bottom+Or;r>i&&(a.scrollTop+=l-s)}t=a.parentElement}}function xn(t){return t instanceof HTMLInputElement&&!Fr.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function qr(t,n){typeof t=="function"?t(n):t!=null&&(t.current=n)}function Kr(...t){return n=>t.forEach(a=>qr(a,n))}function Ha(...t){return M.useCallback(Kr(...t),t)}const Ba=new WeakMap;function pe(t,n,a=!1){if(!t||!(t instanceof HTMLElement))return;let s={};Object.entries(n).forEach(([l,r])=>{if(l.startsWith("--")){t.style.setProperty(l,r);return}s[l]=t.style[l],t.style[l]=r}),!a&&Ba.set(t,s)}function Yr(t,n){if(!t||!(t instanceof HTMLElement))return;let a=Ba.get(t);a&&(t.style[n]=a[n])}const ue=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function Ft(t,n){if(!t)return null;const a=window.getComputedStyle(t),s=a.transform||a.webkitTransform||a.mozTransform;let l=s.match(/^matrix3d\((.+)\)$/);return l?parseFloat(l[1].split(", ")[ue(n)?13:12]):(l=s.match(/^matrix\((.+)\)$/),l?parseFloat(l[1].split(", ")[ue(n)?5:4]):null)}function Xr(t){return 8*(Math.log(t+1)-2)}function dn(t,n){if(!t)return()=>{};const a=t.style.cssText;return Object.assign(t.style,n),()=>{t.style.cssText=a}}function Jr(...t){return(...n)=>{for(const a of t)typeof a=="function"&&a(...n)}}const oe={DURATION:.5,EASE:[.32,.72,0,1]},Oa=.4,Zr=.25,Qr=100,Ua=8,Vt=16,gn=26,un="vaul-dragging";function Fa(t){const n=C.useRef(t);return C.useEffect(()=>{n.current=t}),C.useMemo(()=>(...a)=>n.current==null?void 0:n.current.call(n,...a),[])}function el({defaultProp:t,onChange:n}){const a=C.useState(t),[s]=a,l=C.useRef(s),r=Fa(n);return C.useEffect(()=>{l.current!==s&&(r(s),l.current=s)},[s,l,r]),a}function Va({prop:t,defaultProp:n,onChange:a=()=>{}}){const[s,l]=el({defaultProp:n,onChange:a}),r=t!==void 0,i=r?t:s,o=Fa(a),c=C.useCallback(h=>{if(r){const f=typeof h=="function"?h(t):h;f!==t&&o(f)}else l(h)},[r,t,l,o]);return[i,c]}function tl({activeSnapPointProp:t,setActiveSnapPointProp:n,snapPoints:a,drawerRef:s,overlayRef:l,fadeFromIndex:r,onSnapPointChange:i,direction:o="bottom",container:c,snapToSequentialPoint:h}){const[x,f]=Va({prop:t,defaultProp:a==null?void 0:a[0],onChange:n}),[d,S]=C.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);C.useEffect(()=>{function g(){S({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const v=C.useMemo(()=>x===(a==null?void 0:a[a.length-1])||null,[a,x]),j=C.useMemo(()=>{var g;return(g=a==null?void 0:a.findIndex(T=>T===x))!=null?g:null},[a,x]),p=a&&a.length>0&&(r||r===0)&&!Number.isNaN(r)&&a[r]===x||!a,m=C.useMemo(()=>{const g=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var T;return(T=a==null?void 0:a.map(D=>{const Z=typeof D=="string";let Y=0;if(Z&&(Y=parseInt(D,10)),ue(o)){const E=Z?Y:d?D*g.height:0;return d?o==="bottom"?g.height-E:-g.height+E:E}const B=Z?Y:d?D*g.width:0;return d?o==="right"?g.width-B:-g.width+B:B}))!=null?T:[]},[a,d,c]),A=C.useMemo(()=>j!==null?m==null?void 0:m[j]:null,[m,j]),_=C.useCallback(g=>{var T;const D=(T=m==null?void 0:m.findIndex(Z=>Z===g))!=null?T:null;i(D),pe(s.current,{transition:`transform ${oe.DURATION}s cubic-bezier(${oe.EASE.join(",")})`,transform:ue(o)?`translate3d(0, ${g}px, 0)`:`translate3d(${g}px, 0, 0)`}),m&&D!==m.length-1&&r!==void 0&&D!==r&&D<r?pe(l.current,{transition:`opacity ${oe.DURATION}s cubic-bezier(${oe.EASE.join(",")})`,opacity:"0"}):pe(l.current,{transition:`opacity ${oe.DURATION}s cubic-bezier(${oe.EASE.join(",")})`,opacity:"1"}),f(a==null?void 0:a[Math.max(D,0)])},[s.current,a,m,r,l,f]);C.useEffect(()=>{if(x||t){var g;const T=(g=a==null?void 0:a.findIndex(D=>D===t||D===x))!=null?g:-1;m&&T!==-1&&typeof m[T]=="number"&&_(m[T])}},[x,t,a,m,_]);function k({draggedDistance:g,closeDrawer:T,velocity:D,dismissible:Z}){if(r===void 0)return;const Y=o==="bottom"||o==="right"?(A??0)-g:(A??0)+g,B=j===r-1,E=j===0,q=g>0;if(B&&pe(l.current,{transition:`opacity ${oe.DURATION}s cubic-bezier(${oe.EASE.join(",")})`}),!h&&D>2&&!q){Z?T():_(m[0]);return}if(!h&&D>2&&q&&m&&a){_(m[a.length-1]);return}const R=m==null?void 0:m.reduce((re,fe)=>typeof re!="number"||typeof fe!="number"?re:Math.abs(fe-Y)<Math.abs(re-Y)?fe:re),U=ue(o)?window.innerHeight:window.innerWidth;if(D>Oa&&Math.abs(g)<U*.4){const re=q?1:-1;if(re>0&&v&&a){_(m[a.length-1]);return}if(E&&re<0&&Z&&T(),j===null)return;_(m[j+re]);return}_(R)}function ee({draggedDistance:g}){if(A===null)return;const T=o==="bottom"||o==="right"?A-g:A+g;(o==="bottom"||o==="right")&&T<m[m.length-1]||(o==="top"||o==="left")&&T>m[m.length-1]||pe(s.current,{transform:ue(o)?`translate3d(0, ${T}px, 0)`:`translate3d(${T}px, 0, 0)`})}function N(g,T){if(!a||typeof j!="number"||!m||r===void 0)return null;const D=j===r-1;if(j>=r&&T)return 0;if(D&&!T)return 1;if(!p&&!D)return null;const Y=D?j+1:j-1,B=D?m[Y]-m[Y-1]:m[Y+1]-m[Y],E=g/Math.abs(B);return D?1-E:E}return{isLastSnapPoint:v,activeSnapPoint:x,shouldFade:p,getPercentageDragged:N,setActiveSnapPoint:f,activeSnapPointIndex:j,onRelease:k,onDrag:ee,snapPointsOffset:m}}const nl=()=>()=>{};function al(){const{direction:t,isOpen:n,shouldScaleBackground:a,setBackgroundColorOnScale:s,noBodyStyles:l}=At(),r=C.useRef(null),i=M.useMemo(()=>document.body.style.backgroundColor,[]);function o(){return(window.innerWidth-gn)/window.innerWidth}C.useEffect(()=>{if(n&&a){r.current&&clearTimeout(r.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;Jr(s&&!l?dn(document.body,{background:"black"}):nl,dn(c,{transformOrigin:ue(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${oe.DURATION}s`,transitionTimingFunction:`cubic-bezier(${oe.EASE.join(",")})`}));const h=dn(c,{borderRadius:`${Ua}px`,overflow:"hidden",...ue(t)?{transform:`scale(${o()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${o()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{h(),r.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},oe.DURATION*1e3)}}},[n,a,i])}let Ct=null;function sl({isOpen:t,modal:n,nested:a,hasBeenOpened:s,preventScrollRestoration:l,noBodyStyles:r}){const[i,o]=C.useState(()=>typeof window<"u"?window.location.href:""),c=C.useRef(0),h=C.useCallback(()=>{if(Yn()&&Ct===null&&t&&!r){Ct={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:d}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const S=d-window.innerHeight;S&&c.current>=d&&(document.body.style.top=`${-(c.current+S)}px`)}),300)}},[t]),x=C.useCallback(()=>{if(Yn()&&Ct!==null&&!r){const f=-parseInt(document.body.style.top,10),d=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Ct),window.requestAnimationFrame(()=>{if(l&&i!==window.location.href){o(window.location.href);return}window.scrollTo(d,f)}),Ct=null}},[i]);return C.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),C.useEffect(()=>{if(n)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||x()}},[n,x]),C.useEffect(()=>{a||!s||(t?(!window.matchMedia("(display-mode: standalone)").matches&&h(),n||window.setTimeout(()=>{x()},500)):x())},[t,s,i,n,a,h,x]),{restorePositionSetting:x}}function rl({open:t,onOpenChange:n,children:a,onDrag:s,onRelease:l,snapPoints:r,shouldScaleBackground:i=!1,setBackgroundColorOnScale:o=!0,closeThreshold:c=Zr,scrollLockTimeout:h=Qr,dismissible:x=!0,handleOnly:f=!1,fadeFromIndex:d=r&&r.length-1,activeSnapPoint:S,setActiveSnapPoint:v,fixed:j,modal:p=!0,onClose:m,nested:A,noBodyStyles:_=!1,direction:k="bottom",defaultOpen:ee=!1,disablePreventScroll:N=!0,snapToSequentialPoint:g=!1,preventScrollRestoration:T=!1,repositionInputs:D=!0,onAnimationEnd:Z,container:Y,autoFocus:B=!1}){var E,q;const[R=!1,U]=Va({defaultProp:ee,prop:t,onChange:H=>{n==null||n(H),!H&&!A&&Dt(),setTimeout(()=>{Z==null||Z(H)},oe.DURATION*1e3),H&&!p&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),H||(document.body.style.pointerEvents="auto")}}),[re,fe]=C.useState(!1),[ve,ze]=C.useState(!1),[et,le]=C.useState(!1),b=C.useRef(null),P=C.useRef(null),L=C.useRef(null),O=C.useRef(null),I=C.useRef(null),V=C.useRef(!1),Q=C.useRef(null),te=C.useRef(0),de=C.useRef(!1),Ne=C.useRef(!ee),ae=C.useRef(0),$=C.useRef(null),Me=C.useRef(((E=$.current)==null?void 0:E.getBoundingClientRect().height)||0),Be=C.useRef(((q=$.current)==null?void 0:q.getBoundingClientRect().width)||0),Ie=C.useRef(0),he=C.useCallback(H=>{r&&H===Le.length-1&&(P.current=new Date)},[]),{activeSnapPoint:We,activeSnapPointIndex:Oe,setActiveSnapPoint:$e,onRelease:dt,snapPointsOffset:Le,onDrag:Ee,shouldFade:ut,getPercentageDragged:nn}=tl({snapPoints:r,activeSnapPointProp:S,setActiveSnapPointProp:v,drawerRef:$,fadeFromIndex:d,overlayRef:b,onSnapPointChange:he,direction:k,container:Y,snapToSequentialPoint:g});Vr({isDisabled:!R||ve||!p||et||!re||!D||!N});const{restorePositionSetting:Dt}=sl({isOpen:R,modal:p,nested:A??!1,hasBeenOpened:re,preventScrollRestoration:T,noBodyStyles:_});function Ge(){return(window.innerWidth-gn)/window.innerWidth}function yt(H){var X,ne;!x&&!r||$.current&&!$.current.contains(H.target)||(Me.current=((X=$.current)==null?void 0:X.getBoundingClientRect().height)||0,Be.current=((ne=$.current)==null?void 0:ne.getBoundingClientRect().width)||0,ze(!0),L.current=new Date,La()&&window.addEventListener("touchend",()=>V.current=!1,{once:!0}),H.target.setPointerCapture(H.pointerId),te.current=ue(k)?H.pageY:H.pageX)}function Mt(H,X){var ne;let J=H;const ie=(ne=window.getSelection())==null?void 0:ne.toString(),be=$.current?Ft($.current,k):null,ye=new Date;if(J.tagName==="SELECT"||J.hasAttribute("data-vaul-no-drag")||J.closest("[data-vaul-no-drag]"))return!1;if(k==="right"||k==="left")return!0;if(P.current&&ye.getTime()-P.current.getTime()<500)return!1;if(be!==null&&(k==="bottom"?be>0:be<0))return!0;if(ie&&ie.length>0)return!1;if(I.current&&ye.getTime()-I.current.getTime()<h&&be===0||X)return I.current=ye,!1;for(;J;){if(J.scrollHeight>J.clientHeight){if(J.scrollTop!==0)return I.current=new Date,!1;if(J.getAttribute("role")==="dialog")return!0}J=J.parentNode}return!0}function an(H){if($.current&&ve){const X=k==="bottom"||k==="right"?1:-1,ne=(te.current-(ue(k)?H.pageY:H.pageX))*X,J=ne>0,ie=r&&!x&&!J;if(ie&&Oe===0)return;const be=Math.abs(ne),ye=document.querySelector("[data-vaul-drawer-wrapper]"),Ue=k==="bottom"||k==="top"?Me.current:Be.current;let Ae=be/Ue;const Ke=nn(be,J);if(Ke!==null&&(Ae=Ke),ie&&Ae>=1||!V.current&&!Mt(H.target,J))return;if($.current.classList.add(un),V.current=!0,pe($.current,{transition:"none"}),pe(b.current,{transition:"none"}),r&&Ee({draggedDistance:ne}),J&&!r){const De=Xr(ne),mt=Math.min(De*-1,0)*X;pe($.current,{transform:ue(k)?`translate3d(0, ${mt}px, 0)`:`translate3d(${mt}px, 0, 0)`});return}const Fe=1-Ae;if((ut||d&&Oe===d-1)&&(s==null||s(H,Ae),pe(b.current,{opacity:`${Fe}`,transition:"none"},!0)),ye&&b.current&&i){const De=Math.min(Ge()+Ae*(1-Ge()),1),mt=8-Ae*8,_t=Math.max(0,14-Ae*14);pe(ye,{borderRadius:`${mt}px`,transform:ue(k)?`scale(${De}) translate3d(0, ${_t}px, 0)`:`scale(${De}) translate3d(${_t}px, 0, 0)`,transition:"none"},!0)}if(!r){const De=be*X;pe($.current,{transform:ue(k)?`translate3d(0, ${De}px, 0)`:`translate3d(${De}px, 0, 0)`})}}}C.useEffect(()=>{window.requestAnimationFrame(()=>{Ne.current=!0})},[]),C.useEffect(()=>{var H;function X(){if(!$.current||!D)return;const ne=document.activeElement;if(xn(ne)||de.current){var J;const ie=((J=window.visualViewport)==null?void 0:J.height)||0,be=window.innerHeight;let ye=be-ie;const Ue=$.current.getBoundingClientRect().height||0,Ae=Ue>be*.8;Ie.current||(Ie.current=Ue);const Ke=$.current.getBoundingClientRect().top;if(Math.abs(ae.current-ye)>60&&(de.current=!de.current),r&&r.length>0&&Le&&Oe){const Fe=Le[Oe]||0;ye+=Fe}if(ae.current=ye,Ue>ie||de.current){const Fe=$.current.getBoundingClientRect().height;let De=Fe;Fe>ie&&(De=ie-(Ae?Ke:gn)),j?$.current.style.height=`${Fe-Math.max(ye,0)}px`:$.current.style.height=`${Math.max(De,ie-Ke)}px`}else Lr()||($.current.style.height=`${Ie.current}px`);r&&r.length>0&&!de.current?$.current.style.bottom="0px":$.current.style.bottom=`${Math.max(ye,0)}px`}}return(H=window.visualViewport)==null||H.addEventListener("resize",X),()=>{var ne;return(ne=window.visualViewport)==null?void 0:ne.removeEventListener("resize",X)}},[Oe,r,Le]);function tt(H){sn(),m==null||m(),H||U(!1),setTimeout(()=>{r&&$e(r[0])},oe.DURATION*1e3)}function It(){if(!$.current)return;const H=document.querySelector("[data-vaul-drawer-wrapper]"),X=Ft($.current,k);pe($.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${oe.DURATION}s cubic-bezier(${oe.EASE.join(",")})`}),pe(b.current,{transition:`opacity ${oe.DURATION}s cubic-bezier(${oe.EASE.join(",")})`,opacity:"1"}),i&&X&&X>0&&R&&pe(H,{borderRadius:`${Ua}px`,overflow:"hidden",...ue(k)?{transform:`scale(${Ge()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ge()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${oe.DURATION}s`,transitionTimingFunction:`cubic-bezier(${oe.EASE.join(",")})`},!0)}function sn(){!ve||!$.current||($.current.classList.remove(un),V.current=!1,ze(!1),O.current=new Date)}function qe(H){if(!ve||!$.current)return;$.current.classList.remove(un),V.current=!1,ze(!1),O.current=new Date;const X=Ft($.current,k);if(!H||!Mt(H.target,!1)||!X||Number.isNaN(X)||L.current===null)return;const ne=O.current.getTime()-L.current.getTime(),J=te.current-(ue(k)?H.pageY:H.pageX),ie=Math.abs(J)/ne;if(ie>.05&&(le(!0),setTimeout(()=>{le(!1)},200)),r){dt({draggedDistance:J*(k==="bottom"||k==="right"?1:-1),closeDrawer:tt,velocity:ie,dismissible:x}),l==null||l(H,!0);return}if(k==="bottom"||k==="right"?J>0:J<0){It(),l==null||l(H,!0);return}if(ie>Oa){tt(),l==null||l(H,!1);return}var be;const ye=Math.min((be=$.current.getBoundingClientRect().height)!=null?be:0,window.innerHeight);var Ue;const Ae=Math.min((Ue=$.current.getBoundingClientRect().width)!=null?Ue:0,window.innerWidth),Ke=k==="left"||k==="right";if(Math.abs(X)>=(Ke?Ae:ye)*c){tt(),l==null||l(H,!1);return}l==null||l(H,!0),It()}C.useEffect(()=>(R&&(pe(document.documentElement,{scrollBehavior:"auto"}),P.current=new Date),()=>{Yr(document.documentElement,"scrollBehavior")}),[R]);function $t(H){const X=H?(window.innerWidth-Vt)/window.innerWidth:1,ne=H?-16:0;Q.current&&window.clearTimeout(Q.current),pe($.current,{transition:`transform ${oe.DURATION}s cubic-bezier(${oe.EASE.join(",")})`,transform:ue(k)?`scale(${X}) translate3d(0, ${ne}px, 0)`:`scale(${X}) translate3d(${ne}px, 0, 0)`}),!H&&$.current&&(Q.current=setTimeout(()=>{const J=Ft($.current,k);pe($.current,{transition:"none",transform:ue(k)?`translate3d(0, ${J}px, 0)`:`translate3d(${J}px, 0, 0)`})},500))}function Lt(H,X){if(X<0)return;const ne=(window.innerWidth-Vt)/window.innerWidth,J=ne+X*(1-ne),ie=-16+X*Vt;pe($.current,{transform:ue(k)?`scale(${J}) translate3d(0, ${ie}px, 0)`:`scale(${J}) translate3d(${ie}px, 0, 0)`,transition:"none"})}function Re(H,X){const ne=ue(k)?window.innerHeight:window.innerWidth,J=X?(ne-Vt)/ne:1,ie=X?-16:0;X&&pe($.current,{transition:`transform ${oe.DURATION}s cubic-bezier(${oe.EASE.join(",")})`,transform:ue(k)?`scale(${J}) translate3d(0, ${ie}px, 0)`:`scale(${J}) translate3d(${ie}px, 0, 0)`})}return C.useEffect(()=>{p||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[p]),C.createElement(vs,{defaultOpen:ee,onOpenChange:H=>{!x&&!H||(H?fe(!0):tt(!0),U(H))},open:R},C.createElement($a.Provider,{value:{activeSnapPoint:We,snapPoints:r,setActiveSnapPoint:$e,drawerRef:$,overlayRef:b,onOpenChange:n,onPress:yt,onRelease:qe,onDrag:an,dismissible:x,shouldAnimate:Ne,handleOnly:f,isOpen:R,isDragging:ve,shouldFade:ut,closeDrawer:tt,onNestedDrag:Lt,onNestedOpenChange:$t,onNestedRelease:Re,keyboardIsOpen:de,modal:p,snapPointsOffset:Le,activeSnapPointIndex:Oe,direction:k,shouldScaleBackground:i,setBackgroundColorOnScale:o,noBodyStyles:_,container:Y,autoFocus:B}},a))}const Wa=C.forwardRef(function({...t},n){const{overlayRef:a,snapPoints:s,onRelease:l,shouldFade:r,isOpen:i,modal:o,shouldAnimate:c}=At(),h=Ha(n,a),x=s&&s.length>0;if(!o)return null;const f=C.useCallback(d=>l(d),[l]);return C.createElement(js,{onMouseUp:f,ref:h,"data-vaul-overlay":"","data-vaul-snap-points":i&&x?"true":"false","data-vaul-snap-points-overlay":i&&r?"true":"false","data-vaul-animate":c!=null&&c.current?"true":"false",...t})});Wa.displayName="Drawer.Overlay";const Ga=C.forwardRef(function({onPointerDownOutside:t,style:n,onOpenAutoFocus:a,...s},l){const{drawerRef:r,onPress:i,onRelease:o,onDrag:c,keyboardIsOpen:h,snapPointsOffset:x,activeSnapPointIndex:f,modal:d,isOpen:S,direction:v,snapPoints:j,container:p,handleOnly:m,shouldAnimate:A,autoFocus:_}=At(),[k,ee]=C.useState(!1),N=Ha(l,r),g=C.useRef(null),T=C.useRef(null),D=C.useRef(!1),Z=j&&j.length>0;al();const Y=(E,q,R=0)=>{if(D.current)return!0;const U=Math.abs(E.y),re=Math.abs(E.x),fe=re>U,ve=["bottom","right"].includes(q)?1:-1;if(q==="left"||q==="right"){if(!(E.x*ve<0)&&re>=0&&re<=R)return fe}else if(!(E.y*ve<0)&&U>=0&&U<=R)return!fe;return D.current=!0,!0};C.useEffect(()=>{Z&&window.requestAnimationFrame(()=>{ee(!0)})},[]);function B(E){g.current=null,D.current=!1,o(E)}return C.createElement(bs,{"data-vaul-drawer-direction":v,"data-vaul-drawer":"","data-vaul-delayed-snap-points":k?"true":"false","data-vaul-snap-points":S&&Z?"true":"false","data-vaul-custom-container":p?"true":"false","data-vaul-animate":A!=null&&A.current?"true":"false",...s,ref:N,style:x&&x.length>0?{"--snap-point-height":`${x[f??0]}px`,...n}:n,onPointerDown:E=>{m||(s.onPointerDown==null||s.onPointerDown.call(s,E),g.current={x:E.pageX,y:E.pageY},i(E))},onOpenAutoFocus:E=>{a==null||a(E),_||E.preventDefault()},onPointerDownOutside:E=>{if(t==null||t(E),!d||E.defaultPrevented){E.preventDefault();return}h.current&&(h.current=!1)},onFocusOutside:E=>{if(!d){E.preventDefault();return}},onPointerMove:E=>{if(T.current=E,m||(s.onPointerMove==null||s.onPointerMove.call(s,E),!g.current))return;const q=E.pageY-g.current.y,R=E.pageX-g.current.x,U=E.pointerType==="touch"?10:2;Y({x:R,y:q},v,U)?c(E):(Math.abs(R)>U||Math.abs(q)>U)&&(g.current=null)},onPointerUp:E=>{s.onPointerUp==null||s.onPointerUp.call(s,E),g.current=null,D.current=!1,o(E)},onPointerOut:E=>{s.onPointerOut==null||s.onPointerOut.call(s,E),B(T.current)},onContextMenu:E=>{s.onContextMenu==null||s.onContextMenu.call(s,E),T.current&&B(T.current)}})});Ga.displayName="Drawer.Content";const ll=250,il=120,ol=C.forwardRef(function({preventCycle:t=!1,children:n,...a},s){const{closeDrawer:l,isDragging:r,snapPoints:i,activeSnapPoint:o,setActiveSnapPoint:c,dismissible:h,handleOnly:x,isOpen:f,onPress:d,onDrag:S}=At(),v=C.useRef(null),j=C.useRef(!1);function p(){if(j.current){_();return}window.setTimeout(()=>{m()},il)}function m(){if(r||t||j.current){_();return}if(_(),!i||i.length===0){h||l();return}if(o===i[i.length-1]&&h){l();return}const ee=i.findIndex(g=>g===o);if(ee===-1)return;const N=i[ee+1];c(N)}function A(){v.current=window.setTimeout(()=>{j.current=!0},ll)}function _(){v.current&&window.clearTimeout(v.current),j.current=!1}return C.createElement("div",{onClick:p,onPointerCancel:_,onPointerDown:k=>{x&&d(k),A()},onPointerMove:k=>{x&&S(k)},ref:s,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...a},C.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});ol.displayName="Drawer.Handle";function cl(t){const n=At(),{container:a=n.container,...s}=t;return C.createElement(ys,{container:a,...s})}const Pt={Root:rl,Content:Ga,Overlay:Wa,Portal:cl,Title:ws};function dl({...t}){return e.jsx(Pt.Root,{"data-slot":"drawer",...t})}function ul({...t}){return e.jsx(Pt.Portal,{"data-slot":"drawer-portal",...t})}function ml({className:t,...n}){return e.jsx(Pt.Overlay,{"data-slot":"drawer-overlay",className:ce("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...n})}function fl({className:t,children:n,...a}){return e.jsxs(ul,{"data-slot":"drawer-portal",children:[e.jsx(ml,{}),e.jsxs(Pt.Content,{"data-slot":"drawer-content",className:ce("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...a,children:[e.jsx("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),n]})]})}function hl({className:t,...n}){return e.jsx("div",{"data-slot":"drawer-header",className:ce("flex flex-col gap-1.5 p-4",t),...n})}function pl({className:t,...n}){return e.jsx(Pt.Title,{"data-slot":"drawer-title",className:ce("text-foreground font-semibold",t),...n})}const xl=({show:t,history:n,collections:a=[],selectedCollectionId:s="",onSelectCollection:l,onClear:r,onUseAgain:i,onRemoveEntry:o})=>{const[c,h]=C.useState(null),[x,f]=C.useState(!1),[d,S]=C.useState("input"),v=Array.isArray(n)?n.filter(m=>m.collectionId===s):[],j=Array.isArray(a)?a.find(m=>m.id===s):void 0,p=v.find(m=>m.id===c)||null;return C.useEffect(()=>{h(null),f(!1)},[s,n]),M.useEffect(()=>{if(!x)return;const m=A=>{if(A.ctrlKey&&(A.key==="c"||A.key==="C")){A.preventDefault();const _=d==="input"?(p==null?void 0:p.inputText)||"":(p==null?void 0:p.translatedText)||"";_&&(navigator.clipboard.writeText(_),se.success(`Copied ${d==="input"?"input text":"translated text"}`))}else A.ctrlKey&&(A.key==="v"||A.key==="V")?(A.preventDefault(),p&&i(p)):A.key==="Backspace"&&(A.preventDefault(),p&&(f(!1),o(p.id)))};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[x,d,p,i,o]),t?e.jsxs("div",{className:ce("h-full w-full flex flex-col"),children:[e.jsx("div",{className:"my-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ua,{className:"h-5 w-5 mr-2 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold",children:"Translation History"}),e.jsx("span",{className:"block text-sm mt-1 text-muted-foreground",children:"Previously translated content, organized by collection"})]})]}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(W,{variant:"destructive",size:"sm",onClick:r,disabled:v.length===0,className:"h-8 text-xs",children:[e.jsx(st,{className:"h-3.5 w-3.5 mr-1.5"}),"Clear All"]})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Delete all translation history in this collection"})})]})})]})}),e.jsx("div",{className:"px-2 pb-0 flex-1 min-h-0",children:e.jsxs(Mr,{direction:"horizontal",className:"h-[500px] w-full",children:[e.jsx(Kn,{defaultSize:25,minSize:20,maxSize:40,className:"border-r border-border/40",children:e.jsx("div",{className:"h-full flex flex-col",children:e.jsx(kt,{className:"flex-1 px-2 pb-2",children:e.jsx("div",{className:"flex flex-col gap-1",children:a.length===0?e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-4 text-center",children:"No collections"}):a.map(m=>e.jsxs("div",{className:ce("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer transition-all",m.id===s?"bg-primary/10 text-primary font-semibold":"hover:bg-muted/60 text-gray-700 dark:text-gray-200"),onClick:()=>l(m.id),children:[e.jsx(Wt,{className:"h-4 w-4 mr-1 text-primary/70"}),e.jsx("span",{className:"truncate text-sm",children:m.name})]},m.id))})})})}),e.jsx(Ir,{withHandle:!0}),e.jsx(Kn,{defaultSize:75,minSize:40,children:e.jsxs("div",{className:"h-full flex flex-col px-4",children:[e.jsxs("div",{className:" pt-4 pb-2 font-semibold text-base flex items-center gap-2",children:[e.jsx(Os,{className:"h-4 w-4 text-primary/70"}),j?j.name:"No Collection Selected"]}),e.jsxs("div",{className:"flex-1 px-0 pb-4",children:[v.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(zs,{className:"h-12 w-12 text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No translation history yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 max-w-md",children:"Translations will be saved here automatically as you use the translator"})]}):e.jsx(kt,{className:"h-[400px] pr-2",children:e.jsx("div",{className:"space-y-2",children:v.map(m=>e.jsx(He,{className:ce("transition-all cursor-pointer border-2",c===m.id&&x?"border-primary bg-primary/5":"border-transparent hover:border-border"),onClick:()=>{h(m.id),S("input"),f(!0)},children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(oa,{className:"h-3.5 w-3.5"}),new Date(m.timestamp).toLocaleString(),e.jsx(Qe,{variant:"outline",className:"ml-2 text-xs px-1.5 py-0 h-5",children:m.model})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-4 mt-1",children:[e.jsx("span",{className:"truncate text-sm font-medium text-primary/90 max-w-[180px] md:max-w-[220px]",title:m.inputText,children:m.inputText}),e.jsx("span",{className:"hidden md:inline text-muted-foreground",children:""}),e.jsx("span",{className:"truncate text-sm text-muted-foreground max-w-[180px] md:max-w-[220px]",title:m.translatedText,children:m.translatedText})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(je,{children:[e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(W,{variant:"outline",size:"sm",onClick:A=>{A.stopPropagation(),i(m)},className:"h-8",children:[e.jsx(fn,{className:"h-3.5 w-3.5 mr-1.5"}),"Reuse"]})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Load this translation again"})})]}),e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(W,{variant:"ghost",size:"icon",onClick:A=>{A.stopPropagation(),o(m.id)},className:"h-8 w-8 text-destructive",children:e.jsx(st,{className:"h-4 w-4"})})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Delete this entry"})})]})]})})]})},m.id))})}),e.jsx(dl,{open:x,onOpenChange:f,children:e.jsxs(fl,{className:"w-screen h-screen max-w-none max-h-none flex flex-col",children:[e.jsx(hl,{children:e.jsx(pl,{children:"Translation Details"})}),e.jsx("div",{className:"flex-1 px-4 pb-32 overflow-y-auto",children:e.jsxs(la,{value:d,onValueChange:m=>S(m),className:"w-full",children:[e.jsxs(ia,{className:"mb-4 w-full",children:[e.jsx(Gt,{value:"input",className:"flex-1",children:"Input Text"}),e.jsx(Gt,{value:"translated",className:"flex-1",children:"Translated Text"})]}),e.jsxs(qt,{value:"input",children:[e.jsxs($n,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(Kt,{className:"h-3 w-3 mr-1"}),"Input Text"]}),e.jsx(vt,{value:(p==null?void 0:p.inputText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]}),e.jsxs(qt,{value:"translated",children:[e.jsxs($n,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(Kt,{className:"h-3 w-3 mr-1"}),"Translated Text"]}),e.jsx(vt,{value:(p==null?void 0:p.translatedText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 w-full flex flex-col items-center bg-background/95 py-6 z-50 border-t gap-4",children:[e.jsxs(W,{variant:"outline",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:async()=>{const m=d==="input"?(p==null?void 0:p.inputText)||"":(p==null?void 0:p.translatedText)||"";m&&(await navigator.clipboard.writeText(m),se.success(`Copied ${d==="input"?"input text":"translated text"}`))},children:[e.jsx(Ts,{className:"h-5 w-5 mr-2"}),"Copy ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+C"})]}),p&&e.jsxs(W,{variant:"default",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>i(p),children:[e.jsx(fn,{className:"h-5 w-5 mr-2"}),"Reuse ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+V"})]}),p&&e.jsxs(W,{variant:"destructive",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>{f(!1),o(p.id)},children:[e.jsx(st,{className:"h-5 w-5 mr-2"}),"Delete ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Backspace"})]})]})]})})]})]})})]})})]}):null},gl=({text:t,className:n})=>{let a=hn(0),s=hn(0);const[l,r]=M.useState(""),[i,o]=M.useState(null);M.useEffect(()=>{if(i){const{width:h,height:x}=i.getBoundingClientRect(),f=h*x,d=Math.floor(f/36),S=ea(d);r(S)}},[i]);function c({currentTarget:h,clientX:x,clientY:f}){let{left:d,top:S}=h.getBoundingClientRect();a.set(x-d),s.set(f-S);const{width:v,height:j}=h.getBoundingClientRect(),p=v*j,m=Math.floor(p/36),A=ea(m);r(A)}return e.jsx("div",{className:ce("p-0.5 bg-transparent flex items-center justify-center w-full h-full relative",n),children:e.jsxs("div",{ref:o,onMouseMove:c,className:"group/card rounded w-full relative overflow-hidden bg-transparent flex items-center justify-center h-full",children:[e.jsx(wl,{mouseX:a,mouseY:s,randomString:l}),e.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:e.jsxs("div",{className:"relative h-full w-full max-w-[80%] max-h-[80%] rounded-full flex items-center justify-center text-white font-bold",children:[e.jsx("div",{className:"absolute w-full h-full bg-white/[0.8] dark:bg-black/[0.8] blur-sm rounded-full"}),e.jsx("span",{className:"dark:text-white text-black z-20 text-xl lg:text-3xl",children:t})]})})]})})};function wl({mouseX:t,mouseY:n,randomString:a}){let s=ar`radial-gradient(500px at ${t}px ${n}px, white, transparent)`,l={maskImage:s,WebkitMaskImage:s};return e.jsxs("div",{className:"pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0"}),e.jsx(Rn.div,{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-blue-700 opacity-0 group-hover/card:opacity-100 backdrop-blur-xl transition duration-500",style:l}),e.jsx(Rn.div,{className:"absolute inset-0 opacity-0 mix-blend-overlay  group-hover/card:opacity-100",style:l,children:e.jsx("p",{className:"absolute inset-x-0 text-4xl h-full break-words whitespace-pre-wrap text-white font-mono font-bold transition duration-500",children:a})})]})}const Qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ea=t=>{let n="";for(let a=0;a<t;a++)n+=Qn.charAt(Math.floor(Math.random()*Qn.length));return n},ta=32e3,vl=({inputText:t,setInputText:n,translatedText:a,isTranslating:s,error:l,isCopied:r,onTranslate:i,onCopy:o,selectedModel:c,onModelChange:h,models:x,selectedCollectionId:f,collections:d,onCollectionChange:S,isCollectionManagementVisible:v,onToggleCollectionManagement:j,arcrylicBg:p,modelDescriptions:m})=>{var ee;const[A,_]=M.useState(!0),k=t.length;return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 md:gap-8 min-h-[650px] w-full",children:[e.jsxs(He,{className:ce("flex-1 flex flex-col shadow-lg rounded-xl border-0 mb-6 lg:mb-0",p&&"arcrylic-blur"),children:[e.jsx(it,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ot,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:" Translate Text"}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(Qe,{variant:"outline",className:"px-2 sm:px-3 py-1 h-auto rounded-full text-sm sm:text-base bg-muted/40",children:[e.jsx(ds,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"truncate max-w-[100px] sm:max-w-none",children:c})]})}),e.jsxs(we,{side:"left",children:[e.jsx("p",{className:"text-xs",children:"Current translation model"}),m&&m[c]&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:m[c]})]})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(vt,{id:"inputText",placeholder:"Type or paste text to translate...",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] break-words break-all whitespace-pre-wrap",value:t,maxLength:ta,onChange:N=>n(N.target.value),"aria-label":"Input text to translate"}),e.jsxs("span",{className:"absolute bottom-2 right-4 text-xs text-muted-foreground/70",children:[k,"/",ta]}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(W,{variant:"ghost",size:"icon",onClick:()=>n(""),disabled:!t.trim()||s,className:"absolute top-2 right-2 rounded-full","aria-label":"Clear input",children:e.jsx(fn,{className:"h-5 w-5"})})}),e.jsx(we,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Clear input"})})]})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center w-full sm:w-auto",children:[e.jsxs(An,{value:c,onValueChange:h,children:[e.jsx(Pn,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Dn,{placeholder:"Model",children:e.jsx("span",{className:"truncate",children:c})})}),e.jsx(Mn,{className:"z-[100]",children:x.map(N=>e.jsx(In,{value:N,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"truncate",children:N}),m&&m[N]&&e.jsx("span",{className:"text-xs text-muted-foreground",children:m[N]})]})},N))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(An,{value:f,onValueChange:S,children:[e.jsx(Pn,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Dn,{placeholder:"Collection",children:e.jsx("span",{className:"truncate",children:((ee=d.find(N=>N.id===f))==null?void 0:ee.name)||"Collection"})})}),e.jsx(Mn,{className:"z-[100]",children:d.map(N=>e.jsx(In,{value:N.id,children:e.jsx("span",{className:"truncate",children:N.name})},N.id))})]}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(W,{variant:v?"default":"outline",size:"icon",onClick:()=>j(f),className:"h-8 w-8 rounded-full ml-1","aria-label":"Manage collections",children:e.jsx(us,{className:"h-3 w-3"})})}),e.jsx(we,{side:"top",children:e.jsx("p",{className:"text-xs",children:"Manage collections"})})]})})]})]}),e.jsx(W,{onClick:i,disabled:s||!t.trim(),className:"h-8 px-3 rounded-full shadow-sm text-sm w-full sm:w-auto",size:"default","aria-label":"Translate",children:s?e.jsxs(e.Fragment,{children:[e.jsx(ms,{className:"mr-2 h-3.5 w-3.5 animate-spin"})," Translating..."]}):e.jsxs(e.Fragment,{children:["Translate ",e.jsx(Ns,{className:"ml-2 h-3.5 w-3.5"})]})})]})]})]}),e.jsxs(He,{className:ce("flex-1 flex flex-col shadow-lg rounded-3xl border-0 relative",p&&"arcrylic-blur"),children:[e.jsx(it,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ot,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:" Translation"}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(W,{variant:"ghost",size:"icon",onClick:o,disabled:!a,className:"rounded-full","aria-label":"Copy translation",children:r?e.jsx(mn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}):e.jsx(Kt,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsx(we,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Copy translation"})})]})})]})}),l&&!l.includes("import")&&A&&e.jsx("div",{className:"mx-3 sm:mx-6 mt-3 sm:mt-4 mb-1 sm:mb-2",children:e.jsxs("div",{className:"flex items-center bg-destructive/10 border border-destructive/30 text-destructive rounded-lg px-3 sm:px-4 py-2 relative",children:[e.jsx(wn,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2 flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-xs sm:text-sm",children:l}),e.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 ml-1 sm:ml-2 text-destructive/70 hover:text-destructive p-0",onClick:()=>_(!1),"aria-label":"Dismiss error",children:""})]})}),e.jsx("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(vt,{id:"translatedText",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] break-words break-all whitespace-pre-wrap",value:s?"":a,readOnly:!0,placeholder:"Translation will appear here...","aria-label":"Translated text output"}),s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-xl z-10 min-h-[200px] sm:min-h-[300px] max-h-[calc(100vh-200px)]",children:e.jsx(gl,{text:"Translating...",className:"w-full h-full"})}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(W,{variant:"default",size:"icon",onClick:o,disabled:!a,className:"absolute bottom-3 right-3 rounded-full shadow-lg h-9 w-9 sm:h-10 sm:w-10","aria-label":"Copy translation",children:r?e.jsx(mn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"}):e.jsx(Kt,{className:"h-5 w-5 sm:h-6 sm:w-6"})})}),e.jsx(we,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Copy translation"})})]})})]})})]})]})},bl=({isVisible:t,settingsPanelRef:n,collections:a,collectionToEdit:s,setCollectionToEdit:l,editedCollectionName:r,setEditedCollectionName:i,addNewCollection:o,useCollection:c,renameCollection:h,requestDeleteCollection:x,showDeleteConfirmation:f,setShowDeleteConfirmation:d,confirmDeleteCollection:S,selectedCollectionId:v,error:j,setError:p,arcrylicBg:m})=>{const A=a.find(R=>R.id===s),[_,k]=M.useState(!1),[ee,N]=M.useState(""),g=M.useRef(null),[T,D]=M.useState(null),[Z,Y]=M.useState(""),B=M.useRef(null);C.useEffect(()=>{_&&g.current&&g.current.focus()},[_]),C.useEffect(()=>{T&&B.current&&B.current.focus()},[T]);const E=()=>{ee.trim()?(o(ee.trim()),N(""),k(!1)):(k(!1),N(""))},q=()=>{T&&Z.trim()&&(i(Z),l(T),h()),D(null)};return e.jsx("div",{ref:n,className:ce("overflow-hidden transition-all duration-300 ease-in-out",t?"h-auto sm:h-[400px] opacity-100 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700":"h-0 opacity-0 mb-0 pb-0 border-b-0"),tabIndex:-1,children:e.jsxs(He,{className:ce("h-full w-full bg-white/90 dark:bg-zinc-900/90 shadow-xl rounded-2xl p-0 flex flex-col sm:flex-row border border-gray-100 dark:border-zinc-800 transition-all duration-300 overflow-hidden",m&&"backdrop-blur-md"),children:[e.jsxs("aside",{className:"w-full sm:w-1/3 bg-muted/40 dark:bg-muted/20 p-3 sm:p-4 flex flex-col gap-2 border-b sm:border-b-0 sm:border-r border-gray-200 dark:border-gray-800 min-h-[200px] sm:min-h-[320px] max-h-[220px] sm:max-h-none overflow-x-auto overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Wt,{className:"h-5 w-5 text-primary"}),"Collections"]}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(W,{size:"icon",variant:"outline",onClick:()=>{k(!0),N("")},"aria-label":"Add new collection",children:e.jsx(bn,{className:"h-5 w-5"})})}),e.jsx(we,{children:"Add new collection"})]})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[_&&e.jsx("div",{className:"flex items-center gap-2 px-2 py-2 mb-1 rounded-lg bg-muted/30 dark:bg-muted/10",children:e.jsx(ke,{ref:g,value:ee,onChange:R=>N(R.target.value),onBlur:E,onKeyDown:R=>{R.key==="Enter"?E():R.key==="Escape"&&(k(!1),N(""))},placeholder:"Collection name",className:"flex-1 h-8 text-sm"})}),a.map(R=>e.jsxs("div",{className:ce("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer group transition-all",R.id===s?"bg-primary/10 dark:bg-primary/20 text-primary":"hover:bg-muted/60 dark:hover:bg-muted/30 text-gray-700 dark:text-gray-200"),onClick:()=>{l(R.id),i(R.name),p(null)},children:[e.jsx(Wt,{className:"h-4 w-4 mr-1 text-primary/70"}),T===R.id?e.jsx(ke,{ref:B,value:r,onChange:U=>i(U.target.value),onBlur:q,onKeyDown:U=>{U.key==="Enter"?q():U.key==="Escape"&&D(null)},onClick:U=>U.stopPropagation(),className:"flex-1 h-8 text-sm",autoFocus:!0}):e.jsxs("div",{className:"flex flex-1 items-center",children:[e.jsx("span",{className:"flex-1 truncate font-medium text-sm sm:text-base",children:R.name}),e.jsx(Ln,{className:"h-4 w-4 ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-primary transition-opacity cursor-pointer",onClick:U=>{U.stopPropagation(),l(R.id),i(R.name),D(R.id),Y(R.name)}})]}),R.id===v&&e.jsx(mn,{className:"h-4 w-4 text-green-500 ml-1"}),R.id===s&&T!==R.id&&e.jsx("span",{className:"ml-2 text-xs font-semibold",children:"Editing"})]},R.id))]})]}),e.jsxs("section",{className:"flex-1 p-3 sm:p-6 flex flex-col gap-4 sm:gap-6",children:[s&&A&&e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 max-w-full sm:max-w-lg mx-auto w-full",children:[e.jsx("div",{className:"flex flex-col xs:flex-row items-start xs:items-center gap-2 xs:gap-3 mb-2",children:e.jsxs("div",{className:"flex items-center gap-2 flex-1 w-full",children:[e.jsx(Wt,{className:"h-6 w-6 text-primary/80"}),e.jsx("h4",{className:"text-lg sm:text-xl font-bold flex-1 truncate",children:A.name})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[e.jsx(ke,{value:r,onChange:R=>i(R.target.value),placeholder:"Rename collection",className:"flex-1 h-10"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(W,{size:"icon",variant:"secondary",onClick:h,disabled:!r.trim(),className:"h-10 w-10","aria-label":"Save collection name",children:e.jsx(Ln,{className:"h-4 w-4"})}),e.jsx(W,{size:"icon",variant:"destructive",onClick:()=>{a.length>1?x(s):p("You must have at least one collection")},disabled:a.length<=1,className:"h-10 w-10","aria-label":"Delete collection",children:e.jsx(st,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex gap-2 mt-2",children:e.jsx(W,{variant:"default",onClick:()=>c(s),className:"flex-1",children:"Use This Collection"})})]}),j&&e.jsxs("div",{className:"text-red-500 text-xs sm:text-sm mt-2 font-medium flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),j]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 px-2",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 sm:p-8 max-w-xs sm:max-w-md w-full mx-2 shadow-2xl border border-gray-200 dark:border-zinc-800 animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(st,{className:"h-6 w-6 text-destructive"})," Confirm Deletion"]}),e.jsx("p",{className:"mb-2 text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:"Are you sure you want to delete this collection?"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3 flex-col sm:flex-row",children:[e.jsx(W,{variant:"outline",onClick:()=>d(!1),className:"min-w-[90px]",children:"Cancel"}),e.jsx(W,{variant:"destructive",onClick:S,className:"min-w-[90px]",children:"Delete"})]})]})})]})})},yl=({mappingTable:t,updateMappingEntry:n,removeMappingEntry:a,addMappingEntry:s,showImportArea:l,toggleImportArea:r,mappingMarkdown:i,setMappingMarkdown:o,revertImport:c,showRevertButton:h,exportMarkdownTable:x,importMarkdownTable:f,error:d,arcrylicBg:S})=>e.jsxs(He,{className:ce("border-border/60",S&&"arcrylic-blur"),children:[e.jsx(it,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(ot,{className:"text-xl flex items-center",children:[e.jsx(er,{className:"h-5 w-5 mr-2 text-primary"}),"Mapping Table"]}),e.jsx(ra,{className:"text-sm text-muted-foreground mt-1",children:"Manage term mappings and transcriptions"})]}),e.jsxs(Qe,{variant:"outline",className:"h-6",children:[t.length," ",t.length===1?"Entry":"Entries"]})]})}),e.jsx(zt,{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(W,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add New Term"]})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Add a new term mapping entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(W,{variant:l?"default":"outline",onClick:r,size:"sm",className:"h-9",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(da,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Import or export mapping data as markdown"})})]})}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(W,{variant:"outline",onClick:()=>{o(`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
|:----------- |:------------- |:------------------------- |:------------------ |:------ |
|  | Chuyn l th ny | Phrase | | Opening phrase |
|  | Gn y | Time | | |
|  | S huynh | Title/Relationship | Male | Elder martial brother |
|  | Thc ra | Adverb | | |`),l||r()},size:"sm",className:"h-9",children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Load a sample mapping table"})})]})})]})]}),e.jsx("div",{className:ce("overflow-hidden transition-all duration-300 ease-in-out",l?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs(He,{className:"border-dashed",children:[e.jsx(it,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(ot,{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[h&&e.jsxs(W,{variant:"destructive",size:"sm",onClick:c,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(vn,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(W,{variant:"outline",size:"sm",onClick:x,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(ca,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(W,{variant:"outline",size:"sm",onClick:f,className:"text-xs h-8",children:[e.jsx(sa,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs(zt,{className:"py-2",children:[e.jsx(vt,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:i,onChange:v=>o(v.target.value)}),d&&d.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(wn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:d})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Term / Name"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Transcription"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Gender"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Gs,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No terms added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((v,j)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.term,onChange:p=>n(j,"term",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Term or name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.transcription,onChange:p=>n(j,"transcription",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Transcription"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.type,onChange:p=>n(j,"type",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.gender,onChange:p=>n(j,"gender",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Gender"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.notes,onChange:p=>n(j,"notes",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(W,{variant:"destructive",size:"sm",onClick:()=>a(j),className:"w-full h-8",children:[e.jsx(st,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Delete this mapping entry"})})]})})})]},j))})]})})]})})]}),jl=({relationshipsTable:t,updateRelationshipEntry:n,removeRelationshipEntry:a,addRelationshipEntry:s,showImportArea:l,toggleImportArea:r,relationshipsMarkdown:i,setRelationshipsMarkdown:o,revertImport:c,showRevertButton:h,exportMarkdownTable:x,importMarkdownTable:f,error:d,arcrylicBg:S})=>e.jsxs(He,{className:ce("border-border/60",S&&"arcrylic-blur"),children:[e.jsx(it,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(ot,{className:"text-xl flex items-center",children:[e.jsx(_n,{className:"h-5 w-5 mr-2 text-primary"}),"Relationships Table"]}),e.jsx(ra,{className:"text-sm text-muted-foreground mt-1",children:"Manage character relationships and address terms"})]}),e.jsxs(Qe,{variant:"outline",className:"h-6",children:[t.length," ",t.length===1?"Entry":"Entries"]})]})}),e.jsx(zt,{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(W,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add New Relationship"]})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Add a new character relationship entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(W,{variant:l?"default":"outline",onClick:r,size:"sm",className:"h-9",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(da,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Import or export relationship data as markdown"})})]})}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(W,{variant:"outline",onClick:()=>{o(`| Character A | Character B | Relationship | Address Terms (AB) | Address Terms (BA) | Notes |
|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
| Vu Thin Thu | Triu Khng Minh | Adoptive Younger Sister -> Elder Brother | Huynh trng, S huynh | Ngi | Formal/Respectful |
| Lm Linh Dao | Vu Thin Thu | Female Lead 2 -> Female Lead 1 | Dao t t, Mui | Thin Thu | Relationship strained |`),l||r()},size:"sm",className:"h-9",children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Load a sample relationship table"})})]})})]})]}),e.jsx("div",{className:ce("overflow-hidden transition-all duration-300 ease-in-out",l?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs(He,{className:"border-dashed",children:[e.jsx(it,{className:"py-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(ot,{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[h&&e.jsxs(W,{variant:"destructive",size:"sm",onClick:c,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(vn,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(W,{variant:"outline",size:"sm",onClick:x,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(ca,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(W,{variant:"outline",size:"sm",onClick:f,className:"text-xs h-8",children:[e.jsx(sa,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs(zt,{className:"py-2",children:[e.jsx(vt,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:i,onChange:v=>o(v.target.value)}),d&&d.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(wn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:d})]})]})]})}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character A"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character B"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Relationship"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (AB)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (BA)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(_n,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No relationships added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((v,j)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.characterA,onChange:p=>n(j,"characterA",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.characterB,onChange:p=>n(j,"characterB",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.relationship,onChange:p=>n(j,"relationship",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Relationship type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.addressTermsAToB,onChange:p=>n(j,"addressTermsAToB",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How A addresses B"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.addressTermsBToA,onChange:p=>n(j,"addressTermsBToA",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How B addresses A"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(ke,{value:v.notes,onChange:p=>n(j,"notes",p.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(W,{variant:"destructive",size:"sm",onClick:()=>a(j),className:"w-full h-8",children:[e.jsx(st,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Delete this relationship entry"})})]})})})]},j))})]})})]})})]}),Nl=({showTableUpdates:t,isTableUpdatesAnimating:n,arcrylicBg:a,pendingTableUpdates:s,expandedEntries:l,toggleEntryExpansion:r,setShowTableUpdates:i,setCurrentUpdateEntry:o,setShowUpdateConfirmation:c})=>t?e.jsxs(He,{className:ce("fixed bottom-20 right-6 w-96 max-w-[calc(100vw-3rem)] z-[9998] shadow-lg transition-all duration-300 ease-in-out rounded-xl border-border/40",n?"translate-y-4 opacity-0":"translate-y-0 opacity-100",a&&"arcrylic-blur"),children:[e.jsxs(it,{className:"p-4 pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{className:"text-base font-medium",children:"Table Updates"}),e.jsx(Qe,{variant:"outline",className:"ml-2 text-xs",children:s.length})]}),e.jsx(W,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"h-8 w-8 rounded-full",children:e.jsx(Jt,{className:"h-4 w-4"})})]}),e.jsx(zt,{className:"p-3",children:e.jsx(kt,{className:"max-h-[60vh] pr-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-3",children:s.length>0?s.map(h=>e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-muted/30 p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:h.type==="mapping"?"Mapping Table":"Relationships Table"}),e.jsx(Qe,{variant:h.status==="pending"?"outline":h.status==="approved"?"secondary":"destructive",className:"ml-2 text-xs px-1.5",children:h.status})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(oa,{className:"h-3 w-3 mr-1"}),new Date(h.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:()=>r(h.id),children:l.has(h.id)?e.jsx(ps,{className:"h-4 w-4"}):e.jsx(xs,{className:"h-4 w-4"})}),e.jsx(je,{children:e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(W,{variant:"outline",size:"sm",className:"h-8",onClick:()=>{o(h),c(!0)},children:"Review"})}),e.jsx(we,{children:e.jsx("p",{className:"text-xs",children:"Review and approve/reject changes"})})]})})]})]}),l.has(h.id)&&e.jsxs("div",{className:"p-3 space-y-3 bg-background",children:[h.updates.added.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(Ds,{className:"h-3.5 w-3.5 mr-1 text-emerald-500"}),"Added Entries"]}),e.jsx(Qe,{variant:"outline",className:"text-xs px-1.5 h-5",children:h.updates.added.length})]}),e.jsx(kt,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:h.updates.added.map((x,f)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:h.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:x.term}),e.jsxs("span",{className:"text-muted-foreground",children:[" ",x.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:x.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:[" ",x.characterB]})]})},f))})})]}),h.updates.updated.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(As,{className:"h-3.5 w-3.5 mr-1 text-blue-500"}),"Updated Entries"]}),e.jsx(Qe,{variant:"outline",className:"text-xs px-1.5 h-5",children:h.updates.updated.length})]}),e.jsx(kt,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:h.updates.updated.map((x,f)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:h.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:x.term}),e.jsxs("span",{className:"text-muted-foreground",children:[" ",x.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:x.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:[" ",x.characterB]})]})},f))})})]})]})]},h.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[e.jsx(Is,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending updates"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates will appear here when available"})]})})})})]}):null,Cl=t=>!t||typeof t!="object"?(console.warn("Invalid mapping entry:",t),null):{term:String(t.term||""),transcription:String(t.transcription||""),type:String(t.type||""),gender:String(t.gender||""),notes:String(t.notes||"")},Sl=t=>!t||typeof t!="object"?(console.warn("Invalid relationship entry:",t),null):{characterA:String(t.characterA||""),characterB:String(t.characterB||""),relationship:String(t.relationship||""),addressTermsAToB:String(t.addressTermsAToB||""),addressTermsBToA:String(t.addressTermsBToA||""),notes:String(t.notes||"")},na=(t,n,a,s)=>{if(!Array.isArray(n))return console.error("Invalid entries format:",n),{newTable:t,updatedCount:0,added:[],updated:[]};const l=[...t];let r=0;const i=[],o=[];return n.forEach(c=>{const h=a(c);if(h){const x=s(l,h);x>=0?(l[x]=h,o.push(h)):(l.push(h),i.push(h)),r++}}),{newTable:l,updatedCount:r,added:i,updated:o}},Hl=()=>{var zn;const t=fs(),[n,a]=M.useState(""),[s,l]=M.useState(""),[r,i]=M.useState(!1),[o,c]=M.useState(null),[h,x]=M.useState(!1),[f,d]=M.useState([]),[S,v]=M.useState(!1),[,j]=M.useState(!0),[p,m]=M.useState("gemini-2.0-flash-exp"),A=["gemini-2.0-flash-exp","gemini-2.0-flash-exp-image-generation","gemini-2.0-flash-thinking-exp-01-21","gemini-2.5-pro-exp-03-25"],_={"gemini-2.0-flash-exp":"Recommended","gemini-2.0-flash-exp-image-generation":"Image Generation","gemini-2.0-flash-thinking-exp-01-21":"No support for function calling","gemini-2.5-pro-exp-03-25":"Pro but Stupid (Super slow)"},[k,ee]=M.useState(null),[N,g]=M.useState([]),[T,D]=M.useState(""),[Z,Y]=M.useState(!1),[B,E]=M.useState(""),[q,R]=M.useState(""),[U,re]=M.useState(""),[fe,ve]=M.useState(!1),[ze,et]=M.useState("mapping"),[le,b]=M.useState([]),[P,L]=M.useState([]),[O,I]=M.useState(""),[V,Q]=M.useState(""),[te,de]=M.useState(!1),[Ne,ae]=M.useState([]),[$,Me]=M.useState([]),[Be,Ie]=M.useState(!1),[he,We]=M.useState(!1),[Oe,$e]=M.useState([]),[dt,Le]=M.useState(!1),[Ee,ut]=M.useState(null),[nn,Dt]=M.useState(!1),Ge=C.useRef(null),yt=M.useRef(null),[Mt,an]=M.useState(new Set),tt=u=>{an(y=>{const z=new Set(y);return z.has(u)?z.delete(u):z.add(u),z})};M.useEffect(()=>{(async()=>{try{const y=await Bt("apiKey"),z=await Bt("translateModel"),w=await Bt("translationCollections"),F=await Bt("translationHistory");if(y&&ee(y),z&&m(z),F&&d(F),w&&w.length>0)g(w),D(w[0].id),b(w[0].mappingTable),L(w[0].relationshipsTable);else{const K={id:Date.now().toString(),name:"Default Collection",mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]};g([K]),D(K.id)}}catch(y){console.error("Error loading settings:",y)}})()},[]),M.useEffect(()=>{T&&!B&&E(T)},[T,B]);const It=async u=>{m(u),await Ve("translateModel",u)},sn=(u,y)=>{try{const z=u.trim().split(`
`);if(z.length<3)return[];const w=z.slice(2);return y?w.map(F=>{const K=F.split("|").filter((Ce,Ye,Je)=>Ye!==0&&Ye!==Je.length-1||Ce.trim()!=="").map(Ce=>Ce.trim());if(K.length<5)for(console.warn("Row has fewer than expected columns:",F);K.length<5;)K.push("");return{term:K[0]||"",transcription:K[1]||"",type:K[2]||"",gender:K[3]||"",notes:K[4]||""}}):w.map(F=>{const K=F.split("|").filter((Ce,Ye,Je)=>Ye!==0&&Ye!==Je.length-1||Ce.trim()!=="").map(Ce=>Ce.trim());if(K.length<6)for(console.warn("Row has fewer than expected columns:",F);K.length<6;)K.push("");return{characterA:K[0]||"",characterB:K[1]||"",relationship:K[2]||"",addressTermsAToB:K[3]||"",addressTermsBToA:K[4]||"",notes:K[5]||""}})}catch(z){return console.error("Error parsing markdown table:",z),[]}},qe=(u,y)=>{if(u.length===0)return"";let z="";return y?(z=`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
`,z+=`|:----------- |:------------- |:------------------------- |:------------------ |:------ |
`,u.forEach(w=>{z+=`| ${w.term} | ${w.transcription} | ${w.type} | ${w.gender} | ${w.notes} |
`})):(z=`| Character A | Character B | Relationship | Address Terms (AB) | Address Terms (BA) | Notes |
`,z+=`|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
`,u.forEach(w=>{z+=`| ${w.characterA} | ${w.characterB} | ${w.relationship} | ${w.addressTermsAToB} | ${w.addressTermsBToA} | ${w.notes} |
`})),z},$t=(u,y)=>{try{if(!u.trim()){se.error("Please enter a markdown table to import"),c("Please enter a markdown table to import");return}if(!u.includes("|")){se.error("Invalid table format. Table must contain pipe characters (|)"),c("Import failed: Invalid table format. Table must contain pipe characters (|)");return}const z=u.trim().split(`
`);if(z.length<3){se.error("Table must contain at least 3 lines (header, separator, and data row)"),c("Import failed: Table must contain at least 3 lines (header, separator, and data row)");return}const w=z[1];if(!w.includes("|")||!w.includes("-")){se.error("Second line must be a separator with pipes (|) and dashes (-)"),c("Import failed: Second line must be a separator with pipes (|) and dashes (-)");return}const F=sn(u,y);if(F.length===0){se.error("No valid data rows found in the table"),c("Import failed: No valid data rows found in the table");return}c(null),y?(ae(le),b(F)):(Me(P),L(F)),Re(y,F),Ie(!0),setTimeout(()=>{Ie(!1)},6e4),se.success(`${y?"Mapping":"Relationships"} table imported successfully`)}catch(z){console.error("Error importing markdown table:",z),se.error(`Import failed: ${z instanceof Error?z.message:"Unknown error"}`),c(`Import failed: ${z instanceof Error?z.message:"Unknown error"}`)}},Lt=u=>{u?(b(Ne),Re(!0,Ne),ae([])):(L($),Re(!1,$),Me([])),Ie(!1),se.success(`${u?"Mapping":"Relationships"} table reverted to previous state`)},Re=async(u,y)=>{if(!T)return;const z=N.map(w=>w.id===T?{...w,mappingTable:u?y:w.mappingTable,relationshipsTable:u?w.relationshipsTable:y}:w);g(z),await Ve("translationCollections",z)},H=u=>{const y=qe(u?le:P,u);u?I(y):Q(y),de(!0)},X=u=>{if(u===T)return;ne();const y=N.find(z=>z.id===u);y&&(D(u),b(y.mappingTable),L(y.relationshipsTable))},ne=()=>{if(!T)return;const u=N.map(y=>y.id===T?{...y,mappingTable:le,relationshipsTable:P}:y);g(u),Ve("translationCollections",u)},J=u=>{if(!u.trim()){se.error("Please enter a name for the new collection"),c("Please enter a name for the new collection");return}ne();const y={id:Date.now().toString(),name:u,mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]},z=[...N,y];g(z),D(y.id),b([]),L([]),Ve("translationCollections",z),se.success(`Collection "${u}" created`)},ie=u=>{if(N.length<=1){se.error("You must have at least one collection"),c("You must have at least one collection");return}const y=N.find(w=>w.id===u);if(!y)return;const z=N.filter(w=>w.id!==u);if(u===T&&z.length>0){const w=z[0];D(w.id),b(w.mappingTable),L(w.relationshipsTable)}g(z),Ve("translationCollections",z).then(()=>{se.success(`Collection "${y.name}" deleted`)}).catch(w=>{console.error("Failed to save collections after deletion:",w),se.error("Failed to delete collection")}),u===B&&(E(""),R(""))},be=()=>{de(!te),te||(ze==="mapping"?I(qe(le,!0)):Q(qe(P,!1)))},ye=u=>{a(u.inputText),l(""),m(u.model),X(u.collectionId),v(!1),se.info("Previous translation loaded")},Ue=async()=>{d([]),await Ve("translationHistory",[]),se.success("Translation history cleared")},Ae=async u=>{const y=N.find(F=>F.id===T);if(!y)return;const w=[{id:Date.now().toString(),timestamp:Date.now(),inputText:n,translatedText:u,model:p,collectionId:T,collectionName:y.name},...f].slice(0,50);d(w),await Ve("translationHistory",w)},Ke=async()=>{if(!n.trim()){se.error("Please enter text to translate"),c("Please enter text to translate");return}ne(),i(!0),c(null),se.promise(async()=>{try{const u=qe(le,!0),y=qe(P,!1),z=await gs(n,u,y,k||"default-key",p,{onMappingTableUpdate:w=>{console.log("Received entries mapping table:",w);try{const{updatedCount:F,added:K,updated:Ce}=na(le,w,Cl,(Ye,Je)=>Ye.findIndex(Ht=>Ht.term===Je.term));F>0&&Tn("mapping",K,Ce)}catch(F){console.error("Error updating mapping table:",F),se.error("Failed to update mapping table")}},onRelationshipsTableUpdate:w=>{console.log("Received entries relationships table:",w);try{const{updatedCount:F,added:K,updated:Ce}=na(P,w,Sl,(Ye,Je)=>Ye.findIndex(Ht=>Ht.characterA===Je.characterA&&Ht.characterB===Je.characterB));F>0&&Tn("relationships",K,Ce)}catch(F){console.error("Error updating relationships table:",F),se.error("Failed to update relationships table")}}});if(z.hasError)throw c(z.thinking||"Translation failed. Please try again."),new Error(z.thinking||"Translation failed");{const w=z.ocrText||"";return l(w),await Ae(w),w}}catch(u){throw console.error("Translation error:",u),c("An error occurred during translation. Please try again."),u}finally{i(!1)}},{loading:"Translating text...",success:"Translation completed successfully",error:u=>`Translation failed: ${u instanceof Error?u.message:"Unknown error"}`})},Fe=()=>{navigator.clipboard.writeText(s),x(!0),se.success("Copied to clipboard"),setTimeout(()=>x(!1),2e3)},De=()=>{const u={term:"",transcription:"",type:"",gender:"",notes:""},y=[...le,u];b(y),Re(!0,y)},mt=(u,y,z)=>{const w=[...le];w[u]={...w[u],[y]:z},b(w),Re(!0,w)},_t=u=>{const y=le.filter((z,w)=>w!==u);b(y),Re(!0,y)},qa=()=>{const u={characterA:"",characterB:"",relationship:"",addressTermsAToB:"",addressTermsBToA:"",notes:""},y=[...P,u];L(y),Re(!1,y)},Ka=(u,y,z)=>{const w=[...P];w[u]={...w[u],[y]:z},L(w),Re(!1,w)},Ya=u=>{const y=P.filter((z,w)=>w!==u);L(y),Re(!1,y)};M.useEffect(()=>{const u=()=>{window.scrollY>200?j(!0):j(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const Xa=()=>{if(console.log("Scrolling to top attempt"),Ge.current){Ge.current.scrollIntoView({behavior:"smooth"}),console.log("Used scrollIntoView");return}try{window.scroll({top:0,left:0,behavior:"smooth"}),console.log("Used window.scroll")}catch{window.scrollTo(0,0),console.log("Used fallback scrollTo")}},Ja=()=>{a(""),l(""),c(null),se.info("Text cleared")},Za=()=>{if(!B||!q.trim())return;const u=N.map(y=>y.id===B?{...y,name:q.trim()}:y);g(u),Ve("translationCollections",u),se.success(`Collection renamed to "${q}"`)},Qa=u=>{const y=!Z;if(Y(y),y){const z=N.find(w=>w.id===u);z&&(E(u),R(z.name))}};M.useEffect(()=>{Z&&yt.current&&setTimeout(()=>{var u;(u=yt.current)==null||u.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[Z]);const es=()=>{Y(!1),E(""),R(""),re(""),ve(!1),setTimeout(()=>{var u;(u=Ge.current)==null||u.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},ts=u=>{console.log("Delete confirmation requested for collection:",u),re(u),setTimeout(()=>{ve(!0),console.log("showDeleteConfirmation set to true")},0)},ns=()=>{if(console.log("Confirming deletion of collection:",U),!!U)try{ie(U),ve(!1),re("")}catch(u){console.error("Error deleting collection:",u),se.error("Failed to delete collection")}},as=u=>{X(u),es()};M.useEffect(()=>{if(B){const u=N.find(y=>y.id===B);u&&R(u.name)}},[B,N]);const Tn=(u,y,z)=>{const w={id:Date.now().toString(),timestamp:Date.now(),type:u,updates:{added:y,updated:z},status:"pending"};$e(F=>[...F,w]),We(!0),Dt(!0),setTimeout(()=>Dt(!1),300),se.info("New table update available for review",{description:`${y.length} new entries and ${z.length} updated entries`,action:{label:"Review",onClick:()=>We(!0)}})},kn=async(u,y)=>{try{if(y)if(u.type==="mapping"){const w=[...le];u.updates.added.forEach(F=>w.push(F)),u.updates.updated.forEach(F=>{const K=w.findIndex(Ce=>Ce.term===F.term);K>=0&&(w[K]=F)}),b(w),await Re(!0,w)}else{const w=[...P];u.updates.added.forEach(F=>w.push(F)),u.updates.updated.forEach(F=>{const K=w.findIndex(Ce=>Ce.characterA===F.characterA&&Ce.characterB===F.characterB);K>=0&&(w[K]=F)}),L(w),await Re(!1,w)}const z=N.map(w=>{if(w.id===T){const F=[...w.tableUpdateHistory||[]],K={...u,status:y?"approved":"rejected"};return F.push(K),{...w,tableUpdateHistory:F,mappingTable:y&&u.type==="mapping"?le:w.mappingTable,relationshipsTable:y&&u.type==="relationships"?P:w.relationshipsTable}}return w});g(z),await Ve("translationCollections",z),$e(w=>{const F=w.filter(K=>K.id!==u.id);return F.length===0&&We(!1),F}),Le(!1),ut(null),se.success(`Table update ${y?"approved":"rejected"} successfully`)}catch(z){console.error("Error handling update confirmation:",z),se.error(`Failed to ${y?"approve":"reject"} update`)}};return M.useEffect(()=>{if(N.length===0){D(""),b([]),L([]);return}N.find(y=>y.id===T)||(D(N[0].id),b(N[0].mappingTable),L(N[0].relationshipsTable))},[N,T]),e.jsxs("div",{className:"container mx-auto p-4 flex flex-col gap-6 pb-10 relative",children:[e.jsx("div",{ref:Ge,className:"absolute top-0"}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Text Translator"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(W,{variant:"outline",onClick:()=>v(!S),"aria-label":"Show translation history",children:[e.jsx(ua,{className:"h-5 w-5 mr-2"}),"History"]}),e.jsxs(W,{variant:"outline",onClick:Ja,"aria-label":"Clear all text",children:[e.jsx(Fs,{className:"h-5 w-5 mr-2"}),"Clear"]})]})]}),e.jsx(Cs,{open:S,onOpenChange:v,children:e.jsx(Ss,{className:"max-w-5xl w-full h-[90vh] flex flex-col",children:e.jsx(xl,{show:!0,history:f,collections:N,selectedCollectionId:T,onSelectCollection:X,onClear:Ue,onUseAgain:ye,arcrylicBg:t,onRemoveEntry:async u=>{const y=f.filter(z=>z.id!==u);d(y),await Ve("translationHistory",y)}})})}),e.jsx(vl,{inputText:n,setInputText:a,translatedText:s,isTranslating:r,error:o,isCopied:h,onTranslate:Ke,onCopy:Fe,selectedModel:p,onModelChange:It,models:A,selectedCollectionId:T,collections:N,onCollectionChange:X,isCollectionManagementVisible:Z,onToggleCollectionManagement:Qa,arcrylicBg:t,modelDescriptions:_}),e.jsxs(He,{className:ce("p-6",t&&"arcrylic-blur"),children:[e.jsx(bl,{isVisible:Z,settingsPanelRef:yt,collections:N,collectionToEdit:B,setCollectionToEdit:E,editedCollectionName:q,setEditedCollectionName:R,addNewCollection:J,useCollection:as,renameCollection:Za,requestDeleteCollection:ts,showDeleteConfirmation:fe,setShowDeleteConfirmation:ve,confirmDeleteCollection:ns,collectionToDelete:U,selectedCollectionId:T,error:o,setError:c,arcrylicBg:t}),e.jsxs(la,{defaultValue:ze,onValueChange:u=>{et(u),te&&(u==="mapping"?I(qe(le,!0)):Q(qe(P,!1)))},className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold",children:["Translation Mapping Tables",T&&e.jsxs("span",{className:"text-base sm:text-lg font-medium ml-2 text-muted-foreground",children:["-"," ",((zn=N.find(u=>u.id===T))==null?void 0:zn.name)||""]})]}),e.jsxs(ia,{className:"w-full sm:w-auto mt-2 sm:mt-0",children:[e.jsx(Gt,{value:"mapping",className:"text-xs sm:text-sm px-2 sm:px-4 flex-1 sm:flex-initial",children:"Mapping Table"}),e.jsx(Gt,{value:"relationships",className:"text-xs sm:text-sm px-2 sm:px-4 flex-1 sm:flex-initial",children:"Relationships Table"})]})]}),e.jsx(qt,{value:"mapping",className:"mt-4",children:e.jsx(yl,{mappingTable:le,updateMappingEntry:mt,removeMappingEntry:_t,addMappingEntry:De,showImportArea:te,toggleImportArea:be,mappingMarkdown:O,setMappingMarkdown:I,revertImport:()=>Lt(!0),showRevertButton:Be,exportMarkdownTable:()=>H(!0),importMarkdownTable:()=>$t(O,!0),error:o,arcrylicBg:t})}),e.jsx(qt,{value:"relationships",className:"mt-4",children:e.jsx(jl,{relationshipsTable:P,updateRelationshipEntry:Ka,removeRelationshipEntry:Ya,addRelationshipEntry:qa,showImportArea:te,toggleImportArea:be,relationshipsMarkdown:V,setRelationshipsMarkdown:Q,revertImport:()=>Lt(!1),showRevertButton:Be,exportMarkdownTable:()=>H(!1),importMarkdownTable:()=>$t(V,!1),error:o,arcrylicBg:t})})]})]}),e.jsx(W,{variant:"default",size:"lg",className:"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-[9999] w-12 h-12 p-0",onClick:()=>{console.log("Button clicked"),Xa()},"aria-label":"Scroll to top",children:e.jsx(vn,{className:"h-6 w-6"})}),he&&e.jsx(Nl,{showTableUpdates:he,isTableUpdatesAnimating:nn,arcrylicBg:t,pendingTableUpdates:Oe,expandedEntries:Mt,toggleEntryExpansion:tt,setShowTableUpdates:We,setCurrentUpdateEntry:ut,setShowUpdateConfirmation:Le}),dt&&Ee&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:e.jsx(He,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Confirm Table Update"}),e.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{Le(!1),ut(null)},className:"h-8 w-8 p-0",children:e.jsx(Jt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Added Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:Ee.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:Ee.updates.added.map((u,y)=>e.jsx("tr",{className:"border-t",children:Ee.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.term}),e.jsx("td",{className:"p-2",children:u.transcription}),e.jsx("td",{className:"p-2",children:u.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.characterA}),e.jsx("td",{className:"p-2",children:u.characterB}),e.jsx("td",{className:"p-2",children:u.relationship})]})},y))})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Updated Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:Ee.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:Ee.updates.updated.map((u,y)=>e.jsx("tr",{className:"border-t",children:Ee.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.term}),e.jsx("td",{className:"p-2",children:u.transcription}),e.jsx("td",{className:"p-2",children:u.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:u.characterA}),e.jsx("td",{className:"p-2",children:u.characterB}),e.jsx("td",{className:"p-2",children:u.relationship})]})},y))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(W,{variant:"outline",onClick:()=>{Ee&&kn(Ee,!1)},children:"Reject"}),e.jsx(W,{variant:"default",onClick:()=>{Ee&&kn(Ee,!0)},children:"Approve"})]})]})]})})})]})};export{Hl as default};
