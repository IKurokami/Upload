import{c as E,j as e,r,u as ee,a as se,B as D,L as te,b as ae}from"./index-Cz86IOoN.js";import{C as re,b as ne,c as le,a as ce,d as ie}from"./card-BMsBtpFU.js";import{T as I,a as M,b as k,c as N,C as oe}from"./tabs-_MCBN57U.js";import{g as de,u as me,i as ue}from"./db-DlckYzqb.js";import{B as he,U as xe}from"./badge-wf1XET94.js";import{I as L,u as pe,c as ge,P as q,a as H,b as fe}from"./index-BSZKq4qH.js";import{L as F,a as be}from"./label-BzbWCj5o.js";import{T as je,S as ve,A as O,a as K,b as X,c as A,d as $,e as B,f as V}from"./tooltip-Bi1G5Wpm.js";import{u as ke,E as Ne}from"./index-Br6utAWM.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Ce=E("Code",ye);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Se=E("FileDown",we);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Te=E("ImagePlus",Ee);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Le=E("ListChecks",Pe),Fe=({albumName:s,setAlbumName:t,chapterNumber:a,setChapterNumber:c,customFileName:n,setCustomFileName:l,namingMethod:m,setNamingMethod:o,getFileName:h})=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"File Naming"}),e.jsxs(I,{value:m,onValueChange:o,className:"mb-4",children:[e.jsxs(M,{className:"grid grid-cols-2 w-full",children:[e.jsx(k,{value:"chapter",children:"Chapter + Album"}),e.jsx(k,{value:"custom",children:"Custom Name"})]}),e.jsx(N,{value:"chapter",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(F,{className:"my-2",htmlFor:"chapterNumber",children:"Chapter Number"}),e.jsx(L,{id:"chapterNumber",value:a,onChange:i=>c(i.target.value),placeholder:"Enter chapter number"})]}),e.jsxs("div",{children:[e.jsx(F,{className:"my-2",htmlFor:"albumName",children:"Album Name"}),e.jsx(L,{id:"albumName",value:s,onChange:i=>t(i.target.value),placeholder:"Enter album name"})]})]})}),e.jsx(N,{value:"custom",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(F,{className:"my-2",htmlFor:"customFileName",children:"File Name"}),e.jsx(L,{id:"customFileName",value:n,onChange:i=>l(i.target.value),placeholder:"Enter file name"})]})})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["File will be named as:"," ",e.jsx(he,{variant:"secondary",children:h()})]})]});function Ie(s){const t=r.useRef({value:s,previous:s});return r.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var R="Checkbox",[Me,We]=ge(R),[Re,ze]=Me(R),Z=r.forwardRef((s,t)=>{const{__scopeCheckbox:a,name:c,checked:n,defaultChecked:l,required:m,disabled:o,value:h="on",onCheckedChange:i,form:u,...j}=s,[x,v]=r.useState(null),y=ee(t,d=>v(d)),C=r.useRef(!1),w=x?u||!!x.closest("form"):!0,[p=!1,g]=pe({prop:n,defaultProp:l,onChange:i}),T=r.useRef(p);return r.useEffect(()=>{const d=x==null?void 0:x.form;if(d){const f=()=>g(T.current);return d.addEventListener("reset",f),()=>d.removeEventListener("reset",f)}},[x,g]),e.jsxs(Re,{scope:a,state:p,disabled:o,children:[e.jsx(q.button,{type:"button",role:"checkbox","aria-checked":b(p)?"mixed":p,"aria-required":m,"data-state":Q(p),"data-disabled":o?"":void 0,disabled:o,value:h,...j,ref:y,onKeyDown:H(s.onKeyDown,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:H(s.onClick,d=>{g(f=>b(f)?!0:!f),w&&(C.current=d.isPropagationStopped(),C.current||d.stopPropagation())})}),w&&e.jsx(_e,{control:x,bubbles:!C.current,name:c,value:h,checked:p,required:m,disabled:o,form:u,style:{transform:"translateX(-100%)"},defaultChecked:b(l)?!1:l})]})});Z.displayName=R;var G="CheckboxIndicator",J=r.forwardRef((s,t)=>{const{__scopeCheckbox:a,forceMount:c,...n}=s,l=ze(G,a);return e.jsx(fe,{present:c||b(l.state)||l.state===!0,children:e.jsx(q.span,{"data-state":Q(l.state),"data-disabled":l.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...s.style}})})});J.displayName=G;var _e=s=>{const{control:t,checked:a,bubbles:c=!0,defaultChecked:n,...l}=s,m=r.useRef(null),o=Ie(a),h=ke(t);r.useEffect(()=>{const u=m.current,j=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(j,"checked").set;if(o!==a&&v){const y=new Event("click",{bubbles:c});u.indeterminate=b(a),v.call(u,b(a)?!1:a),u.dispatchEvent(y)}},[o,a,c]);const i=r.useRef(b(a)?!1:a);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??i.current,...l,tabIndex:-1,ref:m,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(s){return s==="indeterminate"}function Q(s){return b(s)?"indeterminate":s?"checked":"unchecked"}var De=Z,He=J;function Ae({className:s,...t}){return e.jsx(De,{"data-slot":"checkbox",className:se("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(He,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(oe,{className:"size-3.5"})})})}const $e=({htmlContent:s,setHtmlContent:t,lazyLoad:a,setLazyLoad:c})=>e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"min-h-[150px] font-mono text-sm",value:s,onChange:n=>t(n.target.value),placeholder:"Paste your HTML or image links here..."}),e.jsxs("div",{className:"flex items-center space-x-2 my-4",children:[e.jsx(Ae,{id:"lazy-load",checked:a,onCheckedChange:n=>c(!!n)}),e.jsx(be,{htmlFor:"lazy-load",children:"Enable Lazy Loading for Images"})]}),e.jsx(ve,{className:"my-4"})]}),Be=({extractedLinks:s})=>s.length>0&&e.jsxs(O,{className:"border-green-500 bg-green-50 dark:bg-green-900 dark:border-green-400",children:[e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"text-green-600 dark:text-green-300"}),"Image Detection"]}),e.jsxs(X,{children:["Detected ",s.length," image link(s). Only the image URLs will be processed."]})]}),U=({previewTab:s,extractedLinks:t,htmlContent:a,lazyLoad:c})=>{if(s==="visual")return t.length>0?e.jsx("div",{className:"flex flex-col items-center",children:t.map((n,l)=>e.jsx("img",{src:n,alt:`Image ${l+1}`,className:"max-w-full h-auto"},n))}):e.jsx("div",{dangerouslySetInnerHTML:{__html:a},className:"prose dark:prose-invert max-w-none"});{const n=t.length>0?t.map(l=>`<img src="${l}" alt="" ${c?'loading="lazy"':""}>`).join(`
`):a;return e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-md overflow-auto",children:e.jsx("code",{className:"text-sm font-mono",children:n})})}},Ve=({htmlContent:s,extractedLinks:t,lazyLoad:a,fileName:c,albumName:n,chapterNumber:l,namingMethod:m,saving:o,setSaving:h,saveMessage:i,setSaveMessage:u,setSavedFiles:j})=>e.jsxs(e.Fragment,{children:[i&&e.jsxs(O,{variant:i.type==="error"?"destructive":"default",className:`mb-4 ${i.type==="error"?"bg-red-50 dark:bg-red-900":"bg-green-50 dark:bg-green-900"}`,children:[e.jsx(K,{children:i.type==="error"?"Error":"Success"}),e.jsx(X,{children:i.text})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(A,{children:e.jsxs($,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(D,{variant:"outline",onClick:()=>de(t,s,a,c),disabled:!s.trim(),className:"w-32",children:[e.jsx(Se,{size:16,className:"mr-2"}),"Download"]})}),e.jsx(V,{children:e.jsx("p",{children:"Download the generated HTML file"})})]})}),e.jsx(A,{children:e.jsxs($,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(D,{onClick:()=>me(n,l,m,t,h,u,j),disabled:o||!s.trim(),className:"w-32",children:[o?e.jsx(te,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(xe,{size:16,className:"mr-2"}),"Upload"]})}),e.jsx(V,{children:e.jsx("p",{children:"Save the album to browser storage"})})]})})]})]}),Ye=()=>{const[s,t]=r.useState(""),[a,c]=r.useState([]),[n,l]=r.useState("Album"),[m,o]=r.useState("1"),[h,i]=r.useState("my-file.html"),[u,j]=r.useState("chapter"),[x,v]=r.useState([]),[y,C]=r.useState(!1),[w,p]=r.useState(null),[g,T]=r.useState(!0),[d,f]=r.useState("visual");r.useEffect(()=>{if(s.trim()){const P=/<img[^>]+src="([^">]+)"/g;let _;const S=[];for(;(_=P.exec(s))!==null;)S.push(_[1]);if(S.length===0){const W=/https?:\/\/[^\s]+\.(jpg|jpeg|png|gif|webp|svg)/gi,Y=s.match(W)||[];S.push(...Y)}c(S)}else c([])},[s]),r.useEffect(()=>{ue(P=>{v(P)})},[]);const z=()=>u==="chapter"?`${m} - ${n}.html`:h;return e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs(re,{className:"shadow-lg",children:[e.jsxs(ne,{children:[e.jsxs(le,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Te,{size:24,className:"text-blue-600"}),"HTML Image Uploader"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Create HTML files from image links or HTML content."})]}),e.jsx(ce,{children:e.jsxs(I,{defaultValue:"edit",className:"w-full space-y-4",children:[e.jsxs(M,{className:"grid grid-cols-2",children:[e.jsxs(k,{value:"edit",className:"flex items-center gap-2",children:[e.jsx(Ce,{size:16})," Editor"]}),e.jsxs(k,{value:"preview",className:"flex items-center gap-2",children:[e.jsx(Ne,{size:16})," Preview"]})]}),e.jsxs(N,{value:"edit",children:[e.jsx($e,{htmlContent:s,setHtmlContent:t,lazyLoad:g,setLazyLoad:T}),e.jsx(Fe,{albumName:n,setAlbumName:l,chapterNumber:m,setChapterNumber:o,customFileName:h,setCustomFileName:i,namingMethod:u,setNamingMethod:j,getFileName:z}),e.jsx(Be,{extractedLinks:a})]}),e.jsx(N,{value:"preview",children:e.jsxs(I,{defaultValue:"visual",className:"w-full space-y-4",children:[e.jsxs(M,{className:"grid grid-cols-2",children:[e.jsx(k,{value:"visual",onClick:()=>f("visual"),children:"Visual Preview"}),e.jsx(k,{value:"code",onClick:()=>f("code"),children:"Code Preview"})]}),e.jsx(N,{value:"visual",children:e.jsx(U,{previewTab:d,extractedLinks:a,htmlContent:s,lazyLoad:g})}),e.jsx(N,{value:"code",children:e.jsx(U,{previewTab:d,extractedLinks:a,htmlContent:s,lazyLoad:g})})]})})]})}),e.jsxs(ie,{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[x.length," file(s) saved in browser storage."," ",e.jsx(ae,{to:"/albums",className:"text-blue-500 hover:underline",children:"View Albums"})]}),e.jsx(Ve,{htmlContent:s,extractedLinks:a,lazyLoad:g,fileName:z(),albumName:n,chapterNumber:m,namingMethod:u,saving:y,setSaving:C,saveMessage:w,setSaveMessage:p,setSavedFiles:v})]})]})})};export{Ye as default};
