import{c as ke,ax as Et,r as E,as as Bt,ay as An,b as wt,j as C,at as vn,d as _n,a8 as dt,az as Nn,u as ue,aA as xe,P as te,au as Bn,e as Y,a9 as bn,y as bt,K as On,aa as Mn,ad as Fn,ab as Ln,ac as Pn,ae as Un,af as Dn,aw as kn,av as jn,a as Ie,h as Gn}from"./index-DHCouPi-.js";import{c as xt}from"./scroll-area-DaUffdbz.js";import{u as Hn}from"./index-jk3B29VB.js";import{V as $n}from"./index-CZ_-U5Vq.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ot=ke("ChevronDown",Vn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Yn=ke("ChevronUp",Kn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ho=ke("CircleAlert",qn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],po=ke("Clock",Wn);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],go=ke("GripVertical",Jn);var G;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(G||(G={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(ze||(ze={}));var Ze;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Ze||(Ze={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe=["user","model","function","system"];var Ee;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Ee||(Ee={}));var we;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(we||(we={}));var et;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(et||(et={}));var tt;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(tt||(tt={}));var Be;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Be||(Be={}));var nt;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(nt||(nt={}));var rt;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(rt||(rt={}));var ot;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ot||(ot={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q extends Error{constructor(i){super(`[GoogleGenerativeAI Error]: ${i}`)}}class Ae extends q{constructor(i,o){super(i),this.response=o}}class ft extends q{constructor(i,o,c,l){super(i),this.status=o,this.statusText=c,this.errorDetails=l}}class he extends q{}class ht extends q{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="https://generativelanguage.googleapis.com",zn="v1beta",Zn="0.24.0",Qn="genai-js";var ve;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ve||(ve={}));class er{constructor(i,o,c,l,f){this.model=i,this.task=o,this.apiKey=c,this.stream=l,this.requestOptions=f}toString(){var i,o;const c=((i=this.requestOptions)===null||i===void 0?void 0:i.apiVersion)||zn;let f=`${((o=this.requestOptions)===null||o===void 0?void 0:o.baseUrl)||Xn}/${c}/${this.model}:${this.task}`;return this.stream&&(f+="?alt=sse"),f}}function tr(n){const i=[];return n!=null&&n.apiClient&&i.push(n.apiClient),i.push(`${Qn}/${Zn}`),i.join(" ")}async function nr(n){var i;const o=new Headers;o.append("Content-Type","application/json"),o.append("x-goog-api-client",tr(n.requestOptions)),o.append("x-goog-api-key",n.apiKey);let c=(i=n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(c){if(!(c instanceof Headers))try{c=new Headers(c)}catch(l){throw new he(`unable to convert customHeaders value ${JSON.stringify(c)} to Headers: ${l.message}`)}for(const[l,f]of c.entries()){if(l==="x-goog-api-key")throw new he(`Cannot set reserved header name ${l}`);if(l==="x-goog-api-client")throw new he(`Header name ${l} can only be set using the apiClient field`);o.append(l,f)}}return o}async function rr(n,i,o,c,l,f){const d=new er(n,i,o,c,f);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},ar(f)),{method:"POST",headers:await nr(d),body:l})}}async function je(n,i,o,c,l,f={},d=fetch){const{url:a,fetchOptions:g}=await rr(n,i,o,c,l,f);return or(a,g,d)}async function or(n,i,o=fetch){let c;try{c=await o(n,i)}catch(l){ir(l,n)}return c.ok||await sr(c,n),c}function ir(n,i){let o=n;throw o.name==="AbortError"?(o=new ht(`Request aborted when fetching ${i.toString()}: ${n.message}`),o.stack=n.stack):n instanceof ft||n instanceof he||(o=new q(`Error fetching from ${i.toString()}: ${n.message}`),o.stack=n.stack),o}async function sr(n,i){let o="",c;try{const l=await n.json();o=l.error.message,l.error.details&&(o+=` ${JSON.stringify(l.error.details)}`,c=l.error.details)}catch{}throw new ft(`Error fetching from ${i.toString()}: [${n.status} ${n.statusText}] ${o}`,n.status,n.statusText,c)}function ar(n){const i={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const o=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>o.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{o.abort()}),i.signal=o.signal}return i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ve(n.candidates[0]))throw new Ae(`${ye(n)}`,n);return cr(n)}else if(n.promptFeedback)throw new Ae(`Text not available. ${ye(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ve(n.candidates[0]))throw new Ae(`${ye(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),It(n)[0]}else if(n.promptFeedback)throw new Ae(`Function call not available. ${ye(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ve(n.candidates[0]))throw new Ae(`${ye(n)}`,n);return It(n)}else if(n.promptFeedback)throw new Ae(`Function call not available. ${ye(n)}`,n)},n}function cr(n){var i,o,c,l;const f=[];if(!((o=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||o===void 0)&&o.parts)for(const d of(l=(c=n.candidates)===null||c===void 0?void 0:c[0].content)===null||l===void 0?void 0:l.parts)d.text&&f.push(d.text),d.executableCode&&f.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&f.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return f.length>0?f.join(""):""}function It(n){var i,o,c,l;const f=[];if(!((o=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||o===void 0)&&o.parts)for(const d of(l=(c=n.candidates)===null||c===void 0?void 0:c[0].content)===null||l===void 0?void 0:l.parts)d.functionCall&&f.push(d.functionCall);if(f.length>0)return f}const lr=[Be.RECITATION,Be.SAFETY,Be.LANGUAGE];function Ve(n){return!!n.finishReason&&lr.includes(n.finishReason)}function ye(n){var i,o,c;let l="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)l+="Response was blocked",!((i=n.promptFeedback)===null||i===void 0)&&i.blockReason&&(l+=` due to ${n.promptFeedback.blockReason}`),!((o=n.promptFeedback)===null||o===void 0)&&o.blockReasonMessage&&(l+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((c=n.candidates)===null||c===void 0)&&c[0]){const f=n.candidates[0];Ve(f)&&(l+=`Candidate was blocked due to ${f.finishReason}`,f.finishMessage&&(l+=`: ${f.finishMessage}`))}return l}function Ue(n){return this instanceof Ue?(this.v=n,this):new Ue(n)}function ur(n,i,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=o.apply(n,i||[]),l,f=[];return l={},d("next"),d("throw"),d("return"),l[Symbol.asyncIterator]=function(){return this},l;function d(A){c[A]&&(l[A]=function(m){return new Promise(function(x,y){f.push([A,m,x,y])>1||a(A,m)})})}function a(A,m){try{g(c[A](m))}catch(x){R(f[0][3],x)}}function g(A){A.value instanceof Ue?Promise.resolve(A.value.v).then(w,S):R(f[0][2],A)}function w(A){a("next",A)}function S(A){a("throw",A)}function R(A,m){A(m),f.shift(),f.length&&a(f[0][0],f[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function dr(n){const i=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),o=pr(i),[c,l]=o.tee();return{stream:hr(c),response:fr(l)}}async function fr(n){const i=[],o=n.getReader();for(;;){const{done:c,value:l}=await o.read();if(c)return pt(gr(i));i.push(l)}}function hr(n){return ur(this,arguments,function*(){const o=n.getReader();for(;;){const{value:c,done:l}=yield Ue(o.read());if(l)break;yield yield Ue(pt(c))}})}function pr(n){const i=n.getReader();return new ReadableStream({start(c){let l="";return f();function f(){return i.read().then(({value:d,done:a})=>{if(a){if(l.trim()){c.error(new q("Failed to parse stream"));return}c.close();return}l+=d;let g=l.match(Ct),w;for(;g;){try{w=JSON.parse(g[1])}catch{c.error(new q(`Error parsing JSON response: "${g[1]}"`));return}c.enqueue(w),l=l.substring(g[0].length),g=l.match(Ct)}return f()}).catch(d=>{let a=d;throw a.stack=d.stack,a.name==="AbortError"?a=new ht("Request aborted when reading from the stream"):a=new q("Error reading from the stream"),a})}}})}function gr(n){const i=n[n.length-1],o={promptFeedback:i==null?void 0:i.promptFeedback};for(const c of n){if(c.candidates){let l=0;for(const f of c.candidates)if(o.candidates||(o.candidates=[]),o.candidates[l]||(o.candidates[l]={index:l}),o.candidates[l].citationMetadata=f.citationMetadata,o.candidates[l].groundingMetadata=f.groundingMetadata,o.candidates[l].finishReason=f.finishReason,o.candidates[l].finishMessage=f.finishMessage,o.candidates[l].safetyRatings=f.safetyRatings,f.content&&f.content.parts){o.candidates[l].content||(o.candidates[l].content={role:f.content.role||"user",parts:[]});const d={};for(const a of f.content.parts)a.text&&(d.text=a.text),a.functionCall&&(d.functionCall=a.functionCall),a.executableCode&&(d.executableCode=a.executableCode),a.codeExecutionResult&&(d.codeExecutionResult=a.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),o.candidates[l].content.parts.push(d)}l++}c.usageMetadata&&(o.usageMetadata=c.usageMetadata)}return o}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mt(n,i,o,c){const l=await je(i,ve.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(o),c);return dr(l)}async function Ft(n,i,o,c){const f=await(await je(i,ve.GENERATE_CONTENT,n,!1,JSON.stringify(o),c)).json();return{response:pt(f)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function De(n){let i=[];if(typeof n=="string")i=[{text:n}];else for(const o of n)typeof o=="string"?i.push({text:o}):i.push(o);return mr(i)}function mr(n){const i={role:"user",parts:[]},o={role:"function",parts:[]};let c=!1,l=!1;for(const f of n)"functionResponse"in f?(o.parts.push(f),l=!0):(i.parts.push(f),c=!0);if(c&&l)throw new q("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!c&&!l)throw new q("No content is provided for sending chat message.");return c?i:o}function yr(n,i){var o;let c={model:i==null?void 0:i.model,generationConfig:i==null?void 0:i.generationConfig,safetySettings:i==null?void 0:i.safetySettings,tools:i==null?void 0:i.tools,toolConfig:i==null?void 0:i.toolConfig,systemInstruction:i==null?void 0:i.systemInstruction,cachedContent:(o=i==null?void 0:i.cachedContent)===null||o===void 0?void 0:o.name,contents:[]};const l=n.generateContentRequest!=null;if(n.contents){if(l)throw new he("CountTokensRequest must have one of contents or generateContentRequest, not both.");c.contents=n.contents}else if(l)c=Object.assign(Object.assign({},c),n.generateContentRequest);else{const f=De(n);c.contents=[f]}return{generateContentRequest:c}}function St(n){let i;return n.contents?i=n:i={contents:[De(n)]},n.systemInstruction&&(i.systemInstruction=Lt(n.systemInstruction)),i}function Er(n){return typeof n=="string"||Array.isArray(n)?{content:De(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],wr={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function xr(n){let i=!1;for(const o of n){const{role:c,parts:l}=o;if(!i&&c!=="user")throw new q(`First content should be with role 'user', got ${c}`);if(!Qe.includes(c))throw new q(`Each item should include role field. Got ${c} but valid roles are: ${JSON.stringify(Qe)}`);if(!Array.isArray(l))throw new q("Content should have 'parts' property with an array of Parts");if(l.length===0)throw new q("Each Content should have at least one part");const f={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const a of l)for(const g of Tt)g in a&&(f[g]+=1);const d=wr[c];for(const a of Tt)if(!d.includes(a)&&f[a]>0)throw new q(`Content with role '${c}' can't contain '${a}' part`);i=!0}}function Rt(n){var i;if(n.candidates===void 0||n.candidates.length===0)return!1;const o=(i=n.candidates[0])===null||i===void 0?void 0:i.content;if(o===void 0||o.parts===void 0||o.parts.length===0)return!1;for(const c of o.parts)if(c===void 0||Object.keys(c).length===0||c.text!==void 0&&c.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="SILENT_ERROR";class Pt{constructor(i,o,c,l={}){this.model=o,this.params=c,this._requestOptions=l,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=i,c!=null&&c.history&&(xr(c.history),this._history=c.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(i,o={}){var c,l,f,d,a,g;await this._sendPromise;const w=De(i),S={safetySettings:(c=this.params)===null||c===void 0?void 0:c.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(f=this.params)===null||f===void 0?void 0:f.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,w]},R=Object.assign(Object.assign({},this._requestOptions),o);let A;return this._sendPromise=this._sendPromise.then(()=>Ft(this._apiKey,this.model,S,R)).then(m=>{var x;if(Rt(m.response)){this._history.push(w);const y=Object.assign({parts:[],role:"model"},(x=m.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(y)}else{const y=ye(m.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}A=m}),await this._sendPromise,A}async sendMessageStream(i,o={}){var c,l,f,d,a,g;await this._sendPromise;const w=De(i),S={safetySettings:(c=this.params)===null||c===void 0?void 0:c.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(f=this.params)===null||f===void 0?void 0:f.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,w]},R=Object.assign(Object.assign({},this._requestOptions),o),A=Mt(this._apiKey,this.model,S,R);return this._sendPromise=this._sendPromise.then(()=>A).catch(m=>{throw new Error(At)}).then(m=>m.response).then(m=>{if(Rt(m)){this._history.push(w);const x=Object.assign({},m.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=ye(m);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(m=>{m.message!==At&&console.error(m)}),A}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ir(n,i,o,c){return(await je(i,ve.COUNT_TOKENS,n,!1,JSON.stringify(o),c)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cr(n,i,o,c){return(await je(i,ve.EMBED_CONTENT,n,!1,JSON.stringify(o),c)).json()}async function Sr(n,i,o,c){const l=o.requests.map(d=>Object.assign(Object.assign({},d),{model:i}));return(await je(i,ve.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:l}),c)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(i,o,c={}){this.apiKey=i,this._requestOptions=c,o.model.includes("/")?this.model=o.model:this.model=`models/${o.model}`,this.generationConfig=o.generationConfig||{},this.safetySettings=o.safetySettings||[],this.tools=o.tools,this.toolConfig=o.toolConfig,this.systemInstruction=Lt(o.systemInstruction),this.cachedContent=o.cachedContent}async generateContent(i,o={}){var c;const l=St(i),f=Object.assign(Object.assign({},this._requestOptions),o);return Ft(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(c=this.cachedContent)===null||c===void 0?void 0:c.name},l),f)}async generateContentStream(i,o={}){var c;const l=St(i),f=Object.assign(Object.assign({},this._requestOptions),o);return Mt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(c=this.cachedContent)===null||c===void 0?void 0:c.name},l),f)}startChat(i){var o;return new Pt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},i),this._requestOptions)}async countTokens(i,o={}){const c=yr(i,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),l=Object.assign(Object.assign({},this._requestOptions),o);return Ir(this.apiKey,this.model,c,l)}async embedContent(i,o={}){const c=Er(i),l=Object.assign(Object.assign({},this._requestOptions),o);return Cr(this.apiKey,this.model,c,l)}async batchEmbedContents(i,o={}){const c=Object.assign(Object.assign({},this._requestOptions),o);return Sr(this.apiKey,this.model,i,c)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(i){this.apiKey=i}getGenerativeModel(i,o){if(!i.model)throw new q("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new it(this.apiKey,i,o)}getGenerativeModelFromCachedContent(i,o,c){if(!i.name)throw new he("Cached content must contain a `name` field.");if(!i.model)throw new he("Cached content must contain a `model` field.");const l=["model","systemInstruction"];for(const d of l)if(o!=null&&o[d]&&i[d]&&(o==null?void 0:o[d])!==i[d]){if(d==="model"){const a=o.model.startsWith("models/")?o.model.replace("models/",""):o.model,g=i.model.startsWith("models/")?i.model.replace("models/",""):i.model;if(a===g)continue}throw new he(`Different value for "${d}" specified in modelParams (${o[d]}) and cachedContent (${i[d]})`)}const f=Object.assign(Object.assign({},o),{model:i.model,tools:i.tools,toolConfig:i.toolConfig,systemInstruction:i.systemInstruction,cachedContent:i});return new it(this.apiKey,f,c)}}const Rr=Object.freeze(Object.defineProperty({__proto__:null,get BlockReason(){return tt},ChatSession:Pt,get DynamicRetrievalMode(){return ot},get ExecutableCodeLanguage(){return ze},get FinishReason(){return Be},get FunctionCallingMode(){return rt},GenerativeModel:it,GoogleGenerativeAI:Tr,GoogleGenerativeAIAbortError:ht,GoogleGenerativeAIError:q,GoogleGenerativeAIFetchError:ft,GoogleGenerativeAIRequestInputError:he,GoogleGenerativeAIResponseError:Ae,get HarmBlockThreshold(){return we},get HarmCategory(){return Ee},get HarmProbability(){return et},get Outcome(){return Ze},POSSIBLE_ROLES:Qe,get SchemaType(){return G},get TaskType(){return nt}},Symbol.toStringTag,{value:"Module"}));var Xe={},Le={},vt;function Ar(){if(vt)return Le;vt=1,Le.byteLength=a,Le.toByteArray=w,Le.fromByteArray=A;for(var n=[],i=[],o=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,f=c.length;l<f;++l)n[l]=c[l],i[c.charCodeAt(l)]=l;i[45]=62,i[95]=63;function d(m){var x=m.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=m.indexOf("=");y===-1&&(y=x);var v=y===x?0:4-y%4;return[y,v]}function a(m){var x=d(m),y=x[0],v=x[1];return(y+v)*3/4-v}function g(m,x,y){return(x+y)*3/4-y}function w(m){var x,y=d(m),v=y[0],_=y[1],I=new o(g(m,v,_)),T=0,H=_>0?v-4:v,b;for(b=0;b<H;b+=4)x=i[m.charCodeAt(b)]<<18|i[m.charCodeAt(b+1)]<<12|i[m.charCodeAt(b+2)]<<6|i[m.charCodeAt(b+3)],I[T++]=x>>16&255,I[T++]=x>>8&255,I[T++]=x&255;return _===2&&(x=i[m.charCodeAt(b)]<<2|i[m.charCodeAt(b+1)]>>4,I[T++]=x&255),_===1&&(x=i[m.charCodeAt(b)]<<10|i[m.charCodeAt(b+1)]<<4|i[m.charCodeAt(b+2)]>>2,I[T++]=x>>8&255,I[T++]=x&255),I}function S(m){return n[m>>18&63]+n[m>>12&63]+n[m>>6&63]+n[m&63]}function R(m,x,y){for(var v,_=[],I=x;I<y;I+=3)v=(m[I]<<16&16711680)+(m[I+1]<<8&65280)+(m[I+2]&255),_.push(S(v));return _.join("")}function A(m){for(var x,y=m.length,v=y%3,_=[],I=16383,T=0,H=y-v;T<H;T+=I)_.push(R(m,T,T+I>H?H:T+I));return v===1?(x=m[y-1],_.push(n[x>>2]+n[x<<4&63]+"==")):v===2&&(x=(m[y-2]<<8)+m[y-1],_.push(n[x>>10]+n[x>>4&63]+n[x<<2&63]+"=")),_.join("")}return Le}var $e={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var _t;function vr(){return _t||(_t=1,$e.read=function(n,i,o,c,l){var f,d,a=l*8-c-1,g=(1<<a)-1,w=g>>1,S=-7,R=o?l-1:0,A=o?-1:1,m=n[i+R];for(R+=A,f=m&(1<<-S)-1,m>>=-S,S+=a;S>0;f=f*256+n[i+R],R+=A,S-=8);for(d=f&(1<<-S)-1,f>>=-S,S+=c;S>0;d=d*256+n[i+R],R+=A,S-=8);if(f===0)f=1-w;else{if(f===g)return d?NaN:(m?-1:1)*(1/0);d=d+Math.pow(2,c),f=f-w}return(m?-1:1)*d*Math.pow(2,f-c)},$e.write=function(n,i,o,c,l,f){var d,a,g,w=f*8-l-1,S=(1<<w)-1,R=S>>1,A=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=c?0:f-1,x=c?1:-1,y=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(a=isNaN(i)?1:0,d=S):(d=Math.floor(Math.log(i)/Math.LN2),i*(g=Math.pow(2,-d))<1&&(d--,g*=2),d+R>=1?i+=A/g:i+=A*Math.pow(2,1-R),i*g>=2&&(d++,g/=2),d+R>=S?(a=0,d=S):d+R>=1?(a=(i*g-1)*Math.pow(2,l),d=d+R):(a=i*Math.pow(2,R-1)*Math.pow(2,l),d=0));l>=8;n[o+m]=a&255,m+=x,a/=256,l-=8);for(d=d<<l|a,w+=l;w>0;n[o+m]=d&255,m+=x,d/=256,w-=8);n[o+m-x]|=y*128}),$e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Nt;function _r(){return Nt||(Nt=1,function(n){const i=Ar(),o=vr(),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=I,n.INSPECT_MAX_BYTES=50;const l=2147483647;n.kMaxLength=l,a.TYPED_ARRAY_SUPPORT=f(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function d(r){if(r>l)throw new RangeError('The value "'+r+'" is invalid for option "size"');const e=new Uint8Array(r);return Object.setPrototypeOf(e,a.prototype),e}function a(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(r)}return g(r,e,t)}a.poolSize=8192;function g(r,e,t){if(typeof r=="string")return A(r,e);if(ArrayBuffer.isView(r))return x(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(le(r,ArrayBuffer)||r&&le(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(le(r,SharedArrayBuffer)||r&&le(r.buffer,SharedArrayBuffer)))return y(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const s=r.valueOf&&r.valueOf();if(s!=null&&s!==r)return a.from(s,e,t);const u=v(r);if(u)return u;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return a.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}a.from=function(r,e,t){return g(r,e,t)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function w(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function S(r,e,t){return w(r),r<=0?d(r):e!==void 0?typeof t=="string"?d(r).fill(e,t):d(r).fill(e):d(r)}a.alloc=function(r,e,t){return S(r,e,t)};function R(r){return w(r),d(r<0?0:_(r)|0)}a.allocUnsafe=function(r){return R(r)},a.allocUnsafeSlow=function(r){return R(r)};function A(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=T(r,e)|0;let s=d(t);const u=s.write(r,e);return u!==t&&(s=s.slice(0,u)),s}function m(r){const e=r.length<0?0:_(r.length)|0,t=d(e);for(let s=0;s<e;s+=1)t[s]=r[s]&255;return t}function x(r){if(le(r,Uint8Array)){const e=new Uint8Array(r);return y(e.buffer,e.byteOffset,e.byteLength)}return m(r)}function y(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let s;return e===void 0&&t===void 0?s=new Uint8Array(r):t===void 0?s=new Uint8Array(r,e):s=new Uint8Array(r,e,t),Object.setPrototypeOf(s,a.prototype),s}function v(r){if(a.isBuffer(r)){const e=_(r.length)|0,t=d(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Je(r.length)?d(0):m(r);if(r.type==="Buffer"&&Array.isArray(r.data))return m(r.data)}function _(r){if(r>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return r|0}function I(r){return+r!=r&&(r=0),a.alloc(+r)}a.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==a.prototype},a.compare=function(e,t){if(le(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),le(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let s=e.length,u=t.length;for(let h=0,p=Math.min(s,u);h<p;++h)if(e[h]!==t[h]){s=e[h],u=t[h];break}return s<u?-1:u<s?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return a.alloc(0);let s;if(t===void 0)for(t=0,s=0;s<e.length;++s)t+=e[s].length;const u=a.allocUnsafe(t);let h=0;for(s=0;s<e.length;++s){let p=e[s];if(le(p,Uint8Array))h+p.length>u.length?(a.isBuffer(p)||(p=a.from(p)),p.copy(u,h)):Uint8Array.prototype.set.call(u,p,h);else if(a.isBuffer(p))p.copy(u,h);else throw new TypeError('"list" argument must be an Array of Buffers');h+=p.length}return u};function T(r,e){if(a.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||le(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const t=r.length,s=arguments.length>2&&arguments[2]===!0;if(!s&&t===0)return 0;let u=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Re(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return yt(r).length;default:if(u)return s?-1:Re(r).length;e=(""+e).toLowerCase(),u=!0}}a.byteLength=T;function H(r,e,t){let s=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return ce(this,e,t);case"utf8":case"utf-8":return Z(this,e,t);case"ascii":return ee(this,e,t);case"latin1":case"binary":return oe(this,e,t);case"base64":return ae(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,e,t);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),s=!0}}a.prototype._isBuffer=!0;function b(r,e,t){const s=r[e];r[e]=r[t],r[t]=s}a.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?Z(this,0,e):H.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:a.compare(this,e)===0},a.prototype.inspect=function(){let e="";const t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},c&&(a.prototype[c]=a.prototype.inspect),a.prototype.compare=function(e,t,s,u,h){if(le(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),s===void 0&&(s=e?e.length:0),u===void 0&&(u=0),h===void 0&&(h=this.length),t<0||s>e.length||u<0||h>this.length)throw new RangeError("out of range index");if(u>=h&&t>=s)return 0;if(u>=h)return-1;if(t>=s)return 1;if(t>>>=0,s>>>=0,u>>>=0,h>>>=0,this===e)return 0;let p=h-u,B=s-t;const k=Math.min(p,B),U=this.slice(u,h),j=e.slice(t,s);for(let L=0;L<k;++L)if(U[L]!==j[L]){p=U[L],B=j[L];break}return p<B?-1:B<p?1:0};function pe(r,e,t,s,u){if(r.length===0)return-1;if(typeof t=="string"?(s=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Je(t)&&(t=u?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(u)return-1;t=r.length-1}else if(t<0)if(u)t=0;else return-1;if(typeof e=="string"&&(e=a.from(e,s)),a.isBuffer(e))return e.length===0?-1:V(r,e,t,s,u);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?u?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):V(r,[e],t,s,u);throw new TypeError("val must be string, number or Buffer")}function V(r,e,t,s,u){let h=1,p=r.length,B=e.length;if(s!==void 0&&(s=String(s).toLowerCase(),s==="ucs2"||s==="ucs-2"||s==="utf16le"||s==="utf-16le")){if(r.length<2||e.length<2)return-1;h=2,p/=2,B/=2,t/=2}function k(j,L){return h===1?j[L]:j.readUInt16BE(L*h)}let U;if(u){let j=-1;for(U=t;U<p;U++)if(k(r,U)===k(e,j===-1?0:U-j)){if(j===-1&&(j=U),U-j+1===B)return j*h}else j!==-1&&(U-=U-j),j=-1}else for(t+B>p&&(t=p-B),U=t;U>=0;U--){let j=!0;for(let L=0;L<B;L++)if(k(r,U+L)!==k(e,L)){j=!1;break}if(j)return U}return-1}a.prototype.includes=function(e,t,s){return this.indexOf(e,t,s)!==-1},a.prototype.indexOf=function(e,t,s){return pe(this,e,t,s,!0)},a.prototype.lastIndexOf=function(e,t,s){return pe(this,e,t,s,!1)};function z(r,e,t,s){t=Number(t)||0;const u=r.length-t;s?(s=Number(s),s>u&&(s=u)):s=u;const h=e.length;s>h/2&&(s=h/2);let p;for(p=0;p<s;++p){const B=parseInt(e.substr(p*2,2),16);if(Je(B))return p;r[t+p]=B}return p}function se(r,e,t,s){return He(Re(e,r.length-t),r,t,s)}function de(r,e,t,s){return He(Cn(e),r,t,s)}function ne(r,e,t,s){return He(yt(e),r,t,s)}function re(r,e,t,s){return He(Sn(e,r.length-t),r,t,s)}a.prototype.write=function(e,t,s,u){if(t===void 0)u="utf8",s=this.length,t=0;else if(s===void 0&&typeof t=="string")u=t,s=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(s)?(s=s>>>0,u===void 0&&(u="utf8")):(u=s,s=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const h=this.length-t;if((s===void 0||s>h)&&(s=h),e.length>0&&(s<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");u||(u="utf8");let p=!1;for(;;)switch(u){case"hex":return z(this,e,t,s);case"utf8":case"utf-8":return se(this,e,t,s);case"ascii":case"latin1":case"binary":return de(this,e,t,s);case"base64":return ne(this,e,t,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,e,t,s);default:if(p)throw new TypeError("Unknown encoding: "+u);u=(""+u).toLowerCase(),p=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(r,e,t){return e===0&&t===r.length?i.fromByteArray(r):i.fromByteArray(r.slice(e,t))}function Z(r,e,t){t=Math.min(r.length,t);const s=[];let u=e;for(;u<t;){const h=r[u];let p=null,B=h>239?4:h>223?3:h>191?2:1;if(u+B<=t){let k,U,j,L;switch(B){case 1:h<128&&(p=h);break;case 2:k=r[u+1],(k&192)===128&&(L=(h&31)<<6|k&63,L>127&&(p=L));break;case 3:k=r[u+1],U=r[u+2],(k&192)===128&&(U&192)===128&&(L=(h&15)<<12|(k&63)<<6|U&63,L>2047&&(L<55296||L>57343)&&(p=L));break;case 4:k=r[u+1],U=r[u+2],j=r[u+3],(k&192)===128&&(U&192)===128&&(j&192)===128&&(L=(h&15)<<18|(k&63)<<12|(U&63)<<6|j&63,L>65535&&L<1114112&&(p=L))}}p===null?(p=65533,B=1):p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p),u+=B}return W(s)}const Q=4096;function W(r){const e=r.length;if(e<=Q)return String.fromCharCode.apply(String,r);let t="",s=0;for(;s<e;)t+=String.fromCharCode.apply(String,r.slice(s,s+=Q));return t}function ee(r,e,t){let s="";t=Math.min(r.length,t);for(let u=e;u<t;++u)s+=String.fromCharCode(r[u]&127);return s}function oe(r,e,t){let s="";t=Math.min(r.length,t);for(let u=e;u<t;++u)s+=String.fromCharCode(r[u]);return s}function ce(r,e,t){const s=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>s)&&(t=s);let u="";for(let h=e;h<t;++h)u+=Tn[r[h]];return u}function Oe(r,e,t){const s=r.slice(e,t);let u="";for(let h=0;h<s.length-1;h+=2)u+=String.fromCharCode(s[h]+s[h+1]*256);return u}a.prototype.slice=function(e,t){const s=this.length;e=~~e,t=t===void 0?s:~~t,e<0?(e+=s,e<0&&(e=0)):e>s&&(e=s),t<0?(t+=s,t<0&&(t=0)):t>s&&(t=s),t<e&&(t=e);const u=this.subarray(e,t);return Object.setPrototypeOf(u,a.prototype),u};function D(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,s){e=e>>>0,t=t>>>0,s||D(e,t,this.length);let u=this[e],h=1,p=0;for(;++p<t&&(h*=256);)u+=this[e+p]*h;return u},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,s){e=e>>>0,t=t>>>0,s||D(e,t,this.length);let u=this[e+--t],h=1;for(;t>0&&(h*=256);)u+=this[e+--t]*h;return u},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e=e>>>0,t||D(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||D(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||D(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||D(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=me(function(e){e=e>>>0,J(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&X(e,this.length-8);const u=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,h=this[++e]+this[++e]*2**8+this[++e]*2**16+s*2**24;return BigInt(u)+(BigInt(h)<<BigInt(32))}),a.prototype.readBigUInt64BE=me(function(e){e=e>>>0,J(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&X(e,this.length-8);const u=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],h=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+s;return(BigInt(u)<<BigInt(32))+BigInt(h)}),a.prototype.readIntLE=function(e,t,s){e=e>>>0,t=t>>>0,s||D(e,t,this.length);let u=this[e],h=1,p=0;for(;++p<t&&(h*=256);)u+=this[e+p]*h;return h*=128,u>=h&&(u-=Math.pow(2,8*t)),u},a.prototype.readIntBE=function(e,t,s){e=e>>>0,t=t>>>0,s||D(e,t,this.length);let u=t,h=1,p=this[e+--u];for(;u>0&&(h*=256);)p+=this[e+--u]*h;return h*=128,p>=h&&(p-=Math.pow(2,8*t)),p},a.prototype.readInt8=function(e,t){return e=e>>>0,t||D(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){e=e>>>0,t||D(e,2,this.length);const s=this[e]|this[e+1]<<8;return s&32768?s|4294901760:s},a.prototype.readInt16BE=function(e,t){e=e>>>0,t||D(e,2,this.length);const s=this[e+1]|this[e]<<8;return s&32768?s|4294901760:s},a.prototype.readInt32LE=function(e,t){return e=e>>>0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e=e>>>0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=me(function(e){e=e>>>0,J(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&X(e,this.length-8);const u=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(s<<24);return(BigInt(u)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),a.prototype.readBigInt64BE=me(function(e){e=e>>>0,J(e,"offset");const t=this[e],s=this[e+7];(t===void 0||s===void 0)&&X(e,this.length-8);const u=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(u)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+s)}),a.prototype.readFloatLE=function(e,t){return e=e>>>0,t||D(e,4,this.length),o.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e=e>>>0,t||D(e,4,this.length),o.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||D(e,8,this.length),o.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||D(e,8,this.length),o.read(this,e,!1,52,8)};function $(r,e,t,s,u,h){if(!a.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>u||e<h)throw new RangeError('"value" argument is out of bounds');if(t+s>r.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,s,u){if(e=+e,t=t>>>0,s=s>>>0,!u){const B=Math.pow(2,8*s)-1;$(this,e,t,s,B,0)}let h=1,p=0;for(this[t]=e&255;++p<s&&(h*=256);)this[t+p]=e/h&255;return t+s},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,s,u){if(e=+e,t=t>>>0,s=s>>>0,!u){const B=Math.pow(2,8*s)-1;$(this,e,t,s,B,0)}let h=s-1,p=1;for(this[t+h]=e&255;--h>=0&&(p*=256);)this[t+h]=e/p&255;return t+s},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,1,255,0),this[t]=e&255,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Ne(r,e,t,s,u){M(e,s,u,r,t,7);let h=Number(e&BigInt(4294967295));r[t++]=h,h=h>>8,r[t++]=h,h=h>>8,r[t++]=h,h=h>>8,r[t++]=h;let p=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=p,p=p>>8,r[t++]=p,p=p>>8,r[t++]=p,p=p>>8,r[t++]=p,t}function fe(r,e,t,s,u){M(e,s,u,r,t,7);let h=Number(e&BigInt(4294967295));r[t+7]=h,h=h>>8,r[t+6]=h,h=h>>8,r[t+5]=h,h=h>>8,r[t+4]=h;let p=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=p,p=p>>8,r[t+2]=p,p=p>>8,r[t+1]=p,p=p>>8,r[t]=p,t+8}a.prototype.writeBigUInt64LE=me(function(e,t=0){return Ne(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=me(function(e,t=0){return fe(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(e,t,s,u){if(e=+e,t=t>>>0,!u){const k=Math.pow(2,8*s-1);$(this,e,t,s,k-1,-k)}let h=0,p=1,B=0;for(this[t]=e&255;++h<s&&(p*=256);)e<0&&B===0&&this[t+h-1]!==0&&(B=1),this[t+h]=(e/p>>0)-B&255;return t+s},a.prototype.writeIntBE=function(e,t,s,u){if(e=+e,t=t>>>0,!u){const k=Math.pow(2,8*s-1);$(this,e,t,s,k-1,-k)}let h=s-1,p=1,B=0;for(this[t+h]=e&255;--h>=0&&(p*=256);)e<0&&B===0&&this[t+h+1]!==0&&(B=1),this[t+h]=(e/p>>0)-B&255;return t+s},a.prototype.writeInt8=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},a.prototype.writeInt16LE=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},a.prototype.writeInt32LE=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,s){return e=+e,t=t>>>0,s||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},a.prototype.writeBigInt64LE=me(function(e,t=0){return Ne(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=me(function(e,t=0){return fe(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Te(r,e,t,s,u,h){if(t+s>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function ge(r,e,t,s,u){return e=+e,t=t>>>0,u||Te(r,e,t,4),o.write(r,e,t,s,23,4),t+4}a.prototype.writeFloatLE=function(e,t,s){return ge(this,e,t,!0,s)},a.prototype.writeFloatBE=function(e,t,s){return ge(this,e,t,!1,s)};function N(r,e,t,s,u){return e=+e,t=t>>>0,u||Te(r,e,t,8),o.write(r,e,t,s,52,8),t+8}a.prototype.writeDoubleLE=function(e,t,s){return N(this,e,t,!0,s)},a.prototype.writeDoubleBE=function(e,t,s){return N(this,e,t,!1,s)},a.prototype.copy=function(e,t,s,u){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(s||(s=0),!u&&u!==0&&(u=this.length),t>=e.length&&(t=e.length),t||(t=0),u>0&&u<s&&(u=s),u===s||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("sourceEnd out of bounds");u>this.length&&(u=this.length),e.length-t<u-s&&(u=e.length-t+s);const h=u-s;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,s,u):Uint8Array.prototype.set.call(e,this.subarray(s,u),t),h},a.prototype.fill=function(e,t,s,u){if(typeof e=="string"){if(typeof t=="string"?(u=t,t=0,s=this.length):typeof s=="string"&&(u=s,s=this.length),u!==void 0&&typeof u!="string")throw new TypeError("encoding must be a string");if(typeof u=="string"&&!a.isEncoding(u))throw new TypeError("Unknown encoding: "+u);if(e.length===1){const p=e.charCodeAt(0);(u==="utf8"&&p<128||u==="latin1")&&(e=p)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<s)throw new RangeError("Out of range index");if(s<=t)return this;t=t>>>0,s=s===void 0?this.length:s>>>0,e||(e=0);let h;if(typeof e=="number")for(h=t;h<s;++h)this[h]=e;else{const p=a.isBuffer(e)?e:a.from(e,u),B=p.length;if(B===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(h=0;h<s-t;++h)this[h+t]=p[h%B]}return this};const O={};function K(r,e,t){O[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(u){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:u,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}K("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError),K("ERR_OUT_OF_RANGE",function(r,e,t){let s=`The value of "${r}" is out of range.`,u=t;return Number.isInteger(t)&&Math.abs(t)>2**32?u=P(String(t)):typeof t=="bigint"&&(u=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(u=P(u)),u+="n"),s+=` It must be ${e}. Received ${u}`,s},RangeError);function P(r){let e="",t=r.length;const s=r[0]==="-"?1:0;for(;t>=s+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function F(r,e,t){J(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&X(e,r.length-(t+1))}function M(r,e,t,s,u,h){if(r>t||r<e){const p=typeof e=="bigint"?"n":"";let B;throw e===0||e===BigInt(0)?B=`>= 0${p} and < 2${p} ** ${(h+1)*8}${p}`:B=`>= -(2${p} ** ${(h+1)*8-1}${p}) and < 2 ** ${(h+1)*8-1}${p}`,new O.ERR_OUT_OF_RANGE("value",B,r)}F(s,u,h)}function J(r,e){if(typeof r!="number")throw new O.ERR_INVALID_ARG_TYPE(e,"number",r)}function X(r,e,t){throw Math.floor(r)!==r?(J(r,t),new O.ERR_OUT_OF_RANGE("offset","an integer",r)):e<0?new O.ERR_BUFFER_OUT_OF_BOUNDS:new O.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,r)}const Me=/[^+/0-9A-Za-z-_]/g;function Fe(r){if(r=r.split("=")[0],r=r.trim().replace(Me,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Re(r,e){e=e||1/0;let t;const s=r.length;let u=null;const h=[];for(let p=0;p<s;++p){if(t=r.charCodeAt(p),t>55295&&t<57344){if(!u){if(t>56319){(e-=3)>-1&&h.push(239,191,189);continue}else if(p+1===s){(e-=3)>-1&&h.push(239,191,189);continue}u=t;continue}if(t<56320){(e-=3)>-1&&h.push(239,191,189),u=t;continue}t=(u-55296<<10|t-56320)+65536}else u&&(e-=3)>-1&&h.push(239,191,189);if(u=null,t<128){if((e-=1)<0)break;h.push(t)}else if(t<2048){if((e-=2)<0)break;h.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;h.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;h.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return h}function Cn(r){const e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Sn(r,e){let t,s,u;const h=[];for(let p=0;p<r.length&&!((e-=2)<0);++p)t=r.charCodeAt(p),s=t>>8,u=t%256,h.push(u),h.push(s);return h}function yt(r){return i.toByteArray(Fe(r))}function He(r,e,t,s){let u;for(u=0;u<s&&!(u+t>=e.length||u>=r.length);++u)e[u+t]=r[u];return u}function le(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Je(r){return r!==r}const Tn=function(){const r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const s=t*16;for(let u=0;u<16;++u)e[s+u]=r[t]+r[u]}return e}();function me(r){return typeof BigInt>"u"?Rn:r}function Rn(){throw new Error("BigInt not supported")}}(Xe)),Xe}var Ut=_r();typeof window<"u"&&!window.Buffer&&(window.Buffer=Ut.Buffer);const gt=async(n,i,o,c)=>{try{const{GoogleGenerativeAI:l}=await Et(async()=>{const{GoogleGenerativeAI:_}=await Promise.resolve().then(()=>Rr);return{GoogleGenerativeAI:_}},void 0),{GoogleAIFileManager:f}=await Et(async()=>{const{GoogleAIFileManager:_}=await import("./index-Q9_myv3Q.js");return{GoogleAIFileManager:_}},[]),d={},a=new l(i),g=new f(i),w=[{category:Ee.HARM_CATEGORY_HARASSMENT,threshold:we.BLOCK_NONE},{category:Ee.HARM_CATEGORY_HATE_SPEECH,threshold:we.BLOCK_NONE},{category:Ee.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:we.BLOCK_NONE},{category:Ee.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:we.BLOCK_NONE},{category:Ee.HARM_CATEGORY_CIVIC_INTEGRITY,threshold:we.BLOCK_NONE}],S=[];for(const _ of n){const I=await _.arrayBuffer(),T=await g.uploadFile(Ut.Buffer.from(I),{mimeType:_.type,displayName:_.name});S.push({file:T.file,originalFile:_})}const R={model:o.modelName,systemInstruction:o.systemInstruction};o.tools&&Object.assign(R,{tools:o.tools});const A=a.getGenerativeModel(R,d),x=[...S.map(({file:_,originalFile:I})=>({fileData:{mimeType:I.type,fileUri:_.uri}}))];o.chatText&&x.push({text:o.chatText});const y=[{role:"model",parts:[{text:o.systemInstruction}]},{role:"user",parts:x}],v=await A.generateContent({safetySettings:w,contents:y,generationConfig:{...o.generationConfig,responseMimeType:o.responseMimeType||"text/plain"}});return console.log("Result:",v.response.functionCalls),Br(v.response,c)}catch(l){return console.error("Gemini Error:",l),{thinking:`Error processing the images: ${l.message||"Unknown error"}`,ocrText:`Error processing images. ${l.message||"Please try again."}`,hasError:!0}}},Nr={functionDeclarations:[{name:"setMappingTable",description:"Set or update the mapping table with new entries",parameters:{type:G.OBJECT,properties:{entries:{type:G.ARRAY,description:"Array of mapping table entries",items:{type:G.OBJECT,properties:{term:{type:G.STRING,description:"Original term or name"},transcription:{type:G.STRING,description:"Transcribed/translated term"},type:{type:G.STRING,description:"Type (Person/Place/Other)"},gender:{type:G.STRING,description:"Gender if person"},notes:{type:G.STRING,description:"Additional notes"}},required:["term","transcription"]}}},required:["entries"]}},{name:"setRelationshipsTable",description:"Set or update the relationships table with new entries",parameters:{type:G.OBJECT,properties:{entries:{type:G.ARRAY,description:"Array of relationship table entries",items:{type:G.OBJECT,properties:{characterA:{type:G.STRING,description:"First character"},characterB:{type:G.STRING,description:"Second character"},relationship:{type:G.STRING,description:"Relationship between characters"},addressTermsAToB:{type:G.STRING,description:"How A addresses B"},addressTermsBToA:{type:G.STRING,description:"How B addresses A"},notes:{type:G.STRING,description:"Additional notes"}},required:["characterA","characterB","relationship"]}}},required:["entries"]}}]};function Br(n,i){console.log("Processing Gemini response:",n);try{if(!n)return console.log("No response received"),{thinking:"No response generated.",ocrText:"No response generated.",hasError:!0};let o="";try{o=n.text()}catch(f){console.log("Error getting text from response:",f)}const c=n.functionCalls();if(c&&c.length>0){console.log("Found function calls:",c);for(const f of c){const{name:d,args:a}=f;switch(console.log("Processing function call:",d,a),d){case"setMappingTable":i!=null&&i.onMappingTableUpdate&&a.entries&&(console.log("Updating mapping table with entries:",a.entries),i.onMappingTableUpdate(a.entries));break;case"setRelationshipsTable":i!=null&&i.onRelationshipsTableUpdate&&a.entries&&(console.log("Updating relationships table with entries:",a.entries),i.onRelationshipsTableUpdate(a.entries));break}}}const l={thinking:"Response processed successfully.",ocrText:o,hasError:!1,translation:o};return console.log("Final processed result:",l),l}catch(o){return console.error("Error processing response:",o),{thinking:`Error processing response: ${o.message||"Unknown error"}`,ocrText:`Error processing response. ${o.message||"Please try again."}`,hasError:!0}}}const yo=async(n,i,o,c,l)=>gt(n,i,{modelName:o,systemInstruction:c||`The user wants me to extract text from the image(s) and present it as a single line of text for each dialogue bubble.
I need to identify the dialogue bubbles in the image(s) and then use OCR to extract the text from each bubble.
I must ensure the extracted text does not include watermarks like 'Colamanga.com' or 'AcloudMerge.com'.

I must identify and extract each dialogue bubble's text as a single continuous line, even if it has multiple lines inside one bubble.
I must present the extracted text exactly as requested by the userjust the text, with no additional formatting or descriptions. Just text. Everything answer to user is the text inside the image.


`,generationConfig:{temperature:1,topP:.95,topK:64,maxOutputTokens:65536},chatText:"",responseMimeType:"text/plain"}),Eo=async(n,i,o,c)=>gt(n,o,{modelName:c,systemInstruction:"You are a helpful assistant that responds to user queries with text, images, or both. If the user provides images, analyze them and respond to any questions about them. If the user provides only text, respond to their questions or statements appropriately. Be concise, helpful, and direct in your responses.",generationConfig:{temperature:.7,topP:.95,topK:32,maxOutputTokens:65536},chatText:i,responseMimeType:"text/plain"}),wo=async(n,i,o,c,l,f)=>{const d=`
You are a skilled translator that uses the provided mapping table and relationships table to guide your translations.
The mapping table provides specific terms and their translations.
The relationships table describes how characters relate to each other and how they address one another.
Ensure your translation maintains the nuances of these relationships and uses the correct terms from the mapping table.

You can use the following functions to update the mapping and relationships tables:
1. setMappingTable - Use this to add or update entries in the mapping table when you discover new terms
2. setRelationshipsTable - Use this to add or update relationship entries when you discover new character relationships

Always maintain consistency with existing entries and only add new entries when you're confident about the information.
`,a=`
# TRANSLATE: Original Language to Vietnamese with Professional Accuracy

Translate the original language text into Vietnamese with complete accuracy and cultural nuance by following these comprehensive guidelines:

---

###  DELIVER precise translations that:

- CAPTURE every single word, preserving the **exact meaning, tone, and nuance** of the original
- MAINTAIN **stylistic fidelity**, including:
  - Formality level (trang trng, sung s, thn mt)
  - Emotional undertones
  - Cultural or historical references
- ENSURE **pronoun consistency** throughout (e.g. ta, ngi, ngi, hn, nng, mui, chng) as appropriate to character and context
- RESPECT the original **sentence structure**, but rewrite for **natural Vietnamese flow** where necessary without losing meaning

---

###  ENSURE emotional and stylistic authenticity:

- MATCH the original **emotional intensity**  never exaggerate or understate the mood
- REPLICATE the tone precisely  formal stays formal, casual stays casual
- PRESERVE **character-specific speech styles**, such as unique patterns, dialects, or quirks

---

###  HANDLE names, terms, and references as follows:

- USE **Sino-Vietnamese phonetic transcription** for common historical/cultural nouns if appropriate
- RETAIN **established translations** for character and place names
- PREFER **English equivalents** for Western mythological or biblical references
- DO NOT localize or adapt terms unless required for clarity

---

###  MAINTAIN contextual and narrative integrity:

- TRANSLATE with attention to the **broader context**  ensure meaning carries across lines and paragraphs
- PRESERVE **subtext and implication**, without adding interpretation or explanation
- DO NOT omit, simplify, or condense the content  translate **everything** as faithfully as possible
- SPLIT long or complex Chinese sentences into manageable Vietnamese ones **without altering their meaning**

---

###  RELATIONSHIPS & ADDRESS TERMS:

- PRESERVE exact **modes of address** between characters:  
  (e.g. huynh  mui, ngi  ta, nng  thip, ca  )
- DISTINGUISH between:
  - **Dialogue speech**
  - **Narration by a character**
  - **Character's internal thoughts**
- ADAPT address and tone appropriately to **each narrative layer** (dialogue, monologue, narration)

---

###  QUALITY CONTROL CHECKLIST:

-  No omissions  every word is translated
-  No stylistic deviation from original
-  Emotional tone precisely mirrored
-  Consistent vocabulary, names, and pronouns
-  Cultural authenticity maintained

---

## Current Tables:

1. **TERM MAPPING TABLE**:
${i||"No mapping table provided."}

2. **RELATIONSHIPS & ADDRESS TERMS TABLE**:
${o||"No relationships table provided."}

TEXT TO TRANSLATE:
${n}

---

##  BEFORE TRANSLATION  TRY TO DEFINE THE CONTEXT:

Before beginning the translation:

1. **CONTEXT AND REFERENCE INFORMATION**:  
   
   - Summary of the story or scene  
   - World background if relevant (historical, fantasy, modern)

2. **ADDRESS RELATIONSHIPS**:  
   
   - Character names, their **genders**, and **relationships** with each other  
   - Specific **ways characters address each other** in:  
     - Dialogue  
     - Narration  
     - Inner thoughts

3. **STYLE & TONE OF NARRATOR**:  
   
   - E.g. omniscient formal narrator, or a character's personal internal monologue  

---

 AFTER TRANSLATION  CALL FUNCTION TO UPDATE TABLES:
`;return await gt([],c,{modelName:l,systemInstruction:d,generationConfig:{temperature:.3,topP:.95,topK:32,maxOutputTokens:65536},chatText:a,responseMimeType:"text/plain",tools:[Nr]},f)};var br=[" ","Enter","ArrowUp","ArrowDown"],Or=[" ","Enter"],Ge="Select",[Ye,qe,Mr]=Nn(Ge),[be,xo]=_n(Ge,[Mr,Bt]),We=Bt(),[Fr,Ce]=be(Ge),[Lr,Pr]=be(Ge),Dt=n=>{const{__scopeSelect:i,children:o,open:c,defaultOpen:l,onOpenChange:f,value:d,defaultValue:a,onValueChange:g,dir:w,name:S,autoComplete:R,disabled:A,required:m,form:x}=n,y=We(i),[v,_]=E.useState(null),[I,T]=E.useState(null),[H,b]=E.useState(!1),pe=An(w),[V=!1,z]=wt({prop:c,defaultProp:l,onChange:f}),[se,de]=wt({prop:d,defaultProp:a,onChange:g}),ne=E.useRef(null),re=v?x||!!v.closest("form"):!0,[ae,Z]=E.useState(new Set),Q=Array.from(ae).map(W=>W.props.value).join(";");return C.jsx(vn,{...y,children:C.jsxs(Fr,{required:m,scope:i,trigger:v,onTriggerChange:_,valueNode:I,onValueNodeChange:T,valueNodeHasChildren:H,onValueNodeHasChildrenChange:b,contentId:dt(),value:se,onValueChange:de,open:V,onOpenChange:z,dir:pe,triggerPointerDownPosRef:ne,disabled:A,children:[C.jsx(Ye.Provider,{scope:i,children:C.jsx(Lr,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(W=>{Z(ee=>new Set(ee).add(W))},[]),onNativeOptionRemove:E.useCallback(W=>{Z(ee=>{const oe=new Set(ee);return oe.delete(W),oe})},[]),children:o})}),re?C.jsxs(un,{"aria-hidden":!0,required:m,tabIndex:-1,name:S,autoComplete:R,value:se,onChange:W=>de(W.target.value),disabled:A,form:x,children:[se===void 0?C.jsx("option",{value:""}):null,Array.from(ae)]},Q):null]})})};Dt.displayName=Ge;var kt="SelectTrigger",jt=E.forwardRef((n,i)=>{const{__scopeSelect:o,disabled:c=!1,...l}=n,f=We(o),d=Ce(kt,o),a=d.disabled||c,g=ue(i,d.onTriggerChange),w=qe(o),S=E.useRef("touch"),[R,A,m]=dn(y=>{const v=w().filter(T=>!T.disabled),_=v.find(T=>T.value===d.value),I=fn(v,y,_);I!==void 0&&d.onValueChange(I.value)}),x=y=>{a||(d.onOpenChange(!0),m()),y&&(d.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return C.jsx(Bn,{asChild:!0,...f,children:C.jsx(te.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":ln(d.value)?"":void 0,...l,ref:g,onClick:Y(l.onClick,y=>{y.currentTarget.focus(),S.current!=="mouse"&&x(y)}),onPointerDown:Y(l.onPointerDown,y=>{S.current=y.pointerType;const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:Y(l.onKeyDown,y=>{const v=R.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&A(y.key),!(v&&y.key===" ")&&br.includes(y.key)&&(x(),y.preventDefault())})})})});jt.displayName=kt;var Gt="SelectValue",Ht=E.forwardRef((n,i)=>{const{__scopeSelect:o,className:c,style:l,children:f,placeholder:d="",...a}=n,g=Ce(Gt,o),{onValueNodeHasChildrenChange:w}=g,S=f!==void 0,R=ue(i,g.onValueNodeChange);return xe(()=>{w(S)},[w,S]),C.jsx(te.span,{...a,ref:R,style:{pointerEvents:"none"},children:ln(g.value)?C.jsx(C.Fragment,{children:d}):f})});Ht.displayName=Gt;var Ur="SelectIcon",$t=E.forwardRef((n,i)=>{const{__scopeSelect:o,children:c,...l}=n;return C.jsx(te.span,{"aria-hidden":!0,...l,ref:i,children:c||""})});$t.displayName=Ur;var Dr="SelectPortal",Vt=n=>C.jsx(bn,{asChild:!0,...n});Vt.displayName=Dr;var _e="SelectContent",Kt=E.forwardRef((n,i)=>{const o=Ce(_e,n.__scopeSelect),[c,l]=E.useState();if(xe(()=>{l(new DocumentFragment)},[]),!o.open){const f=c;return f?bt.createPortal(C.jsx(Yt,{scope:n.__scopeSelect,children:C.jsx(Ye.Slot,{scope:n.__scopeSelect,children:C.jsx("div",{children:n.children})})}),f):null}return C.jsx(qt,{...n,ref:i})});Kt.displayName=_e;var ie=10,[Yt,Se]=be(_e),kr="SelectContentImpl",qt=E.forwardRef((n,i)=>{const{__scopeSelect:o,position:c="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:f,onPointerDownOutside:d,side:a,sideOffset:g,align:w,alignOffset:S,arrowPadding:R,collisionBoundary:A,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:v,..._}=n,I=Ce(_e,o),[T,H]=E.useState(null),[b,pe]=E.useState(null),V=ue(i,N=>H(N)),[z,se]=E.useState(null),[de,ne]=E.useState(null),re=qe(o),[ae,Z]=E.useState(!1),Q=E.useRef(!1);E.useEffect(()=>{if(T)return Mn(T)},[T]),Fn();const W=E.useCallback(N=>{const[O,...K]=re().map(M=>M.ref.current),[P]=K.slice(-1),F=document.activeElement;for(const M of N)if(M===F||(M==null||M.scrollIntoView({block:"nearest"}),M===O&&b&&(b.scrollTop=0),M===P&&b&&(b.scrollTop=b.scrollHeight),M==null||M.focus(),document.activeElement!==F))return},[re,b]),ee=E.useCallback(()=>W([z,T]),[W,z,T]);E.useEffect(()=>{ae&&ee()},[ae,ee]);const{onOpenChange:oe,triggerPointerDownPosRef:ce}=I;E.useEffect(()=>{if(T){let N={x:0,y:0};const O=P=>{var F,M;N={x:Math.abs(Math.round(P.pageX)-(((F=ce.current)==null?void 0:F.x)??0)),y:Math.abs(Math.round(P.pageY)-(((M=ce.current)==null?void 0:M.y)??0))}},K=P=>{N.x<=10&&N.y<=10?P.preventDefault():T.contains(P.target)||oe(!1),document.removeEventListener("pointermove",O),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",O),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",K,{capture:!0})}}},[T,oe,ce]),E.useEffect(()=>{const N=()=>oe(!1);return window.addEventListener("blur",N),window.addEventListener("resize",N),()=>{window.removeEventListener("blur",N),window.removeEventListener("resize",N)}},[oe]);const[Oe,D]=dn(N=>{const O=re().filter(F=>!F.disabled),K=O.find(F=>F.ref.current===document.activeElement),P=fn(O,N,K);P&&setTimeout(()=>P.ref.current.focus())}),$=E.useCallback((N,O,K)=>{const P=!Q.current&&!K;(I.value!==void 0&&I.value===O||P)&&(se(N),P&&(Q.current=!0))},[I.value]),Ne=E.useCallback(()=>T==null?void 0:T.focus(),[T]),fe=E.useCallback((N,O,K)=>{const P=!Q.current&&!K;(I.value!==void 0&&I.value===O||P)&&ne(N)},[I.value]),Te=c==="popper"?st:Wt,ge=Te===st?{side:a,sideOffset:g,align:w,alignOffset:S,arrowPadding:R,collisionBoundary:A,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:v}:{};return C.jsx(Yt,{scope:o,content:T,viewport:b,onViewportChange:pe,itemRefCallback:$,selectedItem:z,onItemLeave:Ne,itemTextRefCallback:fe,focusSelectedItem:ee,selectedItemText:de,position:c,isPositioned:ae,searchRef:Oe,children:C.jsx(Ln,{as:Pn,allowPinchZoom:!0,children:C.jsx(Un,{asChild:!0,trapped:I.open,onMountAutoFocus:N=>{N.preventDefault()},onUnmountAutoFocus:Y(l,N=>{var O;(O=I.trigger)==null||O.focus({preventScroll:!0}),N.preventDefault()}),children:C.jsx(Dn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:f,onPointerDownOutside:d,onFocusOutside:N=>N.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:C.jsx(Te,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:N=>N.preventDefault(),..._,...ge,onPlaced:()=>Z(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Y(_.onKeyDown,N=>{const O=N.ctrlKey||N.altKey||N.metaKey;if(N.key==="Tab"&&N.preventDefault(),!O&&N.key.length===1&&D(N.key),["ArrowUp","ArrowDown","Home","End"].includes(N.key)){let P=re().filter(F=>!F.disabled).map(F=>F.ref.current);if(["ArrowUp","End"].includes(N.key)&&(P=P.slice().reverse()),["ArrowUp","ArrowDown"].includes(N.key)){const F=N.target,M=P.indexOf(F);P=P.slice(M+1)}setTimeout(()=>W(P)),N.preventDefault()}})})})})})})});qt.displayName=kr;var jr="SelectItemAlignedPosition",Wt=E.forwardRef((n,i)=>{const{__scopeSelect:o,onPlaced:c,...l}=n,f=Ce(_e,o),d=Se(_e,o),[a,g]=E.useState(null),[w,S]=E.useState(null),R=ue(i,V=>S(V)),A=qe(o),m=E.useRef(!1),x=E.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:_,focusSelectedItem:I}=d,T=E.useCallback(()=>{if(f.trigger&&f.valueNode&&a&&w&&y&&v&&_){const V=f.trigger.getBoundingClientRect(),z=w.getBoundingClientRect(),se=f.valueNode.getBoundingClientRect(),de=_.getBoundingClientRect();if(f.dir!=="rtl"){const F=de.left-z.left,M=se.left-F,J=V.left-M,X=V.width+J,Me=Math.max(X,z.width),Fe=window.innerWidth-ie,Re=xt(M,[ie,Math.max(ie,Fe-Me)]);a.style.minWidth=X+"px",a.style.left=Re+"px"}else{const F=z.right-de.right,M=window.innerWidth-se.right-F,J=window.innerWidth-V.right-M,X=V.width+J,Me=Math.max(X,z.width),Fe=window.innerWidth-ie,Re=xt(M,[ie,Math.max(ie,Fe-Me)]);a.style.minWidth=X+"px",a.style.right=Re+"px"}const ne=A(),re=window.innerHeight-ie*2,ae=y.scrollHeight,Z=window.getComputedStyle(w),Q=parseInt(Z.borderTopWidth,10),W=parseInt(Z.paddingTop,10),ee=parseInt(Z.borderBottomWidth,10),oe=parseInt(Z.paddingBottom,10),ce=Q+W+ae+oe+ee,Oe=Math.min(v.offsetHeight*5,ce),D=window.getComputedStyle(y),$=parseInt(D.paddingTop,10),Ne=parseInt(D.paddingBottom,10),fe=V.top+V.height/2-ie,Te=re-fe,ge=v.offsetHeight/2,N=v.offsetTop+ge,O=Q+W+N,K=ce-O;if(O<=fe){const F=ne.length>0&&v===ne[ne.length-1].ref.current;a.style.bottom="0px";const M=w.clientHeight-y.offsetTop-y.offsetHeight,J=Math.max(Te,ge+(F?Ne:0)+M+ee),X=O+J;a.style.height=X+"px"}else{const F=ne.length>0&&v===ne[0].ref.current;a.style.top="0px";const J=Math.max(fe,Q+y.offsetTop+(F?$:0)+ge)+K;a.style.height=J+"px",y.scrollTop=O-fe+y.offsetTop}a.style.margin=`${ie}px 0`,a.style.minHeight=Oe+"px",a.style.maxHeight=re+"px",c==null||c(),requestAnimationFrame(()=>m.current=!0)}},[A,f.trigger,f.valueNode,a,w,y,v,_,f.dir,c]);xe(()=>T(),[T]);const[H,b]=E.useState();xe(()=>{w&&b(window.getComputedStyle(w).zIndex)},[w]);const pe=E.useCallback(V=>{V&&x.current===!0&&(T(),I==null||I(),x.current=!1)},[T,I]);return C.jsx(Hr,{scope:o,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:pe,children:C.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:H},children:C.jsx(te.div,{...l,ref:R,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});Wt.displayName=jr;var Gr="SelectPopperPosition",st=E.forwardRef((n,i)=>{const{__scopeSelect:o,align:c="start",collisionPadding:l=ie,...f}=n,d=We(o);return C.jsx(kn,{...d,...f,ref:i,align:c,collisionPadding:l,style:{boxSizing:"border-box",...f.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});st.displayName=Gr;var[Hr,mt]=be(_e,{}),at="SelectViewport",Jt=E.forwardRef((n,i)=>{const{__scopeSelect:o,nonce:c,...l}=n,f=Se(at,o),d=mt(at,o),a=ue(i,f.onViewportChange),g=E.useRef(0);return C.jsxs(C.Fragment,{children:[C.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:c}),C.jsx(Ye.Slot,{scope:o,children:C.jsx(te.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:Y(l.onScroll,w=>{const S=w.currentTarget,{contentWrapper:R,shouldExpandOnScrollRef:A}=d;if(A!=null&&A.current&&R){const m=Math.abs(g.current-S.scrollTop);if(m>0){const x=window.innerHeight-ie*2,y=parseFloat(R.style.minHeight),v=parseFloat(R.style.height),_=Math.max(y,v);if(_<x){const I=_+m,T=Math.min(x,I),H=I-T;R.style.height=T+"px",R.style.bottom==="0px"&&(S.scrollTop=H>0?H:0,R.style.justifyContent="flex-end")}}}g.current=S.scrollTop})})})]})});Jt.displayName=at;var Xt="SelectGroup",[$r,Vr]=be(Xt),Kr=E.forwardRef((n,i)=>{const{__scopeSelect:o,...c}=n,l=dt();return C.jsx($r,{scope:o,id:l,children:C.jsx(te.div,{role:"group","aria-labelledby":l,...c,ref:i})})});Kr.displayName=Xt;var zt="SelectLabel",Zt=E.forwardRef((n,i)=>{const{__scopeSelect:o,...c}=n,l=Vr(zt,o);return C.jsx(te.div,{id:l.id,...c,ref:i})});Zt.displayName=zt;var Ke="SelectItem",[Yr,Qt]=be(Ke),en=E.forwardRef((n,i)=>{const{__scopeSelect:o,value:c,disabled:l=!1,textValue:f,...d}=n,a=Ce(Ke,o),g=Se(Ke,o),w=a.value===c,[S,R]=E.useState(f??""),[A,m]=E.useState(!1),x=ue(i,I=>{var T;return(T=g.itemRefCallback)==null?void 0:T.call(g,I,c,l)}),y=dt(),v=E.useRef("touch"),_=()=>{l||(a.onValueChange(c),a.onOpenChange(!1))};if(c==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return C.jsx(Yr,{scope:o,value:c,disabled:l,textId:y,isSelected:w,onItemTextChange:E.useCallback(I=>{R(T=>T||((I==null?void 0:I.textContent)??"").trim())},[]),children:C.jsx(Ye.ItemSlot,{scope:o,value:c,disabled:l,textValue:S,children:C.jsx(te.div,{role:"option","aria-labelledby":y,"data-highlighted":A?"":void 0,"aria-selected":w&&A,"data-state":w?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...d,ref:x,onFocus:Y(d.onFocus,()=>m(!0)),onBlur:Y(d.onBlur,()=>m(!1)),onClick:Y(d.onClick,()=>{v.current!=="mouse"&&_()}),onPointerUp:Y(d.onPointerUp,()=>{v.current==="mouse"&&_()}),onPointerDown:Y(d.onPointerDown,I=>{v.current=I.pointerType}),onPointerMove:Y(d.onPointerMove,I=>{var T;v.current=I.pointerType,l?(T=g.onItemLeave)==null||T.call(g):v.current==="mouse"&&I.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Y(d.onPointerLeave,I=>{var T;I.currentTarget===document.activeElement&&((T=g.onItemLeave)==null||T.call(g))}),onKeyDown:Y(d.onKeyDown,I=>{var H;((H=g.searchRef)==null?void 0:H.current)!==""&&I.key===" "||(Or.includes(I.key)&&_(),I.key===" "&&I.preventDefault())})})})})});en.displayName=Ke;var Pe="SelectItemText",tn=E.forwardRef((n,i)=>{const{__scopeSelect:o,className:c,style:l,...f}=n,d=Ce(Pe,o),a=Se(Pe,o),g=Qt(Pe,o),w=Pr(Pe,o),[S,R]=E.useState(null),A=ue(i,_=>R(_),g.onItemTextChange,_=>{var I;return(I=a.itemTextRefCallback)==null?void 0:I.call(a,_,g.value,g.disabled)}),m=S==null?void 0:S.textContent,x=E.useMemo(()=>C.jsx("option",{value:g.value,disabled:g.disabled,children:m},g.value),[g.disabled,g.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=w;return xe(()=>(y(x),()=>v(x)),[y,v,x]),C.jsxs(C.Fragment,{children:[C.jsx(te.span,{id:g.textId,...f,ref:A}),g.isSelected&&d.valueNode&&!d.valueNodeHasChildren?bt.createPortal(f.children,d.valueNode):null]})});tn.displayName=Pe;var nn="SelectItemIndicator",rn=E.forwardRef((n,i)=>{const{__scopeSelect:o,...c}=n;return Qt(nn,o).isSelected?C.jsx(te.span,{"aria-hidden":!0,...c,ref:i}):null});rn.displayName=nn;var ct="SelectScrollUpButton",on=E.forwardRef((n,i)=>{const o=Se(ct,n.__scopeSelect),c=mt(ct,n.__scopeSelect),[l,f]=E.useState(!1),d=ue(i,c.onScrollButtonChange);return xe(()=>{if(o.viewport&&o.isPositioned){let a=function(){const w=g.scrollTop>0;f(w)};const g=o.viewport;return a(),g.addEventListener("scroll",a),()=>g.removeEventListener("scroll",a)}},[o.viewport,o.isPositioned]),l?C.jsx(an,{...n,ref:d,onAutoScroll:()=>{const{viewport:a,selectedItem:g}=o;a&&g&&(a.scrollTop=a.scrollTop-g.offsetHeight)}}):null});on.displayName=ct;var lt="SelectScrollDownButton",sn=E.forwardRef((n,i)=>{const o=Se(lt,n.__scopeSelect),c=mt(lt,n.__scopeSelect),[l,f]=E.useState(!1),d=ue(i,c.onScrollButtonChange);return xe(()=>{if(o.viewport&&o.isPositioned){let a=function(){const w=g.scrollHeight-g.clientHeight,S=Math.ceil(g.scrollTop)<w;f(S)};const g=o.viewport;return a(),g.addEventListener("scroll",a),()=>g.removeEventListener("scroll",a)}},[o.viewport,o.isPositioned]),l?C.jsx(an,{...n,ref:d,onAutoScroll:()=>{const{viewport:a,selectedItem:g}=o;a&&g&&(a.scrollTop=a.scrollTop+g.offsetHeight)}}):null});sn.displayName=lt;var an=E.forwardRef((n,i)=>{const{__scopeSelect:o,onAutoScroll:c,...l}=n,f=Se("SelectScrollButton",o),d=E.useRef(null),a=qe(o),g=E.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return E.useEffect(()=>()=>g(),[g]),xe(()=>{var S;const w=a().find(R=>R.ref.current===document.activeElement);(S=w==null?void 0:w.ref.current)==null||S.scrollIntoView({block:"nearest"})},[a]),C.jsx(te.div,{"aria-hidden":!0,...l,ref:i,style:{flexShrink:0,...l.style},onPointerDown:Y(l.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(c,50))}),onPointerMove:Y(l.onPointerMove,()=>{var w;(w=f.onItemLeave)==null||w.call(f),d.current===null&&(d.current=window.setInterval(c,50))}),onPointerLeave:Y(l.onPointerLeave,()=>{g()})})}),qr="SelectSeparator",cn=E.forwardRef((n,i)=>{const{__scopeSelect:o,...c}=n;return C.jsx(te.div,{"aria-hidden":!0,...c,ref:i})});cn.displayName=qr;var ut="SelectArrow",Wr=E.forwardRef((n,i)=>{const{__scopeSelect:o,...c}=n,l=We(o),f=Ce(ut,o),d=Se(ut,o);return f.open&&d.position==="popper"?C.jsx(jn,{...l,...c,ref:i}):null});Wr.displayName=ut;function ln(n){return n===""||n===void 0}var un=E.forwardRef((n,i)=>{const{value:o,...c}=n,l=E.useRef(null),f=ue(i,l),d=Hn(o);return E.useEffect(()=>{const a=l.current,g=window.HTMLSelectElement.prototype,S=Object.getOwnPropertyDescriptor(g,"value").set;if(d!==o&&S){const R=new Event("change",{bubbles:!0});S.call(a,o),a.dispatchEvent(R)}},[d,o]),C.jsx($n,{asChild:!0,children:C.jsx("select",{...c,ref:f,defaultValue:o})})});un.displayName="BubbleSelect";function dn(n){const i=On(n),o=E.useRef(""),c=E.useRef(0),l=E.useCallback(d=>{const a=o.current+d;i(a),function g(w){o.current=w,window.clearTimeout(c.current),w!==""&&(c.current=window.setTimeout(()=>g(""),1e3))}(a)},[i]),f=E.useCallback(()=>{o.current="",window.clearTimeout(c.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(c.current),[]),[o,l,f]}function fn(n,i,o){const l=i.length>1&&Array.from(i).every(w=>w===i[0])?i[0]:i,f=o?n.indexOf(o):-1;let d=Jr(n,Math.max(f,0));l.length===1&&(d=d.filter(w=>w!==o));const g=d.find(w=>w.textValue.toLowerCase().startsWith(l.toLowerCase()));return g!==o?g:void 0}function Jr(n,i){return n.map((o,c)=>n[(i+c)%n.length])}var Xr=Dt,hn=jt,zr=Ht,Zr=$t,Qr=Vt,pn=Kt,eo=Jt,gn=Zt,mn=en,to=tn,no=rn,yn=on,En=sn,wn=cn;const Io=Xr,Co=zr,ro=E.forwardRef(({className:n,children:i,...o},c)=>C.jsxs(hn,{ref:c,className:Ie("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...o,children:[i,C.jsx(Zr,{asChild:!0,children:C.jsx(Ot,{className:"h-4 w-4 opacity-50"})})]}));ro.displayName=hn.displayName;const xn=E.forwardRef(({className:n,...i},o)=>C.jsx(yn,{ref:o,className:Ie("flex cursor-default items-center justify-center py-1",n),...i,children:C.jsx(Yn,{className:"h-4 w-4"})}));xn.displayName=yn.displayName;const In=E.forwardRef(({className:n,...i},o)=>C.jsx(En,{ref:o,className:Ie("flex cursor-default items-center justify-center py-1",n),...i,children:C.jsx(Ot,{className:"h-4 w-4"})}));In.displayName=En.displayName;const oo=E.forwardRef(({className:n,children:i,position:o="popper",...c},l)=>C.jsx(Qr,{children:C.jsxs(pn,{ref:l,className:Ie("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:o,...c,children:[C.jsx(xn,{}),C.jsx(eo,{className:Ie("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),C.jsx(In,{})]})}));oo.displayName=pn.displayName;const io=E.forwardRef(({className:n,...i},o)=>C.jsx(gn,{ref:o,className:Ie("px-2 py-1.5 text-sm font-semibold",n),...i}));io.displayName=gn.displayName;const so=E.forwardRef(({className:n,children:i,...o},c)=>C.jsxs(mn,{ref:c,className:Ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...o,children:[C.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:C.jsx(no,{children:C.jsx(Gn,{className:"h-4 w-4"})})}),C.jsx(to,{children:i})]}));so.displayName=mn.displayName;const ao=E.forwardRef(({className:n,...i},o)=>C.jsx(wn,{ref:o,className:Ie("-mx-1 my-1 h-px bg-muted",n),...i}));ao.displayName=wn.displayName;export{po as C,go as G,Io as S,ho as a,ro as b,Co as c,oo as d,so as e,Ot as f,yo as g,Yn as h,wo as i,Eo as r};
