import{c as F,j as e,r,P as D,a as Z,u as ie,b as ce,d as de,e as O,f as me,g as ue,h as he,B,i as pe,k as xe,l as ge,n as fe,L}from"./index-DPvVn2Jp.js";import{C as be,a as je,b as ve,e as Ne,d as ye}from"./card-qR5DT0Di.js";import{T as z,a as A,b as w,c as S,u as Ce}from"./index-nvDBrsyp.js";import{B as ke}from"./badge-D6iX1FDR.js";import{I}from"./input-C6Rp5bcp.js";import{L as R,T as we,a as Se}from"./index-C_SKARuB.js";import{A as J,a as Q,b as W}from"./alert-CEgw-kvh.js";import{T as U,a as V,b as q,c as K}from"./tooltip-CktIEOKI.js";import{F as Ee}from"./file-down-dSs4DJ9A.js";import{U as Te}from"./upload-DQVAX7U5.js";import{E as Pe}from"./eye-BLA1T0FV.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Re=F("Code",Ie);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Ae=F("ImagePlus",ze);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],De=F("ListChecks",Fe),_e=({albumName:s,setAlbumName:t,chapterNumber:a,setChapterNumber:l,customFileName:n,setCustomFileName:o,namingMethod:u,setNamingMethod:d,getFileName:p})=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"File Naming"}),e.jsxs(z,{value:u,onValueChange:d,className:"mb-4",children:[e.jsxs(A,{className:"grid grid-cols-2 w-full",children:[e.jsx(w,{value:"chapter",children:"Chapter + Album"}),e.jsx(w,{value:"custom",children:"Custom Name"})]}),e.jsx(S,{value:"chapter",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{className:"my-2",htmlFor:"chapterNumber",children:"Chapter Number"}),e.jsx(I,{id:"chapterNumber",value:a,onChange:c=>l(c.target.value),placeholder:"Enter chapter number"})]}),e.jsxs("div",{children:[e.jsx(R,{className:"my-2",htmlFor:"albumName",children:"Album Name"}),e.jsx(I,{id:"albumName",value:s,onChange:c=>t(c.target.value),placeholder:"Enter album name"})]})]})}),e.jsx(S,{value:"custom",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(R,{className:"my-2",htmlFor:"customFileName",children:"File Name"}),e.jsx(I,{id:"customFileName",value:n,onChange:c=>o(c.target.value),placeholder:"Enter file name"})]})})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["File will be named as:"," ",e.jsx(ke,{variant:"secondary",children:p()})]})]});var He="Separator",X="horizontal",Me=["horizontal","vertical"],Y=r.forwardRef((s,t)=>{const{decorative:a,orientation:l=X,...n}=s,o=$e(l)?l:X,d=a?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(D.div,{"data-orientation":o,...d,...n,ref:t})});Y.displayName=He;function $e(s){return Me.includes(s)}var Oe=Y;function Be({className:s,orientation:t="horizontal",decorative:a=!0,...l}){return e.jsx(Oe,{"data-slot":"separator-root",decorative:a,orientation:t,className:Z("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...l})}var _="Checkbox",[Le,cs]=de(_),[Ue,Ve]=Le(_),ee=r.forwardRef((s,t)=>{const{__scopeCheckbox:a,name:l,checked:n,defaultChecked:o,required:u,disabled:d,value:p="on",onCheckedChange:c,form:h,...j}=s,[i,v]=r.useState(null),E=ie(t,m=>v(m)),T=r.useRef(!1),x=i?h||!!i.closest("form"):!0,[g=!1,C]=ce({prop:n,defaultProp:o,onChange:c}),P=r.useRef(g);return r.useEffect(()=>{const m=i==null?void 0:i.form;if(m){const N=()=>C(P.current);return m.addEventListener("reset",N),()=>m.removeEventListener("reset",N)}},[i,C]),e.jsxs(Ue,{scope:a,state:g,disabled:d,children:[e.jsx(D.button,{type:"button",role:"checkbox","aria-checked":b(g)?"mixed":g,"aria-required":u,"data-state":te(g),"data-disabled":d?"":void 0,disabled:d,value:p,...j,ref:E,onKeyDown:O(s.onKeyDown,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:O(s.onClick,m=>{C(N=>b(N)?!0:!N),x&&(T.current=m.isPropagationStopped(),T.current||m.stopPropagation())})}),x&&e.jsx(qe,{control:i,bubbles:!T.current,name:l,value:p,checked:g,required:u,disabled:d,form:h,style:{transform:"translateX(-100%)"},defaultChecked:b(o)?!1:o})]})});ee.displayName=_;var se="CheckboxIndicator",ae=r.forwardRef((s,t)=>{const{__scopeCheckbox:a,forceMount:l,...n}=s,o=Ve(se,a);return e.jsx(me,{present:l||b(o.state)||o.state===!0,children:e.jsx(D.span,{"data-state":te(o.state),"data-disabled":o.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...s.style}})})});ae.displayName=se;var qe=s=>{const{control:t,checked:a,bubbles:l=!0,defaultChecked:n,...o}=s,u=r.useRef(null),d=Ce(a),p=ue(t);r.useEffect(()=>{const h=u.current,j=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(j,"checked").set;if(d!==a&&v){const E=new Event("click",{bubbles:l});h.indeterminate=b(a),v.call(h,b(a)?!1:a),h.dispatchEvent(E)}},[d,a,l]);const c=r.useRef(b(a)?!1:a);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??c.current,...o,tabIndex:-1,ref:u,style:{...s.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(s){return s==="indeterminate"}function te(s){return b(s)?"indeterminate":s?"checked":"unchecked"}var Ke=ee,Xe=ae;function Ge({className:s,...t}){return e.jsx(Ke,{"data-slot":"checkbox",className:Z("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(Xe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(he,{className:"size-3.5"})})})}const Ze=({htmlContent:s,setHtmlContent:t,lazyLoad:a,setLazyLoad:l})=>e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"min-h-[150px] font-mono text-sm",value:s,onChange:n=>t(n.target.value),placeholder:"Paste your HTML or image links here..."}),e.jsxs("div",{className:"flex items-center space-x-2 my-4",children:[e.jsx(Ge,{id:"lazy-load",checked:a,onCheckedChange:n=>l(!!n)}),e.jsx(Se,{htmlFor:"lazy-load",children:"Enable Lazy Loading for Images"})]}),e.jsx(Be,{className:"my-4"})]}),Je=({extractedLinks:s})=>(s==null?void 0:s.length)>0&&e.jsxs(J,{className:"border-green-500 bg-green-50 dark:bg-green-900 dark:border-green-400",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"text-green-600 dark:text-green-300"}),"Image Detection"]}),e.jsxs(W,{children:["Detected ",s==null?void 0:s.length," image link(s). Only the image URLs will be processed."]})]}),G=({previewTab:s,extractedLinks:t,htmlContent:a,lazyLoad:l})=>{if(s==="visual")return(t==null?void 0:t.length)>0?e.jsx("div",{className:"flex flex-col items-center",children:t.map((n,o)=>e.jsx("img",{src:n,alt:`Image ${o+1}`,className:"max-w-full h-auto"},n))}):e.jsx("div",{dangerouslySetInnerHTML:{__html:a},className:"prose dark:prose-invert max-w-none"});{const n=(t==null?void 0:t.length)>0?t.map(o=>`<img src="${o}" alt="" ${l?'loading="lazy"':""}>`).join(`
`):a;return e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-md overflow-auto",children:e.jsx("code",{className:"text-sm font-mono",children:n})})}},Qe=({htmlContent:s,extractedLinks:t,lazyLoad:a,fileName:l,albumName:n,chapterNumber:o,namingMethod:u,saving:d,setSaving:p,saveMessage:c,setSaveMessage:h,setSavedFiles:j})=>e.jsxs(e.Fragment,{children:[c&&e.jsxs(J,{variant:c.type==="error"?"destructive":"default",className:`mb-4 ${c.type==="error"?"bg-red-50 dark:bg-red-900":"bg-green-50 dark:bg-green-900"}`,children:[e.jsx(Q,{children:c.type==="error"?"Error":"Success"}),e.jsx(W,{children:c.text})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(U,{children:e.jsxs(V,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(B,{variant:"outline",onClick:()=>pe(t,s,a,l),disabled:!s.trim(),className:"w-32",children:[e.jsx(Ee,{size:16,className:"mr-2"}),"Download"]})}),e.jsx(K,{children:e.jsx("p",{children:"Download the generated HTML file"})})]})}),e.jsx(U,{children:e.jsxs(V,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(B,{onClick:()=>xe(n,o,u,l,t,p,h,j),disabled:d||!s.trim(),className:"w-32",children:[d?e.jsx(ge,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Te,{size:16,className:"mr-2"}),"Upload"]})}),e.jsx(K,{children:e.jsx("p",{children:"Save the album to browser storage"})})]})})]})]}),ds=()=>{const[s,t]=r.useState(""),[a,l]=r.useState([]),[n,o]=r.useState("Album"),[u,d]=r.useState("1"),[p,c]=r.useState("my-file.html"),[h,j]=r.useState("chapter"),[i,v]=r.useState([]),[E,T]=r.useState(!1),[x,g]=r.useState(null),[C,P]=r.useState(null),[m,N]=r.useState(!0),[H,M]=r.useState("visual");r.useEffect(()=>{if(s.trim()){const y=/<img[^>]+src\s*=\s*(['"])(.*?)\1/gi;let k;const f=[];for(;(k=y.exec(s))!==null;)f.push(k[2]);const re=/<img[^>]+src\s*=\s*(['"])(data:image\/[a-zA-Z0-9+]+;base64,[^'"]+)\1/gi;for(;(k=re.exec(s))!==null;)f.push(k[2]);const ne=/background-image\s*:\s*url\((['"]?)([^'")]+)\1\)/gi;for(;(k=ne.exec(s))!==null;)f.push(k[2]);if((f==null?void 0:f.length)===0){const oe=/https?:\/\/[^\s'"]+\.(jpg|jpeg|png|gif|webp|svg|bmp|tiff|ico|avif|jfif|pjpeg|pjp)(\?[^'"\s]*)?(\#[^'"\s]*)?/gi,le=s.match(oe)||[];f.push(...le)}l(f)}else l([])},[s]),r.useEffect(()=>{fe(y=>{v(y)})},[]),r.useEffect(()=>{if((x==null?void 0:x.type)==="success"&&(i==null?void 0:i.length)>0){const y=i[(i==null?void 0:i.length)-1];y&&typeof y.id=="number"&&P(y.id)}},[x,i]);const $=()=>h==="chapter"?`${u} - ${n}.html`:p;return e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs(be,{className:"shadow-lg",children:[e.jsxs(je,{children:[e.jsxs(ve,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Ae,{size:24,className:"text-blue-600"}),"HTML Image Uploader"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Create HTML files from image links or HTML content."})]}),e.jsx(Ne,{children:e.jsxs(z,{defaultValue:"edit",className:"w-full space-y-4",children:[e.jsxs(A,{className:"grid grid-cols-2",children:[e.jsxs(w,{value:"edit",className:"flex items-center gap-2",children:[e.jsx(Re,{size:16})," Editor"]}),e.jsxs(w,{value:"preview",className:"flex items-center gap-2",children:[e.jsx(Pe,{size:16})," Preview"]})]}),e.jsxs(S,{value:"edit",children:[e.jsx(Ze,{htmlContent:s,setHtmlContent:t,lazyLoad:m,setLazyLoad:N}),e.jsx(_e,{albumName:n,setAlbumName:o,chapterNumber:u,setChapterNumber:d,customFileName:p,setCustomFileName:c,namingMethod:h,setNamingMethod:j,getFileName:$}),e.jsx(Je,{extractedLinks:a})]}),e.jsx(S,{value:"preview",children:e.jsxs(z,{defaultValue:"visual",className:"w-full space-y-4",children:[e.jsxs(A,{className:"grid grid-cols-2",children:[e.jsx(w,{value:"visual",onClick:()=>M("visual"),children:"Visual Preview"}),e.jsx(w,{value:"code",onClick:()=>M("code"),children:"Code Preview"})]}),e.jsx(S,{value:"visual",children:e.jsx(G,{previewTab:H,extractedLinks:a,htmlContent:s,lazyLoad:m})}),e.jsx(S,{value:"code",children:e.jsx(G,{previewTab:H,extractedLinks:a,htmlContent:s,lazyLoad:m})})]})})]})}),e.jsxs(ye,{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i==null?void 0:i.length," file(s) saved in browser storage."," ",e.jsx(L,{to:"/albums",className:"text-blue-500 hover:underline",children:"View Albums"}),C!==null&&(x==null?void 0:x.type)==="success"&&e.jsxs(e.Fragment,{children:[" | ",e.jsx(L,{to:`/albums/${C}`,className:"text-green-600 hover:underline font-semibold",children:"Go to Album"})]})]}),e.jsx(Qe,{htmlContent:s,extractedLinks:a,lazyLoad:m,fileName:$(),albumName:n,chapterNumber:u,namingMethod:h,saving:E,setSaving:T,saveMessage:x,setSaveMessage:g,setSavedFiles:v})]})]})})};export{ds as default};
