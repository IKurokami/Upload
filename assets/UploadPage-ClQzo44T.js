import{c as z,j as e,r,P as A,a as Z,u as le,b as ce,d as de,e as $,f as me,g as ue,C as he,B as O,h as xe,i as pe,L as ge,k as fe,l as B}from"./index-ur9zFp39.js";import{C as be,b as je,c as ve,a as Ne,d as ke}from"./card-Dvjo2Szc.js";import{T as F,a as R,b as w,c as S,u as ye}from"./index-COhfIs9f.js";import{B as Ce}from"./badge-6Ehp9JXy.js";import{I}from"./input-IDa1mvQU.js";import{L,T as we,a as Se}from"./index-Bx5Vo5ny.js";import{A as J,a as Q,b as W}from"./alert-DNEF7cDl.js";import{T as U,a as V,b as q,c as K}from"./tooltip-BE_xPO0u.js";import{F as Ee}from"./file-down-HxgeLc6-.js";import{U as Te}from"./upload-DH37QyE6.js";import{E as Pe}from"./eye-ATs_9VP5.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Le=z("Code",Ie);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Re=z("ImagePlus",Fe);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Ae=z("ListChecks",ze),De=({albumName:s,setAlbumName:a,chapterNumber:t,setChapterNumber:i,customFileName:n,setCustomFileName:o,namingMethod:m,setNamingMethod:c,getFileName:x})=>e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"File Naming"}),e.jsxs(F,{value:m,onValueChange:c,className:"mb-4",children:[e.jsxs(R,{className:"grid grid-cols-2 w-full",children:[e.jsx(w,{value:"chapter",children:"Chapter + Album"}),e.jsx(w,{value:"custom",children:"Custom Name"})]}),e.jsx(S,{value:"chapter",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(L,{className:"my-2",htmlFor:"chapterNumber",children:"Chapter Number"}),e.jsx(I,{id:"chapterNumber",value:t,onChange:l=>i(l.target.value),placeholder:"Enter chapter number"})]}),e.jsxs("div",{children:[e.jsx(L,{className:"my-2",htmlFor:"albumName",children:"Album Name"}),e.jsx(I,{id:"albumName",value:s,onChange:l=>a(l.target.value),placeholder:"Enter album name"})]})]})}),e.jsx(S,{value:"custom",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(L,{className:"my-2",htmlFor:"customFileName",children:"File Name"}),e.jsx(I,{id:"customFileName",value:n,onChange:l=>o(l.target.value),placeholder:"Enter file name"})]})})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["File will be named as:"," ",e.jsx(Ce,{variant:"secondary",children:x()})]})]});var _e="Separator",X="horizontal",He=["horizontal","vertical"],Y=r.forwardRef((s,a)=>{const{decorative:t,orientation:i=X,...n}=s,o=Me(i)?i:X,c=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(A.div,{"data-orientation":o,...c,...n,ref:a})});Y.displayName=_e;function Me(s){return He.includes(s)}var $e=Y;function Oe({className:s,orientation:a="horizontal",decorative:t=!0,...i}){return e.jsx($e,{"data-slot":"separator-root",decorative:t,orientation:a,className:Z("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...i})}var D="Checkbox",[Be,cs]=de(D),[Ue,Ve]=Be(D),ee=r.forwardRef((s,a)=>{const{__scopeCheckbox:t,name:i,checked:n,defaultChecked:o,required:m,disabled:c,value:x="on",onCheckedChange:l,form:h,...b}=s,[u,j]=r.useState(null),E=le(a,d=>j(d)),T=r.useRef(!1),p=u?h||!!u.closest("form"):!0,[g=!1,k]=ce({prop:n,defaultProp:o,onChange:l}),P=r.useRef(g);return r.useEffect(()=>{const d=u==null?void 0:u.form;if(d){const v=()=>k(P.current);return d.addEventListener("reset",v),()=>d.removeEventListener("reset",v)}},[u,k]),e.jsxs(Ue,{scope:t,state:g,disabled:c,children:[e.jsx(A.button,{type:"button",role:"checkbox","aria-checked":f(g)?"mixed":g,"aria-required":m,"data-state":ae(g),"data-disabled":c?"":void 0,disabled:c,value:x,...b,ref:E,onKeyDown:$(s.onKeyDown,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:$(s.onClick,d=>{k(v=>f(v)?!0:!v),p&&(T.current=d.isPropagationStopped(),T.current||d.stopPropagation())})}),p&&e.jsx(qe,{control:u,bubbles:!T.current,name:i,value:x,checked:g,required:m,disabled:c,form:h,style:{transform:"translateX(-100%)"},defaultChecked:f(o)?!1:o})]})});ee.displayName=D;var se="CheckboxIndicator",te=r.forwardRef((s,a)=>{const{__scopeCheckbox:t,forceMount:i,...n}=s,o=Ve(se,t);return e.jsx(me,{present:i||f(o.state)||o.state===!0,children:e.jsx(A.span,{"data-state":ae(o.state),"data-disabled":o.disabled?"":void 0,...n,ref:a,style:{pointerEvents:"none",...s.style}})})});te.displayName=se;var qe=s=>{const{control:a,checked:t,bubbles:i=!0,defaultChecked:n,...o}=s,m=r.useRef(null),c=ye(t),x=ue(a);r.useEffect(()=>{const h=m.current,b=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(b,"checked").set;if(c!==t&&j){const E=new Event("click",{bubbles:i});h.indeterminate=f(t),j.call(h,f(t)?!1:t),h.dispatchEvent(E)}},[c,t,i]);const l=r.useRef(f(t)?!1:t);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??l.current,...o,tabIndex:-1,ref:m,style:{...s.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function f(s){return s==="indeterminate"}function ae(s){return f(s)?"indeterminate":s?"checked":"unchecked"}var Ke=ee,Xe=te;function Ge({className:s,...a}){return e.jsx(Ke,{"data-slot":"checkbox",className:Z("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Xe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(he,{className:"size-3.5"})})})}const Ze=({htmlContent:s,setHtmlContent:a,lazyLoad:t,setLazyLoad:i})=>e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"min-h-[150px] font-mono text-sm",value:s,onChange:n=>a(n.target.value),placeholder:"Paste your HTML or image links here..."}),e.jsxs("div",{className:"flex items-center space-x-2 my-4",children:[e.jsx(Ge,{id:"lazy-load",checked:t,onCheckedChange:n=>i(!!n)}),e.jsx(Se,{htmlFor:"lazy-load",children:"Enable Lazy Loading for Images"})]}),e.jsx(Oe,{className:"my-4"})]}),Je=({extractedLinks:s})=>s.length>0&&e.jsxs(J,{className:"border-green-500 bg-green-50 dark:bg-green-900 dark:border-green-400",children:[e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"text-green-600 dark:text-green-300"}),"Image Detection"]}),e.jsxs(W,{children:["Detected ",s.length," image link(s). Only the image URLs will be processed."]})]}),G=({previewTab:s,extractedLinks:a,htmlContent:t,lazyLoad:i})=>{if(s==="visual")return a.length>0?e.jsx("div",{className:"flex flex-col items-center",children:a.map((n,o)=>e.jsx("img",{src:n,alt:`Image ${o+1}`,className:"max-w-full h-auto"},n))}):e.jsx("div",{dangerouslySetInnerHTML:{__html:t},className:"prose dark:prose-invert max-w-none"});{const n=a.length>0?a.map(o=>`<img src="${o}" alt="" ${i?'loading="lazy"':""}>`).join(`
`):t;return e.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-md overflow-auto",children:e.jsx("code",{className:"text-sm font-mono",children:n})})}},Qe=({htmlContent:s,extractedLinks:a,lazyLoad:t,fileName:i,albumName:n,chapterNumber:o,namingMethod:m,saving:c,setSaving:x,saveMessage:l,setSaveMessage:h,setSavedFiles:b})=>e.jsxs(e.Fragment,{children:[l&&e.jsxs(J,{variant:l.type==="error"?"destructive":"default",className:`mb-4 ${l.type==="error"?"bg-red-50 dark:bg-red-900":"bg-green-50 dark:bg-green-900"}`,children:[e.jsx(Q,{children:l.type==="error"?"Error":"Success"}),e.jsx(W,{children:l.text})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(U,{children:e.jsxs(V,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(O,{variant:"outline",onClick:()=>xe(a,s,t,i),disabled:!s.trim(),className:"w-32",children:[e.jsx(Ee,{size:16,className:"mr-2"}),"Download"]})}),e.jsx(K,{children:e.jsx("p",{children:"Download the generated HTML file"})})]})}),e.jsx(U,{children:e.jsxs(V,{children:[e.jsx(q,{asChild:!0,children:e.jsxs(O,{onClick:()=>pe(n,o,m,i,a,x,h,b),disabled:c||!s.trim(),className:"w-32",children:[c?e.jsx(ge,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Te,{size:16,className:"mr-2"}),"Upload"]})}),e.jsx(K,{children:e.jsx("p",{children:"Save the album to browser storage"})})]})})]})]}),ds=()=>{const[s,a]=r.useState(""),[t,i]=r.useState([]),[n,o]=r.useState("Album"),[m,c]=r.useState("1"),[x,l]=r.useState("my-file.html"),[h,b]=r.useState("chapter"),[u,j]=r.useState([]),[E,T]=r.useState(!1),[p,g]=r.useState(null),[k,P]=r.useState(null),[d,v]=r.useState(!0),[_,H]=r.useState("visual");r.useEffect(()=>{if(s.trim()){const N=/<img[^>]+src\s*=\s*(['"])(.*?)\1/gi;let y;const C=[];for(;(y=N.exec(s))!==null;)C.push(y[2]);const re=/<img[^>]+src\s*=\s*(['"])(data:image\/[a-zA-Z0-9+]+;base64,[^'"]+)\1/gi;for(;(y=re.exec(s))!==null;)C.push(y[2]);const ne=/background-image\s*:\s*url\((['"]?)([^'")]+)\1\)/gi;for(;(y=ne.exec(s))!==null;)C.push(y[2]);if(C.length===0){const oe=/https?:\/\/[^\s'"]+\.(jpg|jpeg|png|gif|webp|svg|bmp|tiff|ico|avif|jfif|pjpeg|pjp)(\?[^'"\s]*)?(\#[^'"\s]*)?/gi,ie=s.match(oe)||[];C.push(...ie)}i(C)}else i([])},[s]),r.useEffect(()=>{fe(N=>{j(N)})},[]),r.useEffect(()=>{if((p==null?void 0:p.type)==="success"&&u.length>0){const N=u[u.length-1];N&&typeof N.id=="number"&&P(N.id)}},[p,u]);const M=()=>h==="chapter"?`${m} - ${n}.html`:x;return e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs(be,{className:"shadow-lg",children:[e.jsxs(je,{children:[e.jsxs(ve,{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Re,{size:24,className:"text-blue-600"}),"HTML Image Uploader"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Create HTML files from image links or HTML content."})]}),e.jsx(Ne,{children:e.jsxs(F,{defaultValue:"edit",className:"w-full space-y-4",children:[e.jsxs(R,{className:"grid grid-cols-2",children:[e.jsxs(w,{value:"edit",className:"flex items-center gap-2",children:[e.jsx(Le,{size:16})," Editor"]}),e.jsxs(w,{value:"preview",className:"flex items-center gap-2",children:[e.jsx(Pe,{size:16})," Preview"]})]}),e.jsxs(S,{value:"edit",children:[e.jsx(Ze,{htmlContent:s,setHtmlContent:a,lazyLoad:d,setLazyLoad:v}),e.jsx(De,{albumName:n,setAlbumName:o,chapterNumber:m,setChapterNumber:c,customFileName:x,setCustomFileName:l,namingMethod:h,setNamingMethod:b,getFileName:M}),e.jsx(Je,{extractedLinks:t})]}),e.jsx(S,{value:"preview",children:e.jsxs(F,{defaultValue:"visual",className:"w-full space-y-4",children:[e.jsxs(R,{className:"grid grid-cols-2",children:[e.jsx(w,{value:"visual",onClick:()=>H("visual"),children:"Visual Preview"}),e.jsx(w,{value:"code",onClick:()=>H("code"),children:"Code Preview"})]}),e.jsx(S,{value:"visual",children:e.jsx(G,{previewTab:_,extractedLinks:t,htmlContent:s,lazyLoad:d})}),e.jsx(S,{value:"code",children:e.jsx(G,{previewTab:_,extractedLinks:t,htmlContent:s,lazyLoad:d})})]})})]})}),e.jsxs(ke,{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[u.length," file(s) saved in browser storage."," ",e.jsx(B,{to:"/albums",className:"text-blue-500 hover:underline",children:"View Albums"}),k!==null&&(p==null?void 0:p.type)==="success"&&e.jsxs(e.Fragment,{children:[" | ",e.jsx(B,{to:`/albums/${k}`,className:"text-green-600 hover:underline font-semibold",children:"Go to Album"})]})]}),e.jsx(Qe,{htmlContent:s,extractedLinks:t,lazyLoad:d,fileName:M(),albumName:n,chapterNumber:m,namingMethod:h,saving:E,setSaving:T,saveMessage:p,setSaveMessage:g,setSavedFiles:j})]})]})})};export{ds as default};
