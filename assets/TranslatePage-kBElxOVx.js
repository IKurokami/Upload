import{c as C,an as ds,r,R as xs,j as e,B as n,a as S,aa as ps,L as hs,ao as Fe,ac as Q,t as m,ab as A}from"./index-C1oZEPe-.js";import{C as ee}from"./card-B5zBHTYG.js";import{a as M,T as G}from"./index-0BNrCWWJ.js";import{I as p}from"./input-Cj3bJszr.js";import{S as se,a as te,b as ae,c as le,d as re,f as us}from"./select-BppuDfm2.js";import{T as fs,a as ws,b as Ve,c as De}from"./index-C5u-40Ti.js";import{A as gs,X as Ue}from"./x-v5g1lUgs.js";import{T as ne}from"./trash-2-DHcuDPgQ.js";import{F as _e}from"./file-down-DqJSb4Jw.js";import"./index-BdQq_4o_.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ie=C("ArrowUp",js);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bs=C("CircleCheck",Ns);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],ys=C("Clipboard",vs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],Cs=C("Eraser",Ts);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],ze=C("FilePlus",ks);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Le=C("Lightbulb",Ss);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oe=C("Plus",As),Us=()=>{var $e,Pe;const K=ds(),[U,me]=r.useState(""),[H,ce]=r.useState(""),[de,xe]=r.useState(!1),[w,c]=r.useState(null),[pe,he]=r.useState(!1),[,ue]=r.useState(!0),[fe,we]=r.useState("gemini-2.0-flash-exp-image-generation"),qe=["gemini-2.0-flash-exp-image-generation","gemini-2.0-flash-thinking-exp-01-21","gemini-2.5.pro-exp-03-25"],[Ge,Ke]=r.useState(null),[o,v]=r.useState([]),[d,E]=r.useState(""),[B,ge]=r.useState(""),[R,O]=r.useState(!1),[h,_]=r.useState(""),[I,$]=r.useState(""),[je,Y]=r.useState(""),[He,z]=r.useState(!1),[Ne,Oe]=r.useState("mapping"),[u,g]=r.useState([]),[f,j]=r.useState([]),[be,P]=r.useState(""),[ve,F]=r.useState(""),[N,L]=r.useState(!1),[ye,Te]=r.useState([]),[Ce,ke]=r.useState([]),[Se,W]=r.useState(!1),q=xs.useRef(null),X=r.useRef(null);r.useEffect(()=>{(async()=>{try{const t=await Q("apiKey"),a=await Q("translateModel"),l=await Q("translationCollections");if(t&&Ke(t),a&&we(a),l&&l.length>0)v(l),E(l[0].id),g(l[0].mappingTable),j(l[0].relationshipsTable);else{const x={id:Date.now().toString(),name:"Default Collection",mappingTable:[],relationshipsTable:[]};v([x]),E(x.id)}}catch(t){console.error("Error loading settings:",t)}})()},[]),r.useEffect(()=>{d&&!h&&_(d)},[d,h]);const Ye=async s=>{we(s),await A("translateModel",s)},We=(s,t)=>{try{const a=s.trim().split(`
`);if(a.length<3)return[];const l=a.slice(2);return t?l.map(x=>{const i=x.split("|").filter((T,D,J)=>D!==0&&D!==J.length-1||T.trim()!=="").map(T=>T.trim());if(i.length<5)for(console.warn("Row has fewer than expected columns:",x);i.length<5;)i.push("");return{term:i[0]||"",transcription:i[1]||"",type:i[2]||"",gender:i[3]||"",notes:i[4]||""}}):l.map(x=>{const i=x.split("|").filter((T,D,J)=>D!==0&&D!==J.length-1||T.trim()!=="").map(T=>T.trim());if(i.length<6)for(console.warn("Row has fewer than expected columns:",x);i.length<6;)i.push("");return{characterA:i[0]||"",characterB:i[1]||"",relationship:i[2]||"",addressTermsAToB:i[3]||"",addressTermsBToA:i[4]||"",notes:i[5]||""}})}catch(a){return console.error("Error parsing markdown table:",a),[]}},y=(s,t)=>{if(s.length===0)return"";let a="";return t?(a=`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
`,a+=`|:----------- |:------------- |:------------------------- |:------------------ |:------ |
`,s.forEach(l=>{a+=`| ${l.term} | ${l.transcription} | ${l.type} | ${l.gender} | ${l.notes} |
`})):(a=`| Character A | Character B | Relationship | Address Terms (A→B) | Address Terms (B→A) | Notes |
`,a+=`|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
`,s.forEach(l=>{a+=`| ${l.characterA} | ${l.characterB} | ${l.relationship} | ${l.addressTermsAToB} | ${l.addressTermsBToA} | ${l.notes} |
`})),a},Ae=(s,t)=>{try{if(!s.trim()){m.error("Please enter a markdown table to import"),c("Please enter a markdown table to import");return}if(!s.includes("|")){m.error("Invalid table format. Table must contain pipe characters (|)"),c("Import failed: Invalid table format. Table must contain pipe characters (|)");return}const a=s.trim().split(`
`);if(a.length<3){m.error("Table must contain at least 3 lines (header, separator, and data row)"),c("Import failed: Table must contain at least 3 lines (header, separator, and data row)");return}const l=a[1];if(!l.includes("|")||!l.includes("-")){m.error("Second line must be a separator with pipes (|) and dashes (-)"),c("Import failed: Second line must be a separator with pipes (|) and dashes (-)");return}const x=We(s,t);if(x.length===0){m.error("No valid data rows found in the table"),c("Import failed: No valid data rows found in the table");return}c(null),t?(Te(u),g(x)):(ke(f),j(x)),b(t,x),W(!0),setTimeout(()=>{W(!1)},6e4),m.success(`${t?"Mapping":"Relationships"} table imported successfully`)}catch(a){console.error("Error importing markdown table:",a),m.error(`Import failed: ${a instanceof Error?a.message:"Unknown error"}`),c(`Import failed: ${a instanceof Error?a.message:"Unknown error"}`)}},Me=s=>{s?(g(ye),b(!0,ye),Te([])):(j(Ce),b(!1,Ce),ke([])),W(!1),m.success(`${s?"Mapping":"Relationships"} table reverted to previous state`)},b=(s,t)=>{if(!d)return;const a=o.map(l=>l.id===d?{...l,mappingTable:s?t:l.mappingTable,relationshipsTable:s?l.relationshipsTable:t}:l);v(a),A("translationCollections",a)},Ee=s=>{const t=y(s?u:f,s);s?P(t):F(t),L(!0)},Be=s=>{if(s===d)return;Z();const t=o.find(a=>a.id===s);t&&(E(s),g(t.mappingTable),j(t.relationshipsTable))},Z=()=>{if(!d)return;const s=o.map(t=>t.id===d?{...t,mappingTable:u,relationshipsTable:f}:t);v(s),A("translationCollections",s)},Xe=()=>{if(!B.trim()){m.error("Please enter a name for the new collection"),c("Please enter a name for the new collection");return}Z();const s={id:Date.now().toString(),name:B,mappingTable:[],relationshipsTable:[]},t=[...o,s];v(t),E(s.id),g([]),j([]),ge(""),A("translationCollections",t),m.success(`Collection "${B}" created`)},Ze=s=>{if(o.length<=1){m.error("You must have at least one collection"),c("You must have at least one collection");return}const t=o.find(l=>l.id===s),a=o.filter(l=>l.id!==s);v(a),s===d&&(E(a[0].id),g(a[0].mappingTable),j(a[0].relationshipsTable)),A("translationCollections",a),t&&m.success(`Collection "${t.name}" deleted`)},Re=()=>{L(!N),N||(Ne==="mapping"?P(y(u,!0)):F(y(f,!1)))},Je=async()=>{if(!U.trim()){m.error("Please enter text to translate"),c("Please enter text to translate");return}Z(),xe(!0),c(null),m.promise(async()=>{try{const s=y(u,!0),t=y(f,!1),a=await us(U,s,t,Ge||"default-key",fe);if(a.hasError)throw c(a.thinking||"Translation failed. Please try again."),new Error(a.thinking||"Translation failed");return ce(a.ocrText||""),a.ocrText}catch(s){throw console.error("Translation error:",s),c("An error occurred during translation. Please try again."),s}finally{xe(!1)}},{loading:"Translating text...",success:"Translation completed successfully",error:s=>`Translation failed: ${s instanceof Error?s.message:"Unknown error"}`})},Qe=()=>{navigator.clipboard.writeText(H),he(!0),m.success("Copied to clipboard"),setTimeout(()=>he(!1),2e3)},es=()=>{const s={term:"",transcription:"",type:"",gender:"",notes:""},t=[...u,s];g(t),b(!0,t)},V=(s,t,a)=>{const l=[...u];l[s]={...l[s],[t]:a},g(l),b(!0,l)},ss=s=>{const t=u.filter((a,l)=>l!==s);g(t),b(!0,t)},ts=()=>{const s={characterA:"",characterB:"",relationship:"",addressTermsAToB:"",addressTermsBToA:"",notes:""},t=[...f,s];j(t),b(!1,t)},k=(s,t,a)=>{const l=[...f];l[s]={...l[s],[t]:a},j(l),b(!1,l)},as=s=>{const t=f.filter((a,l)=>l!==s);j(t),b(!1,t)};r.useEffect(()=>{const s=()=>{window.scrollY>200?ue(!0):ue(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const ls=()=>{if(console.log("Scrolling to top attempt"),q.current){q.current.scrollIntoView({behavior:"smooth"}),console.log("Used scrollIntoView");return}try{window.scroll({top:0,left:0,behavior:"smooth"}),console.log("Used window.scroll")}catch{window.scrollTo(0,0),console.log("Used fallback scrollTo")}},rs=()=>{me(""),ce(""),c(null),m.info("Text cleared")},ns=()=>{if(!h||!I.trim())return;const s=o.map(t=>t.id===h?{...t,name:I.trim()}:t);v(s),A("translationCollections",s),m.success(`Collection renamed to "${I}"`),Ie()},is=s=>{const t=!R;if(O(t),t){const a=o.find(l=>l.id===s);a&&(_(s),$(a.name))}};r.useEffect(()=>{R&&X.current&&setTimeout(()=>{var s;(s=X.current)==null||s.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[R]);const Ie=()=>{O(!1),_(""),$(""),Y(""),z(!1),setTimeout(()=>{var s;(s=q.current)==null||s.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},os=s=>{Y(s),z(!0)},ms=()=>{je&&(Ze(je),z(!1),Y(""),O(!1))},cs=s=>{Be(s),Ie()};return r.useEffect(()=>{if(h){const s=o.find(t=>t.id===h);s&&$(s.name)}},[h,o]),e.jsxs("div",{className:"container mx-auto p-4 flex flex-col gap-6 pb-10 relative",children:[e.jsx("div",{ref:q,className:"absolute top-0"}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Text Translator"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(n,{variant:"outline",onClick:rs,"aria-label":"Clear all text",children:[e.jsx(Cs,{className:"h-5 w-5 mr-2"}),"Clear"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-[600px]",children:[e.jsx(ee,{className:S("p-6",K&&"arcrylic-blur"),children:e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(M,{htmlFor:"inputText",className:"text-lg font-medium",children:"Input Text"}),e.jsxs(se,{value:fe,onValueChange:Ye,children:[e.jsx(te,{className:"w-full sm:w-[300px]",children:e.jsx(ae,{placeholder:"Select model"})}),e.jsx(le,{children:qe.map(s=>e.jsx(re,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(M,{htmlFor:"collectionSelect",className:"text-sm font-medium",children:"Translation Collection"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto items-center",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs(se,{value:d,onValueChange:Be,children:[e.jsx(te,{id:"collectionSelect",className:"w-full",children:e.jsx(ae,{placeholder:"Select collection"})}),e.jsx(le,{children:o.map(s=>e.jsx(re,{value:s.id,children:s.name},s.id))})]})}),e.jsx(n,{variant:R?"default":"outline",size:"icon",onClick:()=>is(d),title:"Toggle Collection Settings",children:e.jsx(ps,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex-grow flex flex-col",children:e.jsx(G,{id:"inputText",placeholder:"Enter text to translate...",className:"min-h-[300px] flex-grow text-base leading-relaxed",value:U,onChange:s=>me(s.target.value)})}),e.jsx(n,{onClick:Je,disabled:de||!U.trim(),className:"w-full",children:de?e.jsxs(e.Fragment,{children:["Translating... ",e.jsx(hs,{className:"ml-2 h-4 w-4 animate-spin"})]}):e.jsxs(e.Fragment,{children:["Translate ",e.jsx(gs,{className:"ml-2 h-4 w-4"})]})})]})}),e.jsx(ee,{className:S("p-6",K&&"arcrylic-blur"),children:e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(M,{htmlFor:"translatedText",className:"text-lg font-medium",children:"Translated Text"}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:Qe,disabled:!H,"aria-label":"Copy to clipboard",children:[pe?e.jsx(bs,{className:"h-4 w-4 mr-2"}):e.jsx(ys,{className:"h-4 w-4 mr-2"}),pe?"Copied!":"Copy"]})]}),e.jsx("div",{className:"flex-grow flex flex-col",children:e.jsx(G,{id:"translatedText",className:"min-h-[300px] flex-grow text-base leading-relaxed",value:H,readOnly:!0,placeholder:"Translation will appear here..."})}),w&&!w.includes("import")&&e.jsx("div",{className:"p-3 rounded-md bg-destructive/10 text-destructive text-sm border border-destructive/20",children:w})]})})]}),e.jsxs(ee,{className:S("p-6",K&&"arcrylic-blur"),children:[e.jsx("div",{ref:X,className:S("overflow-hidden transition-all duration-300 ease-in-out",R?"h-[400px] sm:h-[320px] opacity-100 mb-6 pb-6 border-b border-gray-200 dark:border-gray-700":"h-0 opacity-0 mb-0 pb-0 border-b-0"),tabIndex:-1,children:e.jsxs("div",{className:"h-full",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Collection Management"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(M,{htmlFor:"collectionManagement",className:"block text-sm font-medium mb-2",children:"Collection"}),e.jsxs(se,{value:h,onValueChange:s=>{_(s);const t=o.find(a=>a.id===s);t&&$(t.name)},children:[e.jsx(te,{id:"collectionManagement",className:"w-full",children:e.jsx(ae,{placeholder:"Select collection"})}),e.jsx(le,{children:o.map(s=>e.jsxs(re,{value:s.id,children:[s.name,s.id===d?" (Current)":""]},s.id))})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(M,{className:"text-sm font-medium mb-2",children:"New Collection"}),e.jsxs("div",{className:"flex gap-2 h-10",children:[e.jsx(p,{placeholder:"New collection name",value:B,onChange:s=>ge(s.target.value),className:"flex-1"}),e.jsxs(n,{variant:"outline",onClick:Xe,disabled:!B.trim(),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add"]})]})]})]}),h&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-lg font-medium mb-3",children:(($e=o.find(s=>s.id===h))==null?void 0:$e.name)||"Selected Collection"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx(M,{htmlFor:"renameCollection",className:"text-sm font-medium mb-2",children:"Rename"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{id:"renameCollection",value:I,onChange:s=>$(s.target.value),placeholder:"New name",className:"flex-1"}),e.jsx(n,{variant:"outline",onClick:ns,disabled:!I.trim(),children:"Save"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-2",children:[e.jsx(n,{variant:"default",className:"w-full",onClick:()=>cs(h),children:"Use This Collection"}),e.jsxs(n,{variant:"destructive",className:"w-full",onClick:()=>os(h),disabled:o.length<=1,children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Delete Collection"]})]})]})]}),He&&e.jsxs("div",{className:"mt-4 p-4 border rounded-md bg-destructive/10 text-destructive",children:[e.jsx("p",{className:"font-medium mb-2",children:"Are you sure you want to delete this collection?"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(n,{variant:"destructive",onClick:ms,children:"Delete Collection"})]})]})]})}),e.jsxs(fs,{defaultValue:Ne,onValueChange:s=>{Oe(s),N&&(s==="mapping"?P(y(u,!0)):F(y(f,!1)))},className:"w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold",children:["Translation Mapping Tables",d&&e.jsxs("span",{className:"text-base sm:text-lg font-medium ml-2 text-muted-foreground",children:["- ",((Pe=o.find(s=>s.id===d))==null?void 0:Pe.name)||""]})]}),e.jsxs(ws,{className:"w-full sm:w-auto mt-2 sm:mt-0",children:[e.jsx(Ve,{value:"mapping",className:"text-xs sm:text-sm px-2 sm:px-4 flex-1 sm:flex-initial",children:"Mapping Table"}),e.jsx(Ve,{value:"relationships",className:"text-xs sm:text-sm px-2 sm:px-4 flex-1 sm:flex-initial",children:"Relationships Table"})]})]}),e.jsx(De,{value:"mapping",className:"mt-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsxs(n,{onClick:es,variant:"default",className:"text-xs sm:text-sm h-8 sm:h-10 px-2 sm:px-4 w-full md:w-auto",children:[e.jsx(oe,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Add New Entry"]}),e.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-end",children:[e.jsx(n,{variant:N?"default":"outline",onClick:Re,className:"text-xs sm:text-sm h-8 sm:h-10 px-2 sm:px-4",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Close"]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Import/Export"]})}),e.jsxs(n,{variant:"ghost",onClick:()=>{P(`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
|:----------- |:------------- |:------------------------- |:------------------ |:------ |
| 事情是这样的 | Chuyện là thế này | Phrase | | Opening phrase |
| 最近 | Gần đây | Time | | |
| 师兄 | Sư huynh | Title/Relationship | Male | Elder martial brother |
| 其实 | Thực ra | Adverb | | |`),L(!0)},className:"text-xs sm:text-sm h-8 sm:h-10 px-2 sm:px-4",children:[e.jsx(Le,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Sample"})]})]})]}),e.jsx("div",{className:S("overflow-hidden transition-all duration-300 ease-in-out",N?"h-[280px] sm:h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs("div",{className:"flex flex-col gap-2 p-2 sm:p-4 rounded-md border bg-muted/20 max-w-[100vw]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-1 sm:gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[Se&&e.jsxs(n,{variant:"destructive",size:"sm",onClick:()=>Me(!0),className:"text-xs sm:text-sm px-2 py-1 flex-1 sm:flex-initial",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"inline",children:"Undo Import"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>Ee(!0),title:"Update markdown from current table",className:"text-xs sm:text-sm px-2 py-1 flex-1 sm:flex-initial",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"inline",children:"Update"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>Ae(be,!0),className:"text-xs sm:text-sm px-2 py-1 flex-1 sm:flex-initial",children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"inline",children:"Import"})]})]})]}),e.jsx(G,{placeholder:"Paste markdown table here...",className:"h-36 sm:h-48 w-full text-xs sm:text-sm font-mono",value:be,onChange:s=>P(s.target.value),style:{maxWidth:"100%"}}),w&&w.includes("import")&&e.jsx("div",{className:"text-red-500 text-sm",children:w})]})}),e.jsx("div",{className:"overflow-x-auto rounded-md border max-w-full -mx-0",children:e.jsxs("table",{className:"w-full border-collapse min-w-max table-fixed sm:table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Term / Name"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Transcription"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Type"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Gender"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsx("tbody",{children:u.map((s,t)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.term,onChange:a=>V(t,"term",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.transcription,onChange:a=>V(t,"transcription",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.type,onChange:a=>V(t,"type",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.gender,onChange:a=>V(t,"gender",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.notes,onChange:a=>V(t,"notes",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4",children:e.jsxs(n,{variant:"destructive",size:"sm",onClick:()=>ss(t),className:"w-full text-xs sm:text-sm h-7 sm:h-9 px-1 sm:px-3",children:[e.jsx(ne,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Remove"})]})})]},t))})]})})]})}),e.jsx(De,{value:"relationships",className:"mt-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsxs(n,{onClick:ts,variant:"default",className:"text-xs sm:text-sm h-8 sm:h-10 px-2 sm:px-4 w-full md:w-auto",children:[e.jsx(oe,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Add New Entry"]}),e.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-end",children:[e.jsx(n,{variant:N?"default":"outline",onClick:Re,className:"text-xs sm:text-sm h-8 sm:h-10 px-2 sm:px-4",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Close"]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Import/Export"]})}),e.jsxs(n,{variant:"ghost",onClick:()=>{F(`| Character A | Character B | Relationship | Address Terms (A→B) | Address Terms (B→A) | Notes |
|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
| Vưu Thiên Thu | Triệu Không Minh | Adoptive Younger Sister -> Elder Brother | Huynh trưởng, Sư huynh | Ngươi | Formal/Respectful |
| Lâm Linh Dao | Vưu Thiên Thu | Female Lead 2 -> Female Lead 1 | Dao tỷ tỷ, Muội | Thiên Thu | Relationship strained |`),L(!0)},className:"text-xs sm:text-sm h-8 sm:h-10 px-2 sm:px-4",children:[e.jsx(Le,{className:"h-4 w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Sample"})]})]})]}),e.jsx("div",{className:S("overflow-hidden transition-all duration-300 ease-in-out",N?"h-[280px] sm:h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs("div",{className:"flex flex-col gap-2 p-2 sm:p-4 rounded-md border bg-muted/20 max-w-[100vw]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-1 sm:gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[Se&&e.jsxs(n,{variant:"destructive",size:"sm",onClick:()=>Me(!1),className:"text-xs sm:text-sm px-2 py-1 flex-1 sm:flex-initial",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"inline",children:"Undo Import"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>Ee(!1),title:"Update markdown from current table",className:"text-xs sm:text-sm px-2 py-1 flex-1 sm:flex-initial",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"inline",children:"Update"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>Ae(ve,!1),className:"text-xs sm:text-sm px-2 py-1 flex-1 sm:flex-initial",children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"inline",children:"Import"})]})]})]}),e.jsx(G,{placeholder:"Paste markdown table here...",className:"h-36 sm:h-48 w-full text-xs sm:text-sm font-mono",value:ve,onChange:s=>F(s.target.value),style:{maxWidth:"100%"}}),w&&w.includes("import")&&e.jsx("div",{className:"text-red-500 text-sm",children:w})]})}),e.jsx("div",{className:"overflow-x-auto rounded-md border max-w-full -mx-0",children:e.jsxs("table",{className:"w-full border-collapse min-w-max table-fixed sm:table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Character A"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Character B"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Relationship"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Address (A→B)"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Address (B→A)"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-1 sm:py-2 px-1 sm:px-2 md:px-4 text-xs sm:text-sm whitespace-nowrap",children:"Actions"})]})}),e.jsx("tbody",{children:f.map((s,t)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.characterA,onChange:a=>k(t,"characterA",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.characterB,onChange:a=>k(t,"characterB",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.relationship,onChange:a=>k(t,"relationship",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.addressTermsAToB,onChange:a=>k(t,"addressTermsAToB",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.addressTermsBToA,onChange:a=>k(t,"addressTermsBToA",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4 min-w-[100px]",children:e.jsx(p,{value:s.notes,onChange:a=>k(t,"notes",a.target.value),className:"w-full text-xs sm:text-sm px-1 py-0.5 sm:px-3 sm:py-1.5 h-7 sm:h-9"})}),e.jsx("td",{className:"py-1 sm:py-2 px-1 sm:px-2 md:px-4",children:e.jsxs(n,{variant:"destructive",size:"sm",onClick:()=>as(t),className:"w-full text-xs sm:text-sm h-7 sm:h-9 px-1 sm:px-3",children:[e.jsx(ne,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Remove"})]})})]},t))})]})})]})})]})]}),e.jsx(n,{variant:"default",size:"lg",className:"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-[9999] w-12 h-12 p-0",onClick:()=>{console.log("Button clicked"),ls()},"aria-label":"Scroll to top",children:e.jsx(ie,{className:"h-6 w-6"})})]})};export{Us as default};
