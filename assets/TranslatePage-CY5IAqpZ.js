import{c as Ae,ai as ds,r as P,aj as us,ak as ms,al as fs,am as ps,an as hs,ao as Hn,j as e,a as me,G as Bn,ap as xs,B as W,a3 as gs,l as ws,aq as fa,R as T,v as ne,F as pa,ar as vs,a4 as Re,a5 as qt}from"./index-DtK-hYkj.js";import{C as Rt,a as xn,b as gn,e as bs}from"./card-DAgMYAH_.js";import{S as _n,b as Un,c as Fn,d as Vn,e as Wn,a as Sn,G as ys,C as Tn,h as ha,f as xa,i as js}from"./select-C8YwHP_t.js";import{T as Ht,a as qn}from"./index-kwb2Whl_.js";import{T as ze,a as Ce,b as Se,c as Te}from"./tooltip-DDB4O3ZY.js";import{B as Ze}from"./badge-DdPUsRSi.js";import{A as Ns}from"./arrow-right-DGdkoq_z.js";import{I as Ye}from"./input-DqGo-cLI.js";import{S as Ot,X as tn}from"./scroll-area-sk1MtFSy.js";import{T as Cs,a as Ss,b as Gn,c as Yn}from"./index-C_VtLEdO.js";import{T as Ts,R as Es,C as Rs,P as ks,O as zs}from"./index-CyHKrB8I.js";import{T as ht}from"./trash-2-C6MWfVu5.js";import{C as ga}from"./copy-Dh6yyJZq.js";import{F as wa}from"./file-down-iM30FHiD.js";/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Ps=Ae("Archive",As);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],En=Ae("ArrowUp",Is);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],va=Ae("ChevronsDown",Ms);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],ba=Ae("ChevronsUp",Ds);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ls=Ae("CircleCheckBig",$s);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zt=Ae("CircleCheck",Os);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],wn=Ae("Clipboard",Hs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],_s=Ae("Database",Bs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],Fs=Ae("Eraser",Us);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],ya=Ae("FilePlus",Vs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qs=Ae("FileText",Ws);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],vn=Ae("Folder",Gs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ks=Ae("History",Ys);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ja=Ae("Lightbulb",Xs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Zs=Ae("Pencil",Js);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Rn=Ae("Plus",Qs);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],bn=Ae("RotateCcw",er);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],nr=Ae("Text",tr);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Kn=Ae("Users",ar);function yn(t){const a=ds(()=>ms(t)),{isStatic:n}=P.useContext(us);if(n){const[,s]=P.useState(t);P.useEffect(()=>a.on("change",s),[])}return a}function sr(t,a){const n=yn(a()),s=()=>n.set(a());return s(),fs(()=>{const i=()=>ps.preRender(s,!1,!0),r=t.map(o=>o.on("change",i));return()=>{r.forEach(o=>o()),hs(s)}}),n}function rr(t,...a){const n=t.length;function s(){let i="";for(let r=0;r<n;r++){i+=t[r];const o=a[r];o&&(i+=Hn(o)?o.get():o)}return i}return sr(a.filter(Hn),s)}const ir=({text:t,className:a})=>{let n=yn(0),s=yn(0);const[i,r]=P.useState(""),[o,c]=P.useState(null);P.useEffect(()=>{if(o){const{width:v,height:j}=o.getBoundingClientRect(),p=v*j,u=Math.floor(p/36),g=Xn(u);r(g)}},[o]);function l({currentTarget:v,clientX:j,clientY:p}){let{left:u,top:g}=v.getBoundingClientRect();n.set(j-u),s.set(p-g);const{width:y,height:w}=v.getBoundingClientRect(),L=y*w,f=Math.floor(L/36),S=Xn(f);r(S)}return e.jsx("div",{className:me("p-0.5 bg-transparent flex items-center justify-center w-full h-full relative",a),children:e.jsxs("div",{ref:c,onMouseMove:l,className:"group/card rounded w-full relative overflow-hidden bg-transparent flex items-center justify-center h-full",children:[e.jsx(lr,{mouseX:n,mouseY:s,randomString:i}),e.jsx("div",{className:"relative z-10 flex items-center justify-center w-full h-full",children:e.jsxs("div",{className:"relative h-full w-full max-w-[80%] max-h-[80%] rounded-full flex items-center justify-center text-white font-bold",children:[e.jsx("div",{className:"absolute w-full h-full bg-white/[0.8] dark:bg-black/[0.8] blur-sm rounded-full"}),e.jsx("span",{className:"dark:text-white text-black z-20 text-xl lg:text-3xl",children:t})]})})]})})};function lr({mouseX:t,mouseY:a,randomString:n}){let s=rr`radial-gradient(500px at ${t}px ${a}px, white, transparent)`,i={maskImage:s,WebkitMaskImage:s};return e.jsxs("div",{className:"pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0"}),e.jsx(Bn.div,{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-blue-700 opacity-0 group-hover/card:opacity-100 backdrop-blur-xl transition duration-500",style:i}),e.jsx(Bn.div,{className:"absolute inset-0 opacity-0 mix-blend-overlay  group-hover/card:opacity-100",style:i,children:e.jsx("p",{className:"absolute inset-x-0 text-4xl h-full break-words whitespace-pre-wrap text-white font-mono font-bold transition duration-500",children:n})})]})}const Gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Xn=t=>{let a="";for(let n=0;n<t;n++)a+=Gt.charAt(Math.floor(Math.random()*(Gt==null?void 0:Gt.length)));return a},Jn=32e3,or=({inputText:t,setInputText:a,translatedText:n,isTranslating:s,error:i,isCopied:r,onTranslate:o,onCopy:c,selectedModel:l,onModelChange:v,models:j,selectedCollectionId:p,collections:u,onCollectionChange:g,isCollectionManagementVisible:y,onToggleCollectionManagement:w,arcrylicBg:L,modelDescriptions:f,clearInputText:S,setErrorMessage:$})=>{var A;const E=(t==null?void 0:t.length)||0;return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 md:gap-8 min-h-[650px] max-h-[calc(100vh-200px)] w-full overflow-hidden",children:[e.jsxs(Rt,{className:me("flex-1 flex flex-col shadow-lg rounded-xl border-0 mb-6 lg:mb-0",L&&"arcrylic-blur"),children:[e.jsx(xn,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(gn,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"ðŸ“ Translate Text"}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(Ze,{variant:"outline",className:"px-2 sm:px-3 py-1 h-auto rounded-full text-sm sm:text-base bg-muted/40",children:[e.jsx(xs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"truncate max-w-[100px] sm:max-w-none",children:l})]})}),e.jsxs(Te,{side:"left",children:[e.jsx("p",{className:"text-xs",children:"Current translation model"}),f&&f[l]&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f[l]})]})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col px-4 sm:px-6 py-3 sm:py-4 overflow-hidden",children:[e.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[e.jsx(Ht,{id:"inputText",placeholder:"Type or paste text to translate...",className:"min-h-[200px] sm:min-h-[300px] h-full text-sm sm:text-lg leading-relaxed rounded-xl p-3 sm:p-4 pr-12 sm:pr-16 focus-visible:ring-1 focus-visible:ring-primary/30 transition-all resize-none shadow-sm max-h-[calc(100vh-200px)] overflow-auto break-words break-all whitespace-pre-wrap",value:t,maxLength:Jn,onChange:k=>a(k.target.value),"aria-label":"Input text to translate"}),e.jsxs("span",{className:"absolute bottom-2 right-4 text-xs text-muted-foreground/70",children:[E,"/",Jn]}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{variant:"ghost",size:"icon",onClick:S,disabled:!t.trim()||s,className:"absolute top-2 right-2 rounded-full","aria-label":"Clear input",children:e.jsx(bn,{className:"h-5 w-5"})})}),e.jsx(Te,{side:"left",children:e.jsx("p",{className:"text-xs",children:"Clear input"})})]})})]}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center w-full sm:w-auto",children:[e.jsxs(_n,{value:l,onValueChange:v,children:[e.jsx(Un,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Fn,{placeholder:"Model",children:e.jsx("span",{className:"truncate",children:l})})}),e.jsx(Vn,{className:"z-[100]",children:j.map(k=>e.jsx(Wn,{value:k,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"truncate",children:k}),f&&f[k]&&e.jsx("span",{className:"text-xs text-muted-foreground",children:f[k]})]})},k))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(_n,{value:p,onValueChange:g,children:[e.jsx(Un,{className:"h-8 text-xs font-medium px-2 py-1 rounded-full min-w-[90px] max-w-[110px]",children:e.jsx(Fn,{placeholder:"Collection",children:e.jsx("span",{className:"truncate",children:((A=u.find(k=>k.id===p))==null?void 0:A.name)||"Collection"})})}),e.jsx(Vn,{className:"z-[100]",children:u.map(k=>e.jsx(Wn,{value:k.id,children:e.jsx("span",{className:"truncate",children:k.name})},k.id))})]}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{variant:y?"default":"outline",size:"icon",onClick:()=>w(p),className:"h-8 w-8 rounded-full ml-1","aria-label":"Manage collections",children:e.jsx(gs,{className:"h-3 w-3"})})}),e.jsx(Te,{side:"top",children:e.jsx("p",{className:"text-xs",children:"Manage collections"})})]})})]})]}),e.jsx(W,{onClick:o,disabled:s||!t.trim(),className:"h-8 px-3 rounded-full shadow-sm text-sm w-full sm:w-auto",size:"default","aria-label":"Translate",children:s?e.jsxs(e.Fragment,{children:[e.jsx(ws,{className:"mr-2 h-3.5 w-3.5 animate-spin"})," Translating..."]}):e.jsxs(e.Fragment,{children:["Translate ",e.jsx(Ns,{className:"ml-2 h-3.5 w-3.5"})]})})]})]})]}),e.jsxs(Rt,{className:me("flex-1 flex flex-col shadow-lg rounded-3xl border-0 relative",L&&"arcrylic-blur"),children:[e.jsx(xn,{className:"pb-2 border-b border-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(gn,{className:"text-xl sm:text-2xl font-bold tracking-tight",children:"ðŸŒ Translation"}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{variant:"ghost",size:"icon",onClick:c,disabled:!n,className:"rounded-full","aria-label":"Copy translation",children:r?e.jsx(Zt,{className:"h-4 w-4 text-green-500"}):e.jsx(wn,{className:"h-4 w-4"})})}),e.jsx(Te,{side:"left",children:e.jsx("p",{className:"text-xs",children:r?"Copied!":"Copy to clipboard"})})]})})]})}),e.jsx("div",{className:"p-3 sm:p-4 flex-1 overflow-hidden",children:i?e.jsxs("div",{className:"text-destructive flex items-start p-3 rounded-lg bg-destructive/10 mb-3",children:[e.jsx(Sn,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:i}),e.jsx(W,{variant:"ghost",size:"sm",className:"h-7 mt-2 text-xs px-2 py-1",onClick:()=>$(null),children:"Dismiss"})]})]}):e.jsx(e.Fragment,{children:n?e.jsx("div",{className:"rounded-xl h-full overflow-y-auto px-4 py-3 bg-muted/30",children:e.jsx("p",{className:"text-sm sm:text-base whitespace-pre-wrap break-words",children:n})}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6 text-muted-foreground",children:[e.jsx(ir,{text:"Translation",className:"w-64 h-64 opacity-30 mb-4"}),e.jsx("p",{className:"text-sm",children:"Enter text and click Translate to see results here"})]})})})]})]})},{createElement:kt,createContext:cr,forwardRef:Na,useCallback:Fe,useContext:Ca,useEffect:xt,useImperativeHandle:Sa,useLayoutEffect:dr,useMemo:ur,useRef:Ve,useState:Tt}=fa,Zn=fa[`useId${Math.random()}`.slice(0,5)],mr=dr,nn=cr(null);nn.displayName="PanelGroupContext";const gt=mr,fr=typeof Zn=="function"?Zn:()=>null;let pr=0;function kn(t=null){const a=fr(),n=Ve(t||a||null);return n.current===null&&(n.current=""+pr++),t??n.current}function Ta({children:t,className:a="",collapsedSize:n,collapsible:s,defaultSize:i,forwardedRef:r,id:o,maxSize:c,minSize:l,onCollapse:v,onExpand:j,onResize:p,order:u,style:g,tagName:y="div",...w}){const L=Ca(nn);if(L===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:f,expandPanel:S,getPanelSize:$,getPanelStyle:E,groupId:A,isPanelCollapsed:k,reevaluatePanelConstraints:h,registerPanel:B,resizePanel:_,unregisterPanel:oe}=L,z=kn(o),Y=Ve({callbacks:{onCollapse:v,onExpand:j,onResize:p},constraints:{collapsedSize:n,collapsible:s,defaultSize:i,maxSize:c,minSize:l},id:z,idIsFromProps:o!==void 0,order:u});Ve({didLogMissingDefaultSizeWarning:!1}),gt(()=>{const{callbacks:ee,constraints:J}=Y.current,ae={...J};Y.current.id=z,Y.current.idIsFromProps=o!==void 0,Y.current.order=u,ee.onCollapse=v,ee.onExpand=j,ee.onResize=p,J.collapsedSize=n,J.collapsible=s,J.defaultSize=i,J.maxSize=c,J.minSize=l,(ae.collapsedSize!==J.collapsedSize||ae.collapsible!==J.collapsible||ae.maxSize!==J.maxSize||ae.minSize!==J.minSize)&&h(Y.current,ae)}),gt(()=>{const ee=Y.current;return B(ee),()=>{oe(ee)}},[u,z,B,oe]),Sa(r,()=>({collapse:()=>{f(Y.current)},expand:ee=>{S(Y.current,ee)},getId(){return z},getSize(){return $(Y.current)},isCollapsed(){return k(Y.current)},isExpanded(){return!k(Y.current)},resize:ee=>{_(Y.current,ee)}}),[f,S,$,k,z,_]);const M=E(Y.current,i);return kt(y,{...w,children:t,className:a,id:o,style:{...M,...g},"data-panel":"","data-panel-collapsible":s||void 0,"data-panel-group-id":A,"data-panel-id":z,"data-panel-size":parseFloat(""+M.flexGrow).toFixed(1)})}const Ea=Na((t,a)=>kt(Ta,{...t,forwardedRef:a}));Ta.displayName="Panel";Ea.displayName="forwardRef(Panel)";let jn=null,pt=null;function hr(t,a){if(a){const n=(a&Pa)!==0,s=(a&Ia)!==0,i=(a&Ma)!==0,r=(a&Da)!==0;if(n)return i?"se-resize":r?"ne-resize":"e-resize";if(s)return i?"sw-resize":r?"nw-resize":"w-resize";if(i)return"s-resize";if(r)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function xr(){pt!==null&&(document.head.removeChild(pt),jn=null,pt=null)}function dn(t,a){const n=hr(t,a);jn!==n&&(jn=n,pt===null&&(pt=document.createElement("style"),document.head.appendChild(pt)),pt.innerHTML=`*{cursor: ${n}!important;}`)}function Ra(t){return t.type==="keydown"}function ka(t){return t.type.startsWith("pointer")}function za(t){return t.type.startsWith("mouse")}function an(t){if(ka(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(za(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function gr(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function wr(t,a,n){return t.x<a.x+a.width&&t.x+t.width>a.x&&t.y<a.y+a.height&&t.y+t.height>a.y}function vr(t,a){if(t===a)throw new Error("Cannot compare node with itself");const n={a:ta(t),b:ta(a)};let s;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),a=n.b.pop(),s=t;X(s,"Stacking order can only be calculated for elements with a common ancestor");const i={a:ea(Qn(n.a)),b:ea(Qn(n.b))};if(i.a===i.b){const r=s.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let c=r.length;for(;c--;){const l=r[c];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(i.a-i.b)}const br=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function yr(t){var a;const n=getComputedStyle((a=Aa(t))!==null&&a!==void 0?a:t).display;return n==="flex"||n==="inline-flex"}function jr(t){const a=getComputedStyle(t);return!!(a.position==="fixed"||a.zIndex!=="auto"&&(a.position!=="static"||yr(t))||+a.opacity<1||"transform"in a&&a.transform!=="none"||"webkitTransform"in a&&a.webkitTransform!=="none"||"mixBlendMode"in a&&a.mixBlendMode!=="normal"||"filter"in a&&a.filter!=="none"||"webkitFilter"in a&&a.webkitFilter!=="none"||"isolation"in a&&a.isolation==="isolate"||br.test(a.willChange)||a.webkitOverflowScrolling==="touch")}function Qn(t){let a=t.length;for(;a--;){const n=t[a];if(X(n,"Missing node"),jr(n))return n}return null}function ea(t){return t&&Number(getComputedStyle(t).zIndex)||0}function ta(t){const a=[];for(;t;)a.push(t),t=Aa(t);return a}function Aa(t){const{parentNode:a}=t;return a&&a instanceof ShadowRoot?a.host:a}const Pa=1,Ia=2,Ma=4,Da=8,Nr=gr()==="coarse";let Qe=[],Et=!1,ot=new Map,sn=new Map;const Bt=new Set;function Cr(t,a,n,s,i){var r;const{ownerDocument:o}=a,c={direction:n,element:a,hitAreaMargins:s,setResizeHandlerState:i},l=(r=ot.get(o))!==null&&r!==void 0?r:0;return ot.set(o,l+1),Bt.add(c),Qt(),function(){var j;sn.delete(t),Bt.delete(c);const p=(j=ot.get(o))!==null&&j!==void 0?j:1;if(ot.set(o,p-1),Qt(),p===1&&ot.delete(o),Qe.includes(c)){const u=Qe.indexOf(c);u>=0&&Qe.splice(u,1),An(),i("up",!0,null)}}}function na(t){const{target:a}=t,{x:n,y:s}=an(t);Et=!0,zn({target:a,x:n,y:s}),Qt(),Qe.length>0&&(en("down",t),t.preventDefault(),t.stopPropagation())}function It(t){const{x:a,y:n}=an(t);if(Et&&t.buttons===0&&(Et=!1,en("up",t)),!Et){const{target:s}=t;zn({target:s,x:a,y:n})}en("move",t),An(),Qe.length>0&&t.preventDefault()}function jt(t){const{target:a}=t,{x:n,y:s}=an(t);sn.clear(),Et=!1,Qe.length>0&&t.preventDefault(),en("up",t),zn({target:a,x:n,y:s}),An(),Qt()}function zn({target:t,x:a,y:n}){Qe.splice(0);let s=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(s=t),Bt.forEach(i=>{const{element:r,hitAreaMargins:o}=i,c=r.getBoundingClientRect(),{bottom:l,left:v,right:j,top:p}=c,u=Nr?o.coarse:o.fine;if(a>=v-u&&a<=j+u&&n>=p-u&&n<=l+u){if(s!==null&&document.contains(s)&&r!==s&&!r.contains(s)&&!s.contains(r)&&vr(s,r)>0){let y=s,w=!1;for(;y&&!y.contains(r);){if(wr(y.getBoundingClientRect(),c)){w=!0;break}y=y.parentElement}if(w)return}Qe.push(i)}})}function un(t,a){sn.set(t,a)}function An(){let t=!1,a=!1;Qe.forEach(s=>{const{direction:i}=s;i==="horizontal"?t=!0:a=!0});let n=0;sn.forEach(s=>{n|=s}),t&&a?dn("intersection",n):t?dn("horizontal",n):a?dn("vertical",n):xr()}function Qt(){ot.forEach((t,a)=>{const{body:n}=a;n.removeEventListener("contextmenu",jt),n.removeEventListener("pointerdown",na),n.removeEventListener("pointerleave",It),n.removeEventListener("pointermove",It)}),window.removeEventListener("pointerup",jt),window.removeEventListener("pointercancel",jt),Bt.size>0&&(Et?(Qe.length>0&&ot.forEach((t,a)=>{const{body:n}=a;t>0&&(n.addEventListener("contextmenu",jt),n.addEventListener("pointerleave",It),n.addEventListener("pointermove",It))}),window.addEventListener("pointerup",jt),window.addEventListener("pointercancel",jt)):ot.forEach((t,a)=>{const{body:n}=a;t>0&&(n.addEventListener("pointerdown",na,{capture:!0}),n.addEventListener("pointermove",It))}))}function en(t,a){Bt.forEach(n=>{const{setResizeHandlerState:s}=n,i=Qe.includes(n);s(t,i,a)})}function Sr(){const[t,a]=Tt(0);return Fe(()=>a(n=>n+1),[])}function X(t,a){if(!t)throw console.error(a),Error(a)}const Pn=10;function wt(t,a,n=Pn){return t.toFixed(n)===a.toFixed(n)?0:t>a?1:-1}function it(t,a,n=Pn){return wt(t,a,n)===0}function Ge(t,a,n){return wt(t,a,n)===0}function Tr(t,a,n){if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++){const i=t[s],r=a[s];if(!Ge(i,r,n))return!1}return!0}function St({panelConstraints:t,panelIndex:a,size:n}){const s=t[a];X(s!=null,`Panel constraints not found for index ${a}`);let{collapsedSize:i=0,collapsible:r,maxSize:o=100,minSize:c=0}=s;if(wt(n,c)<0)if(r){const l=(i+c)/2;wt(n,l)<0?n=i:n=c}else n=c;return n=Math.min(o,n),n=parseFloat(n.toFixed(Pn)),n}function $t({delta:t,initialLayout:a,panelConstraints:n,pivotIndices:s,prevLayout:i,trigger:r}){if(Ge(t,0))return a;const o=[...a],[c,l]=s;X(c!=null,"Invalid first pivot index"),X(l!=null,"Invalid second pivot index");let v=0;if(r==="keyboard"){{const p=t<0?l:c,u=n[p];X(u,`Panel constraints not found for index ${p}`);const{collapsedSize:g=0,collapsible:y,minSize:w=0}=u;if(y){const L=a[p];if(X(L!=null,`Previous layout not found for panel index ${p}`),Ge(L,g)){const f=w-L;wt(f,Math.abs(t))>0&&(t=t<0?0-f:f)}}}{const p=t<0?c:l,u=n[p];X(u,`No panel constraints found for index ${p}`);const{collapsedSize:g=0,collapsible:y,minSize:w=0}=u;if(y){const L=a[p];if(X(L!=null,`Previous layout not found for panel index ${p}`),Ge(L,w)){const f=L-g;wt(f,Math.abs(t))>0&&(t=t<0?0-f:f)}}}}{const p=t<0?1:-1;let u=t<0?l:c,g=0;for(;;){const w=a[u];X(w!=null,`Previous layout not found for panel index ${u}`);const f=St({panelConstraints:n,panelIndex:u,size:100})-w;if(g+=f,u+=p,u<0||u>=n.length)break}const y=Math.min(Math.abs(t),Math.abs(g));t=t<0?0-y:y}{let u=t<0?c:l;for(;u>=0&&u<n.length;){const g=Math.abs(t)-Math.abs(v),y=a[u];X(y!=null,`Previous layout not found for panel index ${u}`);const w=y-g,L=St({panelConstraints:n,panelIndex:u,size:w});if(!Ge(y,L)&&(v+=y-L,o[u]=L,v.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?u--:u++}}if(Tr(i,o))return i;{const p=t<0?l:c,u=a[p];X(u!=null,`Previous layout not found for panel index ${p}`);const g=u+v,y=St({panelConstraints:n,panelIndex:p,size:g});if(o[p]=y,!Ge(y,g)){let w=g-y,f=t<0?l:c;for(;f>=0&&f<n.length;){const S=o[f];X(S!=null,`Previous layout not found for panel index ${f}`);const $=S+w,E=St({panelConstraints:n,panelIndex:f,size:$});if(Ge(S,E)||(w-=E-S,o[f]=E),Ge(w,0))break;t>0?f--:f++}}}const j=o.reduce((p,u)=>u+p,0);return Ge(j,100)?o:i}function Er({layout:t,panelsArray:a,pivotIndices:n}){let s=0,i=100,r=0,o=0;const c=n[0];X(c!=null,"No pivot index found"),a.forEach((p,u)=>{const{constraints:g}=p,{maxSize:y=100,minSize:w=0}=g;u===c?(s=w,i=y):(r+=w,o+=y)});const l=Math.min(i,100-r),v=Math.max(s,100-o),j=t[c];return{valueMax:l,valueMin:v,valueNow:j}}function _t(t,a=document){return Array.from(a.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function $a(t,a,n=document){const i=_t(t,n).findIndex(r=>r.getAttribute("data-panel-resize-handle-id")===a);return i??null}function La(t,a,n){const s=$a(t,a,n);return s!=null?[s,s+1]:[-1,-1]}function Oa(t,a=document){var n;if(a instanceof HTMLElement&&(a==null||(n=a.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return a;const s=a.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return s||null}function rn(t,a=document){const n=a.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function Rr(t,a,n,s=document){var i,r,o,c;const l=rn(a,s),v=_t(t,s),j=l?v.indexOf(l):-1,p=(i=(r=n[j])===null||r===void 0?void 0:r.id)!==null&&i!==void 0?i:null,u=(o=(c=n[j+1])===null||c===void 0?void 0:c.id)!==null&&o!==void 0?o:null;return[p,u]}function kr({committedValuesRef:t,eagerValuesRef:a,groupId:n,layout:s,panelDataArray:i,panelGroupElement:r,setLayout:o}){Ve({didWarnAboutMissingResizeHandle:!1}),gt(()=>{if(!r)return;const c=_t(n,r);for(let l=0;l<i.length-1;l++){const{valueMax:v,valueMin:j,valueNow:p}=Er({layout:s,panelsArray:i,pivotIndices:[l,l+1]}),u=c[l];if(u!=null){const g=i[l];X(g,`No panel data found for index "${l}"`),u.setAttribute("aria-controls",g.id),u.setAttribute("aria-valuemax",""+Math.round(v)),u.setAttribute("aria-valuemin",""+Math.round(j)),u.setAttribute("aria-valuenow",p!=null?""+Math.round(p):"")}}return()=>{c.forEach((l,v)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,s,i,r]),xt(()=>{if(!r)return;const c=a.current;X(c,"Eager values not found");const{panelDataArray:l}=c,v=Oa(n,r);X(v!=null,`No group found for id "${n}"`);const j=_t(n,r);X(j,`No resize handles found for group id "${n}"`);const p=j.map(u=>{const g=u.getAttribute("data-panel-resize-handle-id");X(g,"Resize handle element has no handle id attribute");const[y,w]=Rr(n,g,l,r);if(y==null||w==null)return()=>{};const L=f=>{if(!f.defaultPrevented)switch(f.key){case"Enter":{f.preventDefault();const S=l.findIndex($=>$.id===y);if(S>=0){const $=l[S];X($,`No panel data found for index ${S}`);const E=s[S],{collapsedSize:A=0,collapsible:k,minSize:h=0}=$.constraints;if(E!=null&&k){const B=$t({delta:Ge(E,A)?h-A:A-E,initialLayout:s,panelConstraints:l.map(_=>_.constraints),pivotIndices:La(n,g,r),prevLayout:s,trigger:"keyboard"});s!==B&&o(B)}}break}}};return u.addEventListener("keydown",L),()=>{u.removeEventListener("keydown",L)}});return()=>{p.forEach(u=>u())}},[r,t,a,n,s,i,o])}function aa(t,a){if(t.length!==a.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==a[n])return!1;return!0}function Ha(t,a){const n=t==="horizontal",{x:s,y:i}=an(a);return n?s:i}function zr(t,a,n,s,i){const r=n==="horizontal",o=rn(a,i);X(o,`No resize handle element found for id "${a}"`);const c=o.getAttribute("data-panel-group-id");X(c,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=s;const v=Ha(n,t),j=Oa(c,i);X(j,`No group element found for id "${c}"`);const p=j.getBoundingClientRect(),u=r?p.width:p.height;return(v-l)/u*100}function Ar(t,a,n,s,i,r){if(Ra(t)){const o=n==="horizontal";let c=0;t.shiftKey?c=100:i!=null?c=i:c=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:c;break;case"ArrowLeft":l=o?-c:0;break;case"ArrowRight":l=o?c:0;break;case"ArrowUp":l=o?0:-c;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return s==null?0:zr(t,a,n,s,r)}function Pr({panelDataArray:t}){const a=Array(t.length),n=t.map(r=>r.constraints);let s=0,i=100;for(let r=0;r<t.length;r++){const o=n[r];X(o,`Panel constraints not found for index ${r}`);const{defaultSize:c}=o;c!=null&&(s++,a[r]=c,i-=c)}for(let r=0;r<t.length;r++){const o=n[r];X(o,`Panel constraints not found for index ${r}`);const{defaultSize:c}=o;if(c!=null)continue;const l=t.length-s,v=i/l;s++,a[r]=v,i-=v}return a}function Nt(t,a,n){a.forEach((s,i)=>{const r=t[i];X(r,`Panel data not found for index ${i}`);const{callbacks:o,constraints:c,id:l}=r,{collapsedSize:v=0,collapsible:j}=c,p=n[l];if(p==null||s!==p){n[l]=s;const{onCollapse:u,onExpand:g,onResize:y}=o;y&&y(s,p),j&&(u||g)&&(g&&(p==null||it(p,v))&&!it(s,v)&&g(),u&&(p==null||!it(p,v))&&it(s,v)&&u())}})}function Yt(t,a){if(t.length!==a.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=a[n])return!1;return!0}function Ir({defaultSize:t,dragState:a,layout:n,panelData:s,panelIndex:i,precision:r=3}){const o=n[i];let c;return o==null?c=t!=null?t.toPrecision(r):"1":s.length===1?c="1":c=o.toPrecision(r),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:a!==null?"none":void 0}}function Mr(t,a=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},a)}}function sa(t){try{if(typeof localStorage<"u")t.getItem=a=>localStorage.getItem(a),t.setItem=(a,n)=>{localStorage.setItem(a,n)};else throw new Error("localStorage not supported in this environment")}catch(a){console.error(a),t.getItem=()=>null,t.setItem=()=>{}}}function Ba(t){return`react-resizable-panels:${t}`}function _a(t){return t.map(a=>{const{constraints:n,id:s,idIsFromProps:i,order:r}=a;return i?s:r?`${r}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((a,n)=>a.localeCompare(n)).join(",")}function Ua(t,a){try{const n=Ba(t),s=a.getItem(n);if(s){const i=JSON.parse(s);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function Dr(t,a,n){var s,i;const r=(s=Ua(t,n))!==null&&s!==void 0?s:{},o=_a(a);return(i=r[o])!==null&&i!==void 0?i:null}function $r(t,a,n,s,i){var r;const o=Ba(t),c=_a(a),l=(r=Ua(t,i))!==null&&r!==void 0?r:{};l[c]={expandToSizes:Object.fromEntries(n.entries()),layout:s};try{i.setItem(o,JSON.stringify(l))}catch(v){console.error(v)}}function ra({layout:t,panelConstraints:a}){const n=[...t],s=n.reduce((r,o)=>r+o,0);if(n.length!==a.length)throw Error(`Invalid ${a.length} panel layout: ${n.map(r=>`${r}%`).join(", ")}`);if(!Ge(s,100)&&n.length>0)for(let r=0;r<a.length;r++){const o=n[r];X(o!=null,`No layout data found for index ${r}`);const c=100/s*o;n[r]=c}let i=0;for(let r=0;r<a.length;r++){const o=n[r];X(o!=null,`No layout data found for index ${r}`);const c=St({panelConstraints:a,panelIndex:r,size:o});o!=c&&(i+=o-c,n[r]=c)}if(!Ge(i,0))for(let r=0;r<a.length;r++){const o=n[r];X(o!=null,`No layout data found for index ${r}`);const c=o+i,l=St({panelConstraints:a,panelIndex:r,size:c});if(o!==l&&(i-=l-o,n[r]=l,Ge(i,0)))break}return n}const Lr=100,Lt={getItem:t=>(sa(Lt),Lt.getItem(t)),setItem:(t,a)=>{sa(Lt),Lt.setItem(t,a)}},ia={};function Fa({autoSaveId:t=null,children:a,className:n="",direction:s,forwardedRef:i,id:r=null,onLayout:o=null,keyboardResizeBy:c=null,storage:l=Lt,style:v,tagName:j="div",...p}){const u=kn(r),g=Ve(null),[y,w]=Tt(null),[L,f]=Tt([]),S=Sr(),$=Ve({}),E=Ve(new Map),A=Ve(0),k=Ve({autoSaveId:t,direction:s,dragState:y,id:u,keyboardResizeBy:c,onLayout:o,storage:l}),h=Ve({layout:L,panelDataArray:[],panelDataArrayChanged:!1});Ve({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Sa(i,()=>({getId:()=>k.current.id,getLayout:()=>{const{layout:N}=h.current;return N},setLayout:N=>{const{onLayout:U}=k.current,{layout:V,panelDataArray:F}=h.current,O=ra({layout:N,panelConstraints:F.map(q=>q.constraints)});aa(V,O)||(f(O),h.current.layout=O,U&&U(O),Nt(F,O,$.current))}}),[]),gt(()=>{k.current.autoSaveId=t,k.current.direction=s,k.current.dragState=y,k.current.id=u,k.current.onLayout=o,k.current.storage=l}),kr({committedValuesRef:k,eagerValuesRef:h,groupId:u,layout:L,panelDataArray:h.current.panelDataArray,setLayout:f,panelGroupElement:g.current}),xt(()=>{const{panelDataArray:N}=h.current;if(t){if(L.length===0||L.length!==N.length)return;let U=ia[t];U==null&&(U=Mr($r,Lr),ia[t]=U);const V=[...N],F=new Map(E.current);U(t,V,F,L,l)}},[t,L,l]),xt(()=>{});const B=Fe(N=>{const{onLayout:U}=k.current,{layout:V,panelDataArray:F}=h.current;if(N.constraints.collapsible){const O=F.map(ue=>ue.constraints),{collapsedSize:q=0,panelSize:ie,pivotIndices:K}=ft(F,N,V);if(X(ie!=null,`Panel size not found for panel "${N.id}"`),!it(ie,q)){E.current.set(N.id,ie);const we=Ct(F,N)===F.length-1?ie-q:q-ie,re=$t({delta:we,initialLayout:V,panelConstraints:O,pivotIndices:K,prevLayout:V,trigger:"imperative-api"});Yt(V,re)||(f(re),h.current.layout=re,U&&U(re),Nt(F,re,$.current))}}},[]),_=Fe((N,U)=>{const{onLayout:V}=k.current,{layout:F,panelDataArray:O}=h.current;if(N.constraints.collapsible){const q=O.map(D=>D.constraints),{collapsedSize:ie=0,panelSize:K=0,minSize:ue=0,pivotIndices:we}=ft(O,N,F),re=U??ue;if(it(K,ie)){const D=E.current.get(N.id),$e=D!=null&&D>=re?D:re,Ee=Ct(O,N)===O.length-1?K-$e:$e-K,ve=$t({delta:Ee,initialLayout:F,panelConstraints:q,pivotIndices:we,prevLayout:F,trigger:"imperative-api"});Yt(F,ve)||(f(ve),h.current.layout=ve,V&&V(ve),Nt(O,ve,$.current))}}},[]),oe=Fe(N=>{const{layout:U,panelDataArray:V}=h.current,{panelSize:F}=ft(V,N,U);return X(F!=null,`Panel size not found for panel "${N.id}"`),F},[]),z=Fe((N,U)=>{const{panelDataArray:V}=h.current,F=Ct(V,N);return Ir({defaultSize:U,dragState:y,layout:L,panelData:V,panelIndex:F})},[y,L]),Y=Fe(N=>{const{layout:U,panelDataArray:V}=h.current,{collapsedSize:F=0,collapsible:O,panelSize:q}=ft(V,N,U);return X(q!=null,`Panel size not found for panel "${N.id}"`),O===!0&&it(q,F)},[]),M=Fe(N=>{const{layout:U,panelDataArray:V}=h.current,{collapsedSize:F=0,collapsible:O,panelSize:q}=ft(V,N,U);return X(q!=null,`Panel size not found for panel "${N.id}"`),!O||wt(q,F)>0},[]),ee=Fe(N=>{const{panelDataArray:U}=h.current;U.push(N),U.sort((V,F)=>{const O=V.order,q=F.order;return O==null&&q==null?0:O==null?-1:q==null?1:O-q}),h.current.panelDataArrayChanged=!0,S()},[S]);gt(()=>{if(h.current.panelDataArrayChanged){h.current.panelDataArrayChanged=!1;const{autoSaveId:N,onLayout:U,storage:V}=k.current,{layout:F,panelDataArray:O}=h.current;let q=null;if(N){const K=Dr(N,O,V);K&&(E.current=new Map(Object.entries(K.expandToSizes)),q=K.layout)}q==null&&(q=Pr({panelDataArray:O}));const ie=ra({layout:q,panelConstraints:O.map(K=>K.constraints)});aa(F,ie)||(f(ie),h.current.layout=ie,U&&U(ie),Nt(O,ie,$.current))}}),gt(()=>{const N=h.current;return()=>{N.layout=[]}},[]);const J=Fe(N=>{let U=!1;const V=g.current;return V&&window.getComputedStyle(V,null).getPropertyValue("direction")==="rtl"&&(U=!0),function(O){O.preventDefault();const q=g.current;if(!q)return()=>null;const{direction:ie,dragState:K,id:ue,keyboardResizeBy:we,onLayout:re}=k.current,{layout:D,panelDataArray:$e}=h.current,{initialLayout:Pe}=K??{},Ee=La(ue,N,q);let ve=Ar(O,N,ie,K,we,q);const Ke=ie==="horizontal";Ke&&U&&(ve=-ve);const Be=$e.map(Z=>Z.constraints),He=$t({delta:ve,initialLayout:Pe??D,panelConstraints:Be,pivotIndices:Ee,prevLayout:D,trigger:Ra(O)?"keyboard":"mouse-or-touch"}),xe=!Yt(D,He);(ka(O)||za(O))&&A.current!=ve&&(A.current=ve,!xe&&ve!==0?Ke?un(N,ve<0?Pa:Ia):un(N,ve<0?Ma:Da):un(N,0)),xe&&(f(He),h.current.layout=He,re&&re(He),Nt($e,He,$.current))}},[]),ae=Fe((N,U)=>{const{onLayout:V}=k.current,{layout:F,panelDataArray:O}=h.current,q=O.map(D=>D.constraints),{panelSize:ie,pivotIndices:K}=ft(O,N,F);X(ie!=null,`Panel size not found for panel "${N.id}"`);const we=Ct(O,N)===O.length-1?ie-U:U-ie,re=$t({delta:we,initialLayout:F,panelConstraints:q,pivotIndices:K,prevLayout:F,trigger:"imperative-api"});Yt(F,re)||(f(re),h.current.layout=re,V&&V(re),Nt(O,re,$.current))},[]),de=Fe((N,U)=>{const{layout:V,panelDataArray:F}=h.current,{collapsedSize:O=0,collapsible:q}=U,{collapsedSize:ie=0,collapsible:K,maxSize:ue=100,minSize:we=0}=N.constraints,{panelSize:re}=ft(F,N,V);re!=null&&(q&&K&&it(re,O)?it(O,ie)||ae(N,ie):re<we?ae(N,we):re>ue&&ae(N,ue))},[ae]),fe=Fe((N,U)=>{const{direction:V}=k.current,{layout:F}=h.current;if(!g.current)return;const O=rn(N,g.current);X(O,`Drag handle element not found for id "${N}"`);const q=Ha(V,U);w({dragHandleId:N,dragHandleRect:O.getBoundingClientRect(),initialCursorPosition:q,initialLayout:F})},[]),De=Fe(()=>{w(null)},[]),ge=Fe(N=>{const{panelDataArray:U}=h.current,V=Ct(U,N);V>=0&&(U.splice(V,1),delete $.current[N.id],h.current.panelDataArrayChanged=!0,S())},[S]),ye=ur(()=>({collapsePanel:B,direction:s,dragState:y,expandPanel:_,getPanelSize:oe,getPanelStyle:z,groupId:u,isPanelCollapsed:Y,isPanelExpanded:M,reevaluatePanelConstraints:de,registerPanel:ee,registerResizeHandle:J,resizePanel:ae,startDragging:fe,stopDragging:De,unregisterPanel:ge,panelGroupElement:g.current}),[B,y,s,_,oe,z,u,Y,M,de,ee,J,ae,fe,De,ge]),je={display:"flex",flexDirection:s==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return kt(nn.Provider,{value:ye},kt(j,{...p,children:a,className:n,id:r,ref:g,style:{...je,...v},"data-panel-group":"","data-panel-group-direction":s,"data-panel-group-id":u}))}const Va=Na((t,a)=>kt(Fa,{...t,forwardedRef:a}));Fa.displayName="PanelGroup";Va.displayName="forwardRef(PanelGroup)";function Ct(t,a){return t.findIndex(n=>n===a||n.id===a.id)}function ft(t,a,n){const s=Ct(t,a),r=s===t.length-1?[s-1,s]:[s,s+1],o=n[s];return{...a.constraints,panelSize:o,pivotIndices:r}}function Or({disabled:t,handleId:a,resizeHandler:n,panelGroupElement:s}){xt(()=>{if(t||n==null||s==null)return;const i=rn(a,s);if(i==null)return;const r=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const c=i.getAttribute("data-panel-group-id");X(c,`No group element found for id "${c}"`);const l=_t(c,s),v=$a(c,a,s);X(v!==null,`No resize element found for id "${a}"`);const j=o.shiftKey?v>0?v-1:l.length-1:v+1<l.length?v+1:0;l[j].focus();break}}};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[s,t,a,n])}function Wa({children:t=null,className:a="",disabled:n=!1,hitAreaMargins:s,id:i,onBlur:r,onDragging:o,onFocus:c,style:l={},tabIndex:v=0,tagName:j="div",...p}){var u,g;const y=Ve(null),w=Ve({onDragging:o});xt(()=>{w.current.onDragging=o});const L=Ca(nn);if(L===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,groupId:S,registerResizeHandle:$,startDragging:E,stopDragging:A,panelGroupElement:k}=L,h=kn(i),[B,_]=Tt("inactive"),[oe,z]=Tt(!1),[Y,M]=Tt(null),ee=Ve({state:B});gt(()=>{ee.current.state=B}),xt(()=>{if(n)M(null);else{const fe=$(h);M(()=>fe)}},[n,h,$]);const J=(u=s==null?void 0:s.coarse)!==null&&u!==void 0?u:15,ae=(g=s==null?void 0:s.fine)!==null&&g!==void 0?g:5;return xt(()=>{if(n||Y==null)return;const fe=y.current;return X(fe,"Element ref not attached"),Cr(h,fe,f,{coarse:J,fine:ae},(ge,ye,je)=>{if(ye)switch(ge){case"down":{_("drag"),X(je,'Expected event to be defined for "down" action'),E(h,je);const{onDragging:N}=w.current;N&&N(!0);break}case"move":{const{state:N}=ee.current;N!=="drag"&&_("hover"),X(je,'Expected event to be defined for "move" action'),Y(je);break}case"up":{_("hover"),A();const{onDragging:N}=w.current;N&&N(!1);break}}else _("inactive")})},[J,f,n,ae,$,h,Y,E,A]),Or({disabled:n,handleId:h,resizeHandler:Y,panelGroupElement:k}),kt(j,{...p,children:t,className:a,id:i,onBlur:()=>{z(!1),r==null||r()},onFocus:()=>{z(!0),c==null||c()},ref:y,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...l},tabIndex:v,"data-panel-group-direction":f,"data-panel-group-id":S,"data-resize-handle":"","data-resize-handle-active":B==="drag"?"pointer":oe?"keyboard":void 0,"data-resize-handle-state":B,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":h})}Wa.displayName="PanelResizeHandle";function Hr({className:t,...a}){return e.jsx(Va,{"data-slot":"resizable-panel-group",className:me("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a})}function la({...t}){return e.jsx(Ea,{"data-slot":"resizable-panel",...t})}function Br({withHandle:t,className:a,...n}){return e.jsx(Wa,{"data-slot":"resizable-handle",className:me("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",a),...n,children:t&&e.jsx("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:e.jsx(ys,{className:"size-2.5"})})})}function _r(t){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const qa=T.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Ut=()=>{const t=T.useContext(qa);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};_r(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Ur(){const t=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function Fr(){return In(/^Mac/)}function Vr(){return In(/^iPhone/)}function oa(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Wr(){return In(/^iPad/)||Fr()&&navigator.maxTouchPoints>1}function Ga(){return Vr()||Wr()}function In(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const qr=24,Gr=typeof window<"u"?P.useLayoutEffect:P.useEffect;function ca(...t){return(...a)=>{for(let n of t)typeof n=="function"&&n(...a)}}const mn=typeof document<"u"&&window.visualViewport;function da(t){let a=window.getComputedStyle(t);return/(auto|scroll)/.test(a.overflow+a.overflowX+a.overflowY)}function Ya(t){for(da(t)&&(t=t.parentElement);t&&!da(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const Yr=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Kt=0,fn;function Kr(t={}){let{isDisabled:a}=t;Gr(()=>{if(!a)return Kt++,Kt===1&&Ga()&&(fn=Xr()),()=>{Kt--,Kt===0&&(fn==null||fn())}},[a])}function Xr(){let t,a=0,n=p=>{t=Ya(p.target),!(t===document.documentElement&&t===document.body)&&(a=p.changedTouches[0].pageY)},s=p=>{if(!t||t===document.documentElement||t===document.body){p.preventDefault();return}let u=p.changedTouches[0].pageY,g=t.scrollTop,y=t.scrollHeight-t.clientHeight;y!==0&&((g<=0&&u>a||g>=y&&u<a)&&p.preventDefault(),a=u)},i=p=>{let u=p.target;Nn(u)&&u!==document.activeElement&&(p.preventDefault(),u.style.transform="translateY(-2000px)",u.focus(),requestAnimationFrame(()=>{u.style.transform=""}))},r=p=>{let u=p.target;Nn(u)&&(u.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{u.style.transform="",mn&&(mn.height<window.innerHeight?requestAnimationFrame(()=>{ua(u)}):mn.addEventListener("resize",()=>ua(u),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},c=window.pageXOffset,l=window.pageYOffset,v=ca(Jr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let j=ca(Mt(document,"touchstart",n,{passive:!1,capture:!0}),Mt(document,"touchmove",s,{passive:!1,capture:!0}),Mt(document,"touchend",i,{passive:!1,capture:!0}),Mt(document,"focus",r,!0),Mt(window,"scroll",o));return()=>{v(),j(),window.scrollTo(c,l)}}function Jr(t,a,n){let s=t.style[a];return t.style[a]=n,()=>{t.style[a]=s}}function Mt(t,a,n,s){return t.addEventListener(a,n,s),()=>{t.removeEventListener(a,n,s)}}function ua(t){let a=document.scrollingElement||document.documentElement;for(;t&&t!==a;){let n=Ya(t);if(n!==document.documentElement&&n!==document.body&&n!==t){let s=n.getBoundingClientRect().top,i=t.getBoundingClientRect().top,r=t.getBoundingClientRect().bottom;const o=n.getBoundingClientRect().bottom+qr;r>o&&(n.scrollTop+=i-s)}t=n.parentElement}}function Nn(t){return t instanceof HTMLInputElement&&!Yr.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function Zr(t,a){typeof t=="function"?t(a):t!=null&&(t.current=a)}function Qr(...t){return a=>t.forEach(n=>Zr(n,a))}function Ka(...t){return P.useCallback(Qr(...t),t)}const Xa=new WeakMap;function ke(t,a,n=!1){if(!t||!(t instanceof HTMLElement))return;let s={};Object.entries(a).forEach(([i,r])=>{if(i.startsWith("--")){t.style.setProperty(i,r);return}s[i]=t.style[i],t.style[i]=r}),!n&&Xa.set(t,s)}function ei(t,a){if(!t||!(t instanceof HTMLElement))return;let n=Xa.get(t);n&&(t.style[a]=n[a])}const Ne=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function Xt(t,a){if(!t)return null;const n=window.getComputedStyle(t),s=n.transform||n.webkitTransform||n.mozTransform;let i=s.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[Ne(a)?13:12]):(i=s.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[Ne(a)?5:4]):null)}function ti(t){return 8*(Math.log(t+1)-2)}function pn(t,a){if(!t)return()=>{};const n=t.style.cssText;return Object.assign(t.style,a),()=>{t.style.cssText=n}}function ni(...t){return(...a)=>{for(const n of t)typeof n=="function"&&n(...a)}}const he={DURATION:.5,EASE:[.32,.72,0,1]},Ja=.4,ai=.25,si=100,Za=8,Jt=16,Cn=26,hn="vaul-dragging";function Qa(t){const a=T.useRef(t);return T.useEffect(()=>{a.current=t}),T.useMemo(()=>(...n)=>a.current==null?void 0:a.current.call(a,...n),[])}function ri({defaultProp:t,onChange:a}){const n=T.useState(t),[s]=n,i=T.useRef(s),r=Qa(a);return T.useEffect(()=>{i.current!==s&&(r(s),i.current=s)},[s,i,r]),n}function es({prop:t,defaultProp:a,onChange:n=()=>{}}){const[s,i]=ri({defaultProp:a,onChange:n}),r=t!==void 0,o=r?t:s,c=Qa(n),l=T.useCallback(v=>{if(r){const p=typeof v=="function"?v(t):v;p!==t&&c(p)}else i(v)},[r,t,i,c]);return[o,l]}function ii({activeSnapPointProp:t,setActiveSnapPointProp:a,snapPoints:n,drawerRef:s,overlayRef:i,fadeFromIndex:r,onSnapPointChange:o,direction:c="bottom",container:l,snapToSequentialPoint:v}){const[j,p]=es({prop:t,defaultProp:n==null?void 0:n[0],onChange:a}),[u,g]=T.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);T.useEffect(()=>{function h(){g({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const y=T.useMemo(()=>j===(n==null?void 0:n[n.length-1])||null,[n,j]),w=T.useMemo(()=>{var h;return(h=n==null?void 0:n.findIndex(B=>B===j))!=null?h:null},[n,j]),L=n&&n.length>0&&(r||r===0)&&!Number.isNaN(r)&&n[r]===j||!n,f=T.useMemo(()=>{const h=l?{width:l.getBoundingClientRect().width,height:l.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var B;return(B=n==null?void 0:n.map(_=>{const oe=typeof _=="string";let z=0;if(oe&&(z=parseInt(_,10)),Ne(c)){const M=oe?z:u?_*h.height:0;return u?c==="bottom"?h.height-M:-h.height+M:M}const Y=oe?z:u?_*h.width:0;return u?c==="right"?h.width-Y:-h.width+Y:Y}))!=null?B:[]},[n,u,l]),S=T.useMemo(()=>w!==null?f==null?void 0:f[w]:null,[f,w]),$=T.useCallback(h=>{var B;const _=(B=f==null?void 0:f.findIndex(oe=>oe===h))!=null?B:null;o(_),ke(s.current,{transition:`transform ${he.DURATION}s cubic-bezier(${he.EASE.join(",")})`,transform:Ne(c)?`translate3d(0, ${h}px, 0)`:`translate3d(${h}px, 0, 0)`}),f&&_!==f.length-1&&r!==void 0&&_!==r&&_<r?ke(i.current,{transition:`opacity ${he.DURATION}s cubic-bezier(${he.EASE.join(",")})`,opacity:"0"}):ke(i.current,{transition:`opacity ${he.DURATION}s cubic-bezier(${he.EASE.join(",")})`,opacity:"1"}),p(n==null?void 0:n[Math.max(_,0)])},[s.current,n,f,r,i,p]);T.useEffect(()=>{if(j||t){var h;const B=(h=n==null?void 0:n.findIndex(_=>_===t||_===j))!=null?h:-1;f&&B!==-1&&typeof f[B]=="number"&&$(f[B])}},[j,t,n,f,$]);function E({draggedDistance:h,closeDrawer:B,velocity:_,dismissible:oe}){if(r===void 0)return;const z=c==="bottom"||c==="right"?(S??0)-h:(S??0)+h,Y=w===r-1,M=w===0,ee=h>0;if(Y&&ke(i.current,{transition:`opacity ${he.DURATION}s cubic-bezier(${he.EASE.join(",")})`}),!v&&_>2&&!ee){oe?B():$(f[0]);return}if(!v&&_>2&&ee&&f&&n){$(f[n.length-1]);return}const J=f==null?void 0:f.reduce((de,fe)=>typeof de!="number"||typeof fe!="number"?de:Math.abs(fe-z)<Math.abs(de-z)?fe:de),ae=Ne(c)?window.innerHeight:window.innerWidth;if(_>Ja&&Math.abs(h)<ae*.4){const de=ee?1:-1;if(de>0&&y&&n){$(f[n.length-1]);return}if(M&&de<0&&oe&&B(),w===null)return;$(f[w+de]);return}$(J)}function A({draggedDistance:h}){if(S===null)return;const B=c==="bottom"||c==="right"?S-h:S+h;(c==="bottom"||c==="right")&&B<f[f.length-1]||(c==="top"||c==="left")&&B>f[f.length-1]||ke(s.current,{transform:Ne(c)?`translate3d(0, ${B}px, 0)`:`translate3d(${B}px, 0, 0)`})}function k(h,B){if(!n||typeof w!="number"||!f||r===void 0)return null;const _=w===r-1;if(w>=r&&B)return 0;if(_&&!B)return 1;if(!L&&!_)return null;const z=_?w+1:w-1,Y=_?f[z]-f[z-1]:f[z+1]-f[z],M=h/Math.abs(Y);return _?1-M:M}return{isLastSnapPoint:y,activeSnapPoint:j,shouldFade:L,getPercentageDragged:k,setActiveSnapPoint:p,activeSnapPointIndex:w,onRelease:E,onDrag:A,snapPointsOffset:f}}const li=()=>()=>{};function oi(){const{direction:t,isOpen:a,shouldScaleBackground:n,setBackgroundColorOnScale:s,noBodyStyles:i}=Ut(),r=T.useRef(null),o=P.useMemo(()=>document.body.style.backgroundColor,[]);function c(){return(window.innerWidth-Cn)/window.innerWidth}T.useEffect(()=>{if(a&&n){r.current&&clearTimeout(r.current);const l=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!l)return;ni(s&&!i?pn(document.body,{background:"black"}):li,pn(l,{transformOrigin:Ne(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${he.DURATION}s`,transitionTimingFunction:`cubic-bezier(${he.EASE.join(",")})`}));const v=pn(l,{borderRadius:`${Za}px`,overflow:"hidden",...Ne(t)?{transform:`scale(${c()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${c()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{v(),r.current=window.setTimeout(()=>{o?document.body.style.background=o:document.body.style.removeProperty("background")},he.DURATION*1e3)}}},[a,n,o])}let Dt=null;function ci({isOpen:t,modal:a,nested:n,hasBeenOpened:s,preventScrollRestoration:i,noBodyStyles:r}){const[o,c]=T.useState(()=>typeof window<"u"?window.location.href:""),l=T.useRef(0),v=T.useCallback(()=>{if(oa()&&Dt===null&&t&&!r){Dt={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:p,innerHeight:u}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-l.current}px`,left:`${-p}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const g=u-window.innerHeight;g&&l.current>=u&&(document.body.style.top=`${-(l.current+g)}px`)}),300)}},[t]),j=T.useCallback(()=>{if(oa()&&Dt!==null&&!r){const p=-parseInt(document.body.style.top,10),u=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Dt),window.requestAnimationFrame(()=>{if(i&&o!==window.location.href){c(window.location.href);return}window.scrollTo(u,p)}),Dt=null}},[o]);return T.useEffect(()=>{function p(){l.current=window.scrollY}return p(),window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[]),T.useEffect(()=>{if(a)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||j()}},[a,j]),T.useEffect(()=>{n||!s||(t?(!window.matchMedia("(display-mode: standalone)").matches&&v(),a||window.setTimeout(()=>{j()},500)):j())},[t,s,o,a,n,v,j]),{restorePositionSetting:j}}function di({open:t,onOpenChange:a,children:n,onDrag:s,onRelease:i,snapPoints:r,shouldScaleBackground:o=!1,setBackgroundColorOnScale:c=!0,closeThreshold:l=ai,scrollLockTimeout:v=si,dismissible:j=!0,handleOnly:p=!1,fadeFromIndex:u=r&&r.length-1,activeSnapPoint:g,setActiveSnapPoint:y,fixed:w,modal:L=!0,onClose:f,nested:S,noBodyStyles:$=!1,direction:E="bottom",defaultOpen:A=!1,disablePreventScroll:k=!0,snapToSequentialPoint:h=!1,preventScrollRestoration:B=!1,repositionInputs:_=!0,onAnimationEnd:oe,container:z,autoFocus:Y=!1}){var M,ee;const[J=!1,ae]=es({defaultProp:A,prop:t,onChange:H=>{a==null||a(H),!H&&!S&&le(),setTimeout(()=>{oe==null||oe(H)},he.DURATION*1e3),H&&!L&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),H||(document.body.style.pointerEvents="auto")}}),[de,fe]=T.useState(!1),[De,ge]=T.useState(!1),[ye,je]=T.useState(!1),N=T.useRef(null),U=T.useRef(null),V=T.useRef(null),F=T.useRef(null),O=T.useRef(null),q=T.useRef(!1),ie=T.useRef(null),K=T.useRef(0),ue=T.useRef(!1),we=T.useRef(!A),re=T.useRef(0),D=T.useRef(null),$e=T.useRef(((M=D.current)==null?void 0:M.getBoundingClientRect().height)||0),Pe=T.useRef(((ee=D.current)==null?void 0:ee.getBoundingClientRect().width)||0),Ee=T.useRef(0),ve=T.useCallback(H=>{r&&H===Z.length-1&&(U.current=new Date)},[]),{activeSnapPoint:Ke,activeSnapPointIndex:Be,setActiveSnapPoint:He,onRelease:xe,snapPointsOffset:Z,onDrag:zt,shouldFade:lt,getPercentageDragged:_e}=ii({snapPoints:r,activeSnapPointProp:g,setActiveSnapPointProp:y,drawerRef:D,fadeFromIndex:u,overlayRef:N,onSnapPointChange:ve,direction:E,container:z,snapToSequentialPoint:h});Kr({isDisabled:!J||De||!L||ye||!de||!_||!k});const{restorePositionSetting:le}=ci({isOpen:J,modal:L,nested:S??!1,hasBeenOpened:de,preventScrollRestoration:B,noBodyStyles:$});function st(){return(window.innerWidth-Cn)/window.innerWidth}function vt(H){var G,Q;!j&&!r||D.current&&!D.current.contains(H.target)||($e.current=((G=D.current)==null?void 0:G.getBoundingClientRect().height)||0,Pe.current=((Q=D.current)==null?void 0:Q.getBoundingClientRect().width)||0,ge(!0),V.current=new Date,Ga()&&window.addEventListener("touchend",()=>q.current=!1,{once:!0}),H.target.setPointerCapture(H.pointerId),K.current=Ne(E)?H.pageY:H.pageX)}function bt(H,G){var Q;let te=H;const pe=(Q=window.getSelection())==null?void 0:Q.toString(),Le=D.current?Xt(D.current,E):null,Ie=new Date;if(te.tagName==="SELECT"||te.hasAttribute("data-vaul-no-drag")||te.closest("[data-vaul-no-drag]"))return!1;if(E==="right"||E==="left")return!0;if(U.current&&Ie.getTime()-U.current.getTime()<500)return!1;if(Le!==null&&(E==="bottom"?Le>0:Le<0))return!0;if(pe&&pe.length>0)return!1;if(O.current&&Ie.getTime()-O.current.getTime()<v&&Le===0||G)return O.current=Ie,!1;for(;te;){if(te.scrollHeight>te.clientHeight){if(te.scrollTop!==0)return O.current=new Date,!1;if(te.getAttribute("role")==="dialog")return!0}te=te.parentNode}return!0}function At(H){if(D.current&&De){const G=E==="bottom"||E==="right"?1:-1,Q=(K.current-(Ne(E)?H.pageY:H.pageX))*G,te=Q>0,pe=r&&!j&&!te;if(pe&&Be===0)return;const Le=Math.abs(Q),Ie=document.querySelector("[data-vaul-drawer-wrapper]"),nt=E==="bottom"||E==="top"?$e.current:Pe.current;let qe=Le/nt;const rt=_e(Le,te);if(rt!==null&&(qe=rt),pe&&qe>=1||!q.current&&!bt(H.target,te))return;if(D.current.classList.add(hn),q.current=!0,ke(D.current,{transition:"none"}),ke(N.current,{transition:"none"}),r&&zt({draggedDistance:Q}),te&&!r){const Xe=ti(Q),yt=Math.min(Xe*-1,0)*G;ke(D.current,{transform:Ne(E)?`translate3d(0, ${yt}px, 0)`:`translate3d(${yt}px, 0, 0)`});return}const at=1-qe;if((lt||u&&Be===u-1)&&(s==null||s(H,qe),ke(N.current,{opacity:`${at}`,transition:"none"},!0)),Ie&&N.current&&o){const Xe=Math.min(st()+qe*(1-st()),1),yt=8-qe*8,Vt=Math.max(0,14-qe*14);ke(Ie,{borderRadius:`${yt}px`,transform:Ne(E)?`scale(${Xe}) translate3d(0, ${Vt}px, 0)`:`scale(${Xe}) translate3d(${Vt}px, 0, 0)`,transition:"none"},!0)}if(!r){const Xe=Le*G;ke(D.current,{transform:Ne(E)?`translate3d(0, ${Xe}px, 0)`:`translate3d(${Xe}px, 0, 0)`})}}}T.useEffect(()=>{window.requestAnimationFrame(()=>{we.current=!0})},[]),T.useEffect(()=>{var H;function G(){if(!D.current||!_)return;const Q=document.activeElement;if(Nn(Q)||ue.current){var te;const pe=((te=window.visualViewport)==null?void 0:te.height)||0,Le=window.innerHeight;let Ie=Le-pe;const nt=D.current.getBoundingClientRect().height||0,qe=nt>Le*.8;Ee.current||(Ee.current=nt);const rt=D.current.getBoundingClientRect().top;if(Math.abs(re.current-Ie)>60&&(ue.current=!ue.current),r&&r.length>0&&Z&&Be){const at=Z[Be]||0;Ie+=at}if(re.current=Ie,nt>pe||ue.current){const at=D.current.getBoundingClientRect().height;let Xe=at;at>pe&&(Xe=pe-(qe?rt:Cn)),w?D.current.style.height=`${at-Math.max(Ie,0)}px`:D.current.style.height=`${Math.max(Xe,pe-rt)}px`}else Ur()||(D.current.style.height=`${Ee.current}px`);r&&r.length>0&&!ue.current?D.current.style.bottom="0px":D.current.style.bottom=`${Math.max(Ie,0)}px`}}return(H=window.visualViewport)==null||H.addEventListener("resize",G),()=>{var Q;return(Q=window.visualViewport)==null?void 0:Q.removeEventListener("resize",G)}},[Be,r,Z]);function et(H){C(),f==null||f(),H||ae(!1),setTimeout(()=>{r&&He(r[0])},he.DURATION*1e3)}function ct(){if(!D.current)return;const H=document.querySelector("[data-vaul-drawer-wrapper]"),G=Xt(D.current,E);ke(D.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${he.DURATION}s cubic-bezier(${he.EASE.join(",")})`}),ke(N.current,{transition:`opacity ${he.DURATION}s cubic-bezier(${he.EASE.join(",")})`,opacity:"1"}),o&&G&&G>0&&J&&ke(H,{borderRadius:`${Za}px`,overflow:"hidden",...Ne(E)?{transform:`scale(${st()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${st()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${he.DURATION}s`,transitionTimingFunction:`cubic-bezier(${he.EASE.join(",")})`},!0)}function C(){!De||!D.current||(D.current.classList.remove(hn),q.current=!1,ge(!1),F.current=new Date)}function se(H){if(!De||!D.current)return;D.current.classList.remove(hn),q.current=!1,ge(!1),F.current=new Date;const G=Xt(D.current,E);if(!H||!bt(H.target,!1)||!G||Number.isNaN(G)||V.current===null)return;const Q=F.current.getTime()-V.current.getTime(),te=K.current-(Ne(E)?H.pageY:H.pageX),pe=Math.abs(te)/Q;if(pe>.05&&(je(!0),setTimeout(()=>{je(!1)},200)),r){xe({draggedDistance:te*(E==="bottom"||E==="right"?1:-1),closeDrawer:et,velocity:pe,dismissible:j}),i==null||i(H,!0);return}if(E==="bottom"||E==="right"?te>0:te<0){ct(),i==null||i(H,!0);return}if(pe>Ja){et(),i==null||i(H,!1);return}var Le;const Ie=Math.min((Le=D.current.getBoundingClientRect().height)!=null?Le:0,window.innerHeight);var nt;const qe=Math.min((nt=D.current.getBoundingClientRect().width)!=null?nt:0,window.innerWidth),rt=E==="left"||E==="right";if(Math.abs(G)>=(rt?qe:Ie)*l){et(),i==null||i(H,!1);return}i==null||i(H,!0),ct()}T.useEffect(()=>(J&&(ke(document.documentElement,{scrollBehavior:"auto"}),U.current=new Date),()=>{ei(document.documentElement,"scrollBehavior")}),[J]);function We(H){const G=H?(window.innerWidth-Jt)/window.innerWidth:1,Q=H?-16:0;ie.current&&window.clearTimeout(ie.current),ke(D.current,{transition:`transform ${he.DURATION}s cubic-bezier(${he.EASE.join(",")})`,transform:Ne(E)?`scale(${G}) translate3d(0, ${Q}px, 0)`:`scale(${G}) translate3d(${Q}px, 0, 0)`}),!H&&D.current&&(ie.current=setTimeout(()=>{const te=Xt(D.current,E);ke(D.current,{transition:"none",transform:Ne(E)?`translate3d(0, ${te}px, 0)`:`translate3d(${te}px, 0, 0)`})},500))}function tt(H,G){if(G<0)return;const Q=(window.innerWidth-Jt)/window.innerWidth,te=Q+G*(1-Q),pe=-16+G*Jt;ke(D.current,{transform:Ne(E)?`scale(${te}) translate3d(0, ${pe}px, 0)`:`scale(${te}) translate3d(${pe}px, 0, 0)`,transition:"none"})}function Je(H,G){const Q=Ne(E)?window.innerHeight:window.innerWidth,te=G?(Q-Jt)/Q:1,pe=G?-16:0;G&&ke(D.current,{transition:`transform ${he.DURATION}s cubic-bezier(${he.EASE.join(",")})`,transform:Ne(E)?`scale(${te}) translate3d(0, ${pe}px, 0)`:`scale(${te}) translate3d(${pe}px, 0, 0)`})}return T.useEffect(()=>{L||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[L]),T.createElement(Es,{defaultOpen:A,onOpenChange:H=>{!j&&!H||(H?fe(!0):et(!0),ae(H))},open:J},T.createElement(qa.Provider,{value:{activeSnapPoint:Ke,snapPoints:r,setActiveSnapPoint:He,drawerRef:D,overlayRef:N,onOpenChange:a,onPress:vt,onRelease:se,onDrag:At,dismissible:j,shouldAnimate:we,handleOnly:p,isOpen:J,isDragging:De,shouldFade:lt,closeDrawer:et,onNestedDrag:tt,onNestedOpenChange:We,onNestedRelease:Je,keyboardIsOpen:ue,modal:L,snapPointsOffset:Z,activeSnapPointIndex:Be,direction:E,shouldScaleBackground:o,setBackgroundColorOnScale:c,noBodyStyles:$,container:z,autoFocus:Y}},n))}const ts=T.forwardRef(function({...t},a){const{overlayRef:n,snapPoints:s,onRelease:i,shouldFade:r,isOpen:o,modal:c,shouldAnimate:l}=Ut(),v=Ka(a,n),j=s&&s.length>0;if(!c)return null;const p=T.useCallback(u=>i(u),[i]);return T.createElement(zs,{onMouseUp:p,ref:v,"data-vaul-overlay":"","data-vaul-snap-points":o&&j?"true":"false","data-vaul-snap-points-overlay":o&&r?"true":"false","data-vaul-animate":l!=null&&l.current?"true":"false",...t})});ts.displayName="Drawer.Overlay";const ns=T.forwardRef(function({onPointerDownOutside:t,style:a,onOpenAutoFocus:n,...s},i){const{drawerRef:r,onPress:o,onRelease:c,onDrag:l,keyboardIsOpen:v,snapPointsOffset:j,activeSnapPointIndex:p,modal:u,isOpen:g,direction:y,snapPoints:w,container:L,handleOnly:f,shouldAnimate:S,autoFocus:$}=Ut(),[E,A]=T.useState(!1),k=Ka(i,r),h=T.useRef(null),B=T.useRef(null),_=T.useRef(!1),oe=w&&w.length>0;oi();const z=(M,ee,J=0)=>{if(_.current)return!0;const ae=Math.abs(M.y),de=Math.abs(M.x),fe=de>ae,De=["bottom","right"].includes(ee)?1:-1;if(ee==="left"||ee==="right"){if(!(M.x*De<0)&&de>=0&&de<=J)return fe}else if(!(M.y*De<0)&&ae>=0&&ae<=J)return!fe;return _.current=!0,!0};T.useEffect(()=>{oe&&window.requestAnimationFrame(()=>{A(!0)})},[]);function Y(M){h.current=null,_.current=!1,c(M)}return T.createElement(Rs,{"data-vaul-drawer-direction":y,"data-vaul-drawer":"","data-vaul-delayed-snap-points":E?"true":"false","data-vaul-snap-points":g&&oe?"true":"false","data-vaul-custom-container":L?"true":"false","data-vaul-animate":S!=null&&S.current?"true":"false",...s,ref:k,style:j&&j.length>0?{"--snap-point-height":`${j[p??0]}px`,...a}:a,onPointerDown:M=>{f||(s.onPointerDown==null||s.onPointerDown.call(s,M),h.current={x:M.pageX,y:M.pageY},o(M))},onOpenAutoFocus:M=>{n==null||n(M),$||M.preventDefault()},onPointerDownOutside:M=>{if(t==null||t(M),!u||M.defaultPrevented){M.preventDefault();return}v.current&&(v.current=!1)},onFocusOutside:M=>{if(!u){M.preventDefault();return}},onPointerMove:M=>{if(B.current=M,f||(s.onPointerMove==null||s.onPointerMove.call(s,M),!h.current))return;const ee=M.pageY-h.current.y,J=M.pageX-h.current.x,ae=M.pointerType==="touch"?10:2;z({x:J,y:ee},y,ae)?l(M):(Math.abs(J)>ae||Math.abs(ee)>ae)&&(h.current=null)},onPointerUp:M=>{s.onPointerUp==null||s.onPointerUp.call(s,M),h.current=null,_.current=!1,c(M)},onPointerOut:M=>{s.onPointerOut==null||s.onPointerOut.call(s,M),Y(B.current)},onContextMenu:M=>{s.onContextMenu==null||s.onContextMenu.call(s,M),B.current&&Y(B.current)}})});ns.displayName="Drawer.Content";const ui=250,mi=120,fi=T.forwardRef(function({preventCycle:t=!1,children:a,...n},s){const{closeDrawer:i,isDragging:r,snapPoints:o,activeSnapPoint:c,setActiveSnapPoint:l,dismissible:v,handleOnly:j,isOpen:p,onPress:u,onDrag:g}=Ut(),y=T.useRef(null),w=T.useRef(!1);function L(){if(w.current){$();return}window.setTimeout(()=>{f()},mi)}function f(){if(r||t||w.current){$();return}if($(),!o||o.length===0){v||i();return}if(c===o[o.length-1]&&v){i();return}const A=o.findIndex(h=>h===c);if(A===-1)return;const k=o[A+1];l(k)}function S(){y.current=window.setTimeout(()=>{w.current=!0},ui)}function $(){y.current&&window.clearTimeout(y.current),w.current=!1}return T.createElement("div",{onClick:L,onPointerCancel:$,onPointerDown:E=>{j&&u(E),S()},onPointerMove:E=>{j&&g(E)},ref:s,"data-vaul-drawer-visible":p?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},T.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},a))});fi.displayName="Drawer.Handle";function pi(t){const a=Ut(),{container:n=a.container,...s}=t;return T.createElement(ks,{container:n,...s})}const Ft={Root:di,Content:ns,Overlay:ts,Portal:pi,Title:Ts};function hi({...t}){return e.jsx(Ft.Root,{"data-slot":"drawer",...t})}function xi({...t}){return e.jsx(Ft.Portal,{"data-slot":"drawer-portal",...t})}function gi({className:t,...a}){return e.jsx(Ft.Overlay,{"data-slot":"drawer-overlay",className:me("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...a})}function wi({className:t,children:a,...n}){return e.jsxs(xi,{"data-slot":"drawer-portal",children:[e.jsx(gi,{}),e.jsxs(Ft.Content,{"data-slot":"drawer-content",className:me("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...n,children:[e.jsx("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),a]})]})}function vi({className:t,...a}){return e.jsx("div",{"data-slot":"drawer-header",className:me("flex flex-col gap-1.5 p-4",t),...a})}function bi({className:t,...a}){return e.jsx(Ft.Title,{"data-slot":"drawer-title",className:me("text-foreground font-semibold",t),...a})}const yi=({show:t,history:a,collections:n=[],selectedCollectionId:s="",onSelectCollection:i,onClear:r,onUseAgain:o,onRemoveEntry:c,hideCollectionSelector:l=!1})=>{const[v,j]=T.useState(null),[p,u]=T.useState(!1),[g,y]=T.useState("input"),w=Array.isArray(a)?a.filter(S=>S.collectionId===s):[],L=Array.isArray(n)?n.find(S=>S.id===s):void 0,f=w.find(S=>S.id===v)||null;return T.useEffect(()=>{j(null),u(!1)},[s,a]),P.useEffect(()=>{if(!p)return;const S=$=>{if($.ctrlKey&&($.key==="c"||$.key==="C")){$.preventDefault();const E=g==="input"?(f==null?void 0:f.inputText)||"":(f==null?void 0:f.translatedText)||"";E&&(navigator.clipboard.writeText(E),ne.success(`Copied ${g==="input"?"input text":"translated text"}`))}else $.ctrlKey&&($.key==="v"||$.key==="V")?($.preventDefault(),f&&o(f)):$.key==="Backspace"&&($.preventDefault(),f&&(u(!1),c(f.id)))};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[p,g,f,o,c]),t?e.jsxs("div",{className:me("h-full w-full flex flex-col"),children:[e.jsx("div",{className:"my-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ks,{className:"h-5 w-5 mr-2 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold",children:"Translation History"}),e.jsx("span",{className:"block text-sm mt-1 text-muted-foreground",children:"Previously translated content, organized by collection"})]})]}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(W,{variant:"destructive",size:"sm",onClick:r,disabled:(w==null?void 0:w.length)===0,className:"h-8 text-xs",children:[e.jsx(ht,{className:"h-3.5 w-3.5 mr-1.5"}),"Clear All"]})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Delete all translation history in this collection"})})]})})]})}),e.jsx("div",{className:"px-2 pb-0 flex-1 min-h-0",children:e.jsxs(Hr,{direction:"horizontal",className:"h-[500px] w-full",children:[!l&&e.jsxs(e.Fragment,{children:[e.jsx(la,{defaultSize:25,minSize:20,maxSize:40,className:"border-r border-border/40",children:e.jsx("div",{className:"h-full flex flex-col",children:e.jsx(Ot,{className:"flex-1 px-2 pb-2",children:e.jsx("div",{className:"flex flex-col gap-1",children:(n==null?void 0:n.length)===0?e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-4 text-center",children:"No collections"}):n.map(S=>e.jsxs("div",{className:me("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer transition-all",S.id===s?"bg-primary/10 text-primary font-semibold":"hover:bg-muted/60 text-gray-700 dark:text-gray-200"),onClick:()=>i(S.id),children:[e.jsx(vn,{className:"h-4 w-4 mr-1 text-primary/70"}),e.jsx("span",{className:"truncate text-sm",children:S.name})]},S.id))})})})}),e.jsx(Br,{withHandle:!0})]}),e.jsx(la,{defaultSize:l?100:75,minSize:l?0:40,children:e.jsxs("div",{className:"h-full flex flex-col px-4",children:[e.jsxs("div",{className:" pt-4 pb-2 font-semibold text-base flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4 text-primary/70"}),L?L.name:"No Collection Selected"]}),e.jsxs("div",{className:"flex-1 px-0 pb-4",children:[(w==null?void 0:w.length)===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ps,{className:"h-12 w-12 text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No translation history yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 max-w-md",children:"Translations will be saved here automatically as you use the translator"})]}):e.jsx(Ot,{className:"h-[400px] pr-2",children:e.jsx("div",{className:"space-y-2",children:w.map(S=>e.jsx(Rt,{className:me("transition-all cursor-pointer border-2",v===S.id&&p?"border-primary bg-primary/5":"border-transparent hover:border-border"),onClick:()=>{j(S.id),y("input"),u(!0)},children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-2 px-4 py-3",children:[e.jsxs("div",{className:"flex flex-col gap-1 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Tn,{className:"h-3.5 w-3.5"}),new Date(S.timestamp).toLocaleString(),e.jsx(Ze,{variant:"outline",className:"ml-2 text-xs px-1.5 py-0 h-5",children:S.model})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-4 mt-1",children:[e.jsx("span",{className:"truncate text-sm font-medium text-primary/90 max-w-[180px] md:max-w-[220px]",title:S.inputText,children:S.inputText}),e.jsx("span",{className:"hidden md:inline text-muted-foreground",children:"â†’"}),e.jsx("span",{className:"truncate text-sm text-muted-foreground max-w-[180px] md:max-w-[220px]",title:S.translatedText,children:S.translatedText})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ze,{children:[e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(W,{variant:"outline",size:"sm",onClick:$=>{$.stopPropagation(),o(S)},className:"h-8",children:[e.jsx(bn,{className:"h-3.5 w-3.5 mr-1.5"}),"Reuse"]})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Load this translation again"})})]}),e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{variant:"ghost",size:"icon",onClick:$=>{$.stopPropagation(),c(S.id)},className:"h-8 w-8 text-destructive",children:e.jsx(ht,{className:"h-4 w-4"})})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Delete this entry"})})]})]})})]})},S.id))})}),e.jsx(hi,{open:p,onOpenChange:u,children:e.jsxs(wi,{className:"w-screen h-screen max-w-none max-h-none flex flex-col",children:[e.jsx(vi,{children:e.jsx(bi,{children:"Translation Details"})}),e.jsx("div",{className:"flex-1 px-4 pb-32 overflow-y-auto",children:e.jsxs(Cs,{value:g,onValueChange:S=>y(S),className:"w-full",children:[e.jsxs(Ss,{className:"mb-4 w-full",children:[e.jsx(Gn,{value:"input",className:"flex-1",children:"Input Text"}),e.jsx(Gn,{value:"translated",className:"flex-1",children:"Translated Text"})]}),e.jsxs(Yn,{value:"input",children:[e.jsxs(qn,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(wn,{className:"h-3 w-3 mr-1"}),"Input Text"]}),e.jsx(Ht,{value:(f==null?void 0:f.inputText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]}),e.jsxs(Yn,{value:"translated",children:[e.jsxs(qn,{className:"text-xs flex items-center text-muted-foreground mb-1",children:[e.jsx(wn,{className:"h-3 w-3 mr-1"}),"Translated Text"]}),e.jsx(Ht,{value:(f==null?void 0:f.translatedText)||"",readOnly:!0,className:"text-sm bg-muted/20 rounded-md p-3 min-h-[120px] max-h-[300px] border border-border/40 resize-none"})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 w-full flex flex-col items-center bg-background/95 py-6 z-50 border-t gap-4",children:[e.jsxs(W,{variant:"outline",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:async()=>{const S=g==="input"?(f==null?void 0:f.inputText)||"":(f==null?void 0:f.translatedText)||"";S&&(await navigator.clipboard.writeText(S),ne.success(`Copied ${g==="input"?"input text":"translated text"}`))},children:[e.jsx(ga,{className:"h-5 w-5 mr-2"}),"Copy ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+C"})]}),f&&e.jsxs(W,{variant:"default",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>o(f),children:[e.jsx(bn,{className:"h-5 w-5 mr-2"}),"Reuse ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Ctrl+V"})]}),f&&e.jsxs(W,{variant:"destructive",size:"lg",className:"w-full max-w-md mx-auto text-base",onClick:()=>{u(!1),c(f.id)},children:[e.jsx(ht,{className:"h-5 w-5 mr-2"}),"Delete ",e.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"Backspace"})]})]})]})})]})]})})]})})]}):null},ji=({mappingTable:t,updateMappingEntry:a,removeMappingEntry:n,addMappingEntry:s,showImportArea:i,toggleImportArea:r,mappingMarkdown:o,setMappingMarkdown:c,revertImport:l,showRevertButton:v,exportMarkdownTable:j,importMarkdownTable:p,error:u})=>e.jsxs("div",{children:[e.jsx("div",{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl flex items-center font-semibold",children:[e.jsx(nr,{className:"h-5 w-5 mr-2 text-primary"}),"Mapping Table"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage term mappings and transcriptions"})]}),e.jsxs(Ze,{variant:"outline",className:"h-6",children:[t==null?void 0:t.length," ",(t==null?void 0:t.length)===1?"Entry":"Entries"]})]})}),e.jsx("div",{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(W,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Add New Term"]})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Add a new term mapping entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{variant:i?"default":"outline",onClick:r,size:"sm",className:"h-9",children:i?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Import or export mapping data as markdown"})})]})}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(W,{variant:"outline",onClick:()=>{c(`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
|:----------- |:------------- |:------------------------- |:------------------ |:------ |
| äº‹æƒ…æ˜¯è¿™æ ·çš„ | Chuyá»‡n lÃ  tháº¿ nÃ y | Phrase | | Opening phrase |
| æœ€è¿‘ | Gáº§n Ä‘Ã¢y | Time | | |
| å¸ˆå…„ | SÆ° huynh | Title/Relationship | Male | Elder martial brother |
| å…¶å®ž | Thá»±c ra | Adverb | | |`),i||r()},size:"sm",className:"h-9",children:[e.jsx(ja,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Load a sample mapping table"})})]})})]})]}),e.jsx("div",{className:me("overflow-hidden transition-all duration-300 ease-in-out",i?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs("div",{className:"border border-dashed rounded-md",children:[e.jsx("div",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("h3",{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[v&&e.jsxs(W,{variant:"destructive",size:"sm",onClick:l,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(En,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(W,{variant:"outline",size:"sm",onClick:j,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(wa,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(W,{variant:"outline",size:"sm",onClick:p,className:"text-xs h-8",children:[e.jsx(pa,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs("div",{className:"py-2 px-4",children:[e.jsx(Ht,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:o,onChange:g=>c(g.target.value)}),u&&u.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(Sn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:u})]})]})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsx("div",{className:"overflow-x-auto max-h-[500px]",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{className:"sticky top-0 z-10 bg-background",children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Term / Name"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Transcription"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Gender"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:(t==null?void 0:t.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(qs,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No terms added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((g,y)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.term,onChange:w=>a(y,"term",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Term or name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.transcription,onChange:w=>a(y,"transcription",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Transcription"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.type,onChange:w=>a(y,"type",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.gender,onChange:w=>a(y,"gender",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Gender"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.notes,onChange:w=>a(y,"notes",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(W,{variant:"destructive",size:"sm",onClick:()=>n(y),className:"w-full h-8",children:[e.jsx(ht,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Delete this mapping entry"})})]})})})]},y))})]})})})]})})]}),Ni=({relationshipsTable:t,updateRelationshipEntry:a,removeRelationshipEntry:n,addRelationshipEntry:s,showImportArea:i,toggleImportArea:r,relationshipsMarkdown:o,setRelationshipsMarkdown:c,revertImport:l,showRevertButton:v,exportMarkdownTable:j,importMarkdownTable:p,error:u})=>e.jsxs("div",{children:[e.jsx("div",{className:"pb-3",children:e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl flex items-center font-semibold",children:[e.jsx(Kn,{className:"h-5 w-5 mr-2 text-primary"}),"Relationships Table"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage character relationships and address terms"})]}),e.jsxs(Ze,{variant:"outline",className:"h-6",children:[t==null?void 0:t.length," ",(t==null?void 0:t.length)===1?"Entry":"Entries"]})]})}),e.jsx("div",{className:"p-4 pb-0",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-2 sm:gap-4",children:[e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(W,{onClick:s,variant:"default",className:"text-sm h-9 px-4 w-full md:w-auto",children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Add New Relationship"]})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Add a new character relationship entry"})})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-end",children:[e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{variant:i?"default":"outline",onClick:r,size:"sm",className:"h-9",children:i?e.jsxs(e.Fragment,{children:[e.jsx(tn,{className:"h-4 w-4 mr-2"}),"Close Import/Export"]}):e.jsxs(e.Fragment,{children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),"Import/Export"]})})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Import or export relationship data as markdown"})})]})}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(W,{variant:"outline",onClick:()=>{c(`| Character A | Character B | Relationship | Address Terms (Aâ†’B) | Address Terms (Bâ†’A) | Notes |
|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
| VÆ°u ThiÃªn Thu | Triá»‡u KhÃ´ng Minh | Adoptive Younger Sister -> Elder Brother | Huynh trÆ°á»Ÿng, SÆ° huynh | NgÆ°Æ¡i | Formal/Respectful |
| LÃ¢m Linh Dao | VÆ°u ThiÃªn Thu | Female Lead 2 -> Female Lead 1 | Dao tá»· tá»·, Muá»™i | ThiÃªn Thu | Relationship strained |`),i||r()},size:"sm",className:"h-9",children:[e.jsx(ja,{className:"h-4 w-4 mr-2"}),"Show Example"]})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Load a sample relationship table"})})]})})]})]}),e.jsx("div",{className:me("overflow-hidden transition-all duration-300 ease-in-out",i?"h-[320px] opacity-100":"h-0 opacity-0"),children:e.jsxs("div",{className:"border border-dashed rounded-md",children:[e.jsx("div",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("h3",{className:"text-base font-medium",children:"Import/Export Markdown"}),e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto",children:[v&&e.jsxs(W,{variant:"destructive",size:"sm",onClick:l,className:"text-xs h-8",title:"Revert to previous state (available for 1 minute)",children:[e.jsx(En,{className:"h-3.5 w-3.5 mr-1.5"}),"Undo Import"]}),e.jsxs(W,{variant:"outline",size:"sm",onClick:j,title:"Update markdown from current table",className:"text-xs h-8",children:[e.jsx(wa,{className:"h-3.5 w-3.5 mr-1.5"}),"Update"]}),e.jsxs(W,{variant:"outline",size:"sm",onClick:p,className:"text-xs h-8",children:[e.jsx(pa,{className:"h-3.5 w-3.5 mr-1.5"}),"Import"]})]})]})}),e.jsxs("div",{className:"py-2 px-4",children:[e.jsx(Ht,{placeholder:"Paste markdown table here...",className:"h-40 w-full text-sm font-mono",value:o,onChange:g=>c(g.target.value)}),u&&u.includes("import")&&e.jsxs("div",{className:"flex items-start mt-2 p-2 rounded-md bg-destructive/10 text-destructive text-sm",children:[e.jsx(Sn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:u})]})]})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsx("div",{className:"overflow-x-auto max-h-[500px]",children:e.jsxs("table",{className:"w-full border-collapse min-w-max",children:[e.jsx("thead",{className:"sticky top-0 z-10 bg-background",children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character A"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Character B"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Relationship"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (Aâ†’B)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Address (Bâ†’A)"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap",children:"Notes"}),e.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium whitespace-nowrap w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{children:(t==null?void 0:t.length)===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center h-24 text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Kn,{className:"h-8 w-8 mb-2 text-muted-foreground/40"}),e.jsx("p",{children:"No relationships added yet"}),e.jsx("p",{className:"text-xs mt-1",children:"Add a new entry to begin"})]})})}):t.map((g,y)=>e.jsxs("tr",{className:"border-b hover:bg-muted/20 transition-colors",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.characterA,onChange:w=>a(y,"characterA",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.characterB,onChange:w=>a(y,"characterB",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Character name"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.relationship,onChange:w=>a(y,"relationship",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Relationship type"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.addressTermsAToB,onChange:w=>a(y,"addressTermsAToB",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How A addresses B"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.addressTermsBToA,onChange:w=>a(y,"addressTermsBToA",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"How B addresses A"})}),e.jsx("td",{className:"py-2 px-2",children:e.jsx(Ye,{value:g.notes,onChange:w=>a(y,"notes",w.target.value),className:"w-full text-sm px-3 py-1 h-8",placeholder:"Additional notes"})}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(W,{variant:"destructive",size:"sm",onClick:()=>n(y),className:"w-full h-8",children:[e.jsx(ht,{className:"h-3.5 w-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline text-xs",children:"Remove"})]})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Delete this relationship entry"})})]})})})]},y))})]})})})]})})]}),Ci=({isVisible:t,settingsPanelRef:a,collections:n,collectionToEdit:s,setCollectionToEdit:i,editedCollectionName:r,setEditedCollectionName:o,addNewCollection:c,useCollection:l,renameCollection:v,requestDeleteCollection:j,showDeleteConfirmation:p,setShowDeleteConfirmation:u,confirmDeleteCollection:g,selectedCollectionId:y,error:w,setError:L,arcrylicBg:f,translationHistory:S,onClearHistory:$,onUseHistoryEntry:E,onRemoveHistoryEntry:A,updateMappingEntry:k,removeMappingEntry:h,addMappingEntry:B,showMappingImportArea:_,toggleMappingImportArea:oe,mappingMarkdown:z,setMappingMarkdown:Y,revertMappingImport:M,showMappingRevertButton:ee,exportMappingMarkdown:J,importMappingMarkdown:ae,updateRelationshipEntry:de,removeRelationshipEntry:fe,addRelationshipEntry:De,showRelationshipImportArea:ge,toggleRelationshipImportArea:ye,relationshipsMarkdown:je,setRelationshipsMarkdown:N,revertRelationshipImport:U,showRelationshipRevertButton:V,exportRelationshipMarkdown:F,importRelationshipMarkdown:O,onApproveUpdate:q,onRejectUpdate:ie})=>{const K=n.find(C=>C.id===s),[ue,we]=P.useState(!1),[re,D]=P.useState(""),$e=P.useRef(null),[Pe,Ee]=P.useState(null),[ve,Ke]=P.useState(""),Be=P.useRef(null),[He,xe]=P.useState(null),[Z,zt]=P.useState("history"),[,lt]=P.useState(!1),_e=P.useRef(null),le=["history","mapping","relationships","updates"],st=P.useRef([]),[vt,bt]=P.useState({left:0,width:0});P.useEffect(()=>{const C=le.indexOf(Z),se=st.current[C];se&&bt({left:se.offsetLeft,width:se.offsetWidth})},[Z]),P.useEffect(()=>()=>{_e.current&&clearTimeout(_e.current)},[]);const At=C=>{if(C===Z)return;_e.current&&(clearTimeout(_e.current),_e.current=null);const se=le.indexOf(Z),We=le.indexOf(C);if(se===-1||We===-1)return;const tt=se<We?1:-1;lt(!0);let Je=se;const H=()=>{Je+=tt,zt(le[Je]),tt>0&&Je<We||tt<0&&Je>We?_e.current=setTimeout(H,150):(lt(!1),_e.current=null)};_e.current=setTimeout(H,150)};T.useEffect(()=>{ue&&$e.current&&$e.current.focus()},[ue]),T.useEffect(()=>{Pe&&Be.current&&Be.current.focus()},[Pe]);const et=()=>{re.trim()?(c(re.trim()),D(""),we(!1)):(we(!1),D(""))},ct=()=>{Pe&&ve.trim()&&(o(ve),i(Pe),v()),Ee(null)};return e.jsx("div",{ref:a,className:me("overflow-hidden transition-all duration-300 ease-in-out",t?"h-auto sm:h-[800px] opacity-100 mb-4 pb-4 border-b border-gray-200 dark:border-gray-700":"h-0 opacity-0 mb-0 pb-0 border-b-0"),tabIndex:-1,children:e.jsxs(Rt,{className:me("h-full w-full bg-white/90 dark:bg-zinc-900/90 shadow-xl rounded-2xl p-0 flex flex-col sm:flex-row border border-gray-100 dark:border-zinc-800 transition-all duration-300 overflow-hidden",f&&"backdrop-blur-md"),children:[e.jsxs("aside",{className:"w-full sm:w-1/3 bg-muted/40 dark:bg-muted/20 p-3 sm:p-4 flex flex-col gap-2 border-b sm:border-b-0 sm:border-r border-gray-200 dark:border-gray-800 min-h-[200px] sm:min-h-[320px] max-h-[220px] sm:max-h-none overflow-x-auto overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(vn,{className:"h-5 w-5 text-primary"}),"Collections"]}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{size:"icon",variant:"outline",onClick:()=>{we(!0),D("")},"aria-label":"Add new collection",children:e.jsx(Rn,{className:"h-5 w-5"})})}),e.jsx(Te,{children:"Add new collection"})]})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto pr-1",children:[ue&&e.jsx("div",{className:"flex items-center gap-2 px-2 py-2 mb-1 rounded-lg bg-muted/30 dark:bg-muted/10",children:e.jsx(Ye,{ref:$e,value:re,onChange:C=>D(C.target.value),onBlur:et,onKeyDown:C=>{C.key==="Enter"?et():C.key==="Escape"&&(we(!1),D(""))},placeholder:"Collection name",className:"flex-1 h-8 text-sm"})}),n.map(C=>e.jsxs("div",{className:me("flex items-center gap-2 px-2 py-2 rounded-lg cursor-pointer group transition-all",C.id===s?"bg-primary/10 dark:bg-primary/20 text-primary":"hover:bg-muted/60 dark:hover:bg-muted/30 text-gray-700 dark:text-gray-200"),onClick:()=>{i(C.id),o(C.name),L(null)},children:[e.jsx(vn,{className:"h-4 w-4 mr-1 text-primary/70"}),Pe===C.id?e.jsx(Ye,{ref:Be,value:r,onChange:se=>o(se.target.value),onBlur:ct,onKeyDown:se=>{se.key==="Enter"?ct():se.key==="Escape"&&Ee(null)},onClick:se=>se.stopPropagation(),className:"flex-1 h-8 text-sm",autoFocus:!0}):e.jsxs("div",{className:"flex flex-1 items-center min-w-0",children:[e.jsx("span",{className:"flex-1 truncate font-medium text-sm sm:text-base",children:C.name}),e.jsx(Zs,{className:"h-4 w-4 ml-2 opacity-0 group-hover:opacity-100 text-gray-500 hover:text-primary transition-opacity cursor-pointer",onClick:se=>{se.stopPropagation(),i(C.id),o(C.name),Ee(C.id),Ke(C.name)}})]}),C.id===y?e.jsx(Zt,{className:"h-4 w-4 text-green-500 ml-1"}):e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{size:"icon",variant:"ghost",onClick:se=>{se.stopPropagation(),l(C.id)},className:"h-6 w-6 opacity-0 group-hover:opacity-100","aria-label":"Use this collection",children:e.jsx(Zt,{className:"h-4 w-4 text-green-500"})})}),e.jsx(Te,{children:"Use this collection"})]})}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{size:"icon",variant:"ghost",onClick:se=>{se.stopPropagation(),j(C.id)},className:"h-6 w-6 opacity-0 group-hover:opacity-100 text-red-500","aria-label":"Delete collection",children:e.jsx(ht,{className:"h-4 w-4"})})}),e.jsx(Te,{children:"Delete collection"})]})}),C.id===s&&Pe!==C.id&&e.jsx("span",{className:"ml-2 text-xs font-semibold",children:"Editing"})]},C.id))]})]}),e.jsx("section",{className:"flex-1 min-w-0 p-3 sm:p-6 flex flex-col h-full",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"relative flex border-b mb-4",children:[le.map((C,se)=>e.jsx("button",{ref:We=>{st.current[se]=We},className:me("px-4 py-2 text-sm font-medium transition-colors relative",C===Z?"text-primary":"text-muted-foreground hover:text-foreground"),onClick:()=>{At(C)},children:C.charAt(0).toUpperCase()+C.slice(1)},C)),e.jsx("div",{className:"absolute bottom-0 h-[2px] bg-primary",style:{left:`${vt.left}px`,width:`${vt.width}px`,transform:"translateY(0)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}})]}),e.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[e.jsx("div",{className:me("absolute inset-0 w-full h-full tab-transition",Z==="history"?"opacity-100 z-10 translate-x-0":"opacity-0 z-0 pointer-events-none",Z!=="history"&&le.indexOf(Z)>le.indexOf("history")&&"translate-x-[-100%]",Z!=="history"&&le.indexOf(Z)<le.indexOf("history")&&"translate-x-[100%]"),children:K&&e.jsx(yi,{show:!0,history:S.filter(C=>C.collectionId===K.id),collections:n,selectedCollectionId:K.id,onSelectCollection:i,onClear:$,onUseAgain:E,arcrylicBg:f,onRemoveEntry:A,hideCollectionSelector:!0})}),e.jsx("div",{className:me("absolute inset-0 w-full h-full tab-transition overflow-auto",Z==="mapping"?"opacity-100 z-10 translate-x-0":"opacity-0 z-0 pointer-events-none",Z!=="mapping"&&le.indexOf(Z)>le.indexOf("mapping")&&"translate-x-[-100%]",Z!=="mapping"&&le.indexOf(Z)<le.indexOf("mapping")&&"translate-x-[100%]"),children:K&&e.jsx(ji,{mappingTable:K.mappingTable,updateMappingEntry:k,removeMappingEntry:h,addMappingEntry:B,showImportArea:_,toggleImportArea:oe,mappingMarkdown:z,setMappingMarkdown:Y,revertImport:M,showRevertButton:ee,exportMarkdownTable:J,importMarkdownTable:ae,error:w,arcrylicBg:f})}),e.jsx("div",{className:me("absolute inset-0 w-full h-full tab-transition overflow-auto",Z==="relationships"?"opacity-100 z-10 translate-x-0":"opacity-0 z-0 pointer-events-none",Z!=="relationships"&&le.indexOf(Z)>le.indexOf("relationships")&&"translate-x-[-100%]",Z!=="relationships"&&le.indexOf(Z)<le.indexOf("relationships")&&"translate-x-[100%]"),children:K&&e.jsx(Ni,{relationshipsTable:K.relationshipsTable,updateRelationshipEntry:de,removeRelationshipEntry:fe,addRelationshipEntry:De,showImportArea:ge,toggleImportArea:ye,relationshipsMarkdown:je,setRelationshipsMarkdown:N,revertImport:U,showRevertButton:V,exportMarkdownTable:F,importMarkdownTable:O,error:w,arcrylicBg:f})}),e.jsx("div",{className:me("absolute inset-0 w-full h-full tab-transition overflow-auto",Z==="updates"?"opacity-100 z-10 translate-x-0":"opacity-0 z-0 pointer-events-none",Z!=="updates"&&le.indexOf(Z)>le.indexOf("updates")&&"translate-x-[-100%]",Z!=="updates"&&le.indexOf(Z)<le.indexOf("updates")&&"translate-x-[100%]"),children:K!=null&&K.tableUpdateHistory&&K.tableUpdateHistory.length>0?e.jsx("div",{className:"space-y-3",children:[...K.tableUpdateHistory].sort((C,se)=>se.timestamp-C.timestamp).map(C=>{var We,tt,Je,H;const se=He===C.id;return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-muted/30 p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:C.type==="mapping"?"Mapping Table":"Relationships Table"}),e.jsx(Ze,{variant:C.status==="pending"?"outline":C.status==="approved"?"secondary":"destructive",className:me("ml-2 text-xs px-1.5",C.status==="pending"&&"bg-amber-100 text-amber-700 hover:bg-amber-100 dark:bg-amber-900/30 dark:text-amber-400 dark:hover:bg-amber-900/30",C.status==="approved"&&"bg-emerald-100 text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-900/30 dark:text-emerald-400 dark:hover:bg-emerald-900/30",C.status==="rejected"&&"bg-red-100 hover:bg-red-100 dark:bg-red-900/30 dark:hover:bg-red-900/30"),children:C.status})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(Tn,{className:"h-3 w-3 mr-1"}),new Date(C.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:()=>xe(se?null:C.id),children:se?e.jsx(ha,{className:"h-4 w-4"}):e.jsx(xa,{className:"h-4 w-4"})}),C.status==="pending"&&e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{variant:"outline",size:"sm",className:"h-8",onClick:()=>xe(se?null:C.id),children:"Review"})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Review and approve/reject changes"})})]})}),(C.status==="approved"||C.status==="rejected")&&e.jsx(W,{variant:"outline",size:"sm",className:"h-8",onClick:G=>{var Q,te;G.stopPropagation(),!(C.status==="rejected"&&!window.confirm("This update was previously rejected. Do you want to reapply it?"))&&(q(C),ne.success(`${C.type==="mapping"?"Mapping":"Relationships"} table update reapplied`,{description:`${((Q=C.updates.added)==null?void 0:Q.length)||0} new entries and ${((te=C.updates.updated)==null?void 0:te.length)||0} updated entries`}))},children:"Reapply"})]})]}),se&&e.jsxs("div",{className:"p-3 space-y-3 bg-background",children:[((We=C.updates.added)==null?void 0:We.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(ba,{className:"h-3.5 w-3.5 mr-1 text-emerald-500"}),"Added Entries"]}),e.jsx(Ze,{variant:"outline",className:"text-xs px-1.5 h-5",children:(tt=C.updates.added)==null?void 0:tt.length})]}),e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:C.updates.added.map((G,Q)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:C.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:G.term}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",G.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:G.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",G.characterB]})]})},Q))})]}),((Je=C.updates.updated)==null?void 0:Je.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(va,{className:"h-3.5 w-3.5 mr-1 text-blue-500"}),"Updated Entries"]}),e.jsx(Ze,{variant:"outline",className:"text-xs px-1.5 h-5",children:(H=C.updates.updated)==null?void 0:H.length})]}),e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:C.updates.updated.map((G,Q)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:C.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:G.term}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",G.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:G.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",G.characterB]})]})},Q))})]}),C.status==="pending"&&e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(W,{variant:"outline",onClick:()=>xe(null),children:"Cancel"}),e.jsx(W,{variant:"destructive",onClick:()=>{ie(C),xe(null)},children:"Reject"}),e.jsx(W,{variant:"default",onClick:()=>{var G,Q;q(C),ne.success(`${C.type==="mapping"?"Mapping":"Relationships"} table update approved`,{description:`${((G=C.updates.added)==null?void 0:G.length)||0} new entries and ${((Q=C.updates.updated)==null?void 0:Q.length)||0} updated entries`}),xe(null)},children:"Approve"})]})]})]},C.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[e.jsx(Zt,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No updates available"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates will appear here when available"})]})})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 px-2",children:e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 sm:p-8 max-w-xs sm:max-w-md w-full mx-2 shadow-2xl border border-gray-200 dark:border-zinc-800 animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold mb-3 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ht,{className:"h-6 w-6 text-destructive"})," Confirm Deletion"]}),e.jsx("p",{className:"mb-2 text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:"Are you sure you want to delete this collection?"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-6",children:"This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3 flex-col sm:flex-row",children:[e.jsx(W,{variant:"outline",onClick:()=>u(!1),className:"min-w-[90px]",children:"Cancel"}),e.jsx(W,{variant:"destructive",onClick:g,className:"min-w-[90px]",children:"Delete"})]})]})})]})})},Si=({showTableUpdates:t,isTableUpdatesAnimating:a,pendingTableUpdates:n,expandedEntries:s,toggleEntryExpansion:i,setShowTableUpdates:r,handleUpdateConfirmation:o,showUpdateConfirmation:c})=>t?e.jsxs(Rt,{className:me("fixed bottom-20 right-6 w-96 max-w-[calc(100vw-3rem)] z-[9998] shadow-lg transition-all duration-300 ease-in-out rounded-xl border-border/40",a?"translate-y-4 opacity-0":"translate-y-0 opacity-100"),children:[e.jsxs(xn,{className:"p-4 pb-2 flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gn,{className:"text-base font-medium",children:"Table Updates"}),e.jsx(Ze,{variant:"outline",className:"ml-2 text-xs",children:n==null?void 0:n.length})]}),e.jsx(W,{variant:"ghost",size:"icon",onClick:()=>r(!1),className:"h-8 w-8 rounded-full",children:e.jsx(tn,{className:"h-4 w-4"})})]}),e.jsx(bs,{className:"p-3",children:e.jsx(Ot,{className:"max-h-[60vh] pr-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-3",children:(n==null?void 0:n.length)>0?n.map(l=>{var v,j,p,u;return e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-muted/30 p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:l.type==="mapping"?"Mapping Table":"Relationships Table"}),e.jsx(Ze,{variant:l.status==="pending"?"outline":l.status==="approved"?"secondary":"destructive",className:"ml-2 text-xs px-1.5",children:l.status})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(Tn,{className:"h-3 w-3 mr-1"}),new Date(l.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 rounded-full",onClick:()=>i(l.id),children:s.has(l.id)?e.jsx(ha,{className:"h-4 w-4"}):e.jsx(xa,{className:"h-4 w-4"})}),e.jsx(ze,{children:e.jsxs(Ce,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(W,{variant:"outline",size:"sm",className:"h-8",onClick:()=>c(l),children:"Review"})}),e.jsx(Te,{children:e.jsx("p",{className:"text-xs",children:"Review and approve/reject changes"})})]})})]})]}),s.has(l.id)&&e.jsxs("div",{className:"p-3 space-y-3 bg-background",children:[((v=l.updates.added)==null?void 0:v.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(ba,{className:"h-3.5 w-3.5 mr-1 text-emerald-500"}),"Added Entries"]}),e.jsx(Ze,{variant:"outline",className:"text-xs px-1.5 h-5",children:(j=l.updates.added)==null?void 0:j.length})]}),e.jsx(Ot,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:l.updates.added.map((g,y)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:l.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:g.term}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",g.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:g.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",g.characterB]})]})},y))})})]}),((p=l.updates.updated)==null?void 0:p.length)>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium flex items-center",children:[e.jsx(va,{className:"h-3.5 w-3.5 mr-1 text-blue-500"}),"Updated Entries"]}),e.jsx(Ze,{variant:"outline",className:"text-xs px-1.5 h-5",children:(u=l.updates.updated)==null?void 0:u.length})]}),e.jsx(Ot,{className:"h-[120px]",children:e.jsx("div",{className:"bg-muted/30 rounded-md p-2.5",children:l.updates.updated.map((g,y)=>e.jsx("div",{className:"text-xs py-1.5 px-2 rounded mb-1 hover:bg-accent/50 transition-colors",children:l.type==="mapping"?e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:g.term}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",g.transcription]})]}):e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:g.characterA}),e.jsxs("span",{className:"text-muted-foreground",children:["â†’ ",g.characterB]})]})},y))})})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx(W,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>o(l,!1),children:"Reject"}),e.jsx(W,{variant:"default",size:"sm",className:"h-7 text-xs",onClick:()=>o(l,!0),children:"Approve"})]})]})]},l.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center",children:[e.jsx(Ls,{className:"h-8 w-8 text-muted-foreground/40 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending updates"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates will appear here when available"})]})})})})]}):null,Ti=t=>!t||typeof t!="object"?(console.warn("Invalid mapping entry:",t),null):{term:String(t.term||""),transcription:String(t.transcription||""),type:String(t.type||""),gender:String(t.gender||""),notes:String(t.notes||"")},Ei=t=>!t||typeof t!="object"?(console.warn("Invalid relationship entry:",t),null):{characterA:String(t.characterA||""),characterB:String(t.characterB||""),relationship:String(t.relationship||""),addressTermsAToB:String(t.addressTermsAToB||""),addressTermsBToA:String(t.addressTermsBToA||""),notes:String(t.notes||"")},ma=(t,a,n,s)=>{if(!Array.isArray(a))return console.error("Invalid entries format:",a),{newTable:t,updatedCount:0,added:[],updated:[]};const i=[...t];let r=0;const o=[],c=[];return a.forEach(l=>{const v=n(l);if(v){const j=s(i,v);j>=0?(i[j]=v,c.push(v)):(i.push(v),o.push(v)),r++}}),{newTable:i,updatedCount:r,added:o,updated:c}},Ui=()=>{const t=vs(),[a,n]=P.useState(""),[s,i]=P.useState(""),[r,o]=P.useState(!1),[c,l]=P.useState(null),[v,j]=P.useState(!1),[p,u]=P.useState([]),[,g]=P.useState(!1),[,y]=P.useState(!0),[w,L]=P.useState("gemini-2.0-flash-exp"),f=["gemini-2.0-flash-exp","gemini-2.0-flash-exp-image-generation","gemini-2.0-flash-thinking-exp-01-21","gemini-2.5-pro-exp-03-25"],S={"gemini-2.0-flash-exp":"Recommended","gemini-2.0-flash-exp-image-generation":"Image Generation","gemini-2.0-flash-thinking-exp-01-21":"No support for function calling","gemini-2.5-pro-exp-03-25":"Pro but Stupid (Super slow)"},[$,E]=P.useState(null),[A,k]=P.useState([]),[h,B]=P.useState(""),[_,oe]=P.useState(!1),[z,Y]=P.useState(""),[M,ee]=P.useState(""),[J,ae]=P.useState(""),[de,fe]=P.useState(!1),[De]=P.useState("mapping"),[ge,ye]=P.useState([]),[je,N]=P.useState([]),[U,V]=P.useState(""),[F,O]=P.useState(""),[q,ie]=P.useState(!1),[K,ue]=P.useState([]),[we,re]=P.useState([]),[D,$e]=P.useState(!1),[Pe,Ee]=P.useState(!1),[ve,Ke]=P.useState([]),[Be,He]=P.useState(!1),[xe,Z]=P.useState(null),[zt,lt]=P.useState(!1),_e=T.useRef(null),le=P.useRef(null),[st,vt]=P.useState(new Set),bt=d=>{vt(x=>{const m=new Set(x);return m.has(d)?m.delete(d):m.add(d),m})},At=()=>{n("")},et=()=>{n(""),i(""),l(null),ne.info("Text cleared")},ct=()=>{navigator.clipboard.writeText(s),j(!0),ne.success("Copied to clipboard"),setTimeout(()=>j(!1),2e3)},C=d=>{l(d)},se=d=>{Z(d),He(!!d)},We=d=>{const x=!_;if(oe(x),x){const m=A.find(b=>b.id===d);m&&(Y(d),ee(m.name))}},tt=()=>{if(!z||!M.trim())return;const d=A.map(x=>x.id===z?{...x,name:M.trim()}:x);k(d),Re("translationCollections",d),ne.success(`Collection renamed to "${M}"`)},Je=d=>{console.log("Delete confirmation requested for collection:",d),ae(d),setTimeout(()=>{fe(!0),console.log("showDeleteConfirmation set to true")},0)},H=()=>{if(console.log("Confirming deletion of collection:",J),!!J)try{ls(J),fe(!1),ae("")}catch(d){console.error("Error deleting collection:",d),ne.error("Failed to delete collection")}},G=d=>{ln(d)},Q=async()=>{if(!a.trim()){ne.error("Please enter text to translate"),l("Please enter text to translate");return}on(),o(!0),l(null),ne.promise(async()=>{try{const d=dt(ge,!0),x=dt(je,!1),m=await js(a,d,x,$||"default-key",w,{onMappingTableUpdate:b=>{console.log("Received entries mapping table:",b);try{const{updatedCount:R,added:I,updated:ce}=ma(ge,b,Ti,(Me,Ue)=>Me.findIndex(ut=>ut.term===Ue.term));R>0&&On("mapping",I,ce)}catch(R){console.error("Error updating mapping table:",R),ne.error("Failed to update mapping table")}},onRelationshipsTableUpdate:b=>{console.log("Received entries relationships table:",b);try{const{updatedCount:R,added:I,updated:ce}=ma(je,b,Ei,(Me,Ue)=>Me.findIndex(ut=>ut.characterA===Ue.characterA&&ut.characterB===Ue.characterB));R>0&&On("relationships",I,ce)}catch(R){console.error("Error updating relationships table:",R),ne.error("Failed to update relationships table")}}});if(m.hasError)throw l(m.thinking||"Translation failed. Please try again."),new Error(m.thinking||"Translation failed");{const b=m.ocrText||"";return i(b),await pe(b),b}}catch(d){throw console.error("Translation error:",d),l("An error occurred during translation. Please try again."),d}finally{o(!1)}},{loading:"Translating text...",success:"Translation completed successfully",error:d=>`Translation failed: ${d instanceof Error?d.message:"Unknown error"}`})},te=async()=>{u([]),await Re("translationHistory",[]),ne.success("Translation history cleared")},pe=async d=>{const x=A.find(R=>R.id===h);if(!x)return;const b=[{id:Date.now().toString(),timestamp:Date.now(),inputText:a,translatedText:d,model:w,collectionId:h,collectionName:x.name},...p].slice(0,50);u(b),await Re("translationHistory",b)},Le=d=>{n(d.inputText),i(""),L(d.model),ln(d.collectionId),g(!1),ne.info("Previous translation loaded")},Ie=async d=>{const x=p.filter(m=>m.id!==d);u(x),await Re("translationHistory",x)},nt=async(d,x,m)=>{if(!z)return;const b=A.map(R=>{if(R.id===z){const I=R.mappingTable.map((ce,Me)=>Me===d?{...ce,[x]:m}:ce);return{...R,mappingTable:I}}return R});k(b),await Re("translationCollections",b),h===z&&ye(b.find(R=>R.id===z).mappingTable)},qe=async d=>{if(!z)return;const x=A.map(m=>{if(m.id===z){const b=m.mappingTable.filter((R,I)=>I!==d);return{...m,mappingTable:b}}return m});k(x),await Re("translationCollections",x),h===z&&ye(x.find(m=>m.id===z).mappingTable)},rt=async()=>{if(!z)return;const d={term:"",transcription:"",type:"",gender:"",notes:""},x=A.map(m=>m.id===z?{...m,mappingTable:[...m.mappingTable,d]}:m);k(x),await Re("translationCollections",x),h===z&&ye(x.find(m=>m.id===z).mappingTable)},at=async(d,x,m)=>{if(!z)return;const b=A.map(R=>{if(R.id===z){const I=R.relationshipsTable.map((ce,Me)=>Me===d?{...ce,[x]:m}:ce);return{...R,relationshipsTable:I}}return R});k(b),await Re("translationCollections",b),h===z&&N(b.find(R=>R.id===z).relationshipsTable)},Xe=async d=>{if(!z)return;const x=A.map(m=>{if(m.id===z){const b=m.relationshipsTable.filter((R,I)=>I!==d);return{...m,relationshipsTable:b}}return m});k(x),await Re("translationCollections",x),h===z&&N(x.find(m=>m.id===z).relationshipsTable)},yt=async()=>{if(!z)return;const d={characterA:"",characterB:"",relationship:"",addressTermsAToB:"",addressTermsBToA:"",notes:""},x=A.map(m=>m.id===z?{...m,relationshipsTable:[...m.relationshipsTable,d]}:m);k(x),await Re("translationCollections",x),h===z&&N(x.find(m=>m.id===z).relationshipsTable)},Vt=async d=>{try{if(d.type==="mapping"){const x=[...ge];d.updates.added.forEach(m=>x.push(m)),d.updates.updated.forEach(m=>{const b=x.findIndex(R=>R.term===m.term);b>=0&&(x[b]=m)}),ye(x),await Pt(!0,x)}else{const x=[...je];d.updates.added.forEach(m=>x.push(m)),d.updates.updated.forEach(m=>{const b=x.findIndex(R=>R.characterA===m.characterA&&R.characterB===m.characterB);b>=0&&(x[b]=m)}),N(x),await Pt(!1,x)}if(d.status==="rejected"){const x=A.map(m=>{var b;if(m.id===h){const R=((b=m.tableUpdateHistory)==null?void 0:b.map(I=>I.id===d.id?{...I,status:"approved"}:I))||[];return{...m,tableUpdateHistory:R}}return m});k(x),await Re("translationCollections",x)}}catch(x){console.error("Error reapplying update:",x),ne.error("Failed to reapply update")}},as=()=>{if(console.log("Scrolling to top attempt"),_e.current){_e.current.scrollIntoView({behavior:"smooth"}),console.log("Used scrollIntoView");return}try{window.scroll({top:0,left:0,behavior:"smooth"}),console.log("Used window.scroll")}catch{window.scrollTo(0,0),console.log("Used fallback scrollTo")}},ss=async d=>{L(d),await Re("translateModel",d)};P.useEffect(()=>{(async()=>{var x;try{const m=await qt("apiKey"),b=await qt("translateModel"),R=await qt("translationCollections"),I=await qt("translationHistory");if(m&&E(m),b&&L(b),I&&u(I),R&&(R==null?void 0:R.length)>0){k(R),B(R[0].id),ye(R[0].mappingTable),N(R[0].relationshipsTable);const ce=((x=R[0].tableUpdateHistory)==null?void 0:x.filter(Me=>Me.status==="pending"))||[];Ke(ce),ce.length>0&&Ee(!0)}else{const ce={id:Date.now().toString(),name:"Default Collection",mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]};k([ce]),B(ce.id)}}catch(m){console.error("Error loading settings:",m)}})()},[]),P.useEffect(()=>{h&&!z&&Y(h)},[h,z]),P.useEffect(()=>{const d=()=>{window.scrollY>200?y(!0):y(!1)};return window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[]),P.useEffect(()=>{_&&le.current&&setTimeout(()=>{var d;if((d=le.current)==null||d.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),le.current){const m=le.current.getBoundingClientRect().top+window.pageYOffset+-50;window.scrollTo({top:m,behavior:"smooth"})}},250)},[_]),P.useEffect(()=>{if(z){const d=A.find(x=>x.id===z);d&&ee(d.name)}},[z,A]);const rs=(d,x)=>{try{const m=d.trim().split(`
`);if((m==null?void 0:m.length)<3)return[];const b=m.slice(2);return x?b.map(R=>{const I=R.split("|").filter((ce,Me,Ue)=>Me!==0&&Me!==(Ue==null?void 0:Ue.length)-1||ce.trim()!=="").map(ce=>ce.trim());if((I==null?void 0:I.length)<5)for(console.warn("Row has fewer than expected columns:",R);(I==null?void 0:I.length)<5;)I.push("");return{term:I[0]||"",transcription:I[1]||"",type:I[2]||"",gender:I[3]||"",notes:I[4]||""}}):b.map(R=>{const I=R.split("|").filter((ce,Me,Ue)=>Me!==0&&Me!==(Ue==null?void 0:Ue.length)-1||ce.trim()!=="").map(ce=>ce.trim());if((I==null?void 0:I.length)<6)for(console.warn("Row has fewer than expected columns:",R);(I==null?void 0:I.length)<6;)I.push("");return{characterA:I[0]||"",characterB:I[1]||"",relationship:I[2]||"",addressTermsAToB:I[3]||"",addressTermsBToA:I[4]||"",notes:I[5]||""}})}catch(m){return console.error("Error parsing markdown table:",m),[]}},dt=(d,x)=>{if((d==null?void 0:d.length)===0)return"";let m="";return x?(m=`| Term / Name | Transcription | Type (Person/Place/Other) | Gender (if person) | Notes |
`,m+=`|:----------- |:------------- |:------------------------- |:------------------ |:------ |
`,d.forEach(b=>{m+=`| ${b.term} | ${b.transcription} | ${b.type} | ${b.gender} | ${b.notes} |
`})):(m=`| Character A | Character B | Relationship | Address Terms (Aâ†’B) | Address Terms (Bâ†’A) | Notes |
`,m+=`|:----------- |:----------- |:------------ |:------------------- |:------------------- |:----- |
`,d.forEach(b=>{m+=`| ${b.characterA} | ${b.characterB} | ${b.relationship} | ${b.addressTermsAToB} | ${b.addressTermsBToA} | ${b.notes} |
`})),m},Mn=(d,x)=>{try{if(!d.trim()){ne.error("Please enter a markdown table to import"),l("Please enter a markdown table to import");return}if(!d.includes("|")){ne.error("Invalid table format. Table must contain pipe characters (|)"),l("Import failed: Invalid table format. Table must contain pipe characters (|)");return}const m=d.trim().split(`
`);if((m==null?void 0:m.length)<3){ne.error("Table must contain at least 3 lines (header, separator, and data row)"),l("Import failed: Table must contain at least 3 lines (header, separator, and data row)");return}const b=m[1];if(!b.includes("|")||!b.includes("-")){ne.error("Second line must be a separator with pipes (|) and dashes (-)"),l("Import failed: Second line must be a separator with pipes (|) and dashes (-)");return}const R=rs(d,x);if((R==null?void 0:R.length)===0){ne.error("No valid data rows found in the table"),l("Import failed: No valid data rows found in the table");return}l(null),x?(ue(ge),ye(R)):(re(je),N(R)),Pt(x,R),$e(!0),setTimeout(()=>{$e(!1)},6e4),ne.success(`${x?"Mapping":"Relationships"} table imported successfully`)}catch(m){console.error("Error importing markdown table:",m),ne.error(`Import failed: ${m instanceof Error?m.message:"Unknown error"}`),l(`Import failed: ${m instanceof Error?m.message:"Unknown error"}`)}},Dn=d=>{d?(ye(K),Pt(!0,K),ue([])):(N(we),Pt(!1,we),re([])),$e(!1),ne.success(`${d?"Mapping":"Relationships"} table reverted to previous state`)},Pt=async(d,x)=>{if(!h)return;const m=A.map(b=>b.id===h?{...b,mappingTable:d?x:b.mappingTable,relationshipsTable:d?b.relationshipsTable:x}:b);k(m),await Re("translationCollections",m)},$n=d=>{const x=dt(d?ge:je,d);d?V(x):O(x)},ln=d=>{var m;if(d===h)return;on();const x=A.find(b=>b.id===d);if(x){B(d),ye(x.mappingTable),N(x.relationshipsTable);const b=((m=x.tableUpdateHistory)==null?void 0:m.filter(R=>R.status==="pending"))||[];Ke(b),Ee(b.length>0)}},on=()=>{if(!h)return;const d=A.map(x=>x.id===h?{...x,mappingTable:ge,relationshipsTable:je}:x);k(d),Re("translationCollections",d)},is=d=>{if(!d.trim()){ne.error("Please enter a name for the new collection"),l("Please enter a name for the new collection");return}on();const x={id:Date.now().toString(),name:d,mappingTable:[],relationshipsTable:[],tableUpdateHistory:[]},m=[...A,x];k(m),B(x.id),ye([]),N([]),Re("translationCollections",m),ne.success(`Collection "${d}" created`)},ls=d=>{if((A==null?void 0:A.length)<=1){ne.error("You must have at least one collection"),l("You must have at least one collection");return}const x=A.find(b=>b.id===d);if(!x)return;const m=A.filter(b=>b.id!==d);if(d===h&&(m==null?void 0:m.length)>0){const b=m[0];B(b.id),ye(b.mappingTable),N(b.relationshipsTable)}k(m),Re("translationCollections",m).then(()=>{ne.success(`Collection "${x.name}" deleted`)}).catch(b=>{console.error("Failed to save collections after deletion:",b),ne.error("Failed to delete collection")}),d===z&&(Y(""),ee(""))},Ln=()=>{ie(!q),q||(De==="mapping"?V(dt(ge,!0)):O(dt(je,!1)))},On=(d,x,m)=>{console.log("handleTableUpdate called with type:",d,"added:",x,"updated:",m);const b={id:crypto.randomUUID(),timestamp:Date.now(),type:d,updates:{added:x,updated:m},status:"pending"};Ke(I=>[...I,b]),Ee(!0),lt(!0),setTimeout(()=>lt(!1),300);const R=A.map(I=>I.id===h?(I.tableUpdateHistory.push(b),{...I,tableUpdateHistory:I.tableUpdateHistory}):I);k(R),Re("translationCollections",R).catch(I=>{console.error("Error saving pending update to database:",I),ne.error("Failed to save pending update to database")}),ne.info("New table update available for review",{description:`${x==null?void 0:x.length} new entries and ${m==null?void 0:m.length} updated entries`,action:{label:"Review",onClick:()=>Ee(!0)}})},cn=async(d,x)=>{if(!h){console.error("handleUpdateConfirmation error: No collection selected."),ne.error("Error: No collection selected to apply updates.");return}const m=A.findIndex(be=>be.id===h);if(m===-1){console.error(`handleUpdateConfirmation error: Collection with ID ${h} not found.`),ne.error("Error: Selected collection could not be found."),He(!1),Z(null);return}const b=A[m];let R=b.mappingTable||[],I=b.relationshipsTable||[];if(x)if(d.type==="mapping"){let be=[...R];d.updates.added.forEach(Oe=>be.push(Oe)),d.updates.updated.forEach(Oe=>{const mt=be.findIndex(Wt=>Wt.term===Oe.term);mt>=0?be[mt]=Oe:console.warn(`Mapping term "${Oe.term}" marked for update not found in current table.`)}),R=be}else{let be=[...I];d.updates.added.forEach(Oe=>be.push(Oe)),d.updates.updated.forEach(Oe=>{const mt=be.findIndex(Wt=>Wt.characterA===Oe.characterA&&Wt.characterB===Oe.characterB);mt>=0?be[mt]=Oe:console.warn(`Relationship between "${Oe.characterA}" and "${Oe.characterB}" marked for update not found.`)}),I=be}const ce={...d,status:x?"approved":"rejected"},Me=(b.tableUpdateHistory||[]).map(be=>be.id===d.id?ce:be),Ue={...b,tableUpdateHistory:Me,mappingTable:x&&d.type==="mapping"?R:b.mappingTable,relationshipsTable:x&&d.type==="relationships"?I:b.relationshipsTable},ut=A.map(be=>be.id===h?Ue:be);try{k(ut),await Re("translationCollections",ut),Ke(be=>{const Oe=be.filter(mt=>mt.id!==d.id);return Oe.length===0&&Ee(!1),Oe}),He(!1),Z(null),ne.success(`Table update ${x?"approved":"rejected"} successfully.`)}catch(be){console.error("Error saving update confirmation:",be),ne.error(`Failed to ${x?"approve":"reject"} update. Database save failed. Please try again.`)}};P.useEffect(()=>{if((A==null?void 0:A.length)===0){B(""),ye([]),N([]);return}A.find(x=>x.id===h)||(B(A[0].id),ye(A[0].mappingTable),N(A[0].relationshipsTable))},[A,h]);const os=()=>{const d=dt(ge,!0),x=dt(je,!1);return`
# TRANSLATE: Original Language to Vietnamese with Professional Accuracy

Translate the original language text into Vietnamese with complete accuracy and cultural nuance by following these comprehensive guidelines:

---

### ðŸ”¹ DELIVER precise translations that:

- CAPTURE every single word, preserving the **exact meaning, tone, and nuance** of the original
- MAINTAIN **stylistic fidelity**, including:
  - Formality level (trang trá»ng, suá»“ng sÃ£, thÃ¢n máº­tâ€¦)
  - Emotional undertones
  - Cultural or historical references
- ENSURE **pronoun consistency** throughout (e.g. ta, ngÆ°Æ¡i, ngÆ°á»i, háº¯n, nÃ ng, muá»™i, chÃ ng) as appropriate to character and context
- RESPECT the original **sentence structure**, but rewrite for **natural Vietnamese flow** where necessary without losing meaning

---

### ðŸ”¹ ENSURE emotional and stylistic authenticity:

- MATCH the original **emotional intensity** â€” never exaggerate or understate the mood
- REPLICATE the tone precisely â€” formal stays formal, casual stays casual
- PRESERVE **character-specific speech styles**, such as unique patterns, dialects, or quirks

---

### ðŸ”¹ HANDLE names, terms, and references as follows:

- USE **Sino-Vietnamese phonetic transcription** for common historical/cultural nouns if appropriate
- RETAIN **established translations** for character and place names
- PREFER **English equivalents** for Western mythological or biblical references
- DO NOT localize or adapt terms unless required for clarity

---

### ðŸ”¹ MAINTAIN contextual and narrative integrity:

- TRANSLATE with attention to the **broader context** â€” ensure meaning carries across lines and paragraphs
- PRESERVE **subtext and implication**, without adding interpretation or explanation
- DO NOT omit, simplify, or condense the content â€” translate **everything** as faithfully as possible
- SPLIT long or complex Chinese sentences into manageable Vietnamese ones **without altering their meaning**

---

### ðŸ”¹ RELATIONSHIPS & ADDRESS TERMS:

- PRESERVE exact **modes of address** between characters:  
  (e.g. huynh â€“ muá»™i, ngÆ°Æ¡i â€“ ta, nÃ ng â€“ thiáº¿p, ca â€“ Ä‘á»‡â€¦)
- DISTINGUISH between:
  - **Dialogue speech**
  - **Narration by a character**
  - **Character's internal thoughts**
- ADAPT address and tone appropriately to **each narrative layer** (dialogue, monologue, narration)

---

### ðŸ”¹ QUALITY CONTROL CHECKLIST:

- âœ… No omissions â€“ every word is translated
- âœ… No stylistic deviation from original
- âœ… Emotional tone precisely mirrored
- âœ… Consistent vocabulary, names, and pronouns
- âœ… Cultural authenticity maintained

---

## Current Tables:

1. **TERM MAPPING TABLE**:
${d||"No mapping table provided."}

2. **RELATIONSHIPS & ADDRESS TERMS TABLE**:
${x||"No relationships table provided."}

TEXT TO TRANSLATE:
${a}

---

## ðŸ”¹ BEFORE TRANSLATION â€“ TRY TO DEFINE THE CONTEXT:

Before beginning the translation:

1. **CONTEXT AND REFERENCE INFORMATION**:  
   
   - Summary of the story or scene  
   - World background if relevant (historical, fantasy, modernâ€¦)

2. **ADDRESS RELATIONSHIPS**:  
   
   - Character names, their **genders**, and **relationships** with each other  
   - Specific **ways characters address each other** in:  
     - Dialogue  
     - Narration  
     - Inner thoughts

3. **STYLE & TONE OF NARRATOR**:  
   
   - E.g. omniscient formal narrator, or a character's personal internal monologue  

---

ðŸ”¹ AFTER TRANSLATION â€“ CALL FUNCTION TO UPDATE TABLES:
`},cs=()=>{const d=os();navigator.clipboard.writeText(d),ne.success("Full translation prompt copied to clipboard")};return e.jsxs("div",{className:"container mx-auto p-4 flex flex-col gap-6 pb-10 relative",children:[e.jsx("div",{ref:_e,className:"absolute top-0"}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Text Translator"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(W,{variant:"outline",onClick:cs,"aria-label":"Copy full prompt",className:"hidden md:flex",children:[e.jsx(ga,{className:"h-5 w-5 mr-2"}),"Copy Prompt"]}),e.jsxs(W,{variant:"outline",onClick:et,"aria-label":"Clear all text",children:[e.jsx(Fs,{className:"h-5 w-5 mr-2"}),"Clear"]})]})]}),e.jsx(or,{inputText:a,setInputText:n,translatedText:s,isTranslating:r,error:c,isCopied:v,onTranslate:Q,onCopy:ct,selectedModel:w,onModelChange:ss,models:f,selectedCollectionId:h,collections:A,onCollectionChange:ln,isCollectionManagementVisible:_,onToggleCollectionManagement:We,arcrylicBg:t,modelDescriptions:S,clearInputText:At,setErrorMessage:C}),e.jsx(Ci,{isVisible:_,settingsPanelRef:le,collections:A,collectionToEdit:z,setCollectionToEdit:Y,editedCollectionName:M,setEditedCollectionName:ee,addNewCollection:is,useCollection:G,renameCollection:tt,requestDeleteCollection:Je,showDeleteConfirmation:de,setShowDeleteConfirmation:fe,confirmDeleteCollection:H,selectedCollectionId:h,error:c,setError:l,arcrylicBg:t,translationHistory:p,onClearHistory:te,onUseHistoryEntry:Le,onRemoveHistoryEntry:Ie,updateMappingEntry:nt,removeMappingEntry:qe,addMappingEntry:rt,showMappingImportArea:q,toggleMappingImportArea:Ln,mappingMarkdown:U,setMappingMarkdown:V,revertMappingImport:()=>Dn(!0),showMappingRevertButton:D,exportMappingMarkdown:()=>$n(!0),importMappingMarkdown:()=>Mn(U,!0),updateRelationshipEntry:at,removeRelationshipEntry:Xe,addRelationshipEntry:yt,showRelationshipImportArea:q,toggleRelationshipImportArea:Ln,relationshipsMarkdown:F,setRelationshipsMarkdown:O,revertRelationshipImport:()=>Dn(!1),showRelationshipRevertButton:D,exportRelationshipMarkdown:()=>$n(!1),importRelationshipMarkdown:()=>Mn(F,!1),onApproveUpdate:Vt,onRejectUpdate:d=>{const x=A.map(m=>{var b;if(m.id===h){const R=((b=m.tableUpdateHistory)==null?void 0:b.map(I=>I.id===d.id?{...I,status:"rejected"}:I))||[];return{...m,tableUpdateHistory:R}}return m});k(x),Re("translationCollections",x),Ke(m=>m.filter(b=>b.id!==d.id)),ne.success("Table update rejected successfully")}}),e.jsx(W,{variant:"default",size:"lg",className:"fixed bottom-6 right-6 rounded-full shadow-lg hover:shadow-xl z-[9999] w-12 h-12 p-0",onClick:()=>{console.log("Button clicked"),as()},"aria-label":"Scroll to top",children:e.jsx(En,{className:"h-6 w-6"})}),Pe&&e.jsx(Si,{showTableUpdates:Pe,isTableUpdatesAnimating:zt,arcrylicBg:t,pendingTableUpdates:ve,expandedEntries:st,toggleEntryExpansion:bt,setShowTableUpdates:Ee,handleUpdateConfirmation:cn,showUpdateConfirmation:se}),Be&&xe&&e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:e.jsx(Rt,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Confirm Table Update"}),e.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{He(!1),Z(null)},className:"h-8 w-8 p-0",children:e.jsx(tn,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Added Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:xe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:xe.updates.added.map((d,x)=>e.jsx("tr",{className:"border-t",children:xe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:d.term}),e.jsx("td",{className:"p-2",children:d.transcription}),e.jsx("td",{className:"p-2",children:d.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:d.characterA}),e.jsx("td",{className:"p-2",children:d.characterB}),e.jsx("td",{className:"p-2",children:d.relationship})]})},x))})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Updated Entries"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:xe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Term"}),e.jsx("th",{className:"p-2 text-left",children:"Transcription"}),e.jsx("th",{className:"p-2 text-left",children:"Type"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"p-2 text-left",children:"Character A"}),e.jsx("th",{className:"p-2 text-left",children:"Character B"}),e.jsx("th",{className:"p-2 text-left",children:"Relationship"})]})})}),e.jsx("tbody",{children:xe.updates.updated.map((d,x)=>e.jsx("tr",{className:"border-t",children:xe.type==="mapping"?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:d.term}),e.jsx("td",{className:"p-2",children:d.transcription}),e.jsx("td",{className:"p-2",children:d.type})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:d.characterA}),e.jsx("td",{className:"p-2",children:d.characterB}),e.jsx("td",{className:"p-2",children:d.relationship})]})},x))})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(W,{variant:"outline",onClick:()=>{xe&&cn(xe,!1)},children:"Reject"}),e.jsx(W,{variant:"default",onClick:()=>{xe&&cn(xe,!0)},children:"Approve"})]})]})]})})})]})};export{Ui as default};
